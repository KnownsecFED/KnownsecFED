webpackJsonp([0x68795a290e45],{530:function(n,a){n.exports={data:{site:{siteMetadata:{title:"KnownsecFED",author:"304 Team",siteUrl:"https://knownsec-fed.com"}},markdownRemark:{id:"/tmp/app/src/pages/2018-01-21-electron-with-react/index.md absPath of file >>> MarkdownRemark",html:'<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/header-262428f3d8338fc8e5f1713081dab50b-d6978.jpeg"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABEElEQVQoz61R21KDMBDtF5UkkESBhIstLciMOq0w7YMv+v+/sO4uNFJfqjN9OJPsyclezq4ilcE9sbolWCNEUvwzYZwHIskbWMtZgPzjUw/N6Quy3Rsnv/DSlBChTpqKz0XCPBAidqBsHWL3PIDrBkibV7yP4Nrj1DW9oza6nPRXOS44d0hkzpCmAFN0LPb9COkWk3Xv4PoBknQzdWVL/qNsxX9E7LFIuvRwqiJ1OVWfO6wPH5C3B8QRNuMnlC9nfrNV/zNV4q8su7kU9VDz6GIe7U9L0W7HSLItaL8H4/YcG98yR4uyaENMd9JiTO8xWkB6jfqrkaUuAsiXEOMmCdTlkiMNjSq0Z8+J++Xh/fANUfJJbyJ1gIsAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"\n        alt="Header"\n        title=""\n        src="/static/header-262428f3d8338fc8e5f1713081dab50b-d6978.jpeg"\n        srcset="/static/header-262428f3d8338fc8e5f1713081dab50b-527f0.jpeg 300w,\n/static/header-262428f3d8338fc8e5f1713081dab50b-9a7cd.jpeg 600w,\n/static/header-262428f3d8338fc8e5f1713081dab50b-d6978.jpeg 1200w"\n        sizes="(max-width: 1200px) 100vw, 1200px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>​当你冲这个标题点进来的时候，我猜你一定知道 React 是什么，更多详情请<a href="https://reactjs.org/">戳这里</a>，就不介绍React了，一个神般存在的前端框架。另外，浏览器和移动端横行的时代，为什么还需要桌面应用？我就不解释了，反正优点很多，做为技术多学一点总没错。</p>\n<h2>Electron 简单介绍</h2>\n<h3>是什么?</h3>\n<p><strong><a href="https://electronjs.org/docs/tutorial/about">官网</a>是这么介绍的：</strong></p>\n<p>  <a href="https://electronjs.org/">Electron</a> is an open source library developed by GitHub for building cross-platform desktop applications with HTML, CSS, and JavaScript. Electron accomplishes this by combining <a href="https://www.chromium.org/Home">Chromium</a> and <a href="https://nodejs.org/">Node.js</a> into a single runtime and apps can be packaged for Mac, Windows, and Linux.</p>\n<p><strong>简单翻译一下就是：</strong></p>\n<p>  ​<a href="https://electron.atom.io/">Electron</a> 是一个由 GitHub 开发的开源库，通过将 <a href="https://www.chromium.org/Home">Chromium</a>) 和<a href="https://nodejs.org/">Node.js</a> 组合并使用 HTML，CSS 和 JavaScript 进行构建 Mac，Windows，和 Linux 跨平台桌面应用程序。    </p>\n<p><strong>隐藏意思：</strong></p>\n<p>  让前端开发者快乐简单拥抱桌面应用！</p>\n<h3><strong>原理是?</strong></h3>\n<p>   上面已将说了，<a href="https://electron.atom.io/">Electron</a> 通过将 <a href="https://www.chromium.org/Home">Chromium</a> 和 <a href="https://nodejs.org/">Node.js</a> 组合到单个 runtime 中来实现的。</p>\n<p><strong>node.js:</strong></p>\n<p>  如果你不知道 node.js，那还等什么快<a href="https://nodejs.org/en/">戳这里</a>，看一看世界上最温柔可爱的语言。它借助于 Google 的 V8 引擎，<strong>Node.js</strong> 是一个能够在服务器端运行 JavaScript 的开放源代码、跨平台 JavaScript 运行环境，更多解释请<a href="https://zh.wikipedia.org/wiki/Node.js">戳维基百科</a>。</p>\n<p><strong>Chromium:</strong></p>\n<p>   Chromium 或许你没听说过，但是你一定听说过 chrome 吧！Chromium 是 Google 的开源浏览器，是 chrome 背后的那个不太稳定更新快的兄弟版，详情<a href="https://www.chromium.org/Home">戳这里</a>。</p>\n<p><strong>组合:</strong></p>\n<p>  Electron 创建的应用使用网页作为其 GUI ,因此你可以将其当成由 JavaScript 控制的迷你精简版Chromium 浏览器。也可以将 Electron 当成 node.js 变体，只不过它更专注于桌面应用而非 Web 服务器。在 Electron 中, 把 <code>package.json</code> 中设定的 <code>main</code> 脚本的所在进程称为 <strong>主进程</strong>。这个进程中运行的脚本也可通过创建网页这种方式来展现其 GUI。 因为 Electron 是通过 Chromium 来显示页面,所以 Chromium 自带的多进程架构也一同被利用。这样每个页面都运行着一个独立的进程,它们被统称为 <strong>渲染进程</strong>。通常来说,浏览器中的网页会被限制在沙盒环境中运行并且不允许访问系统原生资源。但是由于 Eelectron 用户可在页面中调用 Node.js API，所以可以和底层操作系统直接交互。</p>\n<h3><strong>优缺点？</strong></h3>\n<p>  总之，优点肯定大于缺点。</p>\n<p><strong>优点:</strong></p>\n<p>  方便快捷的开发桌面应用，跨平台，对前端开发者友好，活跃的社区，丰富的api…</p>\n<p><strong>缺点:</strong></p>\n<p>  性能肯定比不上原生的桌面应用，发布的包貌似有一点点大。</p>\n<h3><strong>怎么开始?</strong></h3>\n<p>  如果不是假前端，那么你电脑肯定安装好了 git 和 node。</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code><span class="token comment"># github上有一个 electron-quick-start 仓库克隆下来</span>\n<span class="token function">git</span> clone https://github.com/electron/electron-quick-start\n<span class="token comment"># 进入文件夹</span>\n<span class="token function">cd</span> electron-quick-start\n<span class="token comment"># 安装依赖包并运行</span>\n<span class="token function">npm</span> <span class="token function">install</span> <span class="token operator">&amp;&amp;</span> <span class="token function">npm</span> start\n</code></pre>\n      </div>\n<p>  然后，你桌面应用就创建成功了如下图所示！</p>\n<p>  \n  <a\n    class="gatsby-resp-image-link"\n    href="/static/hello-world-57bd3a4ef1121c6f3f53492603c91b24-f8e32.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 802px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 77.80548628428927%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAAsSAAALEgHS3X78AAAAZElEQVQoz+3LOwrAIAyA4Zy/IPV1IWfBwXPUBzhIBrXBuYtINz+SkOUHKW6thFaSc8bYtTRgjPHeW2udc7XWsQJijCEEujlnep6JnpRSmEopiPgd07bWeu9jHYwNJz7xzzFueAFU/ptIYGD8IAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"\n        alt="hello world"\n        title=""\n        src="/static/hello-world-57bd3a4ef1121c6f3f53492603c91b24-f8e32.png"\n        srcset="/static/hello-world-57bd3a4ef1121c6f3f53492603c91b24-11091.png 300w,\n/static/hello-world-57bd3a4ef1121c6f3f53492603c91b24-de789.png 600w,\n/static/hello-world-57bd3a4ef1121c6f3f53492603c91b24-f8e32.png 802w"\n        sizes="(max-width: 802px) 100vw, 802px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>  打开你的 electron-quick-start 文件夹，你的项目结构如下图：</p>\n<p>  \n  <a\n    class="gatsby-resp-image-link"\n    href="/static/electron-quick-start-c3d917e2a785aed1b5f5e5c20e0fddbe-4debb.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 281px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 71.88612099644128%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAABMUlEQVQoz5WS626CMBiGuX7vQ/2xTZQxJ2KhJyzIQYFKqygMY7iOdW7JfrnVJ+khTZ4vfb/WKIrCcZyQrRGCmFBCSBDQ9ZoiRHwP7CvR38dQQwiR5/k2TT0AdkVJMPY8z4dQnfd/8iV3XReGYdd9SCGklG3bXi6XXgPje0mSZM9LeiPbZkIeHpBN00zTdLl0Fot3dwWiKNzlpa7MGEviDSYEeD7wYZZlnHNdWTX5fD7Xdd00zbE+Nnqxf2TXdVVsjGC0iSlGYRxrZR7eGAwGw9HItu2ZZb08Pw31MNiN8XjsLJyZ9arMycScTafWq63mt/mc3ee3YVUlDoejlIKX/HSq1V6Iqmna/zMDAEIWYRpA31u6q4ASFm10G4YQ4mWOMVZVIMLqIg98EvVI1+u1f5BPngTAMlfr8zIAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"\n        alt="electron-quick-start"\n        title=""\n        src="/static/electron-quick-start-c3d917e2a785aed1b5f5e5c20e0fddbe-4debb.png"\n        srcset="/static/electron-quick-start-c3d917e2a785aed1b5f5e5c20e0fddbe-4debb.png 281w"\n        sizes="(max-width: 281px) 100vw, 281px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>  其中，main.js 是你的启动文件，index.html 是你的入口文件。</p>\n<h2>React 结合 Electron</h2>\n<p>上面简单的介绍了一下 Electron，下面介绍一下如何将 React 和 Electron 结合起来。</p>\n<h3><strong>创建一个React项目</strong></h3>\n<p>  首先你得有一个 React 项目，由于太多繁琐的配置和懒惰的自己，我们这里就用 Facebook 提供的 create-react-app 来快速创建一个 knownsec-fed 项目。</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code><span class="token comment"># 安装 create-react-app 命令,如果已将安装请忽略</span>\n<span class="token function">npm</span> <span class="token function">install</span> -g create-react-app\n<span class="token comment"># 创建 knownsec-fed 项目</span>\ncreate-react-app knownsec-fed\n<span class="token comment"># 启动项目( create-react-app 真的超级方便啊)</span>\n<span class="token function">cd</span> knownsec-fed <span class="token operator">&amp;&amp;</span> <span class="token function">npm</span> start\n</code></pre>\n      </div>\n<p>  于是，浏览器 <a href="http://localhost:3000/">http://localhost:3000/</a> 就会出现着如下图界面，一个 react 项目创建成功：</p>\n<p>  \n  <a\n    class="gatsby-resp-image-link"\n    href="/static/create-react-app-b8c790cff10bbe847d9ea60b84aeee11-133bb.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 47.25274725274725%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAAAWklEQVQoz2PQxw2MbOyNHZzxKGBQxwF0dXUNzS0NrWy0tbVxqWHwwgECAwMjIiLCwsKCgoJwqWH4jw18/vzp48dPX758+fr16ycg+PDh/9+/mMqwayYSjETNAPR8jIUrw542AAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"\n        alt="create-react-app"\n        title=""\n        src="/static/create-react-app-b8c790cff10bbe847d9ea60b84aeee11-abe1c.png"\n        srcset="/static/create-react-app-b8c790cff10bbe847d9ea60b84aeee11-10046.png 300w,\n/static/create-react-app-b8c790cff10bbe847d9ea60b84aeee11-3c4a3.png 600w,\n/static/create-react-app-b8c790cff10bbe847d9ea60b84aeee11-abe1c.png 1200w,\n/static/create-react-app-b8c790cff10bbe847d9ea60b84aeee11-133bb.png 1365w"\n        sizes="(max-width: 1200px) 100vw, 1200px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3>添加 Electron 包</h3>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code><span class="token comment"># 在knownsec-fed 目录下安装 Electron 包</span>\n<span class="token function">npm</span> <span class="token function">install</span> -save electron\n</code></pre>\n      </div>\n<h3>相关配置</h3>\n<h4><strong>配置 main.js</strong></h4>\n<p>  knownsec-fed 根目录(不是 src 目录)下面新建 main.js 文件,这个文件和 electron-quick-start 中的官方默认 main.js 几乎一模一样，只修改了加载应用这入口这一个地方：</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code><span class="token comment">// 引入electron并创建一个Browserwindow</span>\n<span class="token keyword">const</span> <span class="token punctuation">{</span>app<span class="token punctuation">,</span> BrowserWindow<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'electron\'</span><span class="token punctuation">)</span>\n<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'path\'</span><span class="token punctuation">)</span>\n<span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'url\'</span><span class="token punctuation">)</span>\n\n<span class="token comment">// 保持window对象的全局引用,避免JavaScript对象被垃圾回收时,窗口被自动关闭.</span>\n<span class="token keyword">let</span> mainWindow\n\n<span class="token keyword">function</span> <span class="token function">createWindow</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n<span class="token comment">//创建浏览器窗口,宽高自定义具体大小你开心就好</span>\nmainWindow <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BrowserWindow</span><span class="token punctuation">(</span><span class="token punctuation">{</span>width<span class="token punctuation">:</span> <span class="token number">800</span><span class="token punctuation">,</span> height<span class="token punctuation">:</span> <span class="token number">600</span><span class="token punctuation">}</span><span class="token punctuation">)</span>\n\n  <span class="token comment">/* \n   * 加载应用-----  electron-quick-start中默认的加载入口\n    mainWindow.loadURL(url.format({\n      pathname: path.join(__dirname, \'index.html\'),\n      protocol: \'file:\',\n      slashes: true\n    }))\n  */</span>\n  <span class="token comment">// 加载应用----适用于 react 项目</span>\n  mainWindow<span class="token punctuation">.</span><span class="token function">loadURL</span><span class="token punctuation">(</span><span class="token string">\'http://localhost:3000/\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  \n  <span class="token comment">// 打开开发者工具，默认不打开</span>\n  <span class="token comment">// mainWindow.webContents.openDevTools()</span>\n\n  <span class="token comment">// 关闭window时触发下列事件.</span>\n  mainWindow<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">\'closed\'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    mainWindow <span class="token operator">=</span> <span class="token keyword">null</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment">// 当 Electron 完成初始化并准备创建浏览器窗口时调用此方法</span>\napp<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">\'ready\'</span><span class="token punctuation">,</span> createWindow<span class="token punctuation">)</span>\n\n<span class="token comment">// 所有窗口关闭时退出应用.</span>\napp<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">\'window-all-closed\'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token comment">// macOS中除非用户按下 `Cmd + Q` 显式退出,否则应用与菜单栏始终处于活动状态.</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>platform <span class="token operator">!==</span> <span class="token string">\'darwin\'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    app<span class="token punctuation">.</span><span class="token function">quit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n\napp<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">\'activate\'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n   <span class="token comment">// macOS中点击Dock图标时没有已打开的其余应用窗口时,则通常在应用中重建一个窗口</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span>mainWindow <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token function">createWindow</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n\n<span class="token comment">// 你可以在这个脚本中续写或者使用require引入独立的js文件.   </span>\n</code></pre>\n      </div>\n<h4>配置 package.json</h4>\n<div class="gatsby-highlight">\n      <pre class="language-json"><code><span class="token punctuation">{</span>\n  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"knownsec-fed"</span><span class="token punctuation">,</span>\n  <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"0.1.0"</span><span class="token punctuation">,</span>\n  <span class="token property">"private"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n  <span class="token property">"main"</span><span class="token operator">:</span> <span class="token string">"main.js"</span><span class="token punctuation">,</span> // 配置启动文件\n  <span class="token property">"homepage"</span><span class="token operator">:</span><span class="token string">"."</span><span class="token punctuation">,</span> // \n  <span class="token property">"dependencies"</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token property">"electron"</span><span class="token operator">:</span> <span class="token string">"^1.7.10"</span><span class="token punctuation">,</span>\n    <span class="token property">"react"</span><span class="token operator">:</span> <span class="token string">"^16.2.0"</span><span class="token punctuation">,</span>\n    <span class="token property">"react-dom"</span><span class="token operator">:</span> <span class="token string">"^16.2.0"</span><span class="token punctuation">,</span>\n    <span class="token property">"react-scripts"</span><span class="token operator">:</span> <span class="token string">"1.1.0"</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token property">"start"</span><span class="token operator">:</span> <span class="token string">"react-scripts start"</span><span class="token punctuation">,</span>\n    <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"react-scripts build"</span><span class="token punctuation">,</span>\n    <span class="token property">"test"</span><span class="token operator">:</span> <span class="token string">"react-scripts test --env=jsdom"</span><span class="token punctuation">,</span>\n    <span class="token property">"eject"</span><span class="token operator">:</span> <span class="token string">"react-scripts eject"</span><span class="token punctuation">,</span>\n    <span class="token property">"electron-start"</span><span class="token operator">:</span> <span class="token string">"electron ."</span> // 配置electron的start，区别于web端的start\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>   \n</code></pre>\n      </div>\n<h4>启动 Electron</h4>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code><span class="token comment"># 启动react项目</span>\n<span class="token function">npm</span> start\n<span class="token comment"># 启动electron</span>\n<span class="token function">npm</span> run electron-start\n</code></pre>\n      </div>\n<p>  支持热调试，当你修改代码后，桌面应用也将会重新更新。</p>\n<p>  \n  <a\n    class="gatsby-resp-image-link"\n    href="/static/react-electron-47804622929a3da10f18c3a58468a332-cac28.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 803px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 78.33125778331258%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAAsSAAALEgHS3X78AAAAmUlEQVQoz2MIdLZ2c3X09/X09XZ3sLciCTEo4QaqOnr67n5Kysq4FODTrOvkYZVeoqymRppmDQ0NVVVVIENdQ0NbWxvIUMZmP3bNFhYWrq6uHh4enp6ejo6O7u7u6urqWDTX19c3kQsYfv78+R8JvHjx4vnz58+ePXv16tWHDx/egAFQ5OXLl0Cpz58/IytG10wSGNU8MjQDAON+o+FoeY3jAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"\n        alt="react-electron"\n        title=""\n        src="/static/react-electron-47804622929a3da10f18c3a58468a332-cac28.png"\n        srcset="/static/react-electron-47804622929a3da10f18c3a58468a332-ca07b.png 300w,\n/static/react-electron-47804622929a3da10f18c3a58468a332-85be9.png 600w,\n/static/react-electron-47804622929a3da10f18c3a58468a332-cac28.png 803w"\n        sizes="(max-width: 803px) 100vw, 803px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<h3><strong>打包</strong></h3>\n<h4>打包 react 项目</h4>\n<p>  首先修改 <code>main.js</code>, 因为现在你要将 react 项目打包在 build 文件夹下面，所以加载应用处改成如下！当然也可在某个配置文件里面配置是否属于开发，此处用if判断一下从未进行选择执行哪段加载应用代码。但是这里为了简便，暂且使用直接修改的方式：</p>\n<div class="gatsby-highlight">\n      <pre class="language-js"><code><span class="token comment">// 加载应用----react 打包</span>\nmainWindow<span class="token punctuation">.</span><span class="token function">loadURL</span><span class="token punctuation">(</span>url<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  pathname<span class="token punctuation">:</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">\'./build/index.html\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  protocol<span class="token punctuation">:</span> <span class="token string">\'file:\'</span><span class="token punctuation">,</span>\n  slashes<span class="token punctuation">:</span> <span class="token boolean">true</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n<span class="token comment">// 加载应用----适用于 react 开发时项目</span>\n<span class="token comment">// mainWindow.loadURL(\'http://localhost:3000/\');</span>\n</code></pre>\n      </div>\n<p>  默认情况下，homepage 是 <a href="http://localhost:3000%EF%BC%8Cbuild">http://localhost:3000，build</a> 后，所有资源文件路径都是 /static，而 Electron 调用的入口是 file :协议，/static 就会定位到根目录去，所以找不到静态文件。在 <code>package.json</code> 文件中添加 homepage 字段并设置为”.”后，静态文件的路径就变成了相对路径，就能正确地找到了添加如下配置：</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code><span class="token string">"homepage"</span><span class="token keyword">:</span><span class="token string">"."</span>\n</code></pre>\n      </div>\n<p>  然后就开始打包 react：</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code><span class="token function">npm</span> run-script build\n</code></pre>\n      </div>\n<p>  此时，根目录下面将多出一个build文件夹。</p>\n<h3>打包 electron</h3>\n<p><strong>常用打包插件</strong>\n</p>\n<ul>\n<li><strong><a href="https://github.com/electron-userland/electron-builder">electron-builder</a></strong>    </li>\n<li><strong><a href="https://github.com/electron-userland/electron-packager">electron-packager</a></strong></li>\n</ul>\n<p><strong>安装electron-packager</strong></p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code><span class="token comment"># knownsec-fed目录下安装electron-packager包</span>\n<span class="token function">npm</span> <span class="token function">install</span> electron-packager --save-dev\n<span class="token comment"># 安装electron-packager命令</span>\n<span class="token function">npm</span> <span class="token function">install</span> electron-packager -g\n</code></pre>\n      </div>\n<p><strong>electron-packager命令介绍</strong>\n</p>\n<div class="gatsby-highlight">\n      <pre class="language-json"><code>  electron-packager &lt;location of project> &lt;name of project> &lt;platform> &lt;architecture> &lt;electron version> &lt;optional options>\n</code></pre>\n      </div>\n<ul>\n<li>\n<p>location of project: 项目的本地地址，此处我这边是 ~/knownsec-fed   </p>\n</li>\n<li>\n<p>location of project: 项目名称，此处是 knownsec-fed   </p>\n</li>\n<li>\n<p>platform: 打包成的平台   </p>\n</li>\n<li>\n<p>architecture: 使用 x86 还是 x64 还是两个架构都用   </p>\n</li>\n<li>\n<p>electron version: electron 的版本</p>\n</li>\n</ul>\n<p>于是，根据我这边的情况在 <code>package.json</code> 文件的在 scripts 中加上如下代码：</p>\n<div class="gatsby-highlight">\n      <pre class="language-json"><code><span class="token property">"package"</span><span class="token operator">:</span> "electron-packager ~/knownsec-fed/build knownsec-fed --all --out ~/ --version <span class="token number">1.7</span>.<span class="token number">10</span>   \n</code></pre>\n      </div>\n<p><strong>开始打包</strong>\n</p>\n<div class="gatsby-highlight">\n      <pre class="language-bash"><code><span class="token function">npm</span> run-script package\n</code></pre>\n      </div>\n<p><strong>提醒</strong></p>\n<p>  由于打包的时候会把浏览器内核完整打包进去，所以就算你的项目开发就几百k的资源，但最终的打包文件估计也会比较大。</p>\n<h2>其它</h2>\n<p>此文章未涉及 Electron 具体的技术，只是简单的介绍了一下 react + electron 的一个配置及打包的流程。或许以后会写关于 Electron 的技术细节。Electron 有着非常强大的 api，其背后涉及的技术也非常多。</p>\n<p><strong>友情链接</strong></p>\n<ul>\n<li>\n<p><a href="https://github.com/electron/electron">Electron github</a></p>\n</li>\n<li>\n<p><a href="https://electronjs.org/docs">Electron 英文文档</a></p>\n</li>\n<li>\n<p><a href="https://www.gitbook.com/book/yuzhigang/electron/details">Electron 中文手册</a></p>\n</li>\n<li>\n<p><a href="https://github.com/electron-userland/electron-packager">electron-packager github</a></p>\n</li>\n<li>\n<p><a href="https://electronjs.org/apps">基于Electron构建的app</a></p>\n</li>\n<li>\n<p><a href="https://github.com/chentsulin/electron-react-boilerplate">electron-react-boilerplate github</a></p>\n</li>\n</ul>',fields:{slug:"/2018-01-21-electron-with-react/"},frontmatter:{title:"React+Electron搭建一个桌面应用",date:"2018-01-21",catalog:"前端",author:"qqqian"}},allMarkdownRemark:{edges:[{node:{fields:{slug:"/2018-01-27-javascript-mo-huan-dai-li/"},frontmatter:{title:"JavaScript 魔幻代理"}}},{node:{fields:{slug:"/2018-01-22-web-qian-duan-jian-dan-ding-yue-de-shi-xian/"},frontmatter:{title:"Web前端简单订阅的实现"}}},{node:{fields:{slug:"/2018-01-21-how-django-works/"},frontmatter:{title:"从请求到响应 django 都做了哪些处理"}}},{node:{fields:{slug:"/2018-01-21-electron-with-react/"},frontmatter:{title:"React+Electron搭建一个桌面应用"}}},{node:{fields:{slug:"/2018-01-20-fan-yi-ui-she-ji-zhong-de-ge-shi-ta-yuan-ze/"},frontmatter:{title:"【翻译】UI 设计中的格式塔原则"}}},{node:{fields:{slug:"/2018-01-19-xia-yi-dai-tong-xin-xie-yi-quic/"},frontmatter:{title:"下一代通信协议：QUIC"}}},{node:{fields:{slug:"/2018-01-19-fan-yi-shi-yong-css-zhui-zong-yong-hu/"},frontmatter:{title:"【翻译】使用 CSS 追踪用户"}}},{node:{fields:{slug:"/2018-01-14-antd-yuan-ma-jie-du-notification/"},frontmatter:{title:"antd 源码解读 notification"}}},{node:{fields:{slug:"/2018-01-14-ui-zhong-de-pai-ban-chu-xue-zhe-zhi-nan/"},frontmatter:{title:"【翻译】UI 中的排版：初学者指南"}}},{node:{fields:{slug:"/2018-01-14-learn-koa-intro/"},frontmatter:{title:"koa包教包会(一)--白话koa"}}},{node:{fields:{slug:"/2018-01-13-zi-ji-dong-shou-xie-yi-ge-simplevue/"},frontmatter:{title:"自己动手写一个 SimpleVue"}}},{node:{fields:{slug:"/2018-01-12-translation-React-Animations-in-Depth/"},frontmatter:{title:"【翻译】React Web 动画的 5 种创建方式，每一种都不简单"}}},{node:{fields:{slug:"/2018-01-10-ru-he-kuo-zhan-create-react-app-de-webpack-pei-zhi/"},frontmatter:{title:"如何扩展 Create React App 的 Webpack 配置"}}},{node:{fields:{slug:"/2018-01-08-mapbox-gl-js/"},frontmatter:{title:"3D GIS 应用开发 —— 基于 Mapbox GL 的实践总结"}}},{node:{fields:{slug:"/2018-01-07-the-importance-of-visual-appeal-in-web-design/"},frontmatter:{title:"【翻译】视觉吸引力在网页设计中的重要性"}}},{node:{fields:{slug:"/2018-01-06-react-higher-order-component/"},frontmatter:{title:"React 高阶组件介绍"}}},{node:{fields:{slug:"/2018-01-05-to-vim/"},frontmatter:{title:"如何让 vim 成为我们的神器"}}},{node:{fields:{slug:"/2018-01-05-d3-js-v3-data-driven-and-d3-force/"},frontmatter:{title:"D3.js 数据驱动 和 force 力学图讲解"}}},{node:{fields:{slug:"/2018-01-05-create-a-redux-middleware/"},frontmatter:{title:"如何编写一个 Redux 中间件"}}}]}},pathContext:{slug:"/2018-01-21-electron-with-react/"}}}});
//# sourceMappingURL=path---2018-01-21-electron-with-react-a461ca09830c7dabfa50.js.map