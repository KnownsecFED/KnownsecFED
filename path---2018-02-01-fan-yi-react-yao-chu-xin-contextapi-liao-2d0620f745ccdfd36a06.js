webpackJsonp([0xb6d54ca9d8e5],{543:function(n,a){n.exports={data:{site:{siteMetadata:{title:"KnownsecFED",author:"304 Team",siteUrl:"https://knownsec-fed.com"}},markdownRemark:{id:"/Users/zhaozhiming/projects/work/knownsec/KnownsecFED/src/pages/2018-02-01-fan-yi-react-yao-chu-xin-contextapi-liao/index.md absPath of file >>> MarkdownRemark",html:'<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/header-a4908b5063444d152daca7add9455a1e-45309.jpeg"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 1069px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 56.12722170252572%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAdwsRR//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAEFAl//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAXEAADAQAAAAAAAAAAAAAAAAAAARAh/9oACAEBAAE/IWbHf//aAAwDAQACAAMAAAAQCy//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAcEAEAAgEFAAAAAAAAAAAAAAABABFBECExUWH/2gAIAQEAAT8QW8sDmuswbLSvGAS8zjT/2Q==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"\n        alt="React è¦å‡ºæ–° Context API äº†"\n        title=""\n        src="/static/header-a4908b5063444d152daca7add9455a1e-45309.jpeg"\n        srcset="/static/header-a4908b5063444d152daca7add9455a1e-7c815.jpeg 300w,\n/static/header-a4908b5063444d152daca7add9455a1e-f1c7c.jpeg 600w,\n/static/header-a4908b5063444d152daca7add9455a1e-45309.jpeg 1069w"\n        sizes="(max-width: 1069px) 100vw, 1069px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>åŸæ–‡åœ°å€ï¼š<a href="https://tinyletter.com/kentcdodds/letters/react-s-new-context-api">Reactâ€™s new Context API</a></p>\n<p>ä½œè€…ï¼š<a href="https://twitter.com/kentcdodds">kentcdodds</a></p>\n<p><code>React</code> ä¸­çš„ <code>context API</code> ç›¸ä¿¡å¤§å®¶éƒ½çŸ¥é“å§ï¼Œå¯èƒ½è·Ÿå¤§ä¼™ä¸€æ ·ï¼Œå½“çœ‹åˆ° <code>React</code> çš„å®˜æ–¹æ–‡æ¡£æ˜¯è¿™æ ·æ—¶ï¼Œéƒ½ä¸æ•¢ç›´æ¥ä½¿ç”¨å®ƒã€‚</p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/context-f28060c2ee8e3505bff6f5b584f4891f-7df05.png"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 748px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 80.6149732620321%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAADfElEQVQ4y6WSS2wbVRSGTQUbJIoAUYkWQSO7fjQZPzppTEBBUMECwQaB2RIDSfpQEWvYsGEDbBxKaUFIiAg2KBQatYQkxk2cpiGNEH7kYdeGxFE84xnbY4/Hju1rz8+dcWJHoqw40q8zd+bOd/97zjEYaMxemXg0cG3MeeXXcWbylylmfi7I3AjMMr/5A0wwGGQCgRvM9PQ0MzPjp5rRs9/vZ6amppiJqxPM5PXrzp9+vnrIsBfRxaWPZCGBlWS0GoqsEEHgSWorRTY2NwnHcYTnObJJn3me19d779LpbbIei1UTySSWl5c/aQN/GP/RF4slcDN4szG/sID5pVtYXF7CwtIi5oLzmJ0NIhSKIBpdxcqKpjVEaV5bW8et3283g4u3QZ1eagOPdFl95r7nYXKfqneZHeoxi0PtMvWopt1s7Wb1bLQ41WO2XpXtG1DZkwOq2eZULTYXofvx2OPGL9rAo6Zun83uhrnnJBkaOa++/8GHGDnzLt4eOovBt0bwpncYg97T8Hq98A6+gaHhMxg+fR7vDJ/D2XPvkRdfehWHnzB3HFInPhvjBuPqJ3+GwmqtVoUoisjn8xAEAbR+4HgR6a0IuL/GocgZVKt1KIoCGuTjz77EwUeOdIBGs70FdPYTWidV25XL5SBJEvJUgphDht9A+u9JlEuc9hmq2kSj0dCBvs8p8OHD+4CWXaDraRKL3dGBxWIR5XJZh/K8QIGb4DeuISes08OK+oFpToeTi5e+xgMP/QdQc9hsNkFHQ7/yzs4OBVdQVgpQpDAq1KGiVFAqleh36e5ArYbH7U/BfuIZQkeCOlRRKBRQqVRaDjMihMwWctt+FHIJiFkJUkGiOQt6OLlw8Ss8uL+GTxq7fSbbCVhpl9fW4/qVU6mU3hjtWtrMJZMJyFISSklEoSi3HEoth6MXLuP+g4c6QNY94Hv21Mt47oVX6vE7CQ2oZjIZldZJf26poWrRWbdFvvn2exw1dnfmMBQOj7YaITe1zlWrVdTrdWj/y7KM7XQGma055LkA9keD4mp1WnAa4Ujkchu4urr6qQagM1ehtatRSI12+V+S5b0s17LZbC2eEmt/RDcqZaWMeDw+use7x2q1HmdZ9jWXy+Wx2+0ehmHuIvuuWmuHw+HpY52efjfr6e1lX7dYLD0ayxCJRDToAap7qe77HzowNvad4R9vjA4Xe719BAAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"\n        alt="context api"\n        title=""\n        src="/static/context-f28060c2ee8e3505bff6f5b584f4891f-7df05.png"\n        srcset="/static/context-f28060c2ee8e3505bff6f5b584f4891f-147c7.png 300w,\n/static/context-f28060c2ee8e3505bff6f5b584f4891f-2f268.png 600w,\n/static/context-f28060c2ee8e3505bff6f5b584f4891f-7df05.png 748w"\n        sizes="(max-width: 748px) 100vw, 748px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>ç¬¬ä¸€æ¡æœç´¢ç»“æœæ˜¾ç¤ºçš„å°±æ˜¯ <a href="https://reactjs.org/docs/context.html#why-not-to-use-context">ä¸ºä»€ä¹ˆä¸å»ºè®®ä½¿ç”¨ context</a>ï¼Œè®©å¤§å®¶ç¬é—´äº§ç”Ÿå¿§è™‘ï¼Œè¯¥ç« èŠ‚æ˜¯è¿™ä¹ˆæè¿° <code>context</code> çš„ï¼š</p>\n<blockquote>\n<p>å¦‚æœä½ æƒ³è®©ä½ çš„åº”ç”¨æ›´åŠ ç¨³å®šï¼Œå°±åˆ«ä½¿ç”¨ <code>context</code>ï¼Œå› ä¸ºè¿™æ˜¯ä¸€ä¸ªå®éªŒæ€§çš„ <code>API</code>ï¼Œåœ¨æœªæ¥çš„ <code>React</code> ç‰ˆæœ¬ä¸­å¯èƒ½ä¼šå‘ç”Ÿæ”¹å˜ã€‚</p>\n</blockquote>\n<p>âš ï¸ æ³¨æ„ï¼Œè¿™é‡Œçš„æ”¹å˜åŒ…æ‹¬ <code>ä¸­æ–­</code>ï¼Œ<code>ç»ˆæ­¢</code>ï¼Œ<code>ä¸å†ä½¿ç”¨</code> çš„å«ä¹‰ã€‚</p>\n<h2>é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆè¿˜è¦ä½¿ç”¨ context å‘¢</h2>\n<p>ä½ æ›¾ç»å†è¿‡å°è¯•åœ¨ä¸€ä¸ª <code>å±‚çº§å¾ˆæ·±çš„ç»„ä»¶</code> ä¸­è·å– <code>æœ€å¤–å±‚ç»„ä»¶</code> çš„ <code>state</code> çš„ç—›è‹¦ä¹ˆï¼Œè¿™ç§ç—›è‹¦å« <code>prop drilling</code>ï¼Œå¯è°“è®©äººæ¥è¿‘å´©æºƒçš„ã€‚å½“é‡åˆ°è¿™ç§æƒ…å½¢æ—¶ï¼Œä½ è‚¯å®šä¸ä¼šå–œæ¬¢ç”¨ <code>props</code> æ¥ä¼ é€’æ•°æ®ï¼Œå› ä¸ºå¦‚æœä¸­é—´æœ‰ä¸ªç»„ä»¶å‘ç”Ÿæ”¹å˜ï¼Œè¿™ä¸ªä»£ä»·å°†æ˜¯å‡ ä½• ğŸ˜‚ã€‚</p>\n<p>å®é™…ä¸Šï¼Œä½ å¯ä»¥é€šè¿‡ä½¿ç”¨å¸¸è§„çš„ <code>JavaScript module</code> æ¥è§„é¿ä»¥ä¸Šçš„é—®é¢˜ï¼Œå°†æ•°æ®å­˜æ”¾åœ¨æŸä¸ª <code>module</code> ä¸­ï¼Œå°±å¯ä»¥å®ç°åœ¨ä»»ä½•åœ°æ–¹ <code>è®¿é—®/å¯¼å…¥</code>ï¼Œä½†è¿™ä¹ˆåšæƒ³è¦ <code>æ›´æ–°</code> å´å¾ˆéº»çƒ¦ï¼ˆä½ å¿…é¡»å®ç°ä¸€ä¸ª <code>event</code> åœ¨æ•°æ®æ›´æ–°æ—¶è§¦å‘ï¼Œé€šçŸ¥ç”¨æˆ·æ•°æ®å‘ç”Ÿæ”¹å˜ï¼‰ï¼Œå¹¶ä¸”ï¼Œ<code>æœåŠ¡ç«¯æ¸²æŸ“</code> å¯¹ <code>module</code> ä¹Ÿä¼šæœ‰å½±å“ã€‚</p>\n<p>å› æ­¤ï¼Œåƒ <a href="https://redux.js.org/">redux</a> è¿™æ ·çš„è´Ÿè´£ <code>çŠ¶æ€ç®¡ç†</code> çš„ç¬¬ä¸‰æ–¹åº“è¿›å…¥äº†å¤§å®¶çš„è§†é‡ã€‚å®ƒå…è®¸ä½ åœ¨ä»»ä½•åœ°æ–¹ä» <code>store</code> è·å–æ•°æ®ï¼Œä½ éœ€è¦åšçš„åªæ˜¯ä½¿ç”¨ <code>&#x3C;Provider /></code> åŒ…è£…ä¸€ä¸‹ï¼Œç„¶åå°±å¯ä»¥ç¥å¥‡åœ°åœ¨ <code>connected</code> çš„ç»„ä»¶ä¸­è½»æ¾åœ°è·å–æƒ³è¦çš„æ•°æ®äº†ã€‚</p>\n<p>ç„¶è€Œï¼Œå¦‚æœæˆ‘å‘Šè¯‰ä½  <code>&#x3C;Provider /></code> å°±æ˜¯åœ¨ä½¿ç”¨ <code>context</code> è¿™ä¸ª <code>å®éªŒæ€§ API</code> å‘¢ï¼Ÿäº‹å®ä¸Šä¹Ÿæ˜¯è¿™æ ·çš„ï¼<code>provider</code> ç»„ä»¶å°†æ•°æ®å­˜è¿› <code>context</code> ä¸­ï¼Œ<code>connect</code> é«˜é˜¶ç»„ä»¶ä» <code>context</code> è·å–æ•°æ®ï¼Œæ‰€ä»¥ï¼Œ<code>redux</code> å¹¶ä¸å…è®¸ä½ çš„æ•°æ®å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹è®¿é—®ï¼Œ<code>context</code> å°±æ˜¯è¿™æ ·ã€‚</p>\n<p>æ‰€ä»¥ï¼Œä¸ºä»€ä¹ˆè¿˜è¦ä½¿ç”¨ <code>context</code> å‘¢ï¼Ÿå¯èƒ½æ˜¯å¤§å®¶å·²ç»æ·±æ·±åœ°çˆ±ä¸Šå®ƒäº†å§ï¼å³ä½¿ä½ æ²¡æœ‰ç›´æ¥ä½¿ç”¨ <code>context</code>ï¼Œä½ çš„åº”ç”¨ç¨‹åºä¹Ÿä¼šé€šè¿‡å¼•ç”¨åƒ <a href="https://github.com/reactjs/react-redux/blob/76dd7faa90981dd2f9efa76f3e2f26ecf2c12cf7/src/components/connectAdvanced.js#L136-L143">react-redux</a>ï¼Œ <a href="https://github.com/mobxjs/mobx-react/blob/dc249910c74c1b2e988a879be07f10aeaea90936/src/Provider.js#L19-L34">MobX-react</a>ï¼Œ <a href="https://github.com/ReactTraining/react-router/blob/e6f9017c947b3ae49affa24cc320d0a86f765b55/packages/react-router/modules/Router.js#L23-L34">react-router</a>ï¼Œ <a href="https://github.com/paypal/glamorous/blob/7468bfc76f46783cac841e20973ed119c771f3b7/src/theme-provider.js#L33-L37">glamorous</a> è¿™æ ·çš„ç¬¬ä¸‰æ–¹åº“é—´æ¥ç”¨åˆ°å®ƒã€‚</p>\n<h2>Context é‡ç”Ÿå•¦</h2>\n<p>ç°åœ¨æ¸…æ¥šäº†ï¼Œæˆ‘ä»¬æ˜¯å¦‚æ­¤åœ°çƒ­çˆ± <code>context</code>ï¼Œä½†å®˜æ–¹æ–‡æ¡£çš„è­¦å‘Šä¾ç„¶è¿˜åœ¨ï¼š<code>åœ¨ React çš„æœªæ¥ç‰ˆæœ¬ä¸­ï¼Œå¯èƒ½ä¸å†ä½¿ç”¨å®ƒ</code>ï¼Œå¥½æ¶ˆæ¯æ˜¯ï¼Œ<code>context</code> è¦æ­£å¼è·Ÿå¤§å®¶æ‰“æ‹›å‘¼äº†ï¼Œå¤§å®¶ææœ‰å¯èƒ½æ¯”ä¹‹å‰æ›´çˆ±å®ƒã€‚</p>\n<p>ä¸€ä¸ªæœˆå‰ï¼Œ<code>React å›¢é˜Ÿ</code> ä» <a href="https://github.com/yarnpkg/rfcs">yarn</a>ï¼Œ<a href="https://github.com/rust-lang/rfcs">rust</a> å’Œ <a href="https://github.com/emberjs/rfcs">Ember</a> çš„ <code>rfcs ä»“åº“</code> å—åˆ°å¯å‘ï¼Œå»ºç«‹äº†ä¸€ä¸ªè‡ªå·±çš„ <a href="https://github.com/reactjs/rfcs">rfcs</a> ä»“åº“ã€‚ä»“åº“ç¬¬ä¸€ä¸ª <code>PR</code> æ¥è‡ª <a href="https://twitter.com/acdlite">Andrew Clark</a>ï¼ˆReact å›¢é˜Ÿæ ¸å¿ƒæˆå‘˜ï¼‰ï¼Œ<code>PR</code> æ ‡é¢˜ä¸º <a href="https://github.com/reactjs/rfcs/pull/2">New version of context</a>ï¼Œå…¶ä¸­ <code>Andrew Clark</code> æ¦‚è¿°äº†æœªæ¥æ–°ç‰ˆæœ¬çš„ <code>context</code> æ˜¯æ€æ ·çš„ï¼Œä¹‹åè¿˜å­˜åœ¨ä¸€äº›æœ‰è¶£çš„è®¨è®ºï¼Œå‡ å¤©åï¼Œ<code>Andrew Clark</code> å°±å‘ <code>React</code> ä»“åº“æäº†ä¸€ä¸ª <a href="https://github.com/facebook/react/pull/11818">New context API</a> çš„ <code>PR</code>ã€‚</p>\n<p>é‚£ä¹ˆï¼Œåˆ°åº•æœ‰ä»€ä¹ˆæ”¹å˜å‘¢ï¼Ÿè‚‰çœ¼ä¼°è®¡æ–°çš„ <code>API</code> ä¸ä¹‹å‰çš„ <code>API</code> å­˜åœ¨ç™¾ä¸‡çº§åˆ«çš„å·®å¼‚ï¼Œä¸‹é¢æ˜¯æˆ‘æ‰¾åˆ°çš„æœ€ç®€å•çš„ç¤ºä¾‹:</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code><span class="token keyword">const</span> ThemeContext <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createContext</span><span class="token punctuation">(</span><span class="token string">\'light\'</span><span class="token punctuation">)</span>\n<span class="token keyword">class</span> <span class="token class-name">ThemeProvider</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>\n  state <span class="token operator">=</span> <span class="token punctuation">{</span>theme<span class="token punctuation">:</span> <span class="token string">\'light\'</span><span class="token punctuation">}</span>\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> ThemeContext<span class="token punctuation">.</span><span class="token function">provide</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>theme<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>children<span class="token punctuation">)</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">const</span> <span class="token function-variable function">ThemeConsumer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> ThemeContext<span class="token punctuation">.</span><span class="token function">consume</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span>\n\n<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token operator">&lt;</span>ThemeProvider<span class="token operator">></span>\n      <span class="token operator">&lt;</span>ThemeConsumer<span class="token operator">></span><span class="token punctuation">{</span>val <span class="token operator">=></span> <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token punctuation">{</span>val<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>ThemeConsumer<span class="token operator">></span>\n    <span class="token operator">&lt;</span><span class="token operator">/</span>ThemeProvider<span class="token operator">></span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<blockquote>\n<p>ä½ å¯èƒ½æ³¨æ„åˆ°ç¤ºä¾‹ä¸­ä½¿ç”¨åˆ°ä¸€ä¸ª <code>render prop</code>ï¼Œä½†å®é™…ä¸Šå¹¶æ²¡æœ‰ä»»ä½•å…³äºéœ€è¦ä½¿ç”¨ <code>render prop</code> çš„ <code>context API</code>ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>context API</code> è½»æ¾å®ç° <code>é«˜é˜¶ç»„ä»¶</code> æˆ–å…¶ä»–åŠŸèƒ½ã€‚</p>\n</blockquote>\n<p>æ–°çš„ <code>context API</code> ä¸»è¦ç”±ä»¥ä¸‹ä¸‰éƒ¨åˆ†ç»„æˆ</p>\n<ul>\n<li><code>React.createContext</code> ç”¨äºä¼ é€’ <code>åˆå§‹å€¼</code>ï¼ˆå¯é€‰æ‹© <a href="https://twitter.com/acdlite/status/957446433656864768">ä½¿ç”¨ bitmask çš„ä¸€ä¸ªå¥‡å¦™çš„é€‰æ‹©æ€§é€€å‡ºå‡½æ•°</a>ï¼‰ï¼Œè¿”å›ä¸€ä¸ªåŒ…å« <code>provider</code> å’Œ <code>consumer</code> çš„å¯¹è±¡</li>\n<li><code>provide</code> å‡½æ•°ä½¿ç”¨ <code>higher</code>ï¼Œå¹¶å¯ä»¥æ¥æ”¶ä»»ä½•å€¼</li>\n<li><code>consume</code> å‡½æ•°åœ¨ <code>provider</code> ä¹‹åä»»ä½•åœ°æ–¹ä½¿ç”¨ï¼Œå¹¶ä¼ é€’ä¸€ä¸ªè¿”å› <code>JSX</code> çš„å‡½æ•°ï¼ˆè¿™æœ‰ç‚¹åƒ <code>render prop</code> ç»„ä»¶ï¼Œä½† <code>consume</code> ä¸æ˜¯ç»„ä»¶ï¼‰ã€‚</li>\n</ul>\n<p>æˆ‘å¯¹è¿™ä¸ª <code>API</code> å……æ»¡äº†æœŸå¾…ï¼Œ<code>React å›¢é˜Ÿ</code> ä¹Ÿå°†ä¼šç§»é™¤ <code>context æ˜¯å®éªŒæ€§ API</code> çš„è­¦å‘Šï¼Œå› ä¸ºå®ƒç°åœ¨æ˜¯æ¡†æ¶ <a href="https://twitter.com/acdlite/status/957445801302618112">ä¸€çº§æ£’çš„ç‰¹æ€§</a>ã€‚è¿™ä¹Ÿæ„å‘³ç€å¤§å®¶å°†ä¸å†é‚£ä¹ˆæ‹…å¿ƒä½¿ç”¨ <code>context</code> æ¥è§£å†³åº”ç”¨ä¸­ <code>prop-drilling</code> çš„é—®é¢˜äº†ï¼Œå¯¹ <code>Redux</code> ä¹Ÿå°†ä¸å†é‚£ä¹ˆä¾èµ–ï¼Œå¯¹ <code>React</code> å°†æ›´åŠ å–œæ¬¢ã€‚</p>\n<p><a href="https://twitter.com/kentcdodds/status/911276059051438082">æˆ‘æœ€è¿‘çœ‹åˆ°çš„</a>ï¼Œå¤§æ¦‚æ„æ€æ˜¯ï¼š</p>\n<blockquote>\n<p>å¤§å®¶ä¸æ˜¯å¾ˆæ„¿æ„ä¿æŒä½¿ç”¨æå€¡çš„ <code>render</code> æ–¹æ³•ï¼ŒåŠ é‡äº† <code>prop drilling</code> é—®é¢˜ï¼Œæ‰€ä»¥ï¼Œæœ€ç»ˆæƒ³é€šè¿‡ <code>redux</code> æ¥ç¼“è§£</p>\n</blockquote>\n<p>æ‰€ä»¥ï¼Œæˆ‘è®¤ä¸ºå¦‚æœæˆ‘ä»¬ä¸è¿‡æ—©æˆ–æ­¦æ–­åœ°å»ç ´å <code>render</code> æ–¹æ³•ï¼Œæˆ‘ä»¬å¯èƒ½å°±ä¸ä¼šé‚£ä¹ˆç—›è‹¦ï¼Œå³ä¾¿æœ€ç»ˆæˆ‘ä»¬å®åœ¨æ²¡æœ‰åŠæ³•é¿å…ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡æ ¸å¿ƒçš„ <code>React API</code> æ¥è§£å†³ã€‚</p>\n<h2>Context å®è·µ</h2>\n<p>æˆ‘çœ‹åˆ°äº†ä¸€ä¸ªå…³äº <code>context API</code>ï¼ˆæˆ–æ™®é€šçš„ <code>render prop pattern</code>ï¼‰çš„é—®é¢˜å¾ˆå¤šæ¬¡ï¼Œå°±æ˜¯å¦‚ä½•ç»„åˆ <code>providers</code> å’Œ <code>consumers</code>ï¼Œå½“åœ¨ä¸€ä¸ª <code>render</code> æ–¹æ³•ä¸­æŠŠä¸€å † <code>render prop</code> ç»„ä»¶æ”¾åœ¨ä¸€èµ·æ—¶ï¼Œå°±ä¼šåƒè¿™æ · <a href="https://twitter.com/acdlite/status/955955121979969537">åµŒå¥—</a></p>\n<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/Practical-03b38ee4f8b65109c111595cf8272b1c-1355e.jpg"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 554px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 216.60649819494586%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAArABQDASIAAhEBAxEB/8QAGQABAQEBAQEAAAAAAAAAAAAAAAIBAwQF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB+6QW0bHSCmCoec7uY//EABoQAAIDAQEAAAAAAAAAAAAAAAABAhAxESH/2gAIAQEAAQUCy2K3tM9pnSWKTb6f/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwFf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwFf/8QAFBABAAAAAAAAAAAAAAAAAAAAQP/aAAgBAQAGPwIX/8QAHhAAAgICAgMAAAAAAAAAAAAAAAERIRBRMWGBkeH/2gAIAQEAAT8hditijYsqjse8URnjEpqydMbieOBodojjY2n4f//aAAwDAQACAAMAAAAQcwwAMM//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/EF//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/EF//xAAeEAEAAgEFAQEAAAAAAAAAAAABABFBECExYZFRcf/aAAgBAQABPxCiXdOd2DTjAbrLLcUHkRC8r6i9+dCGZdyK/T5oN8H6xOj7oA288M+1/IjykLIBtjiiEw8T/9k=\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"\n        alt="Practical"\n        title=""\n        src="/static/Practical-03b38ee4f8b65109c111595cf8272b1c-1355e.jpg"\n        srcset="/static/Practical-03b38ee4f8b65109c111595cf8272b1c-f76df.jpg 300w,\n/static/Practical-03b38ee4f8b65109c111595cf8272b1c-1355e.jpg 554w"\n        sizes="(max-width: 554px) 100vw, 554px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>é‚£ä¹ˆï¼Œæˆ‘ä»¬å¯ä»¥åšç‚¹ä»€ä¹ˆæ¥é¿å…å‘¢ï¼Ÿå…¶å®ï¼Œä¸ªäººè§‰å¾—æ²¡æœ‰é‚£ä¹ˆç³Ÿç³•ï¼Œå¦‚æœä½ è§‰å¾—è¿™æ ·å¹¶ä¸å¥½ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨å¸¸è§„çš„æ–¹æ³•æ¥è§£å†³å®ƒï¼š<code>utility</code> å‡½æ•°/ç»„ä»¶ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code><span class="token keyword">const</span> ThemeContext <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createContext</span><span class="token punctuation">(</span><span class="token string">\'light\'</span><span class="token punctuation">)</span>\n<span class="token keyword">class</span> <span class="token class-name">ThemeProvider</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span><span class="token comment">/* code */</span><span class="token punctuation">}</span>\n<span class="token keyword">const</span> <span class="token function-variable function">ThemeConsumer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> ThemeContext<span class="token punctuation">.</span><span class="token function">consume</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span>\n<span class="token keyword">const</span> LanguageContext <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createContext</span><span class="token punctuation">(</span><span class="token string">\'en\'</span><span class="token punctuation">)</span>\n<span class="token keyword">class</span> <span class="token class-name">LanguageProvider</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span><span class="token comment">/* code */</span><span class="token punctuation">}</span>\n<span class="token keyword">const</span> <span class="token function-variable function">LanguageConsumer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> LanguageContext<span class="token punctuation">.</span><span class="token function">consume</span><span class="token punctuation">(</span>children<span class="token punctuation">)</span>\n\n<span class="token keyword">function</span> <span class="token function">AppProviders</span><span class="token punctuation">(</span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token operator">&lt;</span>LanguageProvider<span class="token operator">></span>\n      <span class="token operator">&lt;</span>ThemeProvider<span class="token operator">></span>\n        <span class="token punctuation">{</span>children<span class="token punctuation">}</span>\n      <span class="token operator">&lt;</span><span class="token operator">/</span>ThemeProvider<span class="token operator">></span>\n    <span class="token operator">&lt;</span><span class="token operator">/</span>LanguageProvider<span class="token operator">></span>\n  <span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">function</span> <span class="token function">ThemeAndLanguageConsumer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token punctuation">(</span>\n    <span class="token operator">&lt;</span>LanguageConsumer<span class="token operator">></span>\n      <span class="token punctuation">{</span>language <span class="token operator">=></span> <span class="token punctuation">(</span>\n        <span class="token operator">&lt;</span>ThemeConsumer<span class="token operator">></span>\n          <span class="token punctuation">{</span>theme <span class="token operator">=></span> <span class="token function">children</span><span class="token punctuation">(</span><span class="token punctuation">{</span>language<span class="token punctuation">,</span> theme<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>\n        <span class="token operator">&lt;</span><span class="token operator">/</span>ThemeConsumer<span class="token operator">></span>\n      <span class="token punctuation">)</span><span class="token punctuation">}</span>\n    <span class="token operator">&lt;</span><span class="token operator">/</span>LanguageConsumer<span class="token operator">></span>\n  <span class="token punctuation">)</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token operator">&lt;</span>AppProviders<span class="token operator">></span>\n      <span class="token operator">&lt;</span>ThemeAndLanguageConsumer<span class="token operator">></span>\n        <span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">{</span>theme<span class="token punctuation">,</span> language<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token punctuation">{</span>theme<span class="token punctuation">}</span> and <span class="token punctuation">{</span>language<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span><span class="token punctuation">}</span>\n      <span class="token operator">&lt;</span><span class="token operator">/</span>ThemeAndLanguageConsumer<span class="token operator">></span>\n    <span class="token operator">&lt;</span><span class="token operator">/</span>AppProviders<span class="token operator">></span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<p>è¿™é‡Œçš„ç›®æ ‡æ˜¯ä½¿ç”¨å¸¸è§çš„æ¡ˆä¾‹ï¼Œç»“åˆç‰¹æ®ŠåŠŸèƒ½çš„å‡½æ•°/ç»„ä»¶ï¼Œä½¿æ¡ˆä¾‹æ›´åŠ  <code>å·¥ç¨‹åŒ–</code>ã€‚</p>\n<h2>æ€»ç»“</h2>\n<p>æ­£å¦‚ä¸Šé¢æ‰€è¯´çš„ï¼Œæˆ‘å¯¹è¿™ä¸ª <code>API</code> å……æ»¡äº†æœŸå¾…ã€‚ç›®å‰æš‚æœªå‘å¸ƒï¼Œä½†åº”è¯¥ä¼šåŒ…å«åœ¨ä¸‹ä¸€ä¸ª <code>minor</code> ç‰ˆæœ¬ä¸­ã€‚ä¸åŒæ‹…å¿ƒï¼Œä¹‹å‰çš„ <code>API</code> ä¼šç»§ç»­æ­£å¸¸å·¥ä½œï¼Œç›´åˆ°ä¸‹ä¸€ä¸ª <code>major</code> ç‰ˆæœ¬å‘å¸ƒï¼Œæ‰€ä»¥ï¼Œæ¯ä¸ªäººéƒ½æœ‰æ—¶é—´è¿ç§»ã€‚è¿˜æœ‰ä¸è¦å¿˜äº†ï¼Œ<code>React</code> å›¢é˜Ÿåœ¨ <code>Facebook</code> æœ‰è¶…è¿‡ <code>50,000</code> ä¸ª <code>React components</code> éœ€è¦ç»´æŠ¤ï¼Œæ‰€ä»¥ï¼Œå°†æ¥å¾ˆæœ‰å¯èƒ½ä¼šå‘å¸ƒä¸€ä¸ª <code>codemod</code> å»è‡ªåŠ¨æ›´æ–°å¤§å¤šæ•°äººçš„ä»£ç ï¼ˆå°±åƒä»¥å¾€ä¸€æ ·ï¼‰ã€‚</p>',fields:{slug:"/2018-02-01-fan-yi-react-yao-chu-xin-contextapi-liao/"},frontmatter:{title:"ã€ç¿»è¯‘ã€‘React è¦å‡ºæ–° Context API äº†",date:"2018-02-01",catalog:"å‰ç«¯",author:"æ«ä¸Šé›¾æ£‹"}},allMarkdownRemark:{edges:[{node:{fields:{slug:"/2018-02-01-fan-yi-react-yao-chu-xin-contextapi-liao/"},frontmatter:{title:"ã€ç¿»è¯‘ã€‘React è¦å‡ºæ–° Context API äº†"}}},{node:{fields:{slug:"/2018-01-29-kuai-su-da-jian-ni-de-github-page-ge-ren-bo-ke-ji-yu-createreactapp-de-dan-ye-mian-ying-yong-shi-jian/"},frontmatter:{title:"å¿«é€Ÿæ­å»ºä½ çš„ github pages ä¸ªäººåšå®¢ â€”â€” åŸºäº Create-React-App çš„å•é¡µé¢åº”ç”¨å®è·µ"}}},{node:{fields:{slug:"/2018-01-28-redux-promise-middleware/"},frontmatter:{title:"ä¸€ä¸ªæ’ä»¶è®©ä½ åœ¨ Redux ä¸­å†™ promise äº‹åŠåŠŸå€"}}},{node:{fields:{slug:"/2018-01-28-fan-yi-react-zu-jian-mo-shi/"},frontmatter:{title:"ã€ç¿»è¯‘ã€‘React ç»„ä»¶è®¾è®¡æ¨¡å¼åŸºç¡€"}}},{node:{fields:{slug:"/2018-01-28-fan-yi-bu-yao-rang-yong-hu-zai-chan-pin-ti-yan-shang-shou-dao-cuo-zhe/"},frontmatter:{title:"ã€ç¿»è¯‘ã€‘ä¸è¦è®©ç”¨æˆ·åœ¨äº§å“ä½“éªŒä¸Šå—åˆ°æŒ«æŠ˜"}}},{node:{fields:{slug:"/2018-01-27-javascript-mo-huan-dai-li/"},frontmatter:{title:"JavaScript é­”å¹»ä»£ç†"}}},{node:{fields:{slug:"/2018-01-22-web-qian-duan-jian-dan-ding-yue-de-shi-xian/"},frontmatter:{title:"Webå‰ç«¯ç®€å•è®¢é˜…çš„å®ç°"}}},{node:{fields:{slug:"/2018-01-21-how-django-works/"},frontmatter:{title:"ä»è¯·æ±‚åˆ°å“åº” django éƒ½åšäº†å“ªäº›å¤„ç†"}}},{node:{fields:{slug:"/2018-01-21-electron-with-react/"},frontmatter:{title:"React+Electronæ­å»ºä¸€ä¸ªæ¡Œé¢åº”ç”¨"}}},{node:{fields:{slug:"/2018-01-20-fan-yi-ui-she-ji-zhong-de-ge-shi-ta-yuan-ze/"},frontmatter:{title:"ã€ç¿»è¯‘ã€‘UI è®¾è®¡ä¸­çš„æ ¼å¼å¡”åŸåˆ™"}}},{node:{fields:{slug:"/2018-01-19-xia-yi-dai-tong-xin-xie-yi-quic/"},frontmatter:{title:"ä¸‹ä¸€ä»£é€šä¿¡åè®®ï¼šQUIC"}}},{node:{fields:{slug:"/2018-01-19-fan-yi-shi-yong-css-zhui-zong-yong-hu/"},frontmatter:{title:"ã€ç¿»è¯‘ã€‘ä½¿ç”¨ CSS è¿½è¸ªç”¨æˆ·"}}},{node:{fields:{slug:"/2018-01-14-antd-yuan-ma-jie-du-notification/"},frontmatter:{title:"antd æºç è§£è¯» notification"}}},{node:{fields:{slug:"/2018-01-14-ui-zhong-de-pai-ban-chu-xue-zhe-zhi-nan/"},frontmatter:{title:"ã€ç¿»è¯‘ã€‘UI ä¸­çš„æ’ç‰ˆï¼šåˆå­¦è€…æŒ‡å—"}}},{node:{fields:{slug:"/2018-01-14-learn-koa-intro/"},frontmatter:{title:"koaåŒ…æ•™åŒ…ä¼š(ä¸€)--ç™½è¯koa"}}},{node:{fields:{slug:"/2018-01-13-zi-ji-dong-shou-xie-yi-ge-simplevue/"},frontmatter:{title:"è‡ªå·±åŠ¨æ‰‹å†™ä¸€ä¸ª SimpleVue"}}},{node:{fields:{slug:"/2018-01-12-translation-React-Animations-in-Depth/"},frontmatter:{title:"ã€ç¿»è¯‘ã€‘React Web åŠ¨ç”»çš„ 5 ç§åˆ›å»ºæ–¹å¼ï¼Œæ¯ä¸€ç§éƒ½ä¸ç®€å•"}}},{node:{fields:{slug:"/2018-01-10-ru-he-kuo-zhan-create-react-app-de-webpack-pei-zhi/"},frontmatter:{title:"å¦‚ä½•æ‰©å±• Create React App çš„ Webpack é…ç½®"}}},{node:{fields:{slug:"/2018-01-08-mapbox-gl-js/"},frontmatter:{title:"3D GIS åº”ç”¨å¼€å‘ â€”â€” åŸºäº Mapbox GL çš„å®è·µæ€»ç»“"}}},{node:{fields:{slug:"/2018-01-07-the-importance-of-visual-appeal-in-web-design/"},frontmatter:{title:"ã€ç¿»è¯‘ã€‘è§†è§‰å¸å¼•åŠ›åœ¨ç½‘é¡µè®¾è®¡ä¸­çš„é‡è¦æ€§"}}},{node:{fields:{slug:"/2018-01-06-react-higher-order-component/"},frontmatter:{title:"React é«˜é˜¶ç»„ä»¶ä»‹ç»"}}},{node:{fields:{slug:"/2018-01-05-to-vim/"},frontmatter:{title:"å¦‚ä½•è®© vim æˆä¸ºæˆ‘ä»¬çš„ç¥å™¨"}}},{node:{fields:{slug:"/2018-01-05-d3-js-v3-data-driven-and-d3-force/"},frontmatter:{title:"D3.js æ•°æ®é©±åŠ¨ å’Œ force åŠ›å­¦å›¾è®²è§£"}}},{node:{fields:{slug:"/2018-01-05-create-a-redux-middleware/"},frontmatter:{title:"å¦‚ä½•ç¼–å†™ä¸€ä¸ª Redux ä¸­é—´ä»¶"}}}]}},pathContext:{slug:"/2018-02-01-fan-yi-react-yao-chu-xin-contextapi-liao/"}}}});
//# sourceMappingURL=path---2018-02-01-fan-yi-react-yao-chu-xin-contextapi-liao-2d0620f745ccdfd36a06.js.map