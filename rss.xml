<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[创宇前端 - 最酷开发者的技术分享]]></title><description><![CDATA[KnownsecFED Blog]]></description><link>https://knownsec-fed.com</link><generator>RSS for Node</generator><lastBuildDate>Mon, 06 Aug 2018 07:20:34 GMT</lastBuildDate><item><title><![CDATA[No title]]></title><description><![CDATA[怎么写一个高逼格的 README…]]></description><link>https://knownsec-fed.com/2018-03-25-ru-he-xie-yi-ge-gao-bi-ge-readme/howToWrite/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-03-25-ru-he-xie-yi-ge-gao-bi-ge-readme/howToWrite/</guid><content:encoded>&lt;h1&gt;怎么写一个高逼格的 README&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;最近一个项目从程序员变成了一个高级文档哥，好吧，我还称不上高级，但是我发现写文档真不是一件容易的事情，要怎么写的让人看的舒服、巴适、爽的不行，看完就想给你个赞呢？我也总结了一下写文档的一些感想，也不能说是经验，毕竟小弟还年轻，哈哈。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;编写一个项目的 README 就像是写一本书的序言一样，一个好的项目不应该仅仅只有一份高质量代码，同时更应该有一份高质量的文档。而对使用者来说，一份好的文档能够节省大量的时间。&lt;/p&gt;
&lt;h2&gt;国际化&lt;/h2&gt;
&lt;p&gt;要知道比如 GitHub 这样的代码托管平台，可是有着另一个名字，全世界最大的同性交友网站（技术基不说话），你的项目可能不止中国的程序猿在使用，一个好的项目，使用者来自世界各地，那么一份中英双语的文档至关重要。&lt;/p&gt;
&lt;p&gt;毕竟对母语的文档有更加亲和的感觉，同时阅读起来会更加顺畅。&lt;/p&gt;
&lt;p&gt;比如，Ant Design Pro 的文档：&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/read1-4b6d2b1df1b8e4d7ea09cd79dd8f6fa8-69fab.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 571px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 23.992994746059544%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsSAAALEgHS3X78AAAAiElEQVQY052QwQ6CMBBE+/8/12gKWkNPUKjQHiQx9GD7tCZ4w6CTTPYy+3aygg3lnPlHIsZIPwxcp0AzLBi3cI+PgiSl/AGXueeIWMPp5YJJG20La4V+s3DOoVTFpTFIKdFao6oaYwyHo8La/qcXiHm+vZcm7+mspW076tOZcZzwIeB92N2u+AnCA4aP276FBwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;read1&quot;
        title=&quot;&quot;
        src=&quot;/static/read1-4b6d2b1df1b8e4d7ea09cd79dd8f6fa8-69fab.png&quot;
        srcset=&quot;/static/read1-4b6d2b1df1b8e4d7ea09cd79dd8f6fa8-f161a.png 300w,
/static/read1-4b6d2b1df1b8e4d7ea09cd79dd8f6fa8-69fab.png 571w&quot;
        sizes=&quot;(max-width: 571px) 100vw, 571px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h2&gt;项目是干什么的&lt;/h2&gt;
&lt;p&gt;首先，要有一个项目名，不一定要霸气，但是一定要朗朗上口，不会读起来很拗口，而且别太长。&lt;/p&gt;
&lt;p&gt;比如说，chalk、react、vue、commander 等等。如果自己实在不知道怎么起，搞个随机函数，试试自己的运气吧。&lt;/p&gt;
&lt;p&gt;当然了，如果你有 LOGO 是最好的了，一张高清大图 LOGO 帅一脸，看起来就舒服有木有。&lt;/p&gt;
&lt;p&gt;就比如说这样：&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/read-e1a2a950d53723a391359effcbaa12fd-5922e.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 328px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50.91463414634146%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAAA30lEQVQoz2P49ev3f2pihv94wD8g/vPv7/8/f/+C+X+BNIj/DyyDHTD8+weUxoHxgb8geSx6GHAqBoL7X1/9n3V+1/8V63f+//Hz5/9N2w78n35i+/8rnx6jqENxIT4D3//88t9nT9d/zYS4/0WlPf+NYpP+226s+//gy2vSDAQBWLjtfX31v/niiv9GLtH/jaYW/l/x9ASKPFEGoodj0enF//Wm5f9PODT9/8+/v1HUEG3gf2gMg8C190/+W+yo+3/g+TUU8X+keBmmGEbvf3b1/y8CriPaQGTN6BahAwAiBgA9VE7NGgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;read&quot;
        title=&quot;&quot;
        src=&quot;/static/read-e1a2a950d53723a391359effcbaa12fd-5922e.png&quot;
        srcset=&quot;/static/read-e1a2a950d53723a391359effcbaa12fd-da01a.png 300w,
/static/read-e1a2a950d53723a391359effcbaa12fd-5922e.png 328w&quot;
        sizes=&quot;(max-width: 328px) 100vw, 328px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;或者这样：&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/read2-5d5e03cdc0fe4ed3a5042fed13b700f0-63e88.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 219px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 108.67579908675799%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAAsSAAALEgHS3X78AAAC5UlEQVQ4y51V30tTYRj+LpIIuukviC67ratuKkK3pJsghYx+UP5IgwizhGwLlUjWMmk/gjGwUIxiiLKWTrc53HSbOra5zU1U2qagt7qBMLedp/OdeQ477viDXng557zv9z3neZ7zHj4CNhiG4ZK/zxfybBZENVE/n0eB7YPW92t8EJQUmP0FfOSYAgfM93IsUGm/ULJPBCgqshdXYAGL4UURsLAlvYuJmWn8XU+JQMsYUpk0OtUqkKdynBlQoOnHV8Qi0eLK3SwsTjuuDn4E+fYKFTXXEVzwcy1qAU9IACwwRWm+cAiXmu+BNN8C6WvCac0L1H//ApnxA4j+OYjqCU6xYA872pDOpMtYEkh4Mjr0E+ZfJly4XQky1AHi/gwyrwdpq8WDxnpMj1owZZ3g1u7t7UlL5imnt7fR3PEa1SYtKkxdIIo6nJNdQcV9GYj2Gc5b+lCje48+raZIomQaxB7mix62Kt6ANFaBdNbhbO0NtHYpkUqmMDPvQ3VbC0gLa8WnxyBVl+FxuY/wcH88vKEALsqv4eW7t0isreFg2KaduPmoDpV37yCTTpfNaRlDp2MKBq0Ox0VLYxNSqVSZ7DLAhoYGdHV3Y31jA4FgENFoFJFIREhaSySTkMnl6O/vFySLPOTlbrAgPT090Ov1GBwYxOTEJMb+jGF8bFyU1nErRkZGYDQapSXzgJQBXWT5beHS4XDAbrdLp80Og8Eg7JUEDIfDiMfjgi9UilTmcjkOwGazCXN4KODy8jJOGhQwm80eDri6ugqTyQSdTseBcx8hEECQ/RButxtWqxV+vx8ulwuxWIx7PpLhysoKhoeH4fV6oVaroVQq0d7eDpVKBY1Gw72ot7cXCoWCY0e9PJJhqWTqVSaTwc7Ozv9LDoVCnOyTxrEMKZjT6cTW1hYSiQSS7ADTpH8En/wzvZrNZumxKR3MpaUleDwezM3NwefzSSbtzc7OYnNz8/Aj4GDjpMEcOFf+Ad3dIH4d4GetAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;read2&quot;
        title=&quot;&quot;
        src=&quot;/static/read2-5d5e03cdc0fe4ed3a5042fed13b700f0-63e88.png&quot;
        srcset=&quot;/static/read2-5d5e03cdc0fe4ed3a5042fed13b700f0-63e88.png 219w&quot;
        sizes=&quot;(max-width: 219px) 100vw, 219px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;再接下来，一个好的项目简介，能够帮助使用者了解他能够使用这个工具干什么，能不能满足自己的需求。一般来说，我们希望从简介中，了解下面一些信息：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;什么语言写的？Node、Python 还是其他什么&lt;/li&gt;
&lt;li&gt;这个项目的用途是什么&lt;/li&gt;
&lt;li&gt;最新版本信息&lt;/li&gt;
&lt;li&gt;构建、测试结果等信息&lt;/li&gt;
&lt;li&gt;Demo 演示地址或者官网&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;就像这样：&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/read3-31d573b50e7c98c1e9db00c5d1589cdc-48daa.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 763px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 23.85321100917431%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsSAAALEgHS3X78AAAA7UlEQVQY04WQzU7DMBCE8/4X3qBnJC4VhQNCQiqoggs8AwIppPmxE8duUv992FUDJ8RIo9GsV7O7LtbbSzbliu3ugc3TFevPFfcv17y+3/C4u+Pi9o3nD0VGiJH4BzOyFmXTUOmafTdQS8FgO5TuMceBUSvq4YCxgf+wBBfKeNTokdozaEd06SFEgg+EkIJiwDuHtRaXNPNoHWaOzNZjkz/1nVEIKan2NbKXSNlTdZqvVic11GJEpForJN2Z2YteUTYjXT/StB1yUGhjcN5TTNOcTjOYw5QmRdJiP0z2dMbyd3mTzBh/udR8Css93wN9f9smKdcrAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;read3&quot;
        title=&quot;&quot;
        src=&quot;/static/read3-31d573b50e7c98c1e9db00c5d1589cdc-48daa.png&quot;
        srcset=&quot;/static/read3-31d573b50e7c98c1e9db00c5d1589cdc-7a867.png 300w,
/static/read3-31d573b50e7c98c1e9db00c5d1589cdc-4af92.png 600w,
/static/read3-31d573b50e7c98c1e9db00c5d1589cdc-48daa.png 763w&quot;
        sizes=&quot;(max-width: 763px) 100vw, 763px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;对于我们技术 README 一定要各种徽章砸脸上，比如标配的 travis、coverage、npm 等等，给人一种安全感，如果你自己测试构建都没过，我用着也不放心。至于这些东西大家可以去这儿看看：&lt;a href=&quot;http://shields.io/&quot;&gt;http://shields.io/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;同时，我们要精要的总结项目的闪光点，有哪些特性是激动人心的，别人没有的，这是吸引用户的好方法。&lt;/p&gt;
&lt;p&gt;比如这样：&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/read4-181e1fda7e48c1f5dd2321a86a7feed3-c7da2.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 633px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 28.751974723538705%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAAAzUlEQVQY041R0Q6CMBDj//+GxG/RKBsMtqEgYIJsAwTqMROelNikabLc9Xq3IAwPYHGCFcuy4B+sdb8YNM0DbfvENE0Yx3HjMAxejbXoOgNLaq3DPM/7hn3f43g6g3EOzmPSGEpriCyFlBL59YZMKnpT0DqnIa/dbQLnHKKIIUkEhBCIGKPmHNdbAZGmeHadT+dc71OvCffWDowxuJBhmkkopX2KmMwZTyil9KZKKRRFiaqu/Rl2E64FZXknlqibBp+btrhX1db87VN+4Q3A/89CzoSeswAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;read4&quot;
        title=&quot;&quot;
        src=&quot;/static/read4-181e1fda7e48c1f5dd2321a86a7feed3-c7da2.png&quot;
        srcset=&quot;/static/read4-181e1fda7e48c1f5dd2321a86a7feed3-90aba.png 300w,
/static/read4-181e1fda7e48c1f5dd2321a86a7feed3-12a46.png 600w,
/static/read4-181e1fda7e48c1f5dd2321a86a7feed3-c7da2.png 633w&quot;
        sizes=&quot;(max-width: 633px) 100vw, 633px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h2&gt;安装及快速开始&lt;/h2&gt;
&lt;p&gt;这部分内容是是文档很重要的部分，通过这些步骤，能够让使用者快速的使用。&lt;/p&gt;
&lt;p&gt;首先，你要告诉用户怎么去获取以及初始化项目，比如下面这样：&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/read5-c02fca4bc88f9daae8ab30d3b087b1e2-95ce6.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 700px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 40.714285714285715%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABEklEQVQoz42S6W6DMBCE8/4vWKlpSlKOloTD+Lahme5uCEp/NKqlT2Mbe8QM7EAj5xkxZSRWIsQE5wN8iILzcVu7dS/ELHt8L8/Lxo4Nz92IfVHh8H7E/nBE1bRouwGXfsSZ4Hl74bUi7eX8oDQ+zx1GbeHZPCRBDPthQnGqUHzUUNrJA2WcMLHSJb7YjRM9ywhpFpO73s3E8Hq9IlLEW4wksVmt80SApbiPcCUpLyu3+a/IbOicEyyhtYa1DsYYUgvjFwx2gSJ8/AYdfzokMpc+USQ1GYpI8SYtaIrLcBSOF1Je9W/WjzLg5fUNx7JBWTX4qlucmLJGR/1y1MeeniGG3J/SRt40UQ8bW1+33+k//AB+HGuX4Bl6NgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;read5&quot;
        title=&quot;&quot;
        src=&quot;/static/read5-c02fca4bc88f9daae8ab30d3b087b1e2-95ce6.png&quot;
        srcset=&quot;/static/read5-c02fca4bc88f9daae8ab30d3b087b1e2-896dd.png 300w,
/static/read5-c02fca4bc88f9daae8ab30d3b087b1e2-9a461.png 600w,
/static/read5-c02fca4bc88f9daae8ab30d3b087b1e2-95ce6.png 700w&quot;
        sizes=&quot;(max-width: 700px) 100vw, 700px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;然后你需要给一个简单的例子，让使用者快速感受到使用它的好处：&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/read6-aa131217a7919e18d73181a70493c634-a072c.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 687px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 56.33187772925764%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAABNElEQVQoz51S2ZKDMAzj//9xewLlyH2QQACtA53OPrVsmRFOHiJLsosYI5TS8N6DMYau67EsM779iikleOdhfYDQHtp6uGHEECeqAT6MGKeEKc2HUCT6WS7RcYsHJ0IX0ciATnnUvUTL1dbMU4NM/gnFNC8wLYPsODrpoElloAikMuBS052Uy91BVv0JRVpXOCbQ3lv8PDREzVBfS5xvFU6XBpczR9OJrfvwVPmecFnhs+U7EVxrNJVBVUtcywa3iprcGpzKliJRL5XvSDfLqhcQZLvpOWVGWTK7DWcfTITN8PFYhikTUl6eHg1x3MMnRJpsRqBzGHccyjDvobUWjvZwq87BGAulNVUDrF/sobEONu8iYQiRVI2vmncr/QNkeQYTCj1NuqfhGAo+jE+r8ZjNv/gFPNlVtCddHP0AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;read6&quot;
        title=&quot;&quot;
        src=&quot;/static/read6-aa131217a7919e18d73181a70493c634-a072c.png&quot;
        srcset=&quot;/static/read6-aa131217a7919e18d73181a70493c634-1b896.png 300w,
/static/read6-aa131217a7919e18d73181a70493c634-c6a2a.png 600w,
/static/read6-aa131217a7919e18d73181a70493c634-a072c.png 687w&quot;
        sizes=&quot;(max-width: 687px) 100vw, 687px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;当然了，在这个地方，最好最直观的方法就是放一张 gif 的图片，吸引用户的注意力，同时给用户展示使用结果，比如这样：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/read-783a490f5dcb64a16f40a29a5114833f.gif&quot; alt=&quot;gif&quot;&gt;&lt;/p&gt;
&lt;h2&gt;API&lt;/h2&gt;
&lt;p&gt;API 是一个项目的灵魂，这是暴露给用户最直接的地方，当使用者有疑问的时候，他会第一时间去找你的 API 文档。&lt;/p&gt;
&lt;p&gt;对于一个 API 应该表述清楚的是：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;作用&lt;/li&gt;
&lt;li&gt;入参及每个参数是否必须，数据类型是什么等等&lt;/li&gt;
&lt;li&gt;返回值&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;如果你的 API 不多，那么可以放在一个文件里，但是如果你的 API 非常多，那么建议你将 API 单独放到一个文件里，这个文件留一个链接就可以。&lt;/p&gt;
&lt;p&gt;同时，如果你的 API 有相当多个版本，那么需要准备几份 API 文档，应对不同的需求。&lt;/p&gt;
&lt;p&gt;就比如这样：&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/read8-5fa4bb2bf7687439638e63eceb5c1c3e-bca50.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 735px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 11.428571428571429%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsSAAALEgHS3X78AAAAUklEQVQI112MUQ6AMAhDd/+7TjaZGgejCjMxWZMXWj5eMjOISKA6oMMmOpGPdcuy3eNJLsp5AxGh8oXSBHx21EPefoO4g1qPW9okfvz3vPeQeh7DApx/pVb/DQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;read8&quot;
        title=&quot;&quot;
        src=&quot;/static/read8-5fa4bb2bf7687439638e63eceb5c1c3e-bca50.png&quot;
        srcset=&quot;/static/read8-5fa4bb2bf7687439638e63eceb5c1c3e-41e4d.png 300w,
/static/read8-5fa4bb2bf7687439638e63eceb5c1c3e-f64ad.png 600w,
/static/read8-5fa4bb2bf7687439638e63eceb5c1c3e-bca50.png 735w&quot;
        sizes=&quot;(max-width: 735px) 100vw, 735px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h2&gt;版本变化&lt;/h2&gt;
&lt;p&gt;还有最好是能有一份 CHANGELOG 文档，对不同版本做了哪些修改，有什么特性等等，让用户知道每个版本干了什么。&lt;/p&gt;
&lt;p&gt;就比如这样：&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/read7-523ba0004ba966c0d5a0540a494588d4-b272b.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 870px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 66.0919540229885%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAABj0lEQVQ4y5VT23aEIBDz//+zra6oCChyMyUjbvfsS1vOmR0ubshkQrdtG5ZlwTRNNWZM8wytNR6jQowRHOd5/jk6Y6wAGWOg1xXramCtw1rXOWdc43zGHwAvoFzKc7O0OQFjrrmcLePX0fHPBO2HAcPjAaUU+n7AWDNl6JXBMC4Y1IppsXB7gtkzNp/gfBYir7J03nvR8C6RF+RKhZmRUhQtc04SMV1s5SxfIDegMKReA9kND4QQJI7jaBEE7Gh7IcQaB3zIOGJBiBk+lqbtBdqRlbVWylN3mT3LH/Hx+SUXjWqqXR/r+YTP0aKffY0Dszkq4zdA6jfKx0o03LYd/x2iX3NDx5LIUFVmy6Ixz5ee3KOleCHXt71Yga7WWl2Edgl2DzBbejanc841sEXs8xuT25X37/tZR+HlpczX7WSj9Srgrr4iMmPjeDHXd143souVHZuWn6Ddvu8CxlJZUmrWuc39Oj+ZS76i+Y6mL+XHOuJDNoRGZunWNTY1OOdbp56y56vevtRcxNw09nvJ30Ve9eYisuHiAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;read7&quot;
        title=&quot;&quot;
        src=&quot;/static/read7-523ba0004ba966c0d5a0540a494588d4-b272b.png&quot;
        srcset=&quot;/static/read7-523ba0004ba966c0d5a0540a494588d4-81012.png 300w,
/static/read7-523ba0004ba966c0d5a0540a494588d4-0f940.png 600w,
/static/read7-523ba0004ba966c0d5a0540a494588d4-b272b.png 870w&quot;
        sizes=&quot;(max-width: 870px) 100vw, 870px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h2&gt;FAQ&lt;/h2&gt;
&lt;p&gt;当然了，如果你不想回答一些非常重复的问题，我想你需要一份 FAQ 来记录一些常见问题。&lt;/p&gt;
&lt;h2&gt;贡献&lt;/h2&gt;
&lt;p&gt;我相信很多人跟我一样，能给一些知名仓库提交 PR 是一件比较自豪的事情。&lt;/p&gt;
&lt;p&gt;所以如果能提供一个提交 PR 的方式或者是途径，能够吸引更多的人来贡献代码，同时将贡献者，展示出来，我想会有更多人愿意贡献出自己的力量。&lt;/p&gt;
&lt;p&gt;比如在这样的列表中也是挺有意思的：&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/read9-f8dc2eaafb477c649a5e38fcd20165ee-8936b.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 920px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 19.021739130434785%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsSAAALEgHS3X78AAABGklEQVQY0w2PS07CAAAFObgHUA+AJhoEFUgEkU+hYrFQGmwpCC2I5ROgfBICRJAqQVZjF5OZ1Uuer25mGU5bDGY6o6nm2WJgCfTmNp+jBlZPoj+xqHd0xpMWna6K7ZgeBlZTpj+t0+yU0LUMq6WDLxQ+RTZTSNINaimEVImRSgeQlSiC6CdfCJBWIoRiF4ivEeK5IE/ZK+qDAg/hM0QlhKBFOfef0O638YnFIFIjg6TEKBtpFF3whi7RzCTVVo6aLXqdoFoTMAdlMtItjy8Bhut3nov3VLyHjWGJzFuc2XKET60kaU2aGLaM/pFHU+/IZ6+pGAlUI8J40WV/WPO73/F33LFzFzhzh/3Rxf35YvO9wt1v2bobDp7/ARiZC4VTx9xSAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;read9&quot;
        title=&quot;&quot;
        src=&quot;/static/read9-f8dc2eaafb477c649a5e38fcd20165ee-8936b.png&quot;
        srcset=&quot;/static/read9-f8dc2eaafb477c649a5e38fcd20165ee-ce236.png 300w,
/static/read9-f8dc2eaafb477c649a5e38fcd20165ee-53a11.png 600w,
/static/read9-f8dc2eaafb477c649a5e38fcd20165ee-8936b.png 920w&quot;
        sizes=&quot;(max-width: 920px) 100vw, 920px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h2&gt;版权&lt;/h2&gt;
&lt;p&gt;相信前不久 Facebook 的开源协议事件也是闹得沸沸扬扬，所以，做好在项目中，将开源协议证书这些东西弄好。&lt;/p&gt;
&lt;h2&gt;总结&lt;/h2&gt;
&lt;p&gt;最后，总结一下，对于一份好的 README 来说，这些也许够了，也许不够，但是，文档始终是因为使用者才存在的东西，所以使用者关注什么，什么才是我们文档的重点。&lt;/p&gt;
&lt;p&gt;但是这些基础是我们应该都需要的：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;名字&lt;/li&gt;
&lt;li&gt;简介&lt;/li&gt;
&lt;li&gt;功能&lt;/li&gt;
&lt;li&gt;安装配置&lt;/li&gt;
&lt;li&gt;快速教程&lt;/li&gt;
&lt;li&gt;API 文档&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这些是使用者都会去关心的点，应该在编写之前好好斟酌。&lt;/p&gt;
&lt;p&gt;这些只是我在做一些文档工作的时候，查看了挺多的文档，综合感想，写了这么多，但是实际情况可能会大有不同，所以具体是不是要这么写，大家见仁见智啦！&lt;/p&gt;</content:encoded></item><item><title><![CDATA[【翻译】2018 年 12 种移动端用户体验设计趋势]]></title><description><![CDATA[原文网址： 12 Mobile UX Design Trends For 2018 原文作者：Nick Babich 在移动应用领域，事物发展得非常迅速。为了能在移动用户体验设计领域取得成功，设计师需要有远见，并为即将到来的新挑战做好准备。
为了简化这个任务，我列出了 201…]]></description><link>https://knownsec-fed.com/2018-04-16-fan-yi-2018-nian-12-zhong-yi-dong-duan-yong-hu-ti-yan-she-ji-qu-shi/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-04-16-fan-yi-2018-nian-12-zhong-yi-dong-duan-yong-hu-ti-yan-she-ji-qu-shi/</guid><pubDate>Mon, 16 Apr 2018 02:25:20 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-ca43a41b3dc54e116f0d0a3a61b6a7d5-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAECAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHTleCGH//EABkQAQEAAwEAAAAAAAAAAAAAAAECAAMQIf/aAAgBAQABBQLZdlFuHp3/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAaEAACAgMAAAAAAAAAAAAAAAABAgARIDKB/9oACAEBAAY/AqVLmpHMf//EABoQAQEAAgMAAAAAAAAAAAAAAAERACAhQWH/2gAIAQEAAT8hqme3FnKPVigyaf/aAAwDAQACAAMAAAAQtM//xAAXEQADAQAAAAAAAAAAAAAAAAABEBFR/9oACAEDAQE/EKMX/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGhABAQACAwAAAAAAAAAAAAAAAREAMSBRof/aAAgBAQABPxAEAFWy9EzQ06QeZcUk0kTh/9k=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;【翻译】2018 年 12 种移动端用户体验设计趋势&quot;
        title=&quot;&quot;
        src=&quot;/static/header-ca43a41b3dc54e116f0d0a3a61b6a7d5-d6978.jpeg&quot;
        srcset=&quot;/static/header-ca43a41b3dc54e116f0d0a3a61b6a7d5-527f0.jpeg 300w,
/static/header-ca43a41b3dc54e116f0d0a3a61b6a7d5-9a7cd.jpeg 600w,
/static/header-ca43a41b3dc54e116f0d0a3a61b6a7d5-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;原文网址：&lt;a href=&quot;https://uxplanet.org/12-mobile-ux-design-trends-for-2018-5b4ce7e8445f&quot;&gt;12 Mobile UX Design Trends For 2018&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;原文作者：Nick Babich&lt;/p&gt;
&lt;p&gt;在移动应用领域，事物发展得非常迅速。为了能在移动用户体验设计领域取得成功，设计师需要有远见，并为即将到来的新挑战做好准备。
为了简化这个任务，我列出了 2018 年最重要、最有影响力的 12 种趋势。&lt;/p&gt;
&lt;h2&gt;1. 简化用户的操作&lt;/h2&gt;
&lt;p&gt;当我们带着某个特定的目标，与应用程序或网站互动时。通常，我们花在实现这一目标上的努力越少，体验感就越好。&lt;/p&gt;
&lt;h3&gt;线性用户流&lt;/h3&gt;
&lt;p&gt;线性用户体验设计，是具有一个特定的开始、中间和结束的用户体验设计，允许用户每一步完成一个动作。线性用户流之所以对于用户来说很好，因为它可以很好地估计完成任务所需的时间。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/02-7b513e8d36adf0dd0c0c73df66ea99f5.gif&quot;&gt;
（在 Uber 打车的过程就是一个线性用户的例子。）&lt;/p&gt;
&lt;h3&gt;逐步的信息披露&lt;/h3&gt;
&lt;p&gt;当你的应用程序拥有大量的信息或操作时，你就不需要一次性展示所有的内容。设计师将使用技术让信息逐步公开，这样使得信息或操作只在用户需要时才可见。渐进式信息披露可以减少用户的认知负荷，并提高用户对界面的理解。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/03-ae3eaca77dfdb3d4f69d2dbe7a7aef86-a7a2f.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 667px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 74.96251874062968%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAAEPklEQVQ4yx1T+VOTVxT9/pMu0xlbTMc6tMSCIDAilE0pJGRP2JECwxZAwbBk+ZCwCoFgCEsADTshhDUIiKilWmSqM2BdaEel21hbZ9pf+t3T1/5w5p535t3zzsy7l2uSiqkj5zQZq5KpXhdK5sgjZI45Suboo2SKFrEaQLXRx0hi3SaJ/QkpunZJ0rVHUgaJbY9S7d9TSt0cqfINJCtu/4dzfhVJK/YM1PIqmLJCYQp+B6aI92EK/w/vwRz+LgynPsD55lHYrvNo6zcgqWMfyZ2PIO3cwbmuA8RXz1BcmgYJ2ZUCN1oupenGbLj0aqrRF5PNmEcNRjN112dTnzmTnHwx9VsN5BlroiWvjbxTDdQ9sUY2t5u6Rvqp0rVNBfZNKmqcgaLhhsBtZrOEpSmYd9lookwOt6MJy95JrM0OYnG0DyvjTvjHHZgb6MTCYAf8I53YcF9h9QoWhzuw4raxu0N02++BZeyuwPm1oeTrtmDI3ko9dfmYn2zFel89Zq25WGjJw2JrHnzWLMxZM+FtTIOH12CW18Fj0WHSrMUUz/Sm8zTfUYj979YEbrpcQztbi9iaddD81FU8/GYaG84LmGvOYchlxqzBmgFPYzo8DTpMmTWYtmgxzWv/55NGJWYsahqrV+C351sCt7MySn+9eoBbPgc1Nyrhc1/ERk8l5i9nYZEZLjdlY45Pg5cZ+BoyMMtSzRhVmGMJvQwedvZdzqCZOiVePloWuL8Pd+mnvZuoyFVRRU4KHt6dwHhXHgYb5HDxSgywR/p5OfrqpXCZZRi2KDBilGOgTsJ4Kq4ZZbhmUZDLyHrvuAXu6e4aLbo7UZ4uJYs+H0vzfZBcD0O04xgiLgcgYSgQCYNiRLUEIqZbhHhnIKL4j3Gm7SgSnJ8hmhchrk1EMc4AONdrBW6V/dD26gR6+BJa9/WgzVKJtM4QyLqDcc56HDqHGBpHEGJNInx55RNIeo7jjOEI4ptFSLn6Kc6YjyG2RURxdhFcN40Cp89Pp+ryAlwqS6f2xiKMD7aiLicRFeoI6Bkq1OEoV4WhTBkKvTIMesaLZSdRqghFiTwERYwXykKoUCpGc22uwMVEBlNSbCTiwsWklpyFTp4IWdwJqJNCkBobBEViMLTJoUiThEEeL4YuOYzpYsi+CEL8iQ+RGByAxM8/origI1CejRS4XHUSZaqSUZqTT3V6PSb7m2E5H8/WMBq16VEwaCNRzVJeZIlq1KdQq41AjSYcBsZrmG5QsaqJoGrlSTitJQJXX6Ol3nYTFrwu2rk1gB++ncEdtrPr/VW40aPHUkcRfK0FWO4qg9+uxzqb0RWm3xq4hI2+Kqz3VjJcoI3eCjzZGha4vJoIWva04PH2CB0+9uP5g1W8PtjGz89u448f7+F3xn99dhdvD3fw+sU9vHlxH78cfI23bHbfvLyPP1/t4HB/k/weG57uLgj/AotS/KHx7O5oAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;03&quot;
        title=&quot;&quot;
        src=&quot;/static/03-ae3eaca77dfdb3d4f69d2dbe7a7aef86-a7a2f.png&quot;
        srcset=&quot;/static/03-ae3eaca77dfdb3d4f69d2dbe7a7aef86-9f8ae.png 300w,
/static/03-ae3eaca77dfdb3d4f69d2dbe7a7aef86-55498.png 600w,
/static/03-ae3eaca77dfdb3d4f69d2dbe7a7aef86-a7a2f.png 667w&quot;
        sizes=&quot;(max-width: 667px) 100vw, 667px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h2&gt;2. 手势与动画配合&lt;/h2&gt;
&lt;p&gt;随着 iPhone X 的发布，设计师面临着新的挑战。缺少了物理 Home 键导致了这样一个事实，即即使是与设备最基本的交互也是基于手势的。这对设计师来说意味着什么？这意味着设计师必须更加注意手势。
如果你想了解基于手势的界面有什么挑战，请阅读 Don Norman 关于这个主题的文章：
文章指出了与基于手势的交互相关的关键问题，如可发现性和可学习性问题。为了解决这些问题，设计师将重点放在了运动设计和微互动。&lt;/p&gt;
&lt;p&gt;使用动画的目的：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;为了弄清楚哪些交互是可用的（动画提示）；&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;/04-447d9657d4c668033060f55084a25c66.gif&quot;&gt;
（动画提示与文字说明配对。图片来源：材料设计）&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;为了阐明 UI 元素之间的空间关系（动画转换）；&lt;/li&gt;
&lt;li&gt;提供交互反馈。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;/05-ab4652313c968a2e3d9d153d82c16bcd.gif&quot;&gt;
（提供反馈和阐明空间关系。图片来源：Shakuro）&lt;/p&gt;
&lt;h2&gt;3. 以内容为中心的体验&lt;/h2&gt;
&lt;p&gt;管理良好和易于访问的内容是使一个移动应用程序吸引其目标用户的原因。设计师可以在 2018 年可以通过一下方式将内容保持在前台和中心位置：&lt;/p&gt;
&lt;h3&gt;清理信息&lt;/h3&gt;
&lt;p&gt;消除视觉混乱和提高理解是当今许多 UX 设计师的一个流行目标。设计人员删除无关的信息（噪音），并优先考虑相关信息（信号），将内容放在首位，并详细阐述清楚的视觉语言。
去除所有的视觉混乱可以帮助你集中注意力于你想要传达的信息的核心。&lt;/p&gt;
&lt;h3&gt;清晰的视觉层次结构&lt;/h3&gt;
&lt;p&gt;让 UI 元素的呈现有一个清晰的顺序，会使内容理解起来更加容易。强烈的视觉符号（比如按钮的对比色）是用来指导用户使用在某些交互元素或基本信息的。

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/06-92baa4dc59652e69bf8bd1f2c7999486-b78f2.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 213px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 199.53051643192487%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAoCAYAAAD+MdrbAAAACXBIWXMAAAsSAAALEgHS3X78AAAGVElEQVRIx5VWeUyURxRf1NYj0agcSlFOxVr9Q0IVNVWpJa2aKohHbEVar0qNII22Nk1MTG1Fq+JNY0JFVHYBaxVwubRarxqPxtSj2IjILtqFhWXPb1n2+vXN7H7rLrtqnOwvb+a9N7/vzbw3syMBtZs3b2L9+vVYsWIFVq1ahZUrV3KwfiCIdhFsnlwuZ1SQ3Lp1CyNHjsSQIUMQHByMoUOHIiwsjMtBgwYFBPMNDQ3lYL5MMt2pU6cg2bBxIw0GY/w7YxEbE4242BiMiR/N+5EjIwgj/BATHYX40aM8GPv2GAwj4kWLFkGSnZ2NgYODERYRg9C3ogiRCAmP5P2wiGhClB+YjfmIYH6DhoYiPX0+JKuy1mHB1Bgcy52Gg2umoCCLsCYJBV9McvWzprqlN9y6NZNxiOYU5byHFSnx+HDWHEgyVq5F/rJxwMU1sEtTgfIFQM2XQPVaoCwdkM0DSlO9kAZIPwbkWUDF53D+lgn8vQeydQlITpkFyTIi/GHJeOBMBjRH0qArng+99BPoSzOhL06H7mgqIe05itOgLZoH7fFF0B1fDE1RGhynP0Nh1rtE+BFFuCwTO37cAjiM0Koew9SugEn9BMbWJhjammmshFGt8IDpzJqnsHQ+RRdB6FACNh2KCwuQnJwMydKlS7Fn7z5eQ+qOThgFCwwmM3QGAe2dOhjNFmj1Rmi0BnSS7CCd1e6E2BxuKSstx4wZMyjCjAzs3rWLK+12G/yb0wteOqeTfg7YbVaukUpLvAh37+ZKq9VKTk4PHA4Hl2JTq9Xo7OxEV5cFNpvNHYSdy7KyMiQmJvoSMidvQh4Lyda2NlSePYs9+/fjcVMjBMEMDS29u9tKH3URlpeXY8KECT0JrT6LVbWqIK+tRd5PO5G9Ppej7ORJ0rdCo9FCpzN4IiwtLcXEiRN9CZnRZNThSeNd3Lt3G3Xnz6Ow6Ci+37Ydm7dsxdfffod9BwrwpFlBS9dBq9V7li6VSl1Z9iZ0OJy4cf0iDuZvRtGRA6isrsUvxSdw4OfD2LptB77a8A2OHiuhCNWcUBC6PBEGJLTbHdB0tKHh3g2onj1Gw6NHqD13AYcLi7B9Zz4nLTp6AgrlM5iotFjSREKZTIYpU6b4J4UTk6ONHC2WbhhNAk+CiSdCi2ZFC+2d3rPPIuELkmJzZ9fpUy6BmlgJ3mWTkJDw8rJxgfbWrIWNatThZ3sFYc/C9sBd4M7XJRSNr9NYYl64hyaTiY5VF50ASobR6BmzrTAYDLwv2kWbxWLxFHZSUpKLcJf7cmijI9bc3IyWlhYolUo0NjZyySYpFAo+fkSlxPrMp6GhASqV6mV1GHjJ7e3tdCq0L10yI3zlbSOWR1NTE4/OESA53kfPj9DWI0JGwI6jb/09vxnFK+6FhB0aDdS0PLW6HXpKApvIao+dHCbNZkoIrcIkCHTbdMJK0bE5rJWUBLhgjXq6QdrV0Gk6IBj0fvvVbRbg6LbASaQWwUSbboOWfP0i3OUm1ND/yTPBBpXZhv9MVij1XWjWmaFwS6XBghbCU6OF7N007kKHuduX8FP6kzqwdw/aSbmw8h5SK+9jftUDpFXdx+LqBmTW/4uMuoccmfUPsaSmgWwPuA/D3DN38Y8AnC4vxbTpbsKCvfm4Y3RiXNF1TJLe5kg8cQszf72DhfL7mE2T5lbcpQ88wPukSyxx+UyW/YUxR/6E/KkJFeWy54SHDh7kYV9uFVDRYoL8mYCz5FRJ/TNKI9dVuPtMx2xnyaeS5O8qE5975vRpTGdLXr58OVavXo1r167hQm01LtXX4HJ9La6cr8OVc3W4SpKNGa66dcx2+VwtLtXV4A/C5UuXsGnTJnwwcyYkubm5kEgkHgT17u0zdiEIkqAgP32fN970Gc+ZM8dF2JtI+vTpg169emHAgAHo27cv7zM9k/369UP//v19dMxn4MCBfB7TMXDCnJwc/vqMjqYHZmQkRowYwV+0rM8kA9OJem+IOjY3JCQEs2fPdj042WDUqFGIiYnxIDY21oO4uDgOb53owySzDRs2zEXIImRv6/j4eB+yqKgoT2Q9waIXyRhYMMOHD8esWfQ+rKqq4g/x8PBw7hwREcEl+yJ7uAcCe6iLvqI/22d2r0pYDRUXFyMlJYUfHW+wC/NF6OmXl5fHb57/Ab0f4u6c/XzJAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;06&quot;
        title=&quot;&quot;
        src=&quot;/static/06-92baa4dc59652e69bf8bd1f2c7999486-b78f2.png&quot;
        srcset=&quot;/static/06-92baa4dc59652e69bf8bd1f2c7999486-b78f2.png 213w&quot;
        sizes=&quot;(max-width: 213px) 100vw, 213px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    
（对比色用于主要调用动作按钮。图片来源：谷歌）&lt;/p&gt;
&lt;h2&gt;4. 全屏体验&lt;/h2&gt;
&lt;p&gt;随着三星 Galaxy S8 和 iPhone X 的发布，无框设计成为了一种潮流。更多的屏幕空间可供用户使用，他们希望拥有全屏体验。&lt;/p&gt;
&lt;h3&gt;高清图像和视频&lt;/h3&gt;
&lt;p&gt;你的应用应该提供全屏体验，这一点很重要。内容质量将直接影响用户对应用程序的期望。图片不应该在移动屏幕上出现像素化。

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/07-1bbec99b3cc4c1f73b3bf8def28c8154-89095.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 62.75000000000001%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAADhklEQVQ4y2XSW0wTBhTG8b5ue1h8WELii1mYUQTM5gwXYUALLdDSGxRKoch1FAZYkQpSoLAiDLmJ5aIgBRIMk06iXEoLlMmicxqXTYNbBjJwc3NTN7eZJUu4/NeRLEvml5zX35eTcwSZhgIkUhnR8VK0+nSMxiJ0SWp839iDn98+9vn5o9WoSNGqEEuiiIwKI0p4CL1ezb3FRf7J5uYm/0bQ2NmNJiWJTEM+nfbznGxuIvhgMDt2vMZOn528/NIrBAYEIBSHkJkTR26eHK1WRJoumvn52W1kY2PjP7A6T8el6gKOKEXI5VLqm1tISUnD32cXEbv98fPdi1YlIzjsTWoqC3AMnKa+2oBSEcqcx/0iOFZnxN14nIX2OkwaKYXvFXDWdo7mIyZ04SEkKDKwWszeFeU8+eITnl+f5eZYL9L4t3C7nS+Cx9M0zDVW8HVvC56GchQxETj6u7jnGKLLoEUmEvNBSwtFuRpu9LXxeU87nw7akIj2Mzk5vo2sr6+ztbW1PQJzjp7JYwZW7afoKUwlKGAPnuEuHJYyOg06ynRKrHXVZGhjWWit48ueNtZG+jmsFjHlnOL/Eez3240hIog7NgsXj2UQeSCQ21MDuDpaKU8QYy7MwNZ2ijjJ29iKU5mxVjPTbkWvjOTKmIO//nzOs6c/8/uvT2Brwwu+7kOo76ucyYxgsSuLkQY19h4bg+ZS8qVCihv7MA84MXWPcXbUyfD0AiPTVxm+7KJlaBJThwPD+3b05Z0craxHcK09GE9zGHf7hPw2GY+nNwmVMIFiWRSFibGkN4xQ6/qOqoll6t2rdN96zPDiM2bv/4FtfpWC8zfRNLpIto4Tm1qCYONjKb+4VKx9JOPxRAKjTXGoQ0WY1dGkR4UgzS6nafwrqi7cwHThFsWDn1F/5S4NMyuU2K9RYnMx5L6DZeAq+uJaBI8+DOepM47Vi9H8dFnIjE1JRWIlpfHhZEsOocoz0+lcotaLnT53CVPXLMaOabItvRxMqeSd1BpGPYv0T9ym5MRJBJ4zIq7bVd4jSJmziempScWa248xScO7yfEkFuRT0tyGsdWGpTKf3BMVKI2lhGgUHJDL2RUiIVBbS5230FTlBb9ZXmVl9Xu+XXvI8soD1h48ZOn+Ej/8+Ii5+XnC44VEKGOISY4lSByOxPs+iqwEFDlyErKkyA7HEZmsIL2siaKjFfwN7qGlZOazobAAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;07&quot;
        title=&quot;&quot;
        src=&quot;/static/07-1bbec99b3cc4c1f73b3bf8def28c8154-89095.png&quot;
        srcset=&quot;/static/07-1bbec99b3cc4c1f73b3bf8def28c8154-f17ae.png 300w,
/static/07-1bbec99b3cc4c1f73b3bf8def28c8154-8b9c0.png 600w,
/static/07-1bbec99b3cc4c1f73b3bf8def28c8154-89095.png 800w&quot;
        sizes=&quot;(max-width: 800px) 100vw, 800px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h2&gt;5. 鲜艳的色彩&lt;/h2&gt;
&lt;p&gt;颜色是设计师工具包中最强大的工具之一。颜色可以吸引注意力，影响用户的情绪和行为。当谈到移动应用设计时，这绝对是充满活力的颜色。&lt;/p&gt;
&lt;h3&gt;颜色作为功能元素&lt;/h3&gt;
&lt;p&gt;色彩不仅用于美学，而且也将成为功能体验的一部分。例如，设计师将使用颜色来区分不同类型的通知。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/08-9ce962b3ecf145d7bf36f41cd70c742e.gif&quot;&gt;
（使用颜色区分不同类型的活动。图 creidits:Jae-seong）&lt;/p&gt;
&lt;h2&gt;6. 情感体验&lt;/h2&gt;
&lt;p&gt;在 2018 年，我们会看到更多的情感智能融入到移动体验中。当用户完成特定动作时，EI 不再是用户完成特定操作时显示的动画效果。 EI 是使体验更加吸引人和愉悦的强大方式。&lt;/p&gt;
&lt;h3&gt;更好的情感表达方式&lt;/h3&gt;
&lt;p&gt;表达情感对人来说是很自然的。即使在命令字符串界面的时代，我们也会使用表情符号来让其他人了解我们的感受。

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/09-f80982dc871ace0e2379494c4e9a4448-30e2a.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 630px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 66.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAADkElEQVQ4y32SaUyUVxSGPxYVEIGZgYmFkUWwLCOLLEOhGZBNEVBEcEHEcdoYaKtFDSJQILIIo21ZRgqM0ESqjUgBBURamwpRMBVDA6VtKE1TBAuUpqQ/8AcJ5Onn9G/Tm7y55yb3Puc951xhnZk55qZmCILwv1q/fgNm4l2l1zaOHzlA9sm3uFCYz6ksDaWJntwuSuBxTzmCmYkplta2+AWpiIyKISk5hYxMDdnvniK/sAh9fQPv5ZzFREwaqQrkjl7HV/U67leX8UluFnlFheiKz9JXd5ruW5UIUqsNOMjsefTkKa/WysoKa2trxnj2xZxxf/LtMyysLGmrreLvsRHmhh8y0/c5o4Zyzp9MJy09janxYQzNTQhyqQSrdWZ03O01Pl5aWuK36Wnm5xf48adJBgYficARnF22MNHXxZ8T48yNDPFLZzNjN+toLD/PgZTdtLTeQKvVIlhYWBp7dLXxmhG4/PIli4uLPB15xvOZWb588DVj3/+Aj7cnI+2tTA88YOLuLUZv1DDceJFWXR4lp49TrashIibuFXCjEZj/QfG/wOVlZmZfGOOFhT+Ynn7O7O/zRIar6KipYqhBR+elAjoqcnisz6OruoDrZ45Rqt2P347tCCaCKebmZmRoThgha6urrIr6Syx9amqKycmfae+8w+5INVM9XYw1XWG8tZFf77UzUHeB3g9zMbyTSoAI8/D1QVA4u7LZUYGTixuHMzLZKdoOVL1BQFAwWz3csbGzQ+HxOhrt2ww267n3UQmdpecYqC3lYW0e/XWF5J55HxelH1LpJoQq3WVyi0uROsj/8/9ZbtxEbOoxjmTl8E37TQZarvLFxXP011cy1FLJtcp84g9pCI2Jx9NXiWAwNHGpvIztLo4oJNZIJXZY20qQiQlkcjnb/HawM+UoofEp1NXqmezv5bu264z2d/DZ5Xxxwsl4+CgJjohCk1uC0H1/kFR1EAobCyTyzTi6uLLF3R2FqNdc3fAMVBESm0RQdCLJGVraDHX0fKrn44pigkMCkcrtRWd+xioSMrMRbrd3E+ksRWprg5WdDInUXuyFTDzb4eQgw8XLF++waMIT04xg/4g4YtRvEiIOwFqsZqu3EnXiQaL3H2XXwRMIDZUV7HWyZJerlDR/Z7Ji/clJCqYgLZyyzChCw8NwC1ITtidVdJmAT3g0jh5euCoD8AoOQxW3D/XeQ0TtS2fPYS3/AHiVQksjYOoIAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;09&quot;
        title=&quot;&quot;
        src=&quot;/static/09-f80982dc871ace0e2379494c4e9a4448-30e2a.png&quot;
        srcset=&quot;/static/09-f80982dc871ace0e2379494c4e9a4448-36c5f.png 300w,
/static/09-f80982dc871ace0e2379494c4e9a4448-38dc5.png 600w,
/static/09-f80982dc871ace0e2379494c4e9a4448-30e2a.png 630w&quot;
        sizes=&quot;(max-width: 630px) 100vw, 630px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    
（1982 年，斯科特•法曼 (Scott Fahlman) 创作出了著名的基于 ascii 的表情符号。）&lt;/p&gt;
&lt;p&gt;在移动设备时代，我们有机会分享更广泛的情感。面部识别将被用来提供更多相关的反应。其中一项技术是 Animoji - 动画表情，它通过 iPhone X 相机对面部表情做出动画表情。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/10-cc9bfaa6ef139d9fed8eefd4fd6da28f.gif&quot;&gt;
（Animoji 是一个与他人分享我们情感的机会。）&lt;/p&gt;
&lt;h3&gt;更自然的人机交互&lt;/h3&gt;
&lt;p&gt;更多关注手势会改变我们与应用程序的互动方式。例如，我们喜欢某个内容。不用点击按钮或图标，可以通过在屏幕上绘制“心形”图标使其更加自然。
&lt;img src=&quot;/11-425ff4fed8314f42b92147a5b3388129.gif&quot;&gt;&lt;/p&gt;
&lt;p&gt;（图片来源：维吉尔 Pana）&lt;/p&gt;
&lt;h3&gt;模拟用户界面反馈情绪&lt;/h3&gt;
&lt;p&gt;作为人类，我们与我们使用的所有产品建立情感联系。因此，当我们与产品交互时，我们期望有某种程度的类似于人类的反馈。即使我们知道这些产品不是人类，也不能感知情感，我们还是希望他们可以这样。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/12-5f260bb67f447642fe774b0f17fb9b62.gif&quot;&gt;
（应用程序模仿人类的反应时，提供对用户输入的响应。图片来源：Adip Nayak）&lt;/p&gt;
&lt;h1&gt;7. 视频的优势&lt;/h1&gt;
&lt;p&gt;2017 年，视频作为一种内容营销形式的流行激增。据 Hubspot 统计，78% 的人每周在线观看视频，55% 的人每天在线观看视频。&lt;/p&gt;
&lt;p&gt;在移动设备的上下文中，设计师将为媒体调整视频格式：&lt;/p&gt;
&lt;h3&gt;适应短时间注意力的视频&lt;/h3&gt;
&lt;p&gt;人类的平均注意力跨度从 2000 年的 12 秒下降到 2015 年的 8 秒。新的内容交付方式似乎是适应变化的结果。这样的改编版本创造了 360 度视频和 Facebook Live 等格式。在 2018 年，更多的用户和企业将使用这种格式来提供重要和及时的信息。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/13-21d0825c6f46df9fad67c8b3b6bc46aa.gif&quot;&gt;
（Facebook 视频直播。图片来源：Buzzfeed）&lt;/p&gt;
&lt;h3&gt;调整视频以适应纵向&lt;/h3&gt;
&lt;p&gt;据 Luke W 介绍，94％的时间手机用于纵向拍摄。 这意味着所有的内容（包括视频）都应该适应这个方向。

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/14-65be683835e2497be8a71465441f8d66-b0d4c.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 750px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 53.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAAB4klEQVQoz3VSz2sTURDeSz2pIDTRm5IiFEsP9iZ4FET8C/wrvBaSP0ANJKUEoodEEIIgUglIIB48JacctCDY5BAWmmS32WTXJJv9vfv5ZuquTawfzJt5b+Z9b97MSBCIouhSCcPwUh1F53oddCZdJCDYto3TwSlUVYF6pmKkjDAcDdkea2Mo6giD4QCTiYb1ZAiSMPnlIAhYyPZ9n4X2sX2+J1+Q+IjjH0JatPEUsiyj3+9jOp3if7AcA0vbgGXrQn5hbp7BD9yVTJnwsPQSmcwWdnbuoV6v/wlYrQ3VjeD4Gj59fY4T+XPsTTLlDL/9/IDS+0fY3t2EJEk4OvpI18TrY5jWRGSkc2AYBjj+/gOvCvsovHuIF6VnePO6gm73ZLUpXfkLCtUnePz0Ae7czqD6tspOP/BEnTyEUQDP82AYBmq1GjY2ruDu9i2k0jdw7ep1NBoNzOfz1RrmcjmkNm+iUq2g2WzCdT14Qjgz0Qi6oGkaOp0O0ukU/4Rkb+9+UvfFYvGXsN1uI5vNotVq8aHrukmA4zgwTZPtXq+HfD6Pg4MiisUiyuUyFEVh32w24wmR4oEl6LrO36OxWCekmJj4Iogo1kmX45bTbNFgx5prKcgpY9J0tj6ny+WS71qWxfo3sagZmAGSSg8AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;14&quot;
        title=&quot;&quot;
        src=&quot;/static/14-65be683835e2497be8a71465441f8d66-b0d4c.png&quot;
        srcset=&quot;/static/14-65be683835e2497be8a71465441f8d66-255ed.png 300w,
/static/14-65be683835e2497be8a71465441f8d66-20854.png 600w,
/static/14-65be683835e2497be8a71465441f8d66-b0d4c.png 750w&quot;
        sizes=&quot;(max-width: 750px) 100vw, 750px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    
（  图片来源：卢克•W）&lt;/p&gt;
&lt;h2&gt;8. 生物授权&lt;/h2&gt;
&lt;p&gt;利用基于生物识别技术的应用程序可以绕过对传统登录要求的需求。使用生物识别技术，所需要的只是特定的生理或行为特征，例如面部识别，指纹或语音识别。&lt;/p&gt;
&lt;h3&gt;更多的人将使用生物认证&lt;/h3&gt;
&lt;p&gt;生物识别认证并不是一项新技术。现在很多人都使用生物认证来代替密码。据苹果公司称，iPhone 用户平均每天解锁设备 80 次，而 89% 使用 Touch ID 解锁。在 2018 年，生物识别技术将更加普及，我们将看到更多的生物识别技术用于身份验证和身份管理。将这种技术应用到他们的移动应用程序中，还可以提高终端用户和企业的安全性。&lt;/p&gt;
&lt;h3&gt;Face ID 作为 Touch ID 的替换&lt;/h3&gt;
&lt;p&gt;在 2018 年，我们将使用一个最受保护的，同时易于使用的对象进行身份验证——我们的脸。面向 iPhone X 用户的 Face ID 有机会成为未来一年最自然的身份验证方式。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/15-b4b725080dff79ef3ccf522ac1b87493.gif&quot;&gt;&lt;/p&gt;
&lt;h2&gt;9. 对话设计&lt;/h2&gt;
&lt;p&gt;2015 年 comScore 的研究显示，普通用户只会经常使用大约 3 个应用程序，其中至少有一个是即时通讯应用，人们喜欢聊天。这就是为什么在 2018 年，由人工智能驱动的聊天机器人和声控助手将成为热门趋势。&lt;/p&gt;
&lt;h3&gt;聊天机器人作为助手集成在消息传递平台&lt;/h3&gt;
&lt;p&gt;最有可能的是，我们不会把聊天机器人作为常规 GUI 体验的完全替代品，但它们将被集成到消息平台（比如 Facebook 消息）中作为助手。企业将与客户进行实时的自动对话。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/16-c4beff7b6947c211e8cc1f7872bf9b63.gif&quot;&gt;
（图片来源：Isil Uzum）&lt;/p&gt;
&lt;h3&gt;更复杂的语音助手&lt;/h3&gt;
&lt;p&gt;图形用户界面并不是我们今天与应用程序交互的唯一方式。自然语言处理和计算能力的显著进步使得使用不同类型的界面语音成为可能。2016 年，谷歌表示，大约 20% 的移动搜索都是通过语音激活完成的。很容易看出未来几年的下一件大事将是声控接口。语音激活的交互作用通过消除类型来提高用户体验，这也消除了应用程序用户的另一个潜在的摩擦源（因为人们必须学习使用应用程序）。&lt;/p&gt;
&lt;h3&gt;文案的重要性&lt;/h3&gt;
&lt;p&gt;设计人员和开发人员之间的会话接口的流行将提高对这种接口类型的重要性的认识。因为聊天机器人几乎完全基于用户和机器之间的文字交流；每一个词都要精心挑选。&lt;/p&gt;
&lt;h2&gt;10. 高级个性化&lt;/h2&gt;
&lt;p&gt;个性化用户体验将继续成为 2018 年的热门趋势。&lt;/p&gt;
&lt;h3&gt;根据用户位置提供内容&lt;/h3&gt;
&lt;p&gt;由于移动设备是与用户一起旅行，所以安装在设备上的应用程序可以利用位置数据来提供与用户当前位置相关的内容。这使得服务对周围的环境更加敏感。一些像星巴克这样的应用已经利用这个特性为用户提供特别的服务。在 2018 年，我们将看到更多的应用程序使用这些功能来改善用户体验。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/17-1a51faa61024e2280aeeb5f0df51b182-5d1ec.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 600px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 64.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAACwUlEQVQ4y1WSW1MaQRCFN6n8gaTK3DRENIiwKii7LCx7vy/LRRQVFBAvEE3KyntUTF7zmh980jNQSeXh1Oz0znzdfXqE2dNPCIKA9R0Nq2IVH/MVfCpoyO6ZqNhN7FR8LGdlvtf8DnKSjaIaQnXbSG+p/PyqqGJzW0KrvQ/henpLwOdY365xINOHzTLs5AR+6xSN7hh+sw8zOoJHa7t3BSM85ElTBGP3Nksucjsy6kkDwkl/AOHZizkoW15krGKNDmaKBjZI2V1zvi/oFNMJpvN9ds/CdtmHpDeQJ2AYxhAeZj94y3nZgag4SIvzNlI55T+xGBNrkyXYLgfYU2OUtRgaWZMT9+B6IYTHBXB09w2z379gBF0cnk0RHwyRdM+5Z3nJmVdXMLAleyhWQki1EIoWQTUiWG4T2VwBlu1RhY9PHLhLP2UrgWK3kByewyEPrfgYNe8AbqMPj9QkPw961+gPP6Pbu8BxbwzNJKBdx8aGCN2wIdwvgGxSb9Z2oZPhzHwGc5IeDeUCB/0JToY36I9uMBrfYjCacg1HE3SPBhiNrpHJ5FBR9X8VMqNTeYWDmkeX6PQmaB9fon/+BYcnFxhffcUlaTCcYDK9w36nB8etI47b6OwfI53OoKxUCfgw48CNosk90v0uwtYZAmoxaZ/CDTuwnAb8cB9B2OaKojY8rw7bCuCQXK+B5ZU0ZFmhlhfAYjWiqUVQjASqWYdm1WHYCTQjhEE+6UZAawCLxECeE8FzYx7T6dzS2xRKUpmA94/8YVetJqpGHTUj5kbrVgTDYoZHsO0QDgOQfIIw2RSv6QFKVRcSDfTV6xWUSgT8fj/jQJNGr1uUkWQykLUA2dHfatjqkkwzRKXmo0jvVpRM7KoBXi69hyRx4LxC5gOrZl7R/KK3EPtmcJPaq+k+ZNVFoWxDlC2SiZLOgO+oQhl/AEjsxIaQXafAAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;17&quot;
        title=&quot;&quot;
        src=&quot;/static/17-1a51faa61024e2280aeeb5f0df51b182-5d1ec.png&quot;
        srcset=&quot;/static/17-1a51faa61024e2280aeeb5f0df51b182-81040.png 300w,
/static/17-1a51faa61024e2280aeeb5f0df51b182-5d1ec.png 600w&quot;
        sizes=&quot;(max-width: 600px) 100vw, 600px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h3&gt;定制用户界面&lt;/h3&gt;
&lt;p&gt;UI 设计中的个性化不仅仅是内容。所有的用户都是不同的——有些人视力不好，有些人可能是色盲。那么，为什么这些应用程序对每个人都有相同的用户界面呢？&lt;/p&gt;
&lt;p&gt;个性化也将是将一个布局调整到一个人。这可以通过利用用户已经提供的信息和使用设备传感器（跟踪用户如何与应用程序交互以及他们所面临的问题）来实现。基于这些信息，应用程序可以决定是否需要更大的字体大小，或者在播放视频时让声音更大是很重要的。&lt;/p&gt;
&lt;h2&gt;11. 增强现实&lt;/h2&gt;
&lt;p&gt;除了会话接口之外，另一个有望彻底改变我们看到和使用应用程序的方向是增强现实（AR）的快速出现。一年前，马克•扎克伯格预言所有的屏幕最终都将被镜头取代。很明显，2018 年将是增强现实的一年。很多人会把他们的手机或平板电脑当作一个虚拟世界的镜头。&lt;/p&gt;
&lt;h3&gt;容易创造 AR 体验&lt;/h3&gt;
&lt;p&gt;现在市面上已经有很多基于 AR 的应用。但直到现在，创建 AR 应用程序也还并不是一件容易的事情。在 2017 年，苹果和谷歌发布了 AR 框架，使得构建 AR 应用程序更加容易：&lt;/p&gt;
&lt;h3&gt;娱乐 AR&lt;/h3&gt;
&lt;p&gt;我们大多数人都很熟悉 Pokemon Go，这是一个很好的例子，说明了 AR 体验如何被用于娱乐。但是 AR 不仅仅局限于游戏。例如，集成在即时通讯应用中的 AR 镜头可以在应用程序中使用，以创造更有吸引力的用户体验。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/18-1af271af60993252fbbc1d093d11801b.gif&quot;&gt;
（Snapchat 镜头）&lt;/p&gt;
&lt;h3&gt;AR 作为现实问题的解决方案&lt;/h3&gt;
&lt;p&gt;AR 正在快速成为一种解决实际问题并为用户带来真正价值的技术。例如，AR 度量使得在没有传统物理测量磁带的情况下测量真实世界的对象成为可能。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/19-61484de294239cce4a59d988f789966d.gif&quot;&gt;
（AR 测度使测量真实世界的物体成为可能，而不需要传统的物理测量带。）&lt;/p&gt;
&lt;h2&gt;12. 无现金支付&lt;/h2&gt;
&lt;p&gt;对于许多用户来说，无现金支付已经成为一个新的标准（在 2017 年，使用这种支付方式的人数几乎翻了一番）。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/20-efabe4f683f59015554bc01418693734.gif&quot;&gt;
（根据 Juniper Research 的一份报告，苹果支付和安卓支付用户的数量分别达到了 86 和 2400 万。）&lt;/p&gt;
&lt;p&gt;它是如此强大，它能够改变日常的商业。例如，在中国这样的地区，无现金支付正在迅速成为一种更好的支付方式。&lt;/p&gt;
&lt;p&gt;对于移动应用开发者来说，这意味着什么？这意味着，在 2018 年，我们将不得不提供 Apple Pay/Android Pay 作为我们产品的默认选项（无论是离线还是在线）。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/21-94a59b58b8bea96a4eaf71f8c242d122-89095.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 64.125%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAADGElEQVQ4y02Ty28bVRTG/Ycg8U/AFgE7WHQNYs2mPFaA2LWCqqCgqBVIbEpRxFNUcmnqRIUmgT6S1k1iO8Fvezwz9owfM2PPy4+xncCPM2MhcaVP99x7dc899/u+kzo/PyeKImaziCAIkzmaz1ksFiyXSxZnZ0QST6ZTzv4+Zy7xWbwnd2IEQcB4PGYud2KkZrMZo6HNyLEwOhquxO7IwfNcPNelq+so1SqNUjmJ+6aZJPE8L4FhGNi2je/7DIdDUmEYUM9tMWjsoJ5sop1mqB7eod9V2L27xVsvvMj7Fy7w4Rtv8vbLr3Dxtdfl4Q6NegOtpVKv1VexqlGr1kiNxyGqUmVoGYx9h2jqEU08qdohe3DAST6HqWuUHj5kMBhwf3ubZqOBI+e+7yXVjaQyP/DQO3pcYUi3bzONFsLdgn8gget6HB8dEcglM5OhI4km2WfUmk0UgdlR0VtVHCnEHfblsTZ6u0lqKhwWj/7EUP5KOAgDn8V8xWuhWKQhlVlPnxCP7vc/kNvfR9U0nF6Dnpqjr+Ww28f01WfUywVS0XzJvZ+u8Xh7A2fkYVlWoporXyqUJOHeHvrPv9C6m0FZv8apUNBqtQhGXaauysA4FUryOEaRjlZdcWiaBp6/kj9WcJoo75ArFNDzeX596VW+fe55ml+sU6rXUIRDrVnENsq01APR4CmOWaHbqa8SOv0Oy2gqmLCU784nLkN7QO5YOBT7LG0RoFwG8Wy5Uk447Jkteu2qcFmh1yljmTVRvbKyjT/q8/+xGFuM7C7ZbJYHu79RU5qo8gtFU7lzO40uHCaeHYmYk7EgxPeG4sk2qYlUqFce8eX6J6x/fokrlz/myd4tsVCfvXu/8/XaGrc2Nrh5/To/3rjBV1ev0hUzf3PzOy6++wGfXlnj0uXPeOe9j0inNyWhvNBplTg5esTh4/sc7u+gVI6FQyvpjt30bR5ktthJp2XO8MfmJpb4MVa6JOe5XJ58vpDEmiY+jHt25PoE4RhLuIrFcT2fUNYz6dVwMpFzl0HcXkJPIML918Oxh2NXxHaL1zH+BbzSmsrDMoa8AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;21&quot;
        title=&quot;&quot;
        src=&quot;/static/21-94a59b58b8bea96a4eaf71f8c242d122-89095.png&quot;
        srcset=&quot;/static/21-94a59b58b8bea96a4eaf71f8c242d122-f17ae.png 300w,
/static/21-94a59b58b8bea96a4eaf71f8c242d122-8b9c0.png 600w,
/static/21-94a59b58b8bea96a4eaf71f8c242d122-89095.png 800w&quot;
        sizes=&quot;(max-width: 800px) 100vw, 800px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    
（“用 Apple Pay 购买”选项。）&lt;/p&gt;
&lt;p&gt;你能预测其他的趋势吗？请在下面的评论中告诉我！&lt;/p&gt;</content:encoded></item><item><title><![CDATA[【翻译】每个 UI / UX 设计师都需要知道的心理学原理]]></title><description><![CDATA[原文链接： The Psychology Principles Every UI/UX Designer Needs to Know 原文作者：Thanasis Rigopoulos…]]></description><link>https://knownsec-fed.com/2018-04-08-fan-yi-mei-ge-uiux-she-ji-shi-du-xu-yao-zhi-dao-de-xin-li-xue-yuan-li/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-04-08-fan-yi-mei-ge-uiux-she-ji-shi-du-xu-yao-zhi-dao-de-xin-li-xue-yuan-li/</guid><pubDate>Sun, 08 Apr 2018 03:34:31 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-6a5a22d5cea478a01ceae2e11691c037-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIE/8QAFgEBAQEAAAAAAAAAAAAAAAAAAAQF/9oADAMBAAIQAxAAAAHPUNOQD//EABYQAAMAAAAAAAAAAAAAAAAAAAABIP/aAAgBAQABBQIc/wD/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAZEAEAAgMAAAAAAAAAAAAAAAABESEAIEH/2gAIAQEAAT8hCXBRAUc1/9oADAMBAAIAAwAAABB3/wD/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAgEBPxBJ/8QAGRABAAIDAAAAAAAAAAAAAAAAAREhACBh/9oACAEBAAE/EEiMnQUA2vt6/wD/2Q==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;【翻译】每个 UI / UX 设计师都需要知道的心理学原理&quot;
        title=&quot;&quot;
        src=&quot;/static/header-6a5a22d5cea478a01ceae2e11691c037-d6978.jpeg&quot;
        srcset=&quot;/static/header-6a5a22d5cea478a01ceae2e11691c037-527f0.jpeg 300w,
/static/header-6a5a22d5cea478a01ceae2e11691c037-9a7cd.jpeg 600w,
/static/header-6a5a22d5cea478a01ceae2e11691c037-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;原文链接：&lt;a href=&quot;https://uxplanet.org/the-psychology-principles-every-ui-ux-designer-needs-to-know-24116fd65778&quot;&gt;The Psychology Principles Every UI/UX Designer Needs to Know&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;原文作者：Thanasis Rigopoulos&lt;/p&gt;
&lt;p&gt;心理学在用户使用应用程序的体验中扮演着重要角色。通过了解我们的设计如何被感知，我们可以进行调整，以便我们创建的应用程序更有效地实现用户的目标。&lt;/p&gt;
&lt;p&gt;为了帮助您理解用户的看法，我将介绍一些我认为最重要的设计原则，并在实践中提供这些原则的常见示例。现在我们从 Von Restorff 效应开始：&lt;/p&gt;
&lt;h2&gt;Von Restorff 效应&lt;/h2&gt;
&lt;p&gt;Von Restorff 效应（也称为隔离效应），当存在多个相似的物体时，与其他物体不同的物体最有可能被记住！&lt;/p&gt;
&lt;p&gt;这是所有号召性用语（CTA）与网站或应用程序的其他操作按钮不同的主要原因！&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/2-689eea6d89b5eb9d830392158bf11f03-7e266.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAAAtElEQVQ4y7WUXQ6CMBCEez9P5TGND8aojQJWMSYq/RnYxTZU8AXaTZYhH93JBGiF6wsDndPBQ9BNV3xZWGwqnHdcmNB7+ITwOjNa0Mhw2FOMcKzj9eJfsmnufnQ8EwwbbRgYa6GN+TLdM2OZd4LibjkhrSFGz2k2MqTe7iXenwbVrcbhXDLb7I5sJguFSimcrsBq/cDzBchLiVLVPEOz3idPwizvMPlXTvkfZtkpafdyytOmBdHXpKNWp3nsAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;2&quot;
        title=&quot;&quot;
        src=&quot;/static/2-689eea6d89b5eb9d830392158bf11f03-abe1c.png&quot;
        srcset=&quot;/static/2-689eea6d89b5eb9d830392158bf11f03-10046.png 300w,
/static/2-689eea6d89b5eb9d830392158bf11f03-3c4a3.png 600w,
/static/2-689eea6d89b5eb9d830392158bf11f03-abe1c.png 1200w,
/static/2-689eea6d89b5eb9d830392158bf11f03-7e266.png 1600w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;我们希望用户能够区分简单的操作按钮和 CTA，以便他们清楚地了解 CTA 的功能，同时在整个应用程序或网站的使用过程中记住它。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;“当存在多个类似物体时，与其他物体不同的物体最有可能被记住！”&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;序列位置效应&lt;/h2&gt;
&lt;p&gt;序列位置效应使用户轻松记住程序中的第一个和最后一个项目。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/3-6803d75abecb6c850350141195d420d4-7e266.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAACgElEQVQ4y3VUwW6bQBD1P0bqIcfmu6IemnvUS51Lm/bSRlbli1UpbaxYMmAMtmFZYFkw8DJvwanVqiuNdpjdfTPv7SyTXgaGcea6D5y+3Xzm9//6/QlgwkDbtv3xeOQMzo0Y413XoWkatDJzjT5jXDvtP8WJwfikPR57XRRIte4938MhSaDzHIXEyrJELrb2fWy2W+fnssZ4ohS2cQwvCBjvldYE7idEj6IIhVbY7BXyooQWS7MMSXIQSySWwxgDUxmkApTJGgfB+V1IgjRNYa3FpO6AZH6HZPUTgTLISgtdNe7Q4bDHfr93m3mYoIzHuxjvb26wkzU7SlLKWlVVAihyqvlHqNUCSV65Cm1zhBYKBFJSAaukBE1TuzkWqu+urwVcu0pZWRB4TsuJbVrYcIlvn6aY/ZhjsVhgNpu5gwRihQS1kr2gFOLT/HykqnMc5WLcHlKuRJdWsnz+8hX39/f4/vCA6fRuEF403O12r3QDP4S/2UJlCvPnJ/AyjYDUtsZW4nVdS4USMLZCIvRIhVSVyhwIK2SMvqvQlIgPKbToaCQhk7CNuq5354ZLEd55HKGSQ7mx0oPsqz8aBtIWpMPsuswRJ6lop9zFGEnSsY+lJ/fRWGEtGVLRbS32+3mFYBMiDEMHSLqr1Qqe57nY2ltLP0aylol+xt0sdaXeqbBxFTa1xTY3ePZ8/Hp8xNNyiaWYlfh0OsXl5SWurq7wVuzNxQU+3N66StjoGVmwL8fZAcoT6kmtGLtdu8YuXIXUNZIqeTgUo8+XRE0Jko17ZH+fDLIMb1kasuemc3NvWvQlLTMab54xrpHmsLc4dcHwls//Njgbpz/J/+yv8fq3eQFsfHTBRVFbTQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;3&quot;
        title=&quot;&quot;
        src=&quot;/static/3-6803d75abecb6c850350141195d420d4-abe1c.png&quot;
        srcset=&quot;/static/3-6803d75abecb6c850350141195d420d4-10046.png 300w,
/static/3-6803d75abecb6c850350141195d420d4-3c4a3.png 600w,
/static/3-6803d75abecb6c850350141195d420d4-abe1c.png 1200w,
/static/3-6803d75abecb6c850350141195d420d4-7e266.png 1600w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;这就是为什么现在大多数应用程序都将菜单放在底部或顶部栏导航上，将最重要的用户操作放在右侧或左侧。在上图中，您可以看到来自流行的 iOS 应用程序的一些示例。每个项目都将“主页”和“配置文件”项目全部放在左侧和右侧，并考虑到序列位置效应。&lt;/p&gt;
&lt;h2&gt;认知负荷&lt;/h2&gt;
&lt;p&gt;认知负荷是指一个人工作记忆中正在使用的精神思想总量。简而言之，这是为了完成特定任务而需要锻炼的思想量。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;“认知负荷是为了完成特定任务而需要锻炼的思想量。”
认知负荷理论可以分为三种类型：&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;1、内在认知负荷&lt;/li&gt;
&lt;li&gt;2、额外的认知负荷&lt;/li&gt;
&lt;li&gt;3、人文认知负荷&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;在接下来，我会主要介绍内在和人文类型，因为我认为这些类型最适用于用户体验设计。&lt;/p&gt;
&lt;h2&gt;内在认知负荷&lt;/h2&gt;
&lt;p&gt;内在认知负荷是与特定教学主题相关的。这是微型复制和复制在良好用户体验中发挥巨大作用的主要原因。&lt;/p&gt;
&lt;p&gt;例如，大多数情况下，应用程序的空状态都会提示用户完成任务。在这里，副本需要简短并且带有适当的文字，以便用户能够轻松地按照说明进行操作。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/4-db8e38e5de86f1f21da70f91dabad90c-7e266.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAACm0lEQVQ4y31UzWtTQRB/JjmV9qaxRUE8ehS8FaTFS3uy9M/xH7CBJDa5iVeDLRbEg0hB8OTFgscq6qHW9CPJ+9q3u+8jSd/PmXlNmyq4MG9md2Z+b752nZwWijUlyua/NG3D4gTA4YPxeJyPRiPmYM4kxmdnIp8RZ91wOBSZdRN7OS9kCchhQUUR/DDMfx0ewvU9KK1hjIGJLXQc4/fREU56p7BJAk3nls7ZpzcYoHt8jMiYPIwU/zB3sixDqBSYKzpM0kTARvTnN6938Gh5GY/X1rC+vo7lpSVsvdqS6Hzfh+u66Ha7iCgAl/ZpmsLhjzYaGUWSKINYRbC059WsN+A4DuZmZzE3NytybWNDdEEQICYfY6xwn/YJZVAAaoth4iPpf0IWfoW1sTi1Wi1UKhVcr97EDaJyuYRGs0kdyAUwMhzZKdIrgJSqpRRVbxdf3j3F973nMOpAANutTTjXHNy/fQ8PiDjCRqMhOk554PZwdPgNEWUVTAAz6lykArzfaWPnZQ2dF0/wc39PnDY3n6FcKePurTtCJYqwXq+fA3rwghA9L5QGBdMpZyT8ONhH7eMu3n7+gDh0C0CKkFOeX5gnWqCUyxeADMCl4a5zDS8jpJS5qxhm0O4JRobanxQ1bLfbAlKtVoVKpRKaVMNJytZa8WX+FyB1dZgCNgJSS0U24tRoFl2emZkRki7XaueARZcZ7J8I/VBBe30oz4OmNAKaS74BW9vbeLi4iNWVFaysrmKR5E6nIzPapxmMdARFtsz9yRyOaLqDUAqb83DykDMgF5oHNtKGb5EQj0kBoBGSnsnj8dE6Zz0FV9xlCjXX5Mj10GTMxLeBo+eiG3Op4zPWXdiec0q7uMvTrw2m1sVLMk1XX5gr5pPX5g87ShO/xOlLCwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;4&quot;
        title=&quot;&quot;
        src=&quot;/static/4-db8e38e5de86f1f21da70f91dabad90c-abe1c.png&quot;
        srcset=&quot;/static/4-db8e38e5de86f1f21da70f91dabad90c-10046.png 300w,
/static/4-db8e38e5de86f1f21da70f91dabad90c-3c4a3.png 600w,
/static/4-db8e38e5de86f1f21da70f91dabad90c-abe1c.png 1200w,
/static/4-db8e38e5de86f1f21da70f91dabad90c-7e266.png 1600w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h2&gt;人文认知负荷&lt;/h2&gt;
&lt;p&gt;人文认知负荷致力于处理信息和构建模式。它描述了一种组织信息的类别和一种思维模式。&lt;/p&gt;
&lt;p&gt;我们使用设计模式的原因之一是因为它们是我们默认编写的东西。如果他们能够从已经理解的东西中将其识别为模式。用户就可以更容易地识别和学习新的东西。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;“如果用户能够从他们理解的事物中辨别出某种模式，那么用户可以更容易地学习新的东西”&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;希克定律&lt;/h2&gt;
&lt;p&gt;希克定律和格式塔定律是最受欢迎的原则。&lt;/p&gt;
&lt;p&gt;理解和练习也很简单。希克定律描述了一个人作出决定所花费的时间取决于他或她可用的选择。因此，如果选择的数量增加，做出决定的时间将以对数形式增加。&lt;/p&gt;
&lt;p&gt;以下列出了适用于用户体验设计的 Hick’s Law 的一个很好的例子：&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/5-ff5a7f3a4fad5ac4454a78a0171c484a-7e266.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAABeUlEQVQ4y5WTiY6DMAxE+f+/XK26lbYcSaG5k1k7B1eRVo3kptjkeTxAl8oCwD95B1/v4788n6251JUCkvUJtz5i0fkaJV32nzHiNsRDjte0JHz9RoilMJjVVXnwIaX7mKBsO5TW/U5Ajqaq1Rj0/YiYVVqJHbfzATAuIgYH7x1ijBu0yanS9o32q9xKCrmjdsAgHfphQj9KgvrDbM3d7XDz7j2/AnvhMAlJ8YRzBRgjq48IFD6EvDdlodZKPqwPKgMNK3xWoJxXoPMR4xxyk8cg8FIaSqlc44fXC0NTjRipzjYdgCMBx0lgoJGtc/mQJV97GSDkk6wQ0MbCGJNryiZMs6X8VIFnhbICJwb6E3DOCjXBeGxeL4Os8Pcx5GY8Ng4eElBICfFcaNTNQ0tjG1LG47IVcechW8Igf/ZQ26JwIPmsxFh7+Wocn/J1fn0PlQnQ2kBpU+TXG67iqrYC09Yunbt9ENuXsvv/1vHDtX3LrcuHqg4K2/4HIJiejMOD37gAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;5&quot;
        title=&quot;&quot;
        src=&quot;/static/5-ff5a7f3a4fad5ac4454a78a0171c484a-abe1c.png&quot;
        srcset=&quot;/static/5-ff5a7f3a4fad5ac4454a78a0171c484a-10046.png 300w,
/static/5-ff5a7f3a4fad5ac4454a78a0171c484a-3c4a3.png 600w,
/static/5-ff5a7f3a4fad5ac4454a78a0171c484a-abe1c.png 1200w,
/static/5-ff5a7f3a4fad5ac4454a78a0171c484a-7e266.png 1600w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h2&gt;接近法&lt;/h2&gt;
&lt;p&gt;邻近律是感知组织的完形定律的一部分，它指出彼此靠近或接近的物体倾向于分组在一起。简而言之，我们的大脑可以很容易地将物体彼此靠近，比它们间隔很远的物体更好。这种聚类的发生是因为人类有自然的组织和组合东西的倾向。

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/6-6cbf6b7b65b5f0b55c2e58a721ec5abf-7e266.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAABF0lEQVQ4y7VUCY7DIAzM/1+6OSEQSCoFvB7ClbTqpV1LFgM203Fs2vjDqFq/8czRALAdBwC1h1Cxen/GhaPxPocu1+8uPLPMGBQ652nfHe3u4nzmeIW5au+8f4iDQiTPi6FulDRIRYOYqWcHxhliKacdBKnFklk3akdBUhuyjJE3Sl0ItbGBaJp1CIxMBowzxFJOP2G/BhJgkNvtxnmKhFqeEepIqN4knM+ECHSTDMpAAgfu4qWU03JppWT+HKlkvgsBF4VHmVNUKD5S+LLk8g3VHaF9XTKkowT8Up+6LGKXdewyrz/cZXTb2C10XOollw8RabDzjKXZq/F5Dvdj9lw1h9UM/99LOb1lH/3hW/bvveW//Lf5BbYdlrNcN4GLAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;6&quot;
        title=&quot;&quot;
        src=&quot;/static/6-6cbf6b7b65b5f0b55c2e58a721ec5abf-abe1c.png&quot;
        srcset=&quot;/static/6-6cbf6b7b65b5f0b55c2e58a721ec5abf-10046.png 300w,
/static/6-6cbf6b7b65b5f0b55c2e58a721ec5abf-3c4a3.png 600w,
/static/6-6cbf6b7b65b5f0b55c2e58a721ec5abf-abe1c.png 1200w,
/static/6-6cbf6b7b65b5f0b55c2e58a721ec5abf-7e266.png 1600w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;“接近定律指出，彼此靠近或接近的物体倾向于分组在一起”&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;在上面的例子中，有 72 个圆圈。我们根据它们之间的距离来识别组中的圆圈。我们可以看到左边有 1 组共计 36 个圆圈，右边有 3 组，每组 12 个圆圈。&lt;/p&gt;
&lt;p&gt;我相信这个例子清楚地表明，在设计用户界面时需要将事物分组在一起，以及在将事物组合在一起时要小心，因为用户可能自然而然地认为他们彼此相关。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[【翻译】研发人员的生产力是否可以量化]]></title><description><![CDATA[原文地址： Can Developer Productivity be Measured? 作者：Nick Hodges…]]></description><link>https://knownsec-fed.com/2018-04-07-fan-yi-yan-fa-ren-yuan-de-sheng-chan-li-shi-fou-ke-yi-liang-hua/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-04-07-fan-yi-yan-fa-ren-yuan-de-sheng-chan-li-shi-fou-ke-yi-liang-hua/</guid><pubDate>Sat, 07 Apr 2018 11:12:31 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-e20a4efdb4b2cd0d5789cca6708bc905-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEAv/EABYBAQEBAAAAAAAAAAAAAAAAAAIABP/aAAwDAQACEAMQAAABaulGV4JxX//EABkQAAIDAQAAAAAAAAAAAAAAAAECABIyIv/aAAgBAQABBQJuwiqYlavDo5//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAgEBPwFH/8QAHhAAAgEDBQAAAAAAAAAAAAAAAAECEBFBITFhcXL/2gAIAQEABj8CaWOSKyi9t9aT6IeT/8QAHRAAAgEFAQEAAAAAAAAAAAAAAREAIUFRkaExgf/aAAgBAQABPyEGIu8XYhC4suvwwEkDfqe9ShWR5C1p/9oADAMBAAIAAwAAABAc7//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABgRAAMBAQAAAAAAAAAAAAAAAAABESEx/9oACAECAQE/EK+CrT//xAAcEAEAAgIDAQAAAAAAAAAAAAABESEAMVFxkbH/2gAIAQEAAT8QFtPAgmFyH73imlCaVCNjuN44OSDW1lZFKzeby6o6XMb7xi9tn1z/2Q==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;【翻译】研发人员的生产力是否可以量化&quot;
        title=&quot;&quot;
        src=&quot;/static/header-e20a4efdb4b2cd0d5789cca6708bc905-d6978.jpeg&quot;
        srcset=&quot;/static/header-e20a4efdb4b2cd0d5789cca6708bc905-527f0.jpeg 300w,
/static/header-e20a4efdb4b2cd0d5789cca6708bc905-9a7cd.jpeg 600w,
/static/header-e20a4efdb4b2cd0d5789cca6708bc905-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;原文地址：&lt;a href=&quot;https://dev.to/nickhodges/can-developer-productivity-be-measured-1npo&quot;&gt;Can Developer Productivity be Measured?&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;作者：Nick Hodges&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;如果你谷歌搜索“&lt;strong&gt;如何量化软件研发人员的生产力&lt;/strong&gt;”，你会发现得到的很多链接其实并不是你想要的，而相关的链接，大多都在讨论如何衡量研发人员是否在计划的时间内有效地完成相关的工作，有人认为这个东西压根就无法量化，最后还有人认为，技术是衡量研发人员生产力的关键，但实际上，大家都知道，这样的量化是不起作用的。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;关于对研发人员生产力的量化，有很多前辈做了大量的尝试，但最后好像并没有一个明显成功可供大家效仿的案例。不过，我们都觉得以代码行数来衡量是可笑的，因为，在软件研发的整个过程中的客观数据都可以作为我们衡量的指标。&lt;/p&gt;
&lt;p&gt;然而，这样的数据不止一项，单看其中一项或是它们的组合也是头疼的问题。因此，许多专家也在为更好的一个评估方案而展开了研究。&lt;/p&gt;
&lt;h2&gt;专家见解&lt;/h2&gt;
&lt;p&gt;在衡量团队和项目生产力方面的有很多不错的想法，但在衡量个人绩效和生产力方面却没有一位提出有效的方案，例如，Robert D. Austin 之前写了一本《衡量和管理团队绩效》的书，书中提到：除非你能做到 100% 覆盖率的评估，即每个方面都能考量到，然而，软件研发本身是件非常复杂且极具创造性的工作，因此，想要考虑所有方面是根本不现实的，但如果我们考虑的方面不足 100%，就存在的一定的不足和缺陷。下面，我们就具体来看看一些专家的见解：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Martin Fowler&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;我们不得不承认，目前并没有一个可行的方案。	—《CannotMeasureProductivity》&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;Neil McAllister&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;对于大多数公司来说，最好能够使用经过验证有效的方法来替代衡量研发人员生产力的想法，因为，高效率，高生产力的研发团队往往伴随着高质量，有效的管理，不幸的是，目前可供大家模仿的有效的方法并不存在。	—《The Futility of Developer Productivity Metrics》&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;Joel Spolsky&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;想要较好地衡量研发人员的生产力是件相当不容易的事，大家能想到的一些指标，比如代码行数等，在整体考量中都是微不足道的，并且，在大型项目中，获取具体的数据是有一定难度的，因为很少有两位程序员被告知要做同样的事情。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;Steve McConnell&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;虽然我们在测试中能够看到个人绩效的数据，但在真实项目中，想要保证数据的真实有效是有难度的。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;正如我之前所说的，即便是专家，目前也没有一个真正可行的方案。&lt;/p&gt;
&lt;p&gt;因此，我认为提出一个客观的方法来衡量软件研发人员的生产力是一个艰难的飞跃，这可能存在争议，但我觉得，相对科学，软件更像是一门艺术，而针对艺术的个人绩效考核应该是不存在什么具体方案的，就像，应该没有人会去告诉一个艺术家，他画一幅画花了很长的时间，他每天应该画多少的问题。&lt;/p&gt;
&lt;h2&gt;那我们该怎么办呢&lt;/h2&gt;
&lt;p&gt;任何负责管理和领导研发人员的同学都相对比较困惑，他们希望能够做到公平，但目前貌似大多数情况都较为主观，那我们该怎么办呢？没有客观的方法衡量研发人员的生产力并不代表我们就无法衡量以及不衡量了，下面是一些小的建议：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;产出&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;研发人员是否在规定的时间内完成了合理的工作量；&lt;/li&gt;
&lt;li&gt;研发人员是否能在短时间修复 bug；&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;承诺&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;研发人员是否能专注于他的工作；&lt;/li&gt;
&lt;li&gt;研发人员是否承诺可以按时交付；&lt;/li&gt;
&lt;li&gt;研发人员是否致力于和公司一同成功；&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;关注质量&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;研发人员的代码是否按照期望的进行工作；&lt;/li&gt;
&lt;li&gt;研发人员在调试前是否能判断它的准确性；&lt;/li&gt;
&lt;li&gt;研发人员提交的代码是否存在大量的 bug；&lt;/li&gt;
&lt;li&gt;研发人员是否为所有的新代码书写单元测试；&lt;/li&gt;
&lt;li&gt;研发人员是否遵守童子军规则；&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;代码基础掌握与管理&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;研发人员对所写的代码是否熟悉；&lt;/li&gt;
&lt;li&gt;研发人员对代码是否负责，对不好看的代码是否有强迫自己去优化；&lt;/li&gt;
&lt;li&gt;研发人员编码是否遵循技术准则和编码规范；&lt;/li&gt;
&lt;li&gt;研发人员的代码是否经常合乎标准；&lt;/li&gt;
&lt;li&gt;研发人员代码审查是否暴露出问题；&lt;/li&gt;
&lt;li&gt;研发人员是否使用依赖注入来保证代码解耦；&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;技能学习&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;研发人员是否有持续地学习他的技能；&lt;/li&gt;
&lt;li&gt;研发人员对软件开发是否抱有激情；&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;责任&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;研发人员遇见 bug，是否首先排查是否为自己的原因；&lt;/li&gt;
&lt;li&gt;研发人员是否明白对自己的代码负有全责；&lt;/li&gt;
&lt;li&gt;研发人员是否为自己的代码感到自豪，确保它通过测试，且易于阅读和维护；&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;总结&lt;/h2&gt;
&lt;p&gt;最后，我们需要明白的是对单个研发人员绩效的考核，以及各种判断和评估都是主观的，目前还没有人提出一种客观的方法来衡量复杂软件行业单个研发人员的生产力。&lt;/p&gt;
&lt;p&gt;我的建议是，接受现实，拥抱主观性。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[【翻译】结合图形和语音界面，提供更好的用户体验]]></title><description><![CDATA[原文地址： Combining Graphical And Voice Interfaces For A Better User Experience 作者：David 随着语音用户界面，AI 和聊天机器人的出现，那么图形用户界面 (GUI…]]></description><link>https://knownsec-fed.com/2018-04-01-fan-yi-jie-he-tu-xing-he-yu-yin-jie-mian-ti-gong-geng-hao-de-yong-hu-ti-yan/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-04-01-fan-yi-jie-he-tu-xing-he-yu-yin-jie-mian-ti-gong-geng-hao-de-yong-hu-ti-yan/</guid><pubDate>Sun, 01 Apr 2018 04:52:49 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-80e6865e6a571df85f651e3e92c346a7-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAQFAv/EABUBAQEAAAAAAAAAAAAAAAAAAAME/9oADAMBAAIQAxAAAAGY3PYeZMyDR//EABkQAAIDAQAAAAAAAAAAAAAAAAECAAMxEf/aAAgBAQABBQKoCOq8O1xsO//EABYRAAMAAAAAAAAAAAAAAAAAAAIQMv/aAAgBAwEBPwEqX//EABYRAAMAAAAAAAAAAAAAAAAAAAIQMf/aAAgBAgEBPwEYv//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEABj8CX//EABkQAQACAwAAAAAAAAAAAAAAAAEAQSAhMf/aAAgBAQABPyFHWEG6hLYA/9oADAMBAAIAAwAAABAsL//EABcRAQEBAQAAAAAAAAAAAAAAAAEAIUH/2gAIAQMBAT8QL1Bl/8QAFxEBAQEBAAAAAAAAAAAAAAAAAQAhQf/aAAgBAgEBPxBHMu3/xAAaEAADAAMBAAAAAAAAAAAAAAAAAREhMUFx/9oACAEBAAE/ENc3wjCx0xZ4GeMjvpm4/9k=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;【翻译】结合图形和语音界面，提供更好的用户体验&quot;
        title=&quot;&quot;
        src=&quot;/static/header-80e6865e6a571df85f651e3e92c346a7-d6978.jpeg&quot;
        srcset=&quot;/static/header-80e6865e6a571df85f651e3e92c346a7-527f0.jpeg 300w,
/static/header-80e6865e6a571df85f651e3e92c346a7-9a7cd.jpeg 600w,
/static/header-80e6865e6a571df85f651e3e92c346a7-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;原文地址：&lt;a href=&quot;https://www.smashingmagazine.com/2017/10/combining-graphical-voice-interfaces/&quot;&gt;Combining Graphical And Voice Interfaces For A Better User Experience&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;作者：David&lt;/p&gt;
&lt;p&gt;随着语音用户界面，AI 和聊天机器人的出现，那么图形用户界面 (GUI) 的未来会如何？尽管有人预测，随着屏幕消失后，将转向触觉、自动化和环境界面的零 UI 设计，但是我想告诉大家的是不要担心，图形用户界面仍将存在很多年，且多模式界面将使用户和机器之间进行更人性化的沟通。&lt;/p&gt;
&lt;h1&gt;我们的主要传感器是什么？&lt;/h1&gt;
&lt;p&gt;一图胜过千言万语在今天仍然适用。我们的大脑是一台图像处理器。我们可以更直观地了解接收的信息。根据研究，我们与其他人交谈，非言语交际也代表了三分之二的谈话。我们会从眼睛中接收大部分信息（83％的视力，11％的听力，3％的气味，2％的触感和 1％的味道）。总之，我们的眼睛是主要传感器。&lt;/p&gt;
&lt;p&gt;我们拥有的第二重要传感器是耳朵，在某些情况下，语音对话是一个非常有效的沟通渠道。想象一下，简单的购物体验。比如您拿起电话点您最喜欢的披萨会容易很多，而不是浏览网站上所有不同的优惠。但在更复杂的情况下，仅靠口头沟通是不够的。例如，你会不看鞋就直接购买吗？当然不会。&lt;/p&gt;
&lt;p&gt;即使是基于文本传统的消息传递平台也开始加入了视觉元素。这就可以理解为什么视觉 UI 片段是 Facebook 在创建聊天机器人平台时的首选。因为当我们看到它时，有些信息更容易理解。&lt;/p&gt;
&lt;p&gt;纯文本和纯语音接口在某些使用情况下可以很好地工作，但并不是最佳的。可视化图像处理仍然是人们主要的信息源，而且我们能够更快速地处理复杂的信息，GUI 就会保留。另一方面，更传统的 GUI 模式也不能以现有的形式存在。因此，不建议进行彻底的预测，我的想法是：用户界面将更适用我们体验。&lt;/p&gt;
&lt;h1&gt;自适应多模态界面&lt;/h1&gt;
&lt;p&gt;人类有不同的输入和输出设备，就像电脑一样。我们的眼睛和耳朵是主要的输入传感器。我们非常擅长模式识别和图像处理。这意味着我们可以更快地处理复杂信息。另一方面，我们对听到的反应更快，因此声音是发出警告最好的选择。&lt;/p&gt;
&lt;p&gt;我们也有输出设备：我们可以交谈，我们可以做手势。我们的嘴巴是我们最有效的输出设备，因为说话的速度会比打字，写字或做出标志更快。&lt;/p&gt;
&lt;p&gt;因为人类擅长结合不同的渠道，我预测未来机器也将是这样，他们会使用多模式接口来适应人类。这些接口将使用不同的渠道进行输入和输出，用于不同信息类型的不同的媒介适（例如，提出简短的问题而不是呈现复杂的信息）。&lt;/p&gt;
&lt;p&gt;在特定情况下，接口将通过使用对人类最方便的介质和消息格式来适应人类。我们来看一些例子，包括我们在 UX 工作室中探索的例子，及一些已既定的商业产品。&lt;/p&gt;
&lt;h1&gt;Chatbots 正在变得更加可视化&lt;/h1&gt;
&lt;p&gt;努鲁是一个聊天机器人，帮助调查在非洲的日常问题。开始把它设计成纯聊天应用程序，我们很快就发现了只有文本会话接口的局限性。&lt;/p&gt;
&lt;p&gt;对于基本的通信，聊天比传统的用户界面（UI）更有效。例如，在非洲聊天可以用来促进当地商业。卖家和买家可以找到彼此并协商不同的交易。在这种情况下，由于一对一的通信，聊天是最佳的渠道。但是当涉及更复杂的交互时，比如在比较众多不同的招聘信息，我们需要更高级的用户体验界面。在这种情况下，我们添加了卡片到聊天界面，用户可以通过它滑动。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/image02-01d294a10917148d39b606b1f47aef0f-89095.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 68.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAACb0lEQVQoz1WSPUwUQRTHr7O2UEOwABGSs5CCEI1CLJTYWxipEARy0FtaSkyMiSToQSiwMHQ2xmCikOOSu4h83gd3x8EdOYywCCw3uzM7OzM7u+PszmLk5WWyu+/93sf8NyLOzBXCEYIFpyvOmScEP3M3eFUWEZ7/TC0ISqvG1qq+uWRsr4OdjF0/URmOjU8rm6Ba1Mu5+m6pXitjoAclPQn7bWgty5638BftzstuPtblvb5vFxIKZtqu9eqxPfYIj/eTiX4cH7RyiwHshp1tQ4elFNheBpUNVEyy/FesawqWQ5HfZWe/zA522MG2PG3V2R87MGxhixAsU6X/yvPEFK0fqn0JZdTG9FRzEJCdZC/q8HM7IxNoG0lQTB1VcrCyhvYr0DTDnR0HI2RbFmOMUuq5nFJyvjNhKL8g1mfNUspbmWWleaj/USHOuWkYpgEosev6CaNyFBbCXtD58GB/cmLyfXxm6t10fOrD2zfj5WIxuFGPcweYSNPBUd04BhAzLicIYdf1b7uQy3e0RDtbox3Xo51tN1qvXJ37/MUXX6KesGqb5rdpnF3AyY+klKbcVcuG8Fah2NPZ1XOr+8Htrod37t292bH4fd6HXe7/FQSK4x1hauJkV1i66wnvfziXyTZfarh2ubGtsam5oan94oUfc5/UbBDCpZXVn2uZlY3sWq6wvJ7RNE1tFMLVavVpX9+zgQHpQ0ODvU9606m0gvf29kZHRmLDw6MjsdFYTCYkEolgKDe8bdu2McYIIgshBKGUXbqqSwjxv5mmdGl+FGMvCEX+iSkxGTN8VUw5qlRVLSal8uv6BSQIrUBwRf0FJJjWvym26+IAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;image02&quot;
        title=&quot;&quot;
        src=&quot;/static/image02-01d294a10917148d39b606b1f47aef0f-89095.png&quot;
        srcset=&quot;/static/image02-01d294a10917148d39b606b1f47aef0f-f17ae.png 300w,
/static/image02-01d294a10917148d39b606b1f47aef0f-8b9c0.png 600w,
/static/image02-01d294a10917148d39b606b1f47aef0f-89095.png 800w&quot;
        sizes=&quot;(max-width: 800px) 100vw, 800px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;其他一些公司，例如腾讯（中国），则更进一步，让开发人员开发在微信聊天应用程序中运行的小程序。这激发了西方设计师的想象，在一个会话界面中，每条消息都可以包含不同的应用程序，每个应用程序都有自己丰富的界面。例如，您可以与您的聊天伙伴一起玩小游戏，就像我们 15 年前在 MSN Messenger 中一样。增强人们对丰富 UI 功能的简单对话界面的喜爱&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/image03-6e5b067e0950bcde06b7d33e0795e863-89095.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 30.25%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAAB20lEQVQY0x2QS08TYRSG5y/5C9SNiQvjqjEuXBgXBkWNknSDIRpdWGhCsMFKjAUkRm0sINCITRFKmiZFGSqF3uvQy8zg2Gln5pvvMvPRHqee1ZPzvjnJcwTNQBcMRGZcSu7qiNywMJ1GNr6+n8s/PBBzU5V6w2cRd5wAm5AM7NtXrMCRZo/V1M61UlOdLjWUm4d653ax152pmsYlgbo8DN4Uu8z0jhWG3DSpGE9s8+SPIuQrVXG4Qy2AUhuJZY9/WtD/8G5JXAjPweqnaG3jtKEtgAXz9aNFIbWbnjyuSRDZ+VVLpXbSb+YXYSm6nCycqErm9x+QWtpW+inufL2FjHrZ2FrL5uB7XlJVTU527TbYyMhK8mlB5xz+mmZIiH6OvZh9FYb4+no1GAzuPvA/hvFAODH5fEq+f2cU3oaiibXL/c7GlTMzMvctce78RRjzP1HbuJ04sLdBZ73s6mbyeDOTgYrUeCnIqhrCGENTlvWuiQ6Hep56llKHDdno0b3KF3dwEgdQmvoeZRSkRstBmGWHOXV4We/1lP9vISwiYLd/tQ+wQvjgme3wR5T3Y4i590ziBGzGP1rUGSHgzOIBe4352QgHeO8CBA1MRk1CYyamfsT4hNddsQjz/QOwb4z59RDJ6gAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;image03&quot;
        title=&quot;&quot;
        src=&quot;/static/image03-6e5b067e0950bcde06b7d33e0795e863-89095.png&quot;
        srcset=&quot;/static/image03-6e5b067e0950bcde06b7d33e0795e863-f17ae.png 300w,
/static/image03-6e5b067e0950bcde06b7d33e0795e863-8b9c0.png 600w,
/static/image03-6e5b067e0950bcde06b7d33e0795e863-89095.png 800w&quot;
        sizes=&quot;(max-width: 800px) 100vw, 800px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h1&gt;具有混合接口的自驾车&lt;/h1&gt;
&lt;p&gt;一年前，我们的团队将自动驾驶汽车的界面设想为多模式设计的纯运动。我们想象了整个过程，并试图优化每一步的交互。&lt;/p&gt;
&lt;p&gt;要订购汽车，您需要按下手机上的按钮。这是最简单的互动，并且足以订购一辆汽车。显然，不需要电话预定，只要按一个按钮就足够了。&lt;/p&gt;
&lt;p&gt;然后，一旦你进入汽车，你会花一些时间来调整，做好前期准备。之后，语音交流会更方便，所以汽车会问你去哪里。我们很快就可以说出目的地，而不是在触摸屏上输入位置。因此为了准确的实现该功能，汽车必须理解你给出的任何指示。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/image04-a6918a8017a3f9626802ee7bedb7ebde.gif&quot;&gt;&lt;/p&gt;
&lt;p&gt;信任是自动驾驶汽车中的一个重要问题。当我们在路上时，我们想看看我们是否朝着正确的方向行驶，以及我们的自动驾驶汽车是否能够判断前方是否有障碍物。每次询问汽车的状态是不现实的，特别是如果你和别人一起旅行。而这个时候当所有人都可以看到平板界面时就可以解决这个问题。它会始终显示汽车在周围环境中检测到的内容，以及您在地图上的位置。它始终存在的事实会建立信任。当然，显示地图信息在视觉上比在任何对话形式中更容易。&lt;/p&gt;
&lt;p&gt;在这个示例中，我们发现汽车总是使用最方便的媒介。比如您可以使用触摸屏命令汽车，发出声音命令，接收听觉反馈，以及检查屏幕上的状态。&lt;/p&gt;
&lt;h1&gt;家庭娱乐和数字助理&lt;/h1&gt;
&lt;p&gt;另外一个例子，带有 Kinect 控制器的 Xbox 控制台是混合界面。你可以用语音和手势来控制它的 GUI。手势识别技术还不完善，但未来它肯定会变得更好。语音识别也有点尴尬，因为在每个命令之前，你必须说出“Xbox”。&lt;/p&gt;
&lt;p&gt;尽管存在技术上的缺陷，它是一个很好的例子，说明机器如何为语音和手势命令提供持续视觉反馈。当你用手作为控件时，你可以在屏幕上看到一个小指针作为光标，当你将它移动到不同的内容块上方时，它总是突出显示光标下方的当前一个，以显示你将要使用哪一个启用。当你说单词“Xbox”给出一个命令时，控制台在每个瓷砖上用绿色显示一个命令字，这样你就知道要说什么来选择一个项目了。&lt;/p&gt;
&lt;p&gt;当然，这里的目标是帮助您首先对语音控制界面进行语音控制。将来，更准确的语音识别和语言处理将帮助人们用自己的话说出命令。这是让混合界面更加主流的重要步骤。&lt;/p&gt;
&lt;p&gt;亚马逊毫无疑问是语音界面和“无 GUI”界面的伟大先驱之一。即便它在为其新一代的 Echo 设备添加了屏幕。但是在将 GUI 推送到用户手机上的应用程序失败之后，它仍在尝试。&lt;/p&gt;
&lt;p&gt;语音用户界面带给你的是引人入胜，特别是第一次尝试它时。例如，站在厨房里说“玩红辣椒”比用脏手滚动 Spotify 专辑容易得多。&lt;/p&gt;
&lt;p&gt;但过了一段时间，当你想用它来完成更高级的任务时，它就无法工作。在一个视频评论中，一位用户指出，当时启动厨房定时器，你必须询问设备状态，因为没有屏幕存在。现在，通过 Echo Show，您可以在同一仪表板上看到多个定时器。&lt;/p&gt;
&lt;p&gt;对于亚马逊来说什么是比购物更重要的？是使用旧的 Echo，你可以添加东西到你的购物清单中，但是你必须打开移动应用程序才能真正购买东西。听到 Alexa 从亚马逊商店里读出长长的产品名称和描述，这是一个可怕的经历。现在，您可以轻松地在 Echo 上处理这些任务，因为它向您展示了产品，并且您可以选择您喜欢的产品。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/image05-f1bf54f3a71ce89f4b5a25a2527916f8-89095.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 51.125%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAACbUlEQVQozwFiAp39AL6up7mqo7OjnrSln7iooaeYkJ2OhaCQiJ6Ph7Wlnsy7tJGGgHdvaIJ5cZKJgqKZk314dJaOisi8tXVubgCzpJ6rnJehlI2omZOwop98dHRvZ2dvZ2dtZWZvaGlvaWttZmmFfHmHfHSUi4SnnZiBfHeYkY3FubSsop4AqJqUoJOMk4V+oJGKoZWRe3p/vbq8vb3DwcHFycrM1tbY09TWgHp4iH51k4qDpZuWgXx3mZKOx7q1saeiAKaYkJ6RiZCBeqCRiqOUkKmrre3//+7y3vPz7e7r6////+7r7YuChoF5cZOJgqWbloJ8eJmRjcm9t6uhnACmmJGfkouRg3yhk4yqmpSTmZp4triZkVXHzK68vMf4/f3p5vV2cY5/d2yPhoCjmpSAe3eak4/Iu7bJvLcApZeQoJKLkYN7oJKLtaWek4+Pu9fUzsay+fnh/+S8/fHS////qaezfXZviYJ7oJiSe3dym5OPzL+5x7u2AKWXkKCSi5CCep+RiripoomAf7Kusru8wqeio5eMfoyEfoWEh2toa3lyb4R+eJ6XkXZybZeQi8u+ucW5tACllY+gkouNf3eajIazpJ6QhoMZGB8RDxQSEBcQEBoQDxcQDhQZFx5pYmFvaWN2cGplYFqhlo/AtKy+sasAmo2FlIiAhnpykYR9o5WNppiTKCUsFxYcGxogGhkfGRgeGhkfDg0VVk9Pno15qJaEgXNgtKedt6mhtaigAJWHfJWGfI+Bd5OFepmLgaGUjDk2OxkXHi0qMDk1OkdCRlVQU1dSVX51dKiYhbilkY1/caebk6qel6SaklKsTUgNVztmAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;image05&quot;
        title=&quot;&quot;
        src=&quot;/static/image05-f1bf54f3a71ce89f4b5a25a2527916f8-89095.png&quot;
        srcset=&quot;/static/image05-f1bf54f3a71ce89f4b5a25a2527916f8-f17ae.png 300w,
/static/image05-f1bf54f3a71ce89f4b5a25a2527916f8-8b9c0.png 600w,
/static/image05-f1bf54f3a71ce89f4b5a25a2527916f8-89095.png 800w&quot;
        sizes=&quot;(max-width: 800px) 100vw, 800px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;与带有 Kinect 的 Xbox 不同，Echo Show 是一个语音优先设备。它的主屏幕没有加载程序图标。但是，当您发出初始语音命令时，屏幕会显示所有相关信息。这很简单：当你需要了解更多时，你只需看看屏幕即可。这有点像我们在厨房做菜：当我们专注于烹饪时，是可以保持基本的对话，但是当出现一个重要或复杂的问题时，我们就要停下来看着伴侣的脸进行沟通。这就是为什么 Echo Show 能更加自然的走向多模式界面。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/image06-4088b5ee51227d35c610427e469472fc-89095.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 56.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAACnklEQVQoz2NwsTHzcLSMCPLOzsnW1nPT1U/Q1gvR0glV0/DV0PRR1/BQVXdWVbU3N7GM8PX0sTCMcrTwtjYzNzW2sDBn8HS0drI28nS2Tk2L19GPjYy5lFNw39vnrH/gTRe3XW6eB52cVpYF50yIcpmbEjg70WdSpEtXiGOFl3WqszmDtoqciZ62va11XHyUiWmmb8CloIjzfkFHQ8OvhcdciUl5mJe4vCAwJ9W3pCPSc2aS7+RYr0nR7lOi3frCnBi8HExD/dwdbKwT4iINjLLikq+WNT4pqXlTXPO4svlRWtal3IJLUbHHHawqcj2tJ0d7TorxnBLrOS3OqzvEkcFET9PC2EBZUSk9Jd7cMiM09nRR9dv0/LfZxR8S0i4mpj31DbwXG7KpOyZ8arzvlFiPGQnes5P9Zib69IQ5M1gZ69pZGOtqqhXnpds6ZLl5bfD02ensttbDe4ev/15v3x1unptsrKd6m4eW+zr0RLpPiPGcGOvVGe5W4mHNYKSmrCQrLSMpUVpQqKlhwMUpyMMlyM7Kx8UhwsUpxM0pyMXBx8HOx8DA6WJjG2ljFmKml+hsFedkHWxnweCqomClrCAlLpafnaOkqMLKzMbJzsnOysHGwsrGwsbBxsHOyg4kGRgY7K1s5CRlONk4tdTULM3MLIFRFWmmn2hrZqehVJyRLi+nyMzIws4G0cwORBysHBA2ULOtpbWqgrwYP4+xlrKViYGZkRGDgYyUjpSkrqR4ZkyUuKgk0GYeLl4+bj4+Hn4Qyc3HzysgIigqKiTq4eJmqKUhIyKgqSClqSCjpijNIM7LI8zDLczDZW5mJiIoLCEi6u7sEuwfGB8ZnZWSVpyTV11S1lhZ3VRdW5iTa6ihLCsqqCgppiApqiglCgCG7rFsCKeb6gAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;image06&quot;
        title=&quot;&quot;
        src=&quot;/static/image06-4088b5ee51227d35c610427e469472fc-89095.png&quot;
        srcset=&quot;/static/image06-4088b5ee51227d35c610427e469472fc-f17ae.png 300w,
/static/image06-4088b5ee51227d35c610427e469472fc-8b9c0.png 600w,
/static/image06-4088b5ee51227d35c610427e469472fc-89095.png 800w&quot;
        sizes=&quot;(max-width: 800px) 100vw, 800px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;看上图，这是另一个设计细节。在主屏幕上，Echo 将显示新闻标题，并以粗体突出标题中的单词，如果您想要听完整个事件就会说出的命令词。通过这种方式，产品的功能非常明确，您将如何使用它。Echo 通过其可视化界面有效地设置了期望并提示。&lt;/p&gt;
&lt;p&gt;Echo 的主要竞争对手 Google Home 的主要优势之一是您可以提出后续问题。在问道：“布达佩斯有多少人？”，你也可以问：“那里的天气怎么样？”谷歌之家会知道你在说同一个地方。情境意识是一个重要特征，并且将成为未来产品的必备品。&lt;/p&gt;
&lt;p&gt;当我们设计界面时，如果我们知道上下文，我们可以消除摩擦。比如：当用户的手已满时，产品是否会在厨房使用？首选一定是使用语音控制，它比触摸屏更容易。他们会在拥挤的火车上使用它吗？我相信与语音助理交谈相比触摸屏幕会让人感觉舒适。使用会话界面，他们需要简单的答案来解决一个简单的问题吗？使用会话接口。他们必须看到图像或理解复杂的数据吗？为了改善互动，我们可以提出问题，比如哪个屏幕离他们更近，或者哪个屏幕更方便使用。&lt;/p&gt;
&lt;p&gt;Google Home 仍未完成的一件事是多用户支持。像这样的设备将被许多不同的人使用，使我们回到 PC 早期的共享计算机现象。无缝切换用户将是一项艰巨的挑战。安全性和用户体验不容易对齐。想象一下，当你正在与你的虚拟助理谈话时，你可以访问你的所有应用程序和数据，然后等一秒钟后，其他人进入房间并执行相同的操作。这会很糟糕。&lt;/p&gt;
&lt;p&gt;当 Amazon Echo 和 Google Home 在收听您或寻找答案时，它们都会提供良好的视觉反馈。他们使用 LED 动画。对于多模式接口，保持语音和视频输出同步至关重要； 否则，人们会很容易混淆。例如，当与某人交谈时，我们可以轻松地看看他们的脸，看看他们是否收到了这条消息。我们可能希望在与产品交谈时能够做到这一点。&lt;/p&gt;
&lt;h1&gt;保健产品&lt;/h1&gt;
&lt;p&gt;PD 测量是一款应用程序，用于测量佩戴眼镜的人的瞳孔距离。这是同步和组合视觉和语音界面的一个很好的例子。&lt;/p&gt;
&lt;p&gt;任何客户都需要知道他们的瞳孔距离才能在线购买眼镜。如果他们不知道，那么他们不得不去零售店并在那里测量。一种可供任何人在家使用的测量工具将为在线光学器件开辟一个巨大的市场。&lt;/p&gt;
&lt;p&gt;通过 PD 措施，顾客站在镜子前，拍下自己的照片，按照精确的说明将手机放在特定的位置。该应用程序将使用先进的内部算法自动计算他们的瞳孔距离。精确到可以在线订购眼镜。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/image07-f946fa22fe811a11b40f3766deb23414-89095.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 110.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAIAAABPIytRAAAACXBIWXMAAAsSAAALEgHS3X78AAAFIklEQVQ4y01Ue0xTVxi//y3ZX7pkxkGGPOXZgvKQNwGlKhRKiwX65FVEqJUCFZBSFCsOhQJ9gBCEICiMEoExHyiisumcIizTZQtu2ZYotLe9pfR5b2+h3cFlyb78ziPn5Jfv+33fdw5ksVhsNpvdbjebzVtbWxaz2Wq1Ttx+qLg23jswCaC8Nq6emkdR1O12ucFwbX2cXShqg1AMAzBumnSIAUUdGOawWm3kE9WeARn+BKpfWI7n/sxcVr3RaBoYmpH3qNtkNzoVYzLF2OydRciOogiCrP7+5+off6+tayxWK4iCxjgLmIQYRughtncYjVEk1mj1+wKpe/ZleAXS9gXlfvpZ6ilBG+RwYOuGzQ8wgmwYN4ybIAogIjuvZo/3Mf9wekQSy4eYW8BthGGEGM1OO85PSSkmHasgxnCqamWQewtfXH3/bk2H2u2wDnbguNls4fKaT1W1iiRduZxqj/3ZjKImQA49UBB5mO/L7AqhXwoMzxfUdEDubfz+r+/VS6sbsEYD75AtFmsepyGXUZOeLwpPP+UdSt3xrDMEE06kMVuS79lIg29DDhR8JG/hc++06rdrLsym1ekduAMkn5JXuxP2wYKgGKZXYBYga2GEEMncf6g4uFBOyGv18M2qEnVCGIZtmkzGzU1QLoCPmm05+aIAAjUyjhkZz/YNoeyQtXqg88sACjE8NyiU9rlXhvBsJygVijl2ymMyWwAT7EHCQLYjErmHqcIjNCEhjg2yDTwfiOV6B9MS0ysiYgv3+pBr6rshJ45v2B2Cn7AzKxjrhX36g9ONo2npvN3MTh/lso9qeRdDRs6u1GgRUKpdX5B2e5D2eGV8siv5JP8y5Nre3na731jcb6zuZYtb4wBc9PrwtFQ50T4yd/XG/Qvy8ZGbs6BJOjpHL311va19+ErHjfPS/pnZJ9Ds3cXWq4M9qlGlckSlGFH1joFuc/9rLtd/qwsIcv/PwA3udEK1DZ2e/scCwml+YRT/MEpkAksL61+++G7+wZ2Fu1MKqaS7RTw1MmS1mJef3l599s3PT6YfTQ79eHf0t5VnUENTt19o1sE0XlQ6LyicejCOBesNinPlkqJMaWsLOTsr2s9DSCdvIDpVLaW/OntCWjIpEw01cx+OdUB14m5P/+NB8YU5xQ3nWxXEqHytztBdX9bI51T0qVldNzNzKE0lTKMeHhDRexq4HVX08SsCtbR0cVwO8auvHCGX0cvFwXHcDKogJpGztg73yS5IpM085a2jjbLktNQzDKoB1n4tYc8rqh71iB7Iq2ekha++7YcqBa1FgpYTPElwNMM3jBoRw1jX6FobhUIhn3G5j96ijE1KOpqaYtxAbrWVzXXxX45Knw82jV9kfn/nOtQg7vYOIRPiucTEwtAoelQCSwMjkqriwuzj/PbB4kvX4hMSOJmHjQa98ixdUZs32MzrbyrtraU+nlBCdY2dweGUJBIvPq0kOoEVl8LV6Q3D7aKTGUnlp2s5FdVJxEAGKWFDpx0W0YbE7H4Rva+eOdpAfz4hh85J5MRYRipFkJxZGU86mZxeghgMEwOyi2WMi+XsuuKCnKNppWXlRkR/TyVemux6PdUD8HTowpunk1CdqG0v9bxP/1vf3pW956aJCVxYh4B3+osBK12yV762sX6wPodB32EuB7qgxTmv0NMrKG/J/pcZg+YXXigHp/smH/epF1S35gaGZ0wm8BM6jajzNYKvIPgSgutsOI6hW06nxoa/1O0cLhtwM+r4B5orDC9CQFAJAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;image07&quot;
        title=&quot;&quot;
        src=&quot;/static/image07-f946fa22fe811a11b40f3766deb23414-89095.png&quot;
        srcset=&quot;/static/image07-f946fa22fe811a11b40f3766deb23414-f17ae.png 300w,
/static/image07-f946fa22fe811a11b40f3766deb23414-8b9c0.png 600w,
/static/image07-f946fa22fe811a11b40f3766deb23414-89095.png 800w&quot;
        sizes=&quot;(max-width: 800px) 100vw, 800px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;PD Measure 的用户界面是屏幕上的动画插图的组合，向您展示如何握住您的手机以及语音指示，这些指示会告诉您如何操作。用户必须将他们的手移动到正确的位置，并且应用程序将使用其传感器在他们出现时提供反馈。当应用程序最终拍摄正确的图像时，它会向用户提供听觉反馈（铃声响起）。这样，用户就习惯了确认声音，并会更有效地进行后续测量。&lt;/p&gt;
&lt;p&gt;在原型设计阶段，我们进行了大量的用户测试，结果发现人们更喜欢遵循语音指令而不是视觉指令。&lt;/p&gt;
&lt;p&gt;在这个例子中，视觉和语音界面一起工作：动画插图向您展示如何握住手机，而语音指导可帮助您获得完美的位置。&lt;/p&gt;
&lt;h1&gt;来自发布的示例&lt;/h1&gt;
&lt;p&gt;早在 2013 年，一家名为 Volio 的公司就尝试了混合界面。其旗舰客户之一是 Esquire 杂志，该杂志创造了一种互动体验，人们可以与 Esquire 的专栏作家交谈。这是一系列视频，您可以根据您在当前视频中给出的问题的答案选择下一个视频。当然，你可以从几个预定义的答案中选择，但交互仍然感觉像一个实时对话。它具有良好的媒体组合：声音作为命令的输入和屏幕显示内容。&lt;/p&gt;
&lt;p&gt;许多人认为今天的多屏世界是我们内容的独立输出渠道。混合接口将远不止于此。人们可以同时在不同的设备上同时使用您的应用（例如，使用 Alexa 进行语音输入，同时在平板电脑上查看数据）。&lt;/p&gt;
&lt;p&gt;以这种方式组合语音和 GUI 也是不必要的。我们最近设计的一款体育流媒体应用程序可让人们在足球比赛中发表评论，并与其他球迷交谈，同时在智能电视上观看现场比赛。实现两个屏幕完美的配合。&lt;/p&gt;
&lt;p&gt;这种高级接口可通过同时提供许多不同设备和媒体来实现功能。这是多余的，程序员和设计师不太喜欢。但它也具有优势，因为如果主选项不可用，它可以为用户提供备份选项。它还可以帮助无法使用语音或视频界面的残疾人士。&lt;/p&gt;
&lt;h1&gt;如何选择主模式？&lt;/h1&gt;
&lt;p&gt;讨论了趋势和一些当前产品后，让我们总结一下何时使用语音以及何时使用可视化用户界面。&lt;/p&gt;
&lt;p&gt;可视化用户界面可以更适合：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;列出了很多项目（大声朗读所有项目会花费太长时间）;&lt;/li&gt;
&lt;li&gt;复杂的信息（包含许多属性的图表，图表和数据）;&lt;/li&gt;
&lt;li&gt;你必须比较的东西或你必须选择的东西；&lt;/li&gt;
&lt;li&gt;在购买之前你想看到的产品；&lt;/li&gt;
&lt;li&gt;状态信息，你想随时检查（时间，计时器，速度，地图等）。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;语音用户界面更适合：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;命令（即任何你确切知道你想要什么的情况，所以你可以跳过导航，只是口述你的命令）;&lt;/li&gt;
&lt;li&gt;用户指示，因为人们倾向于比语音指示更好地遵循语音指示；&lt;/li&gt;
&lt;li&gt;用于成功和错误情况的音频反馈，具有不同的信号；&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;结合图形和语音界面，提供更好的用户体验&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;警告和通知（因为对语音的反应时间更快）;&lt;/li&gt;
&lt;li&gt;简单的问题需要相对简单的答案。&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;下一步是什么？&lt;/h1&gt;
&lt;p&gt;当我问我的设计师朋友他们了解什么是混合接口时，他们中的一些人提到 1979 年传奇的麻省理工学院媒体实验室的视频“The Put That There”。抛开怀旧，令人震惊的是，这项技术在 38 年前就有了一个工作原型。我们的超级快速进展只是一种幻觉吗？&lt;/p&gt;
&lt;p&gt;语音识别在今天仍然存在一些明显的挑战，只有少数几家主要厂商为基于语音识别的产品提供平台，其中包括诸如微信等应用程序和亚马逊 Echo 等硬件设备。&lt;/p&gt;
&lt;p&gt;一个好的开始将是开发一个与这些系统集成的小应用程序或机器人。以下是我们使用多模式界面的经验提示：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;速度和准确性是交易破坏者。&lt;/li&gt;
&lt;li&gt;同步语音和视频界面。始终对发生的事情有视觉反馈。&lt;/li&gt;
&lt;li&gt;当设备正在聆听或考虑答案时，显示视觉指示器。&lt;/li&gt;
&lt;li&gt;突出显示图形界面中的语音命令字。&lt;/li&gt;
&lt;li&gt;为用户设定关于界面功能的正确期望，并确保产品解释其工作原理。&lt;/li&gt;
&lt;li&gt;产品应该意识到设备的物理和社交环境以及对话，并且应该做出相应的响应。&lt;/li&gt;
&lt;li&gt;考虑用户的上下文，并确定哪种介质和设备可以减少摩擦并使其更容易执行任务。&lt;/li&gt;
&lt;li&gt;通过替代设备或媒体为用户提供选项以访问功能。这将有助于在发生故障的情况下，并且还会使残障人士更容易接触到您的产品。&lt;/li&gt;
&lt;li&gt;不要忽视安全和隐私。使人们能够关闭组件（例如麦克风），并通过透明建立信任。不要太咄咄逼人，否则你会吓跑每个人（例如，语音垃圾邮件非常烦人）。&lt;/li&gt;
&lt;li&gt;不要读出长长的音频独白。如果无法用几个字来概括，请将其显示在屏幕上。&lt;/li&gt;
&lt;li&gt;花点时间了解每个平台的具体情况，并选择合适的平台。
但是，在开始之前，请记住，与其他数字设计相比，多模式界面仍然是一个尚未开发的领域。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;首先，我们并没有真正的通用语言或编程框架来描述混合接口。这种语言可以在一个连贯的代码库中定义语音和 GUI 元素，使得设计和开发这些接口变得更加容易。它还支持多种输出和输入选项，使我们能够设计全渠道，多屏幕或多设备体验。&lt;/p&gt;
&lt;p&gt;其次，设计师不得不提出新的设计模式来支持多模式界面的特殊需求。（例如，您将如何同时提供视觉和音频反馈？）&lt;/p&gt;
&lt;p&gt;虽然未来看起来令人兴奋，而且会发生很快，但我们仍然需要在语音识别和语言处理方面达到临界点：语音媒体的可用性将达到一定质量水平，确实使其成为最佳选择应用范围。我们还需要更好的工具来设计和编码多模式界面。&lt;/p&gt;
&lt;p&gt;一旦我们完成了这些目标，那么没有任何东西能够保留这些自然界面，并且它们将成为主流。&lt;/p&gt;
&lt;h1&gt;历史重演：成为它的一部分&lt;/h1&gt;
&lt;p&gt;人有多种感官。不止一个的技术和界面更有可能促进强大的人机交互。&lt;/p&gt;
&lt;p&gt;之前发生过类似的多模式演变。收音机和无声电影被合并到电影中，并通过 3D 进一步增强等等。我确信这一过程也将在交互式数字世界中发生。激动人心的时代即将。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[【译】HTTP1 到 HTTP 2 的演变如何改变了 web]]></title><description><![CDATA[原文地址： How Evolution Of HTTP/2 From HTTP/1 Changed The Web 作者：Sarah Elson…]]></description><link>https://knownsec-fed.com/2018-03-31-fan-yi-http1-dao-http2-de-yan-bian-ru-he-gai-bian-liao-web/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-03-31-fan-yi-http1-dao-http2-de-yan-bian-ru-he-gai-bian-liao-web/</guid><pubDate>Sat, 31 Mar 2018 15:02:32 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-5a22dda73513aadc336a209bd5206dcb-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAECAwQF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAgAB/9oADAMBAAIQAxAAAAHsVbIrGMN//8QAGhAAAgIDAAAAAAAAAAAAAAAAAAIDEBESQf/aAAgBAQABBQJ8iTbX0//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAECAQE/Aaf/xAAaEAACAgMAAAAAAAAAAAAAAAABIQACESBB/9oACAEBAAY/AstcEdTr/8QAGhAAAgMBAQAAAAAAAAAAAAAAAREAITEgUf/aAAgBAQABPyFQVtekNQK0CoM4f//aAAwDAQACAAMAAAAQ2z//xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAwEBPxCH/8QAFhEBAQEAAAAAAAAAAAAAAAAAAREQ/9oACAECAQE/EASJn//EAB0QAQEAAQQDAAAAAAAAAAAAAAERABAhYXExUYH/2gAIAQEAAT8QMJcFJ9e8W3dAUXm+O8ShZeNAK60//9k=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;【翻译】HTTP1 到 HTTP 2 的演变如何改变了 web&quot;
        title=&quot;&quot;
        src=&quot;/static/header-5a22dda73513aadc336a209bd5206dcb-d6978.jpeg&quot;
        srcset=&quot;/static/header-5a22dda73513aadc336a209bd5206dcb-527f0.jpeg 300w,
/static/header-5a22dda73513aadc336a209bd5206dcb-9a7cd.jpeg 600w,
/static/header-5a22dda73513aadc336a209bd5206dcb-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;原文地址：&lt;a href=&quot;https://medium.com/@sarahelson81/how-evolution-of-http-2-from-http-1-changed-the-web-889bee4b0768&quot;&gt;How Evolution Of HTTP/2 From HTTP/1 Changed The Web&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;作者：Sarah Elson&lt;/p&gt;
&lt;h2&gt;前言&lt;/h2&gt;
&lt;p&gt;有没有遇到过这样的情况：你真的需要快速打开一个网页，而且由于网速较慢，它会一直持续下去？可能是你的网络中有人正在下载一个阻塞带宽的资源？&lt;/p&gt;
&lt;p&gt;这很刺激，不是吗？&lt;/p&gt;
&lt;p&gt;在这个 5G 时代，缓慢的页面加载速度对于用户和开发人员来说都是无缝用户体验的祸害。我们无法控制用户的互联网速度，但作为开发人员，我们可以确保我们尝试了本书中的每一个技巧，使用户的网络旅程尽可能顺利。&lt;/p&gt;
&lt;p&gt;这就是 HTTP 协议来拯救的地方。&lt;/p&gt;
&lt;h2&gt;什么是 HTTP？&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;HTTP（超文本传输​​协议）&lt;/strong&gt; 可帮助我们获得流畅的互联网体验。它于 1996 年首次推出。它是协作、分布式和超媒体信息系统的应用层协议，作为万维网数据通信的基础。HTTP 旨在用于 Web 浏览器和 Web 服务器之间的通信，以及它充当客户端和服务器之间的桥梁。&lt;/p&gt;
&lt;p&gt;基本上，它用于传输超媒体文件，如 HTML。HTTP 由 URL 和超文本构成。它是客户端 - 服务器计算系统中的请求 - 响应协议。HTTP / 1.1（通用 HTTP 的版本）的第一个定义发生在 1997 年。&lt;/p&gt;
&lt;h2&gt;HTTP / 1.1 中的限制&lt;/h2&gt;
&lt;p&gt;HTTP / 1.1，更新到 HTTP 1，在 1999 年被标准化. HTTP / 1.1 帮助人们在线运行他们的业务，但 HTTP / 1.1 中有一些限制，然后在 V2 中进行了更新。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;加载网页时出现延迟&lt;/li&gt;
&lt;li&gt;线路头部阻塞问题&lt;/li&gt;
&lt;li&gt;通过单个 TCP 连接复用多个请求&lt;/li&gt;
&lt;li&gt;每个资源文件的不同资源请求&lt;/li&gt;
&lt;li&gt;HTTP 标头很长，导致网页加载延迟&lt;/li&gt;
&lt;li&gt;当时的网络非常不同，网页越慢，互联网连接越慢。但多年来，我们使用网络的方式 - 发生了显着变化，网站现在比以前复杂得多。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;HTTP 的重大更新于 2015 年推出，作为解决 HTTP / 1.1 中面临的问题的 HTTP / 2。
HTTP / 2 源自 Google 开发的早期实验性 SPDY 协议。它使 Web 应用程序更快，更简单，更强大。

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/image1-05d68030af8dde74294592437e8e900b-c1165.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 53.75%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEAf/EABUBAQEAAAAAAAAAAAAAAAAAAAEA/9oADAMBAAIQAxAAAAGt1GioeR//xAAYEAADAQEAAAAAAAAAAAAAAAABAgMAEv/aAAgBAQABBQI3fu1WTToSOFxUHcjf/8QAFREBAQAAAAAAAAAAAAAAAAAAEBH/2gAIAQMBAT8Bp//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABwQAAICAgMAAAAAAAAAAAAAAAABAjERIRIiMv/aAAgBAQAGPwKSSWIkOK9Hax6uxaqij//EABwQAQACAgMBAAAAAAAAAAAAAAEAETFBIWFxkf/aAAgBAQABPyFNpDqIgFhNQo6hf6u0eTy+UDxlP//aAAwDAQACAAMAAAAQhD//xAAXEQADAQAAAAAAAAAAAAAAAAAAARFR/9oACAEDAQE/EIwbrP/EABgRAAIDAAAAAAAAAAAAAAAAAAABETFR/9oACAECAQE/EIeio//EABwQAQACAgMBAAAAAAAAAAAAAAERIQBBMWHBgf/aAAgBAQABPxCOMBVa+4QNti3WJYYFK4H3BRC7Y27w/wA8icFsBKXvXmf/2Q==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;image1&quot;
        title=&quot;&quot;
        src=&quot;/static/image1-05d68030af8dde74294592437e8e900b-c1165.jpeg&quot;
        srcset=&quot;/static/image1-05d68030af8dde74294592437e8e900b-c552c.jpeg 300w,
/static/image1-05d68030af8dde74294592437e8e900b-b5c43.jpeg 600w,
/static/image1-05d68030af8dde74294592437e8e900b-c1165.jpeg 800w&quot;
        sizes=&quot;(max-width: 800px) 100vw, 800px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h2&gt;如何切换到 HTTP / 2&lt;/h2&gt;
&lt;p&gt;HTTP / 2 与 HTTP / 1.1 向后兼容。但是，您需要执行以下操作切换到 HTTP / 2：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;采用 HTTPS 并获得 TLS 证书&lt;/li&gt;
&lt;li&gt;使用 image Sprites 而不是多个文件&lt;/li&gt;
&lt;li&gt;连接 JavaScript 和 CSS 文件&lt;/li&gt;
&lt;li&gt;域分片&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;HTTP / 2 如何解决 HTTP / 1.1 的限制&lt;/h2&gt;
&lt;p&gt;HTTP / 2 侧重于 HTTP / 1.1 中关注的具体目标和问题：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;创建客户端和服务器时允许选择使用 HTTP 1.1 或 2.0 的算法&lt;/li&gt;
&lt;li&gt;使用 HTTP / 1.1 保持对方法，状态码，URI 和头字段的高度兼容性&lt;/li&gt;
&lt;li&gt;减少延迟以提高网页加载速度&lt;/li&gt;
&lt;li&gt;支持常见的 HTTP 使用案例，如桌面 Web 浏览器，移动 Web 浏览器，Web API，各种规模的 Web 服务器，代理服务器，反向代理服务器，防火墙和内容交付网络。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;哪些浏览器支持 HTTP / 2？&lt;/h2&gt;
&lt;p&gt;大多数浏览器现在支持 HTTP / 2。浏览器列表包括最新版本的 Chrome，Firefox，Safari，Internet Explorer，Opera 等。您可以使用 &lt;a href=&quot;https://http2.akamai.com/demo&quot;&gt;Akamai 的工具&lt;/a&gt; 来检查您的浏览器是否支持 HTTP / 2。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/image2-49737f897dcdf24a81837308d777a899-2fdac.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 534px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 56.17977528089888%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAEDBAX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB3ILSRgL/AP/EABcQAQEBAQAAAAAAAAAAAAAAABEQAiL/2gAIAQEAAQUC0nbCf//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABkQAAIDAQAAAAAAAAAAAAAAAAEhAAIRIP/aAAgBAQAGPwJIwbbn/8QAGxABAQACAwEAAAAAAAAAAAAAAREAECFBUWH/2gAIAQEAAT8hdB/TCZcWTjBpdQdHuv/aAAwDAQACAAMAAAAQfM//xAAVEQEBAAAAAAAAAAAAAAAAAAAQQf/aAAgBAwEBPxCn/8QAFREBAQAAAAAAAAAAAAAAAAAAEBH/2gAIAQIBAT8Qp//EAB0QAQACAgIDAAAAAAAAAAAAAAERQQAhEDFRYaH/2gAIAQEAAT8Q1IkQgj7jFokE2h7yKgk0m8QeycFaKWl+eP/Z&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;image2&quot;
        title=&quot;&quot;
        src=&quot;/static/image2-49737f897dcdf24a81837308d777a899-2fdac.jpeg&quot;
        srcset=&quot;/static/image2-49737f897dcdf24a81837308d777a899-50a43.jpeg 300w,
/static/image2-49737f897dcdf24a81837308d777a899-2fdac.jpeg 534w&quot;
        sizes=&quot;(max-width: 534px) 100vw, 534px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h2&gt;HTTP / 2 如何帮助提高网页加载速度&lt;/h2&gt;
&lt;h3&gt;头部压缩&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;header&lt;/code&gt; 字段在请求或响应后发送。&lt;code&gt;HTTP / 1.1&lt;/code&gt; 请求和响应不会以纯文本压缩和传输，从而导致大量不必要的字节被下载。&lt;/p&gt;
&lt;p&gt;但在 &lt;code&gt;HTTP / 2&lt;/code&gt; 中，&lt;code&gt;header&lt;/code&gt; 字段被压缩并以二进制代码传输，使得用户计算机更加紧凑和高效地加载。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;header&lt;/code&gt; 压缩可降低客户端请求的开销，从而降低带宽并缩短页面加载时间。&lt;/p&gt;
&lt;h3&gt;服务端推送&lt;/h3&gt;
&lt;p&gt;在 &lt;code&gt;HTTP / 1.1&lt;/code&gt; 中，当浏览器连接到请求网页的 Web 服务器时，首先发送 HTML 文件，然后浏览器请求其他资源文件（如 CSS，JavaScript 等）。但在 &lt;code&gt;HTTP2&lt;/code&gt; 服务器推送中，除了响应原始请求以外，服务器还可以向单个客户端请求发送多个响应，而无需客户端明确请求每个响应。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/image3-9cf29ccfbeac589ec1a992b028df338e-c1165.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 24.125000000000004%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAFABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAd2AsD//xAAVEAEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAQABBQKP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFhAAAwAAAAAAAAAAAAAAAAAAABAx/9oACAEBAAY/AlT/xAAZEAADAAMAAAAAAAAAAAAAAAAAASERQVH/2gAIAQEAAT8hhKuGzD6P/9oADAMBAAIAAwAAABBzz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABoQAQEAAgMAAAAAAAAAAAAAAAERACFBYZH/2gAIAQEAAT8QVtUSvOBTFOsWdB5n/9k=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;image3&quot;
        title=&quot;&quot;
        src=&quot;/static/image3-9cf29ccfbeac589ec1a992b028df338e-c1165.jpeg&quot;
        srcset=&quot;/static/image3-9cf29ccfbeac589ec1a992b028df338e-c552c.jpeg 300w,
/static/image3-9cf29ccfbeac589ec1a992b028df338e-b5c43.jpeg 600w,
/static/image3-9cf29ccfbeac589ec1a992b028df338e-c1165.jpeg 800w&quot;
        sizes=&quot;(max-width: 800px) 100vw, 800px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    
如果您曾经使用过内联 CSS，JavaScript 或任何其他源文件等通过 url 请求文件资源的方式，那么您已经体验过服务器推送。通过手动将源文件添加到 URI 中，我们将该源文件推送到客户端，而无需等待客户端请求。我们可以通过 HTTP / 2 获得相同的结果并获得额外的性能优势。&lt;/p&gt;
&lt;h3&gt;通过单个 TCP 连接复用多个请求&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;HTTP / 1.1&lt;/code&gt; 的一个限制是它只能在一个连接上逐一请求文件 - 这意味着 &lt;code&gt;请求文件&lt;/code&gt;、&lt;code&gt;等待响应&lt;/code&gt;、&lt;code&gt;下载文件&lt;/code&gt;，然后 &lt;code&gt;请求下一个文件&lt;/code&gt;。这会产生 &lt;code&gt;header 阻塞&lt;/code&gt; 和 &lt;code&gt;低效使用底层 TCP 连接&lt;/code&gt; 的问题。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/image4-de923ca1f7ed362d60569789bfc1712d-20140.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 768px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 59.114583333333336%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3SgH/8QAFxABAQEBAAAAAAAAAAAAAAAAABEQIf/aAAgBAQABBQLOoiP/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAaEAADAAMBAAAAAAAAAAAAAAAAAREhQVGR/9oACAEBAAE/Icp6Hei6hI0ZHp//2gAMAwEAAgADAAAAEGDP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGxAAAwEAAwEAAAAAAAAAAAAAAAERITFBUZH/2gAIAQEAAT8QmRpfCMn0xNU25EaqVR3kidTwSW2lrVn/2Q==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;image4&quot;
        title=&quot;&quot;
        src=&quot;/static/image4-de923ca1f7ed362d60569789bfc1712d-20140.jpeg&quot;
        srcset=&quot;/static/image4-de923ca1f7ed362d60569789bfc1712d-5dffa.jpeg 300w,
/static/image4-de923ca1f7ed362d60569789bfc1712d-471ed.jpeg 600w,
/static/image4-de923ca1f7ed362d60569789bfc1712d-20140.jpeg 768w&quot;
        sizes=&quot;(max-width: 768px) 100vw, 768px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;HTTP / 2 中新的二进制框架层消除了这些限制，并且通过允许客户端和服务器将 HTTP 消息分解为独立的帧，交织它们，然后在另一端重新组装它们，从而消除了这些限制并实现了完整的请求和响应复用。&lt;/p&gt;
&lt;h3&gt;流优先级&lt;/h3&gt;
&lt;p&gt;一旦 HTTP 消息可以分成许多单独的帧，HTTP / 2 允许多路复用来自多个流的帧。客户端和服务器交叉并交付帧的方式成为关键的性能问题。为了执行此操作，HTTP / 2 标准将权重和依赖关系与每个流相关联。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;每个流可以被分配 1 到 256 之间的整数权重。&lt;/li&gt;
&lt;li&gt;每个流可以被明确地依赖于另一个流。

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/image5-3b97b92ddd57ec90b06a13f1eacbc483-c1165.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 46.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAe8UjQ//xAAWEAADAAAAAAAAAAAAAAAAAAAQESD/2gAIAQEAAQUCDj//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAbEAACAgMBAAAAAAAAAAAAAAAAASExEBFBUf/aAAgBAQABPyGfTcpCTo7FWP/aAAwDAQACAAMAAAAQwA//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAaEAACAwEBAAAAAAAAAAAAAAABEQAQITFR/9oACAEBAAE/EAALReKYIOrkQ0G6OFf/2Q==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;image5&quot;
        title=&quot;&quot;
        src=&quot;/static/image5-3b97b92ddd57ec90b06a13f1eacbc483-c1165.jpeg&quot;
        srcset=&quot;/static/image5-3b97b92ddd57ec90b06a13f1eacbc483-c552c.jpeg 300w,
/static/image5-3b97b92ddd57ec90b06a13f1eacbc483-b5c43.jpeg 600w,
/static/image5-3b97b92ddd57ec90b06a13f1eacbc483-c1165.jpeg 800w&quot;
        sizes=&quot;(max-width: 800px) 100vw, 800px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    
&lt;code&gt;流依赖性&lt;/code&gt; 和 &lt;code&gt;权重的组合&lt;/code&gt; 允许客户端构建并传送 &lt;code&gt;优先化树&lt;/code&gt;，表示它更愿意接收响应。反过来，服务器可以使用这些信息通过控制 CPU，内存和其他资源的分配来优先化流处理，并且一旦响应数据可用，分配带宽以确保向客户端最优地传送高优先级响应。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;HTTP / 2 的优点&lt;/h2&gt;
&lt;p&gt;切换到 HTTP / 2 的好处是立竿见影的。大多数用户正在使用可以利用协议的浏览器，每天的数字都在上升。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;更多屏蔽：默认情况下，HTTP / 2 始终具有加密功能，这可以在各个站点之间实现高度安全性。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;手机友好：所有的移动网站都被允许提供大量请求，以防止下载头中的数据字节是头压缩功能的结果。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;更快的页面加载时间：在消除了协议的许多障碍之后，HTTP / 2 承诺会比当前的标准更快。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;与 HTTP / 1.1 的兼容性： HTTP / 2 与 HTTP / 1.1 兼容。为确保切换到新协议的过程尽可能顺利，方法，状态码，头字段和 URI 与 HTTP / 1.1 中保持相同。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;减少对备选方案的依赖性：&lt;code&gt;多路复用&lt;/code&gt; 功能解决了耗费时间的方法来减少来自服务器的请求数量的问题 - 例如域分片，&lt;code&gt;image Sprites&lt;/code&gt; 或 &lt;code&gt;内嵌 Javascript 和 CSS&lt;/code&gt; - 并不是必不可少的。&lt;/p&gt;
&lt;h2&gt;HTTP / 2 的缺点&lt;/h2&gt;
&lt;p&gt;在转向新协议之前，企业应该考虑到一些限制。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;照顾观众：尽管大多数用户使用可以利用协议的浏览器，但也有一些人继续使用旧版浏览器，但浏览器却没有。除此之外，并非所有的 Web 服务器都支持 HTTP / 2。所以当前的页面加载速度优化过程仍然是必要的。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;HTTPS 要求：对于不使用 HTTPS 的站点，从 HTTP / 1.1 移动将变得更加困难，因为 HTTP / 2 具有站点已在 HTTPS 上的先决条件。因此，将网站切换到 HTTPS 需要将所有 HTTP URL 转换为 HTTPS。由于迁移到 HTTPS 对搜索引擎是一个积极因素，因此，升级您的网站会很好。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;页面加载性能可能最低：从 HTTP / 1.1 切换到 HTTP / 2 可能需要大量时间和资源，因此确保对网站速度的影响值得。如果某个网站已针对页面加载速度进行了优化，则性能改进可能会比预期的要小。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;HTTP / 2 未知事实： HTTP 仍然是新的，因此需要进行大量研究以确定最佳实践和可能的缺点。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[谁动了我的 DOM？！]]></title><description><![CDATA[元素的样式为何频频被改？ DOM 的属性为何离奇失踪？？ 消失的 DOM 究竟是何人所为？？？ 出现的陌生 DOM 究竟是人是鬼？？？？ 这一切的背后是人性的扭曲还是道德的沦丧？？？？？ 是无意写的 Bug 还是有人故意而为之？？？？？？ 让我们跟随镜头，探寻千变万化的 DOM…]]></description><link>https://knownsec-fed.com/2018-03-28-shui-dong-liao-wo-de-dom/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-03-28-shui-dong-liao-wo-de-dom/</guid><pubDate>Tue, 27 Mar 2018 16:24:51 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-ba4be0a2aaf0eb002ef06caf8c3b66ce-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMEAQL/xAAWAQEBAQAAAAAAAAAAAAAAAAABAAL/2gAMAwEAAhADEAAAAZ9j7Jwg2f/EABoQAQABBQAAAAAAAAAAAAAAAAECABAREiL/2gAIAQEAAQUC0McFSYKX/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFREBAQAAAAAAAAAAAAAAAAAAEBH/2gAIAQIBAT8Bh//EABoQAAICAwAAAAAAAAAAAAAAAAERACEgIoH/2gAIAQEABj8CZaoubAcMp4f/xAAcEAACAgIDAAAAAAAAAAAAAAABEQAxEFFhccH/2gAIAQEAAT8hCyCegRbAxZ0ZQAcCWOf/2gAMAwEAAgADAAAAECTP/8QAGBEAAgMAAAAAAAAAAAAAAAAAABEBIUH/2gAIAQMBAT8Qawmz/8QAFxEBAQEBAAAAAAAAAAAAAAAAAQARMf/aAAgBAgEBPxAb1gQzb//EABsQAQEAAwEBAQAAAAAAAAAAAAERACExYUHB/9oACAEBAAE/ECuVxpEWB6fmNMKCIYcN6XmXYEBxH3Etmzl+ZA5rHP/Z&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;谁动了我的 DOM??!&quot;
        title=&quot;&quot;
        src=&quot;/static/header-ba4be0a2aaf0eb002ef06caf8c3b66ce-d6978.jpeg&quot;
        srcset=&quot;/static/header-ba4be0a2aaf0eb002ef06caf8c3b66ce-527f0.jpeg 300w,
/static/header-ba4be0a2aaf0eb002ef06caf8c3b66ce-9a7cd.jpeg 600w,
/static/header-ba4be0a2aaf0eb002ef06caf8c3b66ce-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;元素的样式为何频频被改？&lt;/p&gt;
&lt;p&gt;DOM 的属性为何离奇失踪？？&lt;/p&gt;
&lt;p&gt;消失的 DOM 究竟是何人所为？？？&lt;/p&gt;
&lt;p&gt;出现的陌生 DOM 究竟是人是鬼？？？？&lt;/p&gt;
&lt;p&gt;这一切的背后是人性的扭曲还是道德的沦丧？？？？？&lt;/p&gt;
&lt;p&gt;是无意写的 Bug 还是有人故意而为之？？？？？？&lt;/p&gt;
&lt;p&gt;让我们跟随镜头，探寻千变万化的 DOM。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1&gt;起源&lt;/h1&gt;
&lt;p&gt;最近在做项目的时候，遇到一个问题：&lt;/p&gt;
&lt;p&gt;就是一个很久以前写的页面，里面的代码很乱。而我的任务是将页面的高度与屏幕适配。在部分页面存在着几个 &lt;code&gt;&amp;#x3C;iframe&gt;&lt;/code&gt;，我需要调整样式使其高度与屏幕适配，但是无论我怎么调整，总会有一个 JavaScript 在不停地修改 &lt;code&gt;&amp;#x3C;iframe&gt;&lt;/code&gt; 的高度，使得它的高度超出屏幕而出现两个滚动条。&lt;/p&gt;
&lt;p&gt;由于代码很乱，所以很难找到究竟是哪个代码在捣乱。&lt;/p&gt;
&lt;h2&gt;Chrome 中的解决方法&lt;/h2&gt;
&lt;p&gt;在 Chrome 中开发前端是非常开心的一件事情，因为浏览器提供了非常多的调试工具。而我经常用的一个就是：断点调试。&lt;/p&gt;
&lt;p&gt;Chrome 提供了一个 DOM 监视的功能，当 DOM 发生变化的时候，自动暂停，这样就能很快定位是谁修改了 &lt;code&gt;&amp;#x3C;iframe&gt;&lt;/code&gt; 的高度了！&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/chrome-846abb081b59d505521b846546df6b6e-576fc.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 377px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 86.20689655172414%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsSAAALEgHS3X78AAAD9UlEQVQ4y1WT7U/TVxTH+y/slboJAm1/hdYW+6MPgHaDQebIkr1Ysldb9sos+kIXqBCNe3Auvli2mWVZsgfGtneLm1m2makRZaJEhWEEUQFhCNJn2vLQQlto+ez8fgWMN/nm3Hvuvd97zrnfY3j9m2Favh7irc47HPp5UMfbP9zlwE93eKfzXw79OMCb3w6ifn6fhq+GUb94wN4v7+ETuM/cp/qzBzhlz3NmRF8b/L8MkQcyuTWCwRDhSJQngTDxZEL3a+P6aBjPyas0f9pL/enrqKf68J7uw/XJdZQPb2I/dQvHqZtYP76Foa31PdYLBbKZZYKBAMn5eYKhAIl4nPX1gk54o6cbt1JGo7OKfdUWmsU2CXx2haY9Fl5Rq2hxWmiUuaGtzU9hfZ3MyjJPpqeJRKMEwyGi0Ri5XK4YYc8V3JZy9rvtvKxa2e/aTZNqo1lsi/h8Tjs1qot6j1sjbCOfL7CayxKLRIjNzRGJxYQ4xuLiok54pbtbLnho9L1IvbdWUEdt3V72Oh28UV9Nc42QulR8Xs8mYZ61tTUhWNLt5igUiilfuHCBCqMJc6UNk6VKrBWzoqCYKnBYTNgUE1azkUpj+bOEWlSrq08J8/ni/Gr3ZTx7qlG9Pur3NeByuWn2qjTXufFJmo3eGl6V1F+rU58S5rIZ4pLq3FyEcCxCPBHfIu+51kulw81uSbvGbsXqcGJzerCpXtTal6iqrsHjsOKw20U2fr9+SSeU+s3PJ/Q6ptKprZQvX/wb47bnsO16noqdO1BKdlBZsh17mcx3bsP4wnYd9ooSDK2trWSzWdKpJWbklwMincePZ8hkMvJROZ10cKCfj461Czo4dtTP8XY/73cc5YMOPyfEar6TJ45z+N0DGI4cOUJMUg0EZhkeHmZ0fIyQyCaRSOgIhUIkk8liTUVeibl50itZltNp5hILzCeXWFpK6/tD9+4Va5jLreqaS8mhVCpFOr2sR5iWtebXMtAijUUjTEyOE5wNSFcFmPhvksmJR4xPjJORM/23bxUJ5WEhEGHPzIoWo3rE0ViUkLRiauP1zaHVdlUCyIpus7nMM3tjDx8WCbXXtUhmpwPMCGlc2m5mepawpKuNiAj+H/npS5cucvbX3/j9jz85e+4cf50/z42+Pq7JXn9/P99931kk1DSYlRSjkbDULKi3XTQSY2Gh2Ck9ly9Rq5TitSn4qot9rMFVaUK1VNBgN6Mq5XisZgzt7e1bIS8k4+QyK+TXVp8ReG9vL2W7Sqm0SHeYzVgEyiYUM1WbfpkbDh48yMjICENDQ/TdHuDu/TEeTU0zOjaq+6empujq6qKktBSTXDKaTBiNxg2YNmDcsv8D6L/Tqt+onLkAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;Chrome Break On&quot;
        title=&quot;&quot;
        src=&quot;/static/chrome-846abb081b59d505521b846546df6b6e-576fc.png&quot;
        srcset=&quot;/static/chrome-846abb081b59d505521b846546df6b6e-39723.png 300w,
/static/chrome-846abb081b59d505521b846546df6b6e-576fc.png 377w&quot;
        sizes=&quot;(max-width: 377px) 100vw, 377px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;在 Elements 页面，选中指定的 DOM 节点，点击最前面的“…”符号（或者使用右键点击），在弹出的菜单中选择“Break On”即可，可以选择多个。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Subtree Modifications: 当节点树发生变化时&lt;/li&gt;
&lt;li&gt;Attribute Modifications: 当节点属性发生变化时&lt;/li&gt;
&lt;li&gt;Node Removal: 当节点被删除时（包括下级节点）&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;只要启用其中一个，在具体事件发生的时候，Chrome 就会自动中断到当前执行的脚本代码处。&lt;/p&gt;
&lt;p&gt;由于 JavaScript 修改样式无非就是增加/删除 class，或是修改 style 属性，所以，使用 &lt;code&gt;Attribute Modifications&lt;/code&gt; 即可找到具体是哪个脚本在修改 DOM 了。&lt;/p&gt;
&lt;h1&gt;新的问题&lt;/h1&gt;
&lt;p&gt;在做前端开发的时候，经常会想要监听 DOM 节点的变化。当 DOM 变化的时候，触发一系列事件。&lt;/p&gt;
&lt;p&gt;一般来说，使用轮询的方式可以非常简单地解决这个问题，就是使用 &lt;code&gt;setInterval&lt;/code&gt; 来不断地检查 DOM 是否发生了变化。这种方式简单粗暴，但是会遇到两个问题：时间间隔设置过长，DOM 变化响应不够及时；时间间隔设置过短，不仅浪费 CPU，而且可能出现卡顿。&lt;/p&gt;
&lt;p&gt;当然，也可以使用 &lt;code&gt;requestAnimationFrame&lt;/code&gt; 来做，原理其实和 &lt;code&gt;setInterval&lt;/code&gt; 一样，只不过在一定程度上可以得到 DOM 变化实时响应，但是依旧是导致 CPU 运行时间片的浪费。&lt;/p&gt;
&lt;p&gt;有没有更好的办法呢？&lt;/p&gt;
&lt;p&gt;在旧版 DOM Events 标准中，有一个 &lt;code&gt;Mutation events&lt;/code&gt;，可以用来监听 DOM 的变化，在 DOM 变化的时候触发事件。&lt;/p&gt;
&lt;p&gt;在 DOM3 中定义了 9 种 Mutation 事件：&lt;code&gt;DOMAttrModified&lt;/code&gt;、&lt;code&gt;DOMAttributeNameChanged&lt;/code&gt;、&lt;code&gt;DOMCharacterDataModified&lt;/code&gt;、&lt;code&gt;DOMElementNameChanged&lt;/code&gt;、&lt;code&gt;DOMNodeInserted&lt;/code&gt;、&lt;code&gt;DOMNodeInsertedIntoDocument&lt;/code&gt;、&lt;code&gt;DOMNodeRemoved&lt;/code&gt;、&lt;code&gt;DOMNodeRemovedFromDocument&lt;/code&gt;、&lt;code&gt;DOMSubtreeModified&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;这 9 种事件可以直接通过 &lt;code&gt;element.addEventListener&lt;/code&gt; 添加到 DOM 元素上。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;但是，Mutation 事件已经被反对使用！并且从 Web 标准事件中删除了！&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;由于性能问题，Mutation 事件会导致 DOM 修改的性能降低 1.5~7 倍，并且不能通过移除事件来恢复性能。&lt;/p&gt;
&lt;p&gt;并且这个事件在各个浏览器上的实现也存在差异。&lt;/p&gt;
&lt;p&gt;所以，DOM4 开始，推荐使用 &lt;code&gt;Mutation Observers&lt;/code&gt; 来代替 &lt;code&gt;Mutation events&lt;/code&gt;。&lt;/p&gt;
&lt;h1&gt;Mutation Observers&lt;/h1&gt;
&lt;p&gt;Mutation Observer API 可以用来监视 DOM 的变化，包括属性的变化、节点的增减、内容的变化等。&lt;/p&gt;
&lt;h2&gt;比 Mutation Events 高在哪里？&lt;/h2&gt;
&lt;p&gt;为什么 &lt;code&gt;Mutation Observers&lt;/code&gt; 要比 &lt;code&gt;Mutation Events&lt;/code&gt; 好？&lt;/p&gt;
&lt;p&gt;由于 &lt;code&gt;Mutation Events&lt;/code&gt; 是监视到 DOM 发生变化时产生的事件，它会在任何一个 DOM 发生变化的时候立刻被触发。并且，由于事件是&lt;strong&gt;同步&lt;/strong&gt;进行的，所以如果 DOM 的变化较多，就会产生大量的事件回调，导致严重的性能问题。&lt;/p&gt;
&lt;p&gt;而 &lt;code&gt;Mutation Observers&lt;/code&gt; 虽然和 &lt;code&gt;Mutation Events&lt;/code&gt; 很像，但是 &lt;code&gt;Mutation Observers&lt;/code&gt; 不是事件，它是&lt;strong&gt;异步&lt;/strong&gt;触发的，并且不是每次 DOM 变动都会触发，而是会等待多次 DOM 变动完成后一次性触发，使用一个数组来记录 DOM 变动的步骤。这样一来，即使是频繁的 DOM 操作，对性能的影响也不会有多明显。&lt;/p&gt;
&lt;p&gt;举个例子，我现在需要将一篇包含 1000 个段落的文章显示到页面上，也就是要往页面中插入 1000 个 &lt;code&gt;&amp;#x3C;p&gt;&amp;#x3C;/p&gt;&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;如果使用 &lt;code&gt;Mutation Events&lt;/code&gt; 的话，这时就会产生 1000 个 &lt;code&gt;DOMNodeInserted&lt;/code&gt; 事件；而如果使用 &lt;code&gt;Mutation Observers&lt;/code&gt; 就不一样了，它只会触发一次，得到一个数组，包含了 1000 个插入节点的信息。&lt;/p&gt;
&lt;h2&gt;怎么用呢？&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;MutationObserver&lt;/code&gt; 是一个构造函数，可以使用 &lt;code&gt;new&lt;/code&gt; 来创建一个 &lt;code&gt;MutationObserver&lt;/code&gt; 的实例。这个构造函数接受一个回调函数作为参数，也就是每次 &lt;code&gt;Mutation Observers&lt;/code&gt; 触发时调用的函数，函数接受两个参数，第一个参数是 &lt;code&gt;MutationRecord&lt;/code&gt; 数组，用于存储 DOM 的变化记录，第二个参数是 &lt;code&gt;MutationObserver&lt;/code&gt; 实例本身。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;MutationObserver&lt;/code&gt; 的实例有 3 个成员方法：&lt;code&gt;observe&lt;/code&gt;、&lt;code&gt;disconnect&lt;/code&gt;、&lt;code&gt;takeRecords&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;observe&lt;/code&gt; 用于注册监听器，接受两个参数，第一个参数是要监听的节点，第二个参数是监听的配置。&lt;/p&gt;
&lt;p&gt;监听配置是一个对象，可以有 &lt;code&gt;childList&lt;/code&gt;、&lt;code&gt;attributes&lt;/code&gt;、&lt;code&gt;characterData&lt;/code&gt;、&lt;code&gt;subtree&lt;/code&gt;、&lt;code&gt;attributeOldValue&lt;/code&gt;、&lt;code&gt;characterDataOldValue&lt;/code&gt;、&lt;code&gt;attributeFilter&lt;/code&gt;，要监听哪种变化，只需要将对应的属性设置为 &lt;code&gt;true&lt;/code&gt; 即可，其中 &lt;code&gt;childList&lt;/code&gt;、&lt;code&gt;attributes&lt;/code&gt;、&lt;code&gt;characterData&lt;/code&gt; 三者必须至少出现一个。&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&quot;center&quot;&gt;属性&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;数据类型&lt;/th&gt;
&lt;th align=&quot;left&quot;&gt;描述&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;childList&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;boolean&lt;/td&gt;
&lt;td align=&quot;left&quot;&gt;观察目标增加或移除了子节点&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;attributes&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;boolean&lt;/td&gt;
&lt;td align=&quot;left&quot;&gt;观察目标增加、删除或修改了某个属性&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;characterData&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;boolean&lt;/td&gt;
&lt;td align=&quot;left&quot;&gt;（目标为 
&lt;code&gt;characterData&lt;/code&gt;
 节点时有效，包括文本节点、注释节点、处理指令节点等）文本内容发生了变化&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;subtree&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;boolean&lt;/td&gt;
&lt;td align=&quot;left&quot;&gt;不仅监视 
&lt;code&gt;ovserve&lt;/code&gt;
 第一个参数指定的观察目标，同时监视所有的下级节点&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;attributeOldValue&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;boolean&lt;/td&gt;
&lt;td align=&quot;left&quot;&gt;在监视 
&lt;code&gt;attributes&lt;/code&gt;
 的时候，属性发生变化后是否要记录变化前的内容&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;characterDataOldValue&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;boolean&lt;/td&gt;
&lt;td align=&quot;left&quot;&gt;在监视 
&lt;code&gt;characterData&lt;/code&gt;
 的时候，文本内容发生变化后是否要记录变化前的内容&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;attributeFilter&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;Array
&amp;#x3C;
string
&gt;&lt;/td&gt;
&lt;td align=&quot;left&quot;&gt;一个属性名数组，可以用于过滤 
&lt;code&gt;attributes&lt;/code&gt;
 的变化&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;注册成功后，构造函数里提供的回调函数将会被调用，第一个参数就得到了变化数组。变化对象的结构包含以下属性：&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&quot;center&quot;&gt;属性&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;数据类型&lt;/th&gt;
&lt;th align=&quot;left&quot;&gt;描述&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;type&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;String&lt;/td&gt;
&lt;td align=&quot;left&quot;&gt;变化类型，对应监听配置对象中的 
&lt;code&gt;childList&lt;/code&gt;
、
&lt;code&gt;attributes&lt;/code&gt;
、
&lt;code&gt;characterData&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;target&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;Node&lt;/td&gt;
&lt;td align=&quot;left&quot;&gt;变化的目标节点，如果 
&lt;code&gt;type&lt;/code&gt;
 是 
&lt;code&gt;attributes&lt;/code&gt;
 或 
&lt;code&gt;characterData&lt;/code&gt;
，则 
&lt;code&gt;target&lt;/code&gt;
 为变化节点，否则为变化节点的父节点&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;addedNodes&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;NodeList&lt;/td&gt;
&lt;td align=&quot;left&quot;&gt;被添加的节点列表（可能为 
&lt;code&gt;null&lt;/code&gt;
）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;removedNodes&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;NodeList&lt;/td&gt;
&lt;td align=&quot;left&quot;&gt;被删除的节点列表（可能为 
&lt;code&gt;null&lt;/code&gt;
）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;previousSibling&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;Node&lt;/td&gt;
&lt;td align=&quot;left&quot;&gt;被添加或被删除的节点的前一个兄弟节点（可能为 
&lt;code&gt;null&lt;/code&gt;
）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;nextSibling&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;Node&lt;/td&gt;
&lt;td align=&quot;left&quot;&gt;被添加或被删除的节点的后一个兄弟节点（可能为 
&lt;code&gt;null&lt;/code&gt;
）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;attributeName&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;String&lt;/td&gt;
&lt;td align=&quot;left&quot;&gt;变化的属性名称（可能为 
&lt;code&gt;null&lt;/code&gt;
）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;attributeNamespace&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;String&lt;/td&gt;
&lt;td align=&quot;left&quot;&gt;变化的属性所在的 
&lt;a href=&quot;https://en.wikipedia.org/wiki/XML_namespace&quot;&gt;XML 命名空间&lt;/a&gt;
（可能为 
&lt;code&gt;null&lt;/code&gt;
）&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;oldValue&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;String&lt;/td&gt;
&lt;td align=&quot;left&quot;&gt;如果 
&lt;code&gt;type&lt;/code&gt;
 是 
&lt;code&gt;attributes&lt;/code&gt;
 或 
&lt;code&gt;characterData&lt;/code&gt;
，则 
&lt;code&gt;oldValue&lt;/code&gt;
 为变化前的值，否则为 
&lt;code&gt;null&lt;/code&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;code&gt;disconnect&lt;/code&gt; 用于停止监听。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;takeRecords&lt;/code&gt; 用于清空并返回当前 &lt;code&gt;MutationObserver&lt;/code&gt; 记录的 DOM 变化步骤。&lt;/p&gt;
&lt;h2&gt;浏览器兼容性&lt;/h2&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/caniuse-385cadfe94d1b6acb95d2b8f58925df9-9baa9.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 181.35326514555467%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAkCAIAAAAGkY33AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEJklEQVRIx52U60/bZhTG829Nq6ZpUss2db0I6NYBKYTLlq5FCx2wBpWutKrGWkhouWxF3NTRkcCATpNGIIGEQBJCLrYT23FMSHxLYjt2CAkd66e9DuuHTluLkY6sc175p+c5571o2LiPinkYwpfEN+mEV2ZhiYXBt5CJ7mfRfwVYFFLhvXR0jyclPqYRKIinwtlkkN8N8IltLhHgU6E8h4Bfizxe5LGigJcETEl4/EDABSq4l46UBJSj/RoZXRDhmezOFs8iYgbLk4580pNjEZkJSywk0mGJCok0nKPDIAQqlEkExJRS8lRQk9nxpaLraRYmnk+i1tF0ws+g7t2om8U2GHIjgbopxJlAvUnUnUTXScS5g2xSmD+JuRnCq5EZWBZijN0Sbq4kBrplKZ5jIImBcgwsMUr/5YCOEplDJA4kiimQa3KpoJQncdMt78fvkBN9Eo8JqSCwJ1JhsexTpEICBRJQguQolBJoaHJUSJLixMg934X3yPEHABZTQVHpM/zmKMNAWSZjgz2+T949IUwM9njPn4pPPFQNyxKJD9/dPntqd/RBTi2cy5NU/x2L/gPH2uMChx4N6VgwmOG+ELct9uqeXZwin5SYKE8fGxbo0F9szAyZz9gvWeGRIouCo6MCPuSI4YDpI1u1NfJjkcMEDlYHDwVNH9qqp5GfCskwh7neSr6uHDRXLFVO4hPiH1aiuzWXib5V/HXYVjWNTkQ9s9NThjwXEY4NxwB82lZlgcccxKLBbyzQEbCuAj5jq7Yg4058oXPzZoFRqazA8PgavtChEiYeB/vfXzr/CzK2is+3bbafSLlsu8NzEttVM8iYU71tAA8c9awMTK3yyCt4DZtXa5so73OlJTLpJJ53bH5boBHV+zwTGl1DrJ1e4z4bVdNzwFThqhsd1899f6XTf0sm/YoyeFKOBW+bKtzaMbN2seuSYbGR6LouZqPK9WCgN8E8FfiTjQ0FTGed2p6Zlr6njQarFv6mXkhuJ+dHhZ0thf+vFsrPUAY5zMQHA/0XVmp161/VufV1y7oee7sIOcOtNVl0XeQQ4f/g1NLP+/DGIDRwcaW22XlNt6a/vNp4zdcpQU7EcCUbdYnpV9tWfhhzNATiH5js+GJovKVuq7XW0djkuqpzXa1ZbbrhuylH3FC7TkoGwN2WaSjPIns8vpfFFZhRSrCuiRj1xuHqc66Gz20N9faWBseXn640tDlv4MiSYb7ZN2featPGXFaKDaFLU+mN3yehJ/c2vhN3Q6mER2Oxm/WzTZWLNZcXtHXz9Z/9Wgvy6xade7D7ts3YO9368NnX5uW7j5y9fbPt5oWu+447t5eNA/b7Tz3DmgMxLqTDK9hcv/8HcFTA3fgNnU7R3n0h9jITfyElXsiJUjZWSqMHObIkEIeZ2MtsvJhGSxnsb0U5xFbf75XEAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;Can I Use MutationObserver?&quot;
        title=&quot;&quot;
        src=&quot;/static/caniuse-385cadfe94d1b6acb95d2b8f58925df9-abe1c.png&quot;
        srcset=&quot;/static/caniuse-385cadfe94d1b6acb95d2b8f58925df9-10046.png 300w,
/static/caniuse-385cadfe94d1b6acb95d2b8f58925df9-3c4a3.png 600w,
/static/caniuse-385cadfe94d1b6acb95d2b8f58925df9-abe1c.png 1200w,
/static/caniuse-385cadfe94d1b6acb95d2b8f58925df9-9baa9.png 1271w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;可以看到，兼容性还是非常好的，可以放心使用。&lt;/p&gt;
&lt;h1&gt;总结&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;MutationObserver&lt;/code&gt; 提供了比 &lt;code&gt;Mutation Events&lt;/code&gt; 更高效、更灵活的 DOM 监视方案，可以根据自己的需要自定义监视对象，在组件化项目中可以发挥更大的价值——不需要组件内部提供接口，就可以收到组件内容变化的通知。&lt;/p&gt;
&lt;p&gt;但是，&lt;code&gt;MutationObserver&lt;/code&gt; 虽好，可不要滥用哦！&lt;/p&gt;
&lt;p&gt;Chrome 提供的 &lt;code&gt;Break On&lt;/code&gt; 功能看起来就像是 &lt;code&gt;MutationObserver&lt;/code&gt; 的精简版，非常实用。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[【翻译】为开源软件设计]]></title><description><![CDATA[为开源软件设计 【原文标题】Designing for open source software 【原文链接】 https://uxdesign.cc/mattermost-relay-e19dfb68c708 作者：Varun Pai…]]></description><link>https://knownsec-fed.com/2018-03-27-fan-yi-wei-kai-yuan-ruan-jian-she-ji/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-03-27-fan-yi-wei-kai-yuan-ruan-jian-she-ji/</guid><pubDate>Tue, 27 Mar 2018 07:19:35 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-2b760d6dc817a3ab35b84acee629fa6f-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAABAAF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAwAE/9oADAMBAAIQAxAAAAESs5GstmDRf//EABoQAAICAwAAAAAAAAAAAAAAAAABAhEDEBL/2gAIAQEAAQUCVGOVHSER1//EABYRAQEBAAAAAAAAAAAAAAAAAAACEf/aAAgBAwEBPwG2P//EABYRAQEBAAAAAAAAAAAAAAAAAAABEv/aAAgBAgEBPwGMv//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEABj8CX//EABoQAQEAAgMAAAAAAAAAAAAAAAEAETEhUYH/2gAIAQEAAT8hIDhfbJhgyEnu2jRf/9oADAMBAAIAAwAAABB8z//EABYRAQEBAAAAAAAAAAAAAAAAAAABEf/aAAgBAwEBPxCGX//EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAECAQE/ECH/xAAbEAEAAwEAAwAAAAAAAAAAAAABABEhMUFxkf/aAAgBAQABPxB5FJbgqZl57uXsEKhuL7G02J7eJ//Z&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;【翻译】为开源软件设计&quot;
        title=&quot;&quot;
        src=&quot;/static/header-2b760d6dc817a3ab35b84acee629fa6f-d6978.jpeg&quot;
        srcset=&quot;/static/header-2b760d6dc817a3ab35b84acee629fa6f-527f0.jpeg 300w,
/static/header-2b760d6dc817a3ab35b84acee629fa6f-9a7cd.jpeg 600w,
/static/header-2b760d6dc817a3ab35b84acee629fa6f-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h1&gt;为开源软件设计&lt;/h1&gt;
&lt;p&gt;【原文标题】Designing for open source software&lt;/p&gt;
&lt;p&gt;【原文链接】&lt;a href=&quot;https://uxdesign.cc/mattermost-relay-e19dfb68c708&quot;&gt;https://uxdesign.cc/mattermost-relay-e19dfb68c708&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;作者：Varun Pai&lt;/p&gt;
&lt;p&gt;从历史上看，我们都知道开源软件的设计很糟糕。&lt;/p&gt;
&lt;h2&gt;Mattermost → Relay&lt;/h2&gt;
&lt;p&gt;当你听到一个产品上的“开源”这个词时，脑海中会浮现出什么样的画面呢?你能想象一个办公室里满是设计师对每一个小像素的痴迷吗?或者你能想象一群书呆子们拼凑出一些专有软件的破破烂烂的山寨产品吗?&lt;/p&gt;
&lt;p&gt;从历史上看，我们都相信开源软件的设计很糟糕。(当然不包括所有的开源软件)&lt;/p&gt;
&lt;p&gt;30年前，在1988年，软件的许可或设计语言的概念远远超出一般人。十年后，一切都很糟糕。软件几乎不工作。你的电脑上肯定有病毒。HTML有一个标签。安装Linux需要几个星期的耐心和对自己的信任，而我需要为马拉松训练的那种信念。如果有一个典型的失败，我们可以宣传为这个黑暗时代的典范，它是OpenOffice。或者StarOffice或LibreOffice或Apache OpenOffice或OOo或AOO或者任何你可能知道的名字。当产品的名字被打破时，它不太可能成为一个品牌。&lt;/p&gt;
&lt;p&gt;快进10年。截至2008年，火狐正在蚕食微软的午餐。Firefox是开源的、快速的、符合标准的。很容易喜欢Firefox。但是我们不喜欢以前的Firefox。我们喜欢现在的Firefox。Firefox之前就有一个品牌。一个品牌不是一个时髦的名字和一个可爱的标志。你的产品是你的品牌，你的产品是由它的设计决定的。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/01-acee8bf442dcef261fb5db0e40df6b03-7cfc4.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 400px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAADP0lEQVQ4y4WUW28bRRTH/XH4AEg88gG4SLwgXlChT4go0L6EVoheQ4tQkewmJKoSlaaCokSIRiVycHwJvsVOfFlfcrNjx+vb2l7bsR3bSZzY/z+z60R5QWG0v5kz55z575mZ1RpWll73l5bfwG53wGK1wmo2w+vxYM3ng0/gdLmwYrXBZrfjH6cTUiSCWDyOsBQTc5eIu3VfJBrD6qqjb3DYrPC4nHQ5V+kW+Lxurnlc9Ps8DG74GQ5uUAoFdEKBdUalEDdjEuNRiZKIhYLCFwkzJgX5t8UGw1JoG4+mXnFi7k/cN73E6Pg0Ru4+xahg5I4JX35n1NHskTtGfHVvAjdFztcPp3Dj+2nc/nEWY4+f4fGz37kQ2IfB5I7i8x9+4c2f53Ht0QzfGzPxw1smfvCNUR91+5bxHBPfF/6Pv53gZ/enef3BND8dn+G18Rl88fQ3TnpTMCzu5mDJVriwlcNsWObSzi5t+SotOZUWuayzIuI6mk/gKTe43+3phKqHdBRqWM6U+NyfhsErl+HYyzFk/AS3n/zEUeND+qNv6M426SlU6S4e0JVVhWCN1mSe9lSB9mSOK4ksfXKJUkHl6l4e5q0059ZEhcVmGzvlAybG3sGDd9/i3ZG3mdxcYGBikqHXfzD86iUDL2YZNJu57FrjoiBeOuBGRmEwW+KmUmdgPwn/Xop/SXkYeqenOCZZXPdCuvERFdcTNg9bVBbnmZ+fY+7FFOVfZ6k8n2QsFOS6FGHz5Ixqq0Ol2aZ62GGjc4ST0x7DmQYMQgv6Izq9v6Lhf0K7xQ4MwFCn3WqhUi5RrZSoFAsslxSWlCIr5bJua6OqVqgoCosiXlVVaku11YNzjcZh91KwVq1CEQKtVpO1WlWn2WiwXquxXq/pc01Em1erqu4bDIY1X2icnBxfCp6dnUHwn7vBFZsdVjnUOD4WgoPz14jKkJUzENtCp9NGv9/X8qBWKlrl6LTb6PV60PIHg/75eImmcXR0dHEperni/MpsHNR1+6IJcWpnWyzk2e12r7y0U/HFGFKp1CCXy2F7axPrfh9isSjS6TRkUa0sy9jZ2UZc/F3i8RiSySQywjeMDeM6mQyy2SwSicTgXycJFQWFVQFlAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;01&quot;
        title=&quot;&quot;
        src=&quot;/static/01-acee8bf442dcef261fb5db0e40df6b03-7cfc4.png&quot;
        srcset=&quot;/static/01-acee8bf442dcef261fb5db0e40df6b03-c1837.png 300w,
/static/01-acee8bf442dcef261fb5db0e40df6b03-7cfc4.png 400w&quot;
        sizes=&quot;(max-width: 400px) 100vw, 400px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;在2018年，用户期望要求设计渐近接近完美。您的产品最好是开放的、兼容的、干净的、快速的和强大的。当nilenso第一次从Slack到Mattermost的时候，我们把这些都记在心里。从我们第一次部署最重要的时候，它就感觉完整了。我们之所以选择Mattermost，是因为它与我们想要的设计非常接近，我们知道我们可以将它带到其他地方。&lt;/p&gt;
&lt;h3&gt;开始&lt;/h3&gt;
&lt;p&gt;目前最重要的设计问题不仅仅是视觉上的，而是与互动和体验相关的。我们首先讨论的问题之一是向通道历史添加无限滚动。我们无法理解为什么用户应该手动点击载入历史的每一页。所以我们把它优化了!&lt;/p&gt;
&lt;p&gt;在不久的将来，我们会把所有细微的细节都添加到你绝对喜欢的软件中。然而，目前我们的目标是解决用户对最重要的Mattermost／Relay体验的明显问题。像无限滚动这些问题，让我们的早期用户会对我们说：“啊…这不是固定的吗? !”&lt;/p&gt;
&lt;p&gt;这些问题源于不一致性和视觉差异所造成的痛苦，这些差异会阻碍可用性。很多人惊讶地发现，这些看似微不足道的问题，竟然会以千种剪纸的形式消亡。同样令人惊讶的是，一旦你掌握了基本的知识，软件就会变成一种乐趣。&lt;/p&gt;
&lt;p&gt;我们将从最基本的图标和字体开始，然后再讨论我们重新设计的Mattermost的细节。&lt;/p&gt;
&lt;h3&gt;Icons&lt;/h3&gt;
&lt;p&gt;当我们从Slack转向Mattermost时，所使用的图标的差异是明显的。最重要的图标在重量上不一致。他们站在外面，而不是混入其中。&lt;/p&gt;
&lt;p&gt;在进一步挖掘之后，我们发现Mattermost使用的是免费版本的字体Awesome。别误会我的意思，我喜欢字体太棒的家伙，我甚至支持他们的kickstarter。但并不是所有的图标都能在自由的重量(规则和固体)中得到，这是一个相当大的失败。&lt;/p&gt;
&lt;p&gt;我们有三个选择图标集的规则:
1.图标必须是开源的
2.图标需要扩展
3.图标需要有不同的样式(线条和实体)&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;请允许我打断一下。从技术上讲，我们可以通过将商业的人工制品从源树中保留下来，从而将其构建到中继客户端，即使中继是agpl3许可的(作为最基本的web应用程序的派生)。那么，为什么我们觉得图标必须是开源的呢?继电器生活在自由软件的原则和管理它的许可的原则的交叉点上。Relay站在巨人的肩膀上，不仅是最重要的源代码，还有Linux、GoLang、React和其他数百个项目。在这里，在精神和开放哲学的信之间，存在着大量的细微差别。通过这种细微差别来切割是一个根本的概念，但是“分享一样。”“如果我们从自由/开放的软件社区中获取一些东西，我们将会回到那个社区，为下一个接受者提供我们拥有的同样的自由。”如果我们调整继电器的设计，直到它完全完美，但这涉及到最重要的变化，最重要的是不能吸收上游，我们已经失败了，我们的每一个项目都是我们自己建立起来的。因此，我们的图标必须有一个开放的许可证。&lt;/p&gt;
&lt;p&gt;---Steven Deobald&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;谢谢你，Steven。记住以上几点，有三个图标集进行了最后一轮的讨论:
1.清晰的图标
2.羽毛的图标
3.标志性的图标&lt;/p&gt;
&lt;p&gt;我们选择了Clarity图标集，因为样式、一致性和图标是设计语言系统的一部分。Clarity是一个开源设计系统，由VMware的优秀人员创建和维护。由于VMware有一个专门的团队来推动持续更新，所以很少有人担心图标集会被抛弃或过时。

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/02-76c1e9120a3ccddc66fb677fd51ce326-7e266.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 39.4375%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAAA9ElEQVQY03WRTW6DMBCFfcEeqOoRuu02uy64QESOEKkLJKoQQEiW+A2kEAGJbQSGPHUkNxLpLKyZN/NZ42e2rGIcR6UGrfWjOAzDPM+Uo0Ul0yK++u+Cb5Z5om6aZpzzsizNtJTS87zz+YfKtm3ruun7nmmZ3qIPGX8auCiKLMtOpz+4aS6+H2AjKkEeDseu69h67Wma9G8YBbm56FF5AkMFv/wfIIUQSFitum2835ceYTirqnIcJ0kSo2A6CII8zwnGo6Iogins+8Jfdq9vXxszCrcwih5hpNi2DYcIdl3XsizwT9aGt+t/wp7m2UqpMAzh3x0lfsnXP0djmgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;02&quot;
        title=&quot;&quot;
        src=&quot;/static/02-76c1e9120a3ccddc66fb677fd51ce326-abe1c.png&quot;
        srcset=&quot;/static/02-76c1e9120a3ccddc66fb677fd51ce326-10046.png 300w,
/static/02-76c1e9120a3ccddc66fb677fd51ce326-3c4a3.png 600w,
/static/02-76c1e9120a3ccddc66fb677fd51ce326-abe1c.png 1200w,
/static/02-76c1e9120a3ccddc66fb677fd51ce326-7e266.png 1600w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h3&gt;FONT&lt;/h3&gt;
&lt;p&gt;我们的字体选择遵循同样的规则:
1.字体必须是开源的。
2.字体应该有多个权重。
伴随着这些也进行了补充：
1.字体大x高，易于阅读。
2.字体有较厚的常规重量，所以字体将会是脆的。&lt;/p&gt;
&lt;p&gt;我们非常重视字体的权重，因为中继首先是一个消息传递工具。在接力赛中，你把大部分时间都花在阅读上，我们希望这段经历尽可能的愉快。中继也有完整的Markdown支持和权重，帮助在应用程序内部和消息本身中建立层次结构。&lt;/p&gt;
&lt;p&gt;我们发现有几个竞争者满足了这些要求。PT Sans、Lato和Noto Sans都有令人愉快的阅读体验，但经过大量的尝试和错误之后，我们选择了Fira Sans。

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/03-80519e50ed30bdbae45d215f82d6f351-7e266.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 44.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAABFUlEQVQoz5WQXXKEIAzHvf8VeoCepa+dVkEE/LYzgm4Xrbqg2xC1fdi+9DcZJDEh/yRwA5vL521Rd892/w/BcqGXt6d5aKzdnLPrut5OxnEchmFZltsDELLOBbOZ5MsrT4u6rquqKsuyP9FI/xe6/zTjVzDPc9tpSmPGWAKwRHcd2CN9jx/8B4+CKF+slYaGUsoszfI8F0JwzoWQcMKLPPGev3AuBWRJSEhlZowJpmkCGU3zQQmNaUwIARW7hWFEAUIJWhQR70IOXn6LYWCoBNWoP2FI7GHoHpE9CKNlWQbr9MUwA6wqfA8JPo19UMGPHUF6CiFFUfjOzjkY25ihbVvcRKcPOqWOs8OgUmpfHFyuV2Ot/QavDuwuxG1bhQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;03&quot;
        title=&quot;&quot;
        src=&quot;/static/03-80519e50ed30bdbae45d215f82d6f351-abe1c.png&quot;
        srcset=&quot;/static/03-80519e50ed30bdbae45d215f82d6f351-10046.png 300w,
/static/03-80519e50ed30bdbae45d215f82d6f351-3c4a3.png 600w,
/static/03-80519e50ed30bdbae45d215f82d6f351-abe1c.png 1200w,
/static/03-80519e50ed30bdbae45d215f82d6f351-7e266.png 1600w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/04-b0075b8bf1f407cfbf76c74cd6611356-7e266.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 44.49999999999999%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAABI0lEQVQoz5VQu3KDMBDk/7uU+YfU6dOlxMEGIRgz4WkjC/QwjokMZCXitJ7s6HG3p9vVnBfw/dPHS3Phy7LM87z8B16kyuf4tTmfbPMyrxIPsTgbbyoa9fbOeiGF6Pt+GAZjzPcjfI3G3G6e0boiJN3v8888jiljp2maUDZ/uLnjjjUe3QMP9pfr9dAc6qrmnHecM8baFqtFylwA5uBwPCJrESilIOFZmeuYJGkYRoQQe0YWMb5BaRQis8v3Nxt/s93udttdEASQuDePI8TyvCgKu6uyKooSQemwxnXdlGWFEpjV2X57bc6yDLawIhGxljGFM3GgNIlWkiaExGEYpknadZ11xtxxaX0WQiglISmlxOilg9ZaCNn3KP4yuEFiopjrD5nZ9nsQUHXnAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;04&quot;
        title=&quot;&quot;
        src=&quot;/static/04-b0075b8bf1f407cfbf76c74cd6611356-abe1c.png&quot;
        srcset=&quot;/static/04-b0075b8bf1f407cfbf76c74cd6611356-10046.png 300w,
/static/04-b0075b8bf1f407cfbf76c74cd6611356-3c4a3.png 600w,
/static/04-b0075b8bf1f407cfbf76c74cd6611356-abe1c.png 1200w,
/static/04-b0075b8bf1f407cfbf76c74cd6611356-7e266.png 1600w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;Fira Sans是一种难以置信的字体。它有各种各样的重量和压缩性质的字体保存消息接口，同时保持它的脆性。&lt;/p&gt;
&lt;p&gt;你知道Fira Sans是建立在Erik Spiekermann的商业字体FF Meta之上的吗?这个Spiekermann是由Mozilla基金会委托的!
（阅读这里的了解全部故事：&lt;a href=&quot;http://typographica.org/typeface-reviews/fira-sans/&quot;&gt;Fira Sans – Typographica&lt;/a&gt;）&lt;/p&gt;
&lt;h3&gt;Mattermost如何成为Relay&lt;/h3&gt;
&lt;p&gt;实现设计基础改进了现有的经验。但要使这些改变真正令人愉快，我们需要对应用程序的各个方面进行微调。
1.左侧边栏
2.频道标题
3.主消息传递界面

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/05-369efdaecdf8f3081cef17a8ea3dcdd7-7e266.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 56.06250000000001%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABuklEQVQoz32QXSsEURzG9wN4q91Z1oqtdaPcuHAhyjVRMjMrb61S7t1wy0fwAZS4tithWsbKO4VQSojyEtnB7s6Zc+acM7PjnB2kTZ6L/zmdzq/n+T+eQNtUa8t4gzRd0j4ndMxunz8bQIcQOXlZlkUoYZNSatt27luEEPbiEZrHQp0ztf3LwciiX1o6OLqy3u+1jyylhMHs32/G+ZbLe0obRwNyPBTdCPYmhIi6f3xjZ59Sb2kDAOdfceeipolA93z1gCpIK34xsXD28AhT2Y8MpZad1//wZFCOhQbXfeKKT17dO7mxMg+uM4QQQGT/SlsIFzdNcud+tSKiCJG1w+NrBzxndIRYaSZG1NERAcAg+KuCn+X5zhwW52sG172SUi4m4mf3T0jD0PyphyXHGLPCC5zZC4crpVh4KOmXFK+Y2D29dfArRISXbHOekQAANl1Pt3z2bpom37lKjoWjSb+s+HrWtjYvwOOdpiNoGCgvkwuzw72z6baYTqc5zJyr+tSyrmWvrKzupN5eoJbJQgNSy8r9qXxsXdd57JqeeP3IZt1wMhxVDy81HgnTHA/Nv+WcQoydEBOE6SeehxqZdwlAuQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;05&quot;
        title=&quot;&quot;
        src=&quot;/static/05-369efdaecdf8f3081cef17a8ea3dcdd7-abe1c.png&quot;
        srcset=&quot;/static/05-369efdaecdf8f3081cef17a8ea3dcdd7-10046.png 300w,
/static/05-369efdaecdf8f3081cef17a8ea3dcdd7-3c4a3.png 600w,
/static/05-369efdaecdf8f3081cef17a8ea3dcdd7-abe1c.png 1200w,
/static/05-369efdaecdf8f3081cef17a8ea3dcdd7-7e266.png 1600w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h3&gt;左侧边栏&lt;/h3&gt;
&lt;p&gt;侧边栏的团队部分允许用户在组织内的团队之间切换，他们是其中的一部分。当前的Mattermost实现截断了团队名称并添加了一条署名。这个问题的问题在于，它不会增加任何值，因为在团队中徘徊会打开一个带有团队名称的工具提示。我们删除了byline和截断的文本。

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/06-e148829a1d3adca5c27351f4295625e6-7e266.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 43.0625%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAABy0lEQVQoz2P4DwV//r9c/v/x5P+/X4C5/2Di///9A7Hvf3vWcHHuonvbkeUY/v79d+LSoz3Hb2xf37FqXfPWE5f3nn3x8etPuLa3H7/uOfFg0o5DtrOao5fP33Xq6clrL6Gaf/397567StCqntdtbqxtrYdllXLchqv33gLlfv/+CyQ3nXyY6pje6J2l4jx7lXGAj01pZOcJsNH/GX7/++9dtFHauYXfub/GOKTcM0EvbdP1+2DNf0Cat556GGWfleWazm/d2WLka+lXH9V+BKr5x6+/9vGTBAzTBOw6+PzWCfqvlAhcc/HOe6D0L7DNB07f57Ss5bWp4XefKxCyld1nrU/lQbjmf7axfQIGifz2XXKx+1US9mkm77949yNC85n7fObVQpYVQj5LtdMOK8buCW05A9X88/c/84huLp0EAfsuhdi9ctE7leN3X7z3EdlmPvMqcZtKQa/F8rH7JMK2hzafRmg2Cu5gVY9ht2iTjNwjGrJdNmoXsuZ9p+4x6ZdzGJVyuS4UCd3N67fFv/4kVPPff/8Onb2/8cD1rUfvHbj4Zs+5V/vOv/709Tc8ql6//7r50M0th25sP/Fk7/k3By++uXz/EySqADtrdCh3hH4JAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;06&quot;
        title=&quot;&quot;
        src=&quot;/static/06-e148829a1d3adca5c27351f4295625e6-abe1c.png&quot;
        srcset=&quot;/static/06-e148829a1d3adca5c27351f4295625e6-10046.png 300w,
/static/06-e148829a1d3adca5c27351f4295625e6-3c4a3.png 600w,
/static/06-e148829a1d3adca5c27351f4295625e6-abe1c.png 1200w,
/static/06-e148829a1d3adca5c27351f4295625e6-7e266.png 1600w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;侧边栏的通道部分被混合在一起。有一个明确的层次结构，包括通道标题，如“最喜欢的通道”和区分活动和非活动通道。我们把这种等级制度带到表面。活跃的通道有一个沉重的重量和不活跃的通道逐渐消失和一个较低的不透明度，尽管增加的脆度的Fira Sans。&lt;/p&gt;
&lt;p&gt;分组通道现在有更紧密的间距，组本身有更大的间距，允许组标题有更小的字体。总之，这使得层次结构一目了然。

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/07-3f6aa7289cc45f21c520d26f4b589c8a-7e266.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 62.87499999999999%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACrUlEQVQoz2P4//3ffyD49/P/8wX/n8z4/+fdfzD/PwT8/f/3D4h9/sPN6vMztj49ChL7B5Vl2HjszbZL7/acvLd5XcfWtY17T17df/7VtpMPH7z6BJQ+eeP1puPPDl183bJ1r+n0hsINa49derPz1OMDl579+vOXId6gxM2yTC5qg3LkNgHfjXzui4W8F/LbL1yw8gZQc2Hy+knyts7eneZZe0yjt0l5r+Rxmy/svcgjfseH9z8ZOrQTKr3jdFI36UYvE/KYK+A+X8x/oYr78pXL7wA1FyWvbdZwsYiZqJ24XjpgIa/bXEGP+UKe851jt3z48JOB332tYNAaYd/Vgr6rBXxWAZFowBoGh8WTN4Js9qg4yOS+QTRsk1jgehEgClgvGrCOx2u1ZtLWd59/MsgH71FO3Kccv1c+do9a0j7FuL2iYTuZ3LdM33QfqDmg9rRcxB6tlANKcXvVk/ZrphwQD9/F4bNVL/3gu8+/GEySDupn7jfI2K+btk8vfb8hmCEcsm3udpDmjP4rDgWH/etPeFUfByKf2hMeVcdcyo86lh59D9RslXbYLO+gdcFhs9yDRpkHjLMPAEnhkO1ztz8Aao5pu6Aas8e68LBF3iHjrIO66fuBFmil7LPIPwzSrBK2RyZ6l3TETsnwnYJB2/j8twoHb2d02zRt0z2gZp/KEwK+2xTjdstF75KJ2iUUtE0gcBuH92ad1H0gZ6uE7paLBctF7wIqkozYIR66g9l903SwZr/qk0L+25Tj9wB1ysXsUk3YIxWxE2gB0H6QZrWIPQpxu5Xj9oiH7QDaCURABrJmEf/t6kl7gQogsiIh23n9t+qmQTSH75GP3S0duRMih6lZ2H+7SuIeibCdQkEYmmUDdkpG7pQI34FVs2/VST6fbUDTxUJ3CGHYDAB/xZ+urdHd1AAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;07&quot;
        title=&quot;&quot;
        src=&quot;/static/07-3f6aa7289cc45f21c520d26f4b589c8a-abe1c.png&quot;
        srcset=&quot;/static/07-3f6aa7289cc45f21c520d26f4b589c8a-10046.png 300w,
/static/07-3f6aa7289cc45f21c520d26f4b589c8a-3c4a3.png 600w,
/static/07-3f6aa7289cc45f21c520d26f4b589c8a-abe1c.png 1200w,
/static/07-3f6aa7289cc45f21c520d26f4b589c8a-7e266.png 1600w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h3&gt;频道标题&lt;/h3&gt;
&lt;p&gt;在通道标题中我们清理了图标。以下是我们在图标上遇到的问题:
1.大多数图标的重量都不一样。
2.有些图标的大小不同。
3.一些图标有一些定位覆盖来对齐它们。&lt;/p&gt;
&lt;p&gt;通道头的旧图标突出显示，将注意力从主聊天区转移开。我们想让他们融入设计中不引人注目但仍然很明显。为了做到这一点，我们去掉了边框，将图标设置为清晰。

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/08-209a93a01f4a0021bf5b5730d520fe6b-7e266.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 56.3125%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABCklEQVQoz6VR20oDMRDd//YXfPFZf0H8ClErgliR1SIFxS202m2ySZPJ3JyIKN6g0sMhJJk5cyaThvzd0O7i6koNwir6Sf6F/vEmdLdvydpoUSaNDmAo2QNGzD7H1RoG4CQ/eXQ6OTs5xt5z1kaQIWVIwIUJqK6FMWPdo3yjoFzO4L574QxC5rwFmuvldGd0MFq0dmCR/4kn7mlvfDheTquYWazAH7ARxUKLWJDe59pIUZuZRgVfKDI4SH0Kz5GjyFo/SFEU9OKh2z9vu3mvoUYbq0hM5mlNWzFzthMh1Ra+0qIByizkQlQzzdnuTSo1yozWUgHGTd+cC7oQc87J4Hs39IvgNhVv81Wvne+D/MH4++UAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;08&quot;
        title=&quot;&quot;
        src=&quot;/static/08-209a93a01f4a0021bf5b5730d520fe6b-abe1c.png&quot;
        srcset=&quot;/static/08-209a93a01f4a0021bf5b5730d520fe6b-10046.png 300w,
/static/08-209a93a01f4a0021bf5b5730d520fe6b-3c4a3.png 600w,
/static/08-209a93a01f4a0021bf5b5730d520fe6b-abe1c.png 1200w,
/static/08-209a93a01f4a0021bf5b5730d520fe6b-7e266.png 1600w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;除了图标之外，我们还为标题和右侧的侧边栏修改了CSS，去掉了所有有趣的边距和相对位置。我们还为每个图标添加了一致的高度、大小和大小。这些修复不仅仅是在UI中添加了抛光效果;一旦合并，他们也将确保社区中的任何人，包括我们，更容易定制最重要的。&lt;/p&gt;
&lt;h3&gt;主消息传递界面&lt;/h3&gt;
&lt;p&gt;消息传递接口是用户花费最多时间的地方。消息传递接口也是最重要的设计不一致的地方，这是最基本的:对齐、贴子之间的间距、字体大小和界面上的其他元素，如应答框。&lt;/p&gt;
&lt;p&gt;在我们使用Fira Sans之后，增加了字体的大小，确定了标题和名称的粗细，以建立层次结构，和固定的对齐方式，间距问题，以提供更清晰和更愉快的阅读体验。

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/09-32191529096b8757e5625ca45456303c-7e266.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 109.87500000000001%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAIAAABPIytRAAAACXBIWXMAAAsSAAALEgHS3X78AAABxUlEQVQ4y51U247TMBD1/38J8AIChBBPCKFFYsXCC6ii3XbTNE1cx7ETO77H2TGIEAFLN3tkWZqx5+KZM0aOXqjjyyGODwDSfZ3na0oba+2kDSFYY73zAGMMiPEX4NQ5p7UGJdIu0lMtWs55CzKcwY1hBlDCHmeYlMgax6+el+WO1o0Qwjm/IG3jxzXnVXNseSeETInFFP1extINj3ef9mTfdRJSWVYwaweGi6rKOKGy5X0n+q7r23ZwbjznCxml2cdnZf6dYiKaRjImWimEllKHc+9HvRs2ndBOW+dgQXdcCD6OynrGoAX8Zwvjv4BsGF5sPxfkYLUJQ5g7nhp7Z+Rvzf6SrOM4xLiYZejytHq1ee+N+zsmAMgAJJv7nXiS0gZZKVdVWCk13Zg4BEWASvzx1PADydixg169LisshYT7i5JHIz/41ZvN9ibL9hif5vHPGx+tfEu3p6qCyIuInYyvFX1SfCnyvMLYGK10AsSfT+jdaQvitxe73Q0lddcmcsGCTSkdzn0RyNfX8upRUeKaEDCCue6EZCrwtPz/y4diakwawYeQJJPkafahLEp45+/vZhzv4wmVmr/DX1nDYCTiuCz4LY6BCBNRox5+AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;09&quot;
        title=&quot;&quot;
        src=&quot;/static/09-32191529096b8757e5625ca45456303c-abe1c.png&quot;
        srcset=&quot;/static/09-32191529096b8757e5625ca45456303c-10046.png 300w,
/static/09-32191529096b8757e5625ca45456303c-3c4a3.png 600w,
/static/09-32191529096b8757e5625ca45456303c-abe1c.png 1200w,
/static/09-32191529096b8757e5625ca45456303c-7e266.png 1600w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h2&gt;主题&lt;/h2&gt;
&lt;p&gt;可访问性问题。我们有感光敏感的同事，我们相信你也是。这就是为什么Relay的布局框架有亮色和暗色的主题。&lt;/p&gt;
&lt;p&gt;现在已经有很多的Relay/Mattermost最兼容的主题，但是我们还是将把所有的精力投入到这两者中。他们已经把火炬传递得很漂亮，而且每一次改善都只会变得更好。&lt;/p&gt;
&lt;p&gt;当然，我们并没有把你限制在这两个主题上。Relay还带有社区主题和Relay的整个色彩方案是完全可定制的…不仅仅侧边栏。我们正在努力通过CSS使Relay 100%定制，这样用户就能完全控制UI的各个方面，如果他们想要的话。

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/10-9860c7d296a1a37795dde6e32c9d8dd2-7e266.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 29.75%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAABBElEQVQY02MwMY51dUzw9Mk3MU62skw/f+7m508fv3399vfP3z+///z6+evnj5+/fvz6+uUrkP37128ggggCEYOurr+Dfa63d42bS5m7a+WSheufPHz47t17oBxQHUQ/RAOEC0RwIxi0NL2dHIqD/Ft8vet9vRrXbtpz/+HdRw8fv3v7DqgCYj9WBNHs62BX4Ovd4Opa5eNat/DM4Ssv77598frHjx9g5/34/esXViNAmjU1fJwcigL9m12dK7086lYu33Ln1s3Hj54AbX4PhG/ff/709fcv3Dbb2xZ4uNU42JV6utdu3rjv4/u3Hz9+AobQl89fv339+eXzjx/fgZZj0QwArQAcGooJqTcAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;10&quot;
        title=&quot;&quot;
        src=&quot;/static/10-9860c7d296a1a37795dde6e32c9d8dd2-abe1c.png&quot;
        srcset=&quot;/static/10-9860c7d296a1a37795dde6e32c9d8dd2-10046.png 300w,
/static/10-9860c7d296a1a37795dde6e32c9d8dd2-3c4a3.png 600w,
/static/10-9860c7d296a1a37795dde6e32c9d8dd2-abe1c.png 1200w,
/static/10-9860c7d296a1a37795dde6e32c9d8dd2-7e266.png 1600w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/11-20cfeb3f63221ccbb4c9c54c598071d5-7e266.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 29.75%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAAA70lEQVQY03WOa0vDMBSG+0PmhogXZLAuaa5Lm0SnYLehDDYoMrVL2igtdn7o/1+26Rd18HI4t/c8J+hfPwk6j+Xq4nx2dTnjrLwbbwguIFhHcI0ig5HFyDBa+sSXB+2bNjg7lRBkInaMmjBcgcFi8rBRsj6s7v3fV3z8paDX5RF8vdWNVjXFLsRZOm2maatk5ccQ5H89P8qDXkeA8DmJK8ZKEpr+slSLr3vdELz7lpDCM+Exc7czQvDlRn9SYiNohoPl/LGdpK1/RMtaJ5VgDh0ln+zIjDoI3rwZDjOVuFh8cOZG/J0jK3BBkf0Pnm8BcDNgUy9sWCMAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;11&quot;
        title=&quot;&quot;
        src=&quot;/static/11-20cfeb3f63221ccbb4c9c54c598071d5-abe1c.png&quot;
        srcset=&quot;/static/11-20cfeb3f63221ccbb4c9c54c598071d5-10046.png 300w,
/static/11-20cfeb3f63221ccbb4c9c54c598071d5-3c4a3.png 600w,
/static/11-20cfeb3f63221ccbb4c9c54c598071d5-abe1c.png 1200w,
/static/11-20cfeb3f63221ccbb4c9c54c598071d5-7e266.png 1600w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h3&gt;整合在一起&lt;/h3&gt;
&lt;p&gt;通过对图标、字体和主题的一致设计语言，我们确保所有的“片段”都是完整的。将它们组合在一起，应用程序本身就变得很完整了。

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/12-19c862703c933a4e6a672379d5fbe695-7e266.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 48.12500000000001%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAABb0lEQVQoz32Rz0vCUADH/YPqXE3mnBrT2dQ6Bx27BCoRDpaBJZ06FEQQ1cGjEHRJsUPQpQ4dAuvQpZLQzTRye9v0vW2avTkQihx8Du/Xh+973+cJ+VdYLjk3szo9tVwu3cKeLneUQX/Qt/qWaRnIwMAexOCpg2mYeBEPPH5qLcoKEYb3EqnTk4v32pskNmG3h/cc3zmNGcsO2MdyOs7txLhckBaOj87rtddGXWx/tBBETv4kEEIeypdMxLaj7FaI5PcvS4+g9iW10ehWDm4yTaUW4/kIs+nzbhSKV+KnKNYbQAGaqqlA1TV9Uv4omUxGmGyQztAUf7BXeH6qSlJT7siKrABZVwHUVOiWHFvIseEsSayXK/fWt6ECzenTQLgqu61/ZcOwC0stJfJhRggQmd1i8U6sgrZsWZZLVRj8Fvwuu7A4Zyd7Z9OlysNwOIRd6G7+krlobj7AE6RwfXaIXm4aLdlEaHzuT+HjL8DX/gFk5O7o2HXx2QAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;12&quot;
        title=&quot;&quot;
        src=&quot;/static/12-19c862703c933a4e6a672379d5fbe695-abe1c.png&quot;
        srcset=&quot;/static/12-19c862703c933a4e6a672379d5fbe695-10046.png 300w,
/static/12-19c862703c933a4e6a672379d5fbe695-3c4a3.png 600w,
/static/12-19c862703c933a4e6a672379d5fbe695-abe1c.png 1200w,
/static/12-19c862703c933a4e6a672379d5fbe695-7e266.png 1600w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;Mattermost发布了一项设计挑战，鼓励来自世界各地的设计师提高最重要的可读性和可用性。我们的重新设计解决了这个挑战。&lt;/p&gt;
&lt;p&gt;注册一下（&lt;a href=&quot;https://relay-chat.com/signup&quot;&gt;Relay&lt;/a&gt;），尝试重新设计，并且告诉我们你的想法!&lt;/p&gt;
&lt;p&gt;随着视觉设计的改变，中继也致力于显著改善用户体验。我们的公共Trello董事会包含了我们的Relay计划。&lt;/p&gt;
&lt;h2&gt;未来&lt;/h2&gt;
&lt;p&gt;“设计”是Medium最受欢迎的第8个标签。“开源”排名290。源代码许可永远不会像你所在城市的自来水公司那样性感。供水本身就是你城市设计的一部分。同样地，你作为用户的自由被设计成你购买的软件。你对产品的所有权只是设计之树的另一个分支。&lt;/p&gt;
&lt;p&gt;开源软件需要好的设计，因为好的设计尊重用户。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[【译】node.js Two-Factor 身份认证]]></title><description><![CDATA[原文地址：  Two-Factor Authentication with Node.js 原文作者： David Walsh 有许多的各式各样的方法策略，以保护你的重要网络凭证。我们经常听说Password managers和 Generators…]]></description><link>https://knownsec-fed.com/2018-03-27-fan-yi-nodejstwofactor-shen-fen-ren-zheng/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-03-27-fan-yi-nodejstwofactor-shen-fen-ren-zheng/</guid><pubDate>Tue, 27 Mar 2018 02:25:01 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-d965f95ca887cb28f097c3fc9f5ed07d-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAAAvklEQVQoz52SMQ6FIAyGvSKLgzdwIo6cxIEbOJMQBndWvYC7zg4mtn3wIoSoT8Pr0qbJ//HTtqCbwCNCDQA+k8u+F/t32uIX8CRKQU+8e2Cq2LYNh2EAay3M8wzpe9kOfdn3PQghiHNOLuM0TR4avp8HXNcV2rbFqqqoaRp0UDTGfIH7vucDvajrOqjrmhhjVJYljuP4n8MAXZYFlFIgpQStdZxh1pavo4xbfl7xi8NYhv5xj/l3eL7FNN4cfgAQEQLeXbtRMQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;【翻译】node.js Two-Factor 身份认证&quot;
        title=&quot;&quot;
        src=&quot;/static/header-d965f95ca887cb28f097c3fc9f5ed07d-d6978.jpeg&quot;
        srcset=&quot;/static/header-d965f95ca887cb28f097c3fc9f5ed07d-527f0.jpeg 300w,
/static/header-d965f95ca887cb28f097c3fc9f5ed07d-9a7cd.jpeg 600w,
/static/header-d965f95ca887cb28f097c3fc9f5ed07d-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;原文地址： &lt;a href=&quot;https://davidwalsh.name/2fa&quot;&gt;Two-Factor Authentication with Node.js&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;原文作者： David Walsh&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;有许多的各式各样的方法策略，以保护你的重要网络凭证。我们经常听说Password managers和 Generators，但对我而言，更重要的方法是使用Two-Factor身份验证（2FA）。可以猜到密码，可以电话号码冒用，但从本质上说，使用Two-Factor身份验证要求用户拥有一个物理设备和像谷歌这样的身份验证应用程序，应用程序中装满了许多秘钥，提供一个额外的安全层。&lt;/p&gt;
&lt;p&gt;我曾经没有认真对待Two-Factor身份验证，直到有人&lt;a href=&quot;https://davidwalsh.name/freedavidwalshdotname&quot;&gt;偷走了我的域名&lt;/a&gt;，并试图将其转移到安全的避风港。虽然我不知道他们是如何做到的，但我确信他们可以访问我的电子邮件地址，创建过滤器，因此我看不到电子邮件等等验证信息。如果我使用了Two-Factor身份验证，我的电子邮件或GoDaddy帐户就可以正常访问了。不使用的话，盗窃者可以从科迪布朗那里拿到电话验证码，因为电话号码验证来允许交易获得批准，盗窃者在几分钟之内就偷了&lt;a href=&quot;https://medium.com/@CodyBrown/how-to-lose-8k-worth-of-bitcoin-in-15-minutes-with-verizon-and-coinbase-com-ba75fb8d0bac&quot;&gt;8,000美元的加密货币&lt;/a&gt;。今天，我对所有重要的电子邮件，工作和财务账户都使用了Two-Factor身份验证。&lt;/p&gt;
&lt;p&gt;由于我经常使用2FA，因此我想了解开发人员为其用户如何管理验证流程。这将包括生成密钥，创建二维码，扫描二维码到Google Authenticator（由用户完成），然后验证用户秘钥与二维码。我发现了一个Node.js库&lt;a href=&quot;https://www.npmjs.com/package/speakeasy&quot;&gt;speakeasy&lt;/a&gt;可以实现！&lt;/p&gt;
&lt;h2&gt;设置步骤1：生成密钥&lt;/h2&gt;
&lt;p&gt;假设你已经安装了speakeasy npm install speakeasy，Two-Factor身份验证设置，开始为用户生成一个唯一的密钥：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; speakeasy &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;speakeasy&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; secret &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; speakeasy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;generateSecret&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;length&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;secret&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;base32&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 将此值保存到用户的数据库中&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 例子：JFBVG4R7ORKHEZCFHZFW26L5F55SSP2Y&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;该密钥应与用户的数据库中的记录一起存储，因为它将用作未来验证2FA代码的参考。&lt;/p&gt;
&lt;h2&gt;设置步骤2：生成二维码&lt;/h2&gt;
&lt;p&gt;Google身份验证器等应用允许用户扫描二维码或输入文本密钥。扫描图像的速度要快得多，因此提供二维码对用户来说非常方便：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; QRCode &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;qrcode&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

QRCode&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toDataURL&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;secret&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;otpauth_url， &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;err， image_data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;image_data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;//用于二维码的图像数据URI &lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;QRCode.toDataURL提供可用于img属性src的图像数据。如果你不熟悉二维码，它会看起来像这样：&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/2fa-qr-code-0aec3cdd559e9077dd0b34d9544e6fce-11503.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 354px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsSAAALEgHS3X78AAADsElEQVQ4yyWU5yu9cRjGn3/AGwqv8FqSkSKiKOONvZN17L0K2Xuvknnsvfd2sokkI7LLlhlFeOP3OT9enI7n+9zf+7o+130f4fn5eWBgYHp6emhoaG9vb3Nz8/b2dnt7u62t7e7ubnV1lecfHx8nJyfHx8cPDw/8y8t9fX1nZ2fCwsJCQEBAUlJSSEhIc3Mz9XV1dQcHB1VVVeXl5Tyxs7PjND4+PigoqL29nc/k5GQ+GxoahLW1taysLAUFhbS0tMLCwoqKipqaGolEwo0aGhrFxcWPj4/5+fmysrLm5uajo6O5ubnKysrh4eFIEFZWVoKDg7OzsxMTE7nSwcEhMzOTKzw8PIyNjU1NTcVicVNTU2BgIK1SU1NTUlLKysoobm1tFZCOvYmJCRpSpq6ujsKEhISoqKju7u7Ozk4KMNLY2IguvOAuIyODEroKb29vvFRZWTk/P19QUIAwrEZGRkZERGxtbUVHR29sbGDb0dGRT319fWdnZ3t7ey59enoSfn9/JycnQVJfX+/m5gahnp4eaOOlpKQEtzo6OjExMYuLixQA38jICLdcdHR0JLy/v/N2aGgoGFCuqKhIzff3d3V1NW7Hx8ednJzAhhcfH5/Ly8vY2FhQ19bWSoFdXV1hBiRgpLO7u3tvby+EMQnFvLw8cGhra5uYmHDKLRi2srLCFJKF8/NzOqAZD/RHbU5OzuzsLOZbWlqwg3KOCGJqago0WPD09CwqKvr5+REODw/j4uLAGBYWBuGOjg4DAwP6Dw4OEsbY2BhqAVFaWkpPiBIVQSIbnFJgFxcXnFGmqamJVG9vbxkZGVtb2/T0dCJFiKqqKjVIlZeXxw79MEwKws7OjoqKCgGgx9DQEBWMMZ2Xl5f5AkuOAMmpv7+/paUlQTIwsMCvwBibmZn9TQUvESwqmDYEM7l6enqE5OrqihdUYJW0qASzFNjn5yds1tfXd3d3oeXn58fSvL6+gkpLS4saJlFNTQ1TnLq4uLAbbCEsWTLpeBIdwIBBTwsLi5GREZyjjd1gK728vPhOfiREPSB8fX0l//+ki8EwooQxIEaYM4k2NjYMCV94CHMQgoeosANnTomduZSuJPsgJycHquHhYcSzT/39/fDgLmtra3Kam5tj+6HNYiopKYlEoq6uLh4KS0tLqCIJJoQmf4MBQuYB2eDQ1dVl4a+vrwkPw/x4AAWnp6enwsvLCw1nZmZ4j7b7+/sMMAppxWARKdt3c3MDW35kvr6+YHl/fw9zjv4BMBmyWMLYBJsAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;2fa qr code&quot;
        title=&quot;&quot;
        src=&quot;/static/2fa-qr-code-0aec3cdd559e9077dd0b34d9544e6fce-11503.png&quot;
        srcset=&quot;/static/2fa-qr-code-0aec3cdd559e9077dd0b34d9544e6fce-4ad6f.png 300w,
/static/2fa-qr-code-0aec3cdd559e9077dd0b34d9544e6fce-11503.png 354w&quot;
        sizes=&quot;(max-width: 354px) 100vw, 354px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h2&gt;用户步骤1：扫描二维码/将站点添加到身份验证器&lt;/h2&gt;
&lt;p&gt;此时用户应已打开Goog​​le Authenticator（或Authy等）并扫描二维码; 您的网络应用程序会被添加到设备的应用程序。从这一刻起，无论用户何时想要登录（或执行任何想要受保护的操作），系统都应该认识到用户想要使用2FA，并且您应该要求他们从其应用中输入令牌。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/2fa-google-auth-e860fca34b509e3f4928db54dd37bfc4-1ba38.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 676px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 149.11242603550298%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAeCAIAAACjcKk8AAAACXBIWXMAAAsSAAALEgHS3X78AAADy0lEQVQ4y41VXU8jNxQdXuAXIJ54QGjbJ4q2+8Rf6k9aqc+VKlVVUbcQIAnJQtgACd2UECbkOyHZfMz3eDyZsT09ntndbgnp9sryHDv3+Nr3XDvK3t7e5ubmxsbGzs7O1tbW6uqqoigrKyvot7e3d3d319bWgDEPn/X19VcvX33z3be7P+xtf/9CKRQK+Xw+k8mcnJykUqmDgwOAo6Oj4+PjbDaby+UwBE56OKRhmXTu8m36NKNEUaSq6mAwAOCcCyG63e5kMun1erPZrN/vT6fT0WiE3vd9/Aofzni33fWpr1BKc/l8qVRyXVfTNBAQEBEQCrs4jm1/f//w8LDT6ZimaRgG1ioWi7quKyAkU+PxGAERwbIsDNFjPsFmbPBMHGAYIoyS+CEsIcRxHHO5fV4lMRkZHKCxtImuazi5iNtXDeeVZMc2e/1eq1kfjj7ItMmsREJ8bHI5sYTsEWdkiUIjuhtGVy1RavF3D/zigb/vArC7R97XRH3E40UXyHPqXNTDSjd8cxNcNwH4mcpSFfZjNvi9HF432et0eHbPviSLeCeSTD2nMxVnqkj9JcodAF7piko/Oq2Jiwdx3RI3Hczwxc1LMjLs+1QzZJ5HExNgotmabhEiFXBc8mX6kpjtdhslhGKRZKxBXHxt17UB0DAC2fOIRz0unpKHwyHIjDEFAe3/tEW1SWxS5zigS1G4/tyfB/Izn0scN/oJBPOnBpZCPG82HTfqtbpaazfUZrOJw0T/t0hwPio6k2BqBZ3xHFfGpuKDKcam6Gu8M+WtMR8aYmmRDA2+X+bFBj98zys9/utVWHvk6VsGhQp1hpligz0vFcgIAtfTO5a/Zz+/C3+5DE9rHHwobBBRbjPLE9FCwX8kaw5/GLFHnTdGjHFuuLzaDzE0XBGwSHcF409pYRgitci2Sz3XMmfEsRzL0HSNuLZj6ZyHi+dMclmtVm9vbwEUKOl51CU07tEB+Ph4FO+MlIrSeSzfPyaLKi5AFIkl+fIhSGrLTqoN8T0iezRMWv+unOTZUOAZMmF6EY5neZEfRg6NQhbZNNKcyPUBBA2W6EyJAz2RbVzA3B17ey/T/ts1w32uD/mbmzBbZeU2fz7bIA80fq7Ka/zTefjHn6zUlu8B7vBVU6p1rjIMA/ZcZN9z1CG/bKKeBKKhVKoDoQ6FOhLdmSBz6MxbE7HsPrtzn+CFtXBhtClxDNuGZqZl6q6N3sTWXMcKguCzVNAJakmpkFhKoY0UiRAPjcYWq+ZL5eKGqpB/FUzuPkm1LJLkBTa+ZvonS/4kEtbf7RtgqJiiXGcAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;2fa google auth&quot;
        title=&quot;&quot;
        src=&quot;/static/2fa-google-auth-e860fca34b509e3f4928db54dd37bfc4-1ba38.png&quot;
        srcset=&quot;/static/2fa-google-auth-e860fca34b509e3f4928db54dd37bfc4-5b3bc.png 300w,
/static/2fa-google-auth-e860fca34b509e3f4928db54dd37bfc4-579b0.png 600w,
/static/2fa-google-auth-e860fca34b509e3f4928db54dd37bfc4-1ba38.png 676w&quot;
        sizes=&quot;(max-width: 676px) 100vw, 676px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;出于调试的目的，您可以通过以下方式获得应该是给定时间的用户代码值：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token comment&quot;&gt;//从数据库中的用户记录中加载secret.base32  &lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; secret &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; token &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; speakeasy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;totp&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  secret&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; secret，
  encoding&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;base32&apos;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h2&gt;用户步骤2：提供令牌/验证令牌&lt;/h2&gt;
&lt;p&gt;当您的Web应用程序提示用户输入当前的2FA令牌并且用户提供6位令牌时，Web应用程序必须验证该令牌：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token comment&quot;&gt;//这是由用户通过表单POST发送来的 &lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; userToken &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; params&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;token&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;//从数据库中的用户记录中加载secret.base32 &lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; secret &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;//验证用户令牌与此时应该匹配的内容&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; verified &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; speakeasy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;totp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;verify&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  secret&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; secret，
  encoding&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;base32&apos;&lt;/span&gt;，
  token&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; userToken
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;如果令牌匹配，用户可以被信任; 如果令牌不匹配，则Web应用程序应提示用户再次尝试。请记住，验证器每隔{x}秒提供一个新的令牌，因此不正确的令牌不应立即产生红色标志，令牌可能在用户提交表单时过期。&lt;/p&gt;
&lt;h2&gt;现场演示&lt;/h2&gt;
&lt;p&gt;Speakeasy开发人员创建了一个实时的&lt;a href=&quot;https://sedemo-mktb.rhcloud.com/&quot;&gt;Speakeasy 2FA演示&lt;/a&gt;供您参考，以便您可以从用户和开发人员的角度了解所涉及的步骤。&lt;/p&gt;
&lt;p&gt;这篇文章仅仅是对2FA的一个简要概述，更高层次的概述 - 请阅读&lt;a href=&quot;https://github.com/speakeasyjs/speakeasy&quot;&gt;speakeasy文档&lt;/a&gt;以获得更详细的解释以及了解更多具体的2FA方法。在一个理想的世界中，大多数登录用户都会默认启用2FA身份验证，但对于大多数网络用户来说（可能是非技术用户），可能会引起混淆，因此我可以理解为什么2FA被认为是额外安全措施而非必要。非常感谢Speakeasy的开发人员提供易于学习的Node.js库，以及出色的文档和简单的样例。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[服务端渲染和静态化]]></title><description><![CDATA[这里不说 React 的 SSR，说下在 hapi 框架下使用 hapi-react-views 静态化网站时的一个小 tip。 hapi-react-views 的 render 服务端渲染其实很简单，就是把数据和模板结合的一个过程，最简单的例子可以用 ES…]]></description><link>https://knownsec-fed.com/2018-03-25-react-server-side-render-with-hapi/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-03-25-react-server-side-render-with-hapi/</guid><pubDate>Sun, 25 Mar 2018 03:46:00 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-921925015decb72b2c474fc73b392bc2-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAHcizQJ/8QAFhAAAwAAAAAAAAAAAAAAAAAAAAEg/9oACAEBAAEFAhT/AP/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEABj8CX//EABkQAAEFAAAAAAAAAAAAAAAAAAEAESAhQf/aAAgBAQABPyFbcizH/9oADAMBAAIAAwAAABAL/wD/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAaEAEAAQUAAAAAAAAAAAAAAAABEQAgITHB/9oACAEBAAE/EFAl1SRDshA9t//Z&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;服务端渲染和静态化&quot;
        title=&quot;&quot;
        src=&quot;/static/header-921925015decb72b2c474fc73b392bc2-d6978.jpeg&quot;
        srcset=&quot;/static/header-921925015decb72b2c474fc73b392bc2-527f0.jpeg 300w,
/static/header-921925015decb72b2c474fc73b392bc2-9a7cd.jpeg 600w,
/static/header-921925015decb72b2c474fc73b392bc2-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;这里不说 React 的 SSR，说下在 hapi 框架下使用 hapi-react-views 静态化网站时的一个小 tip。&lt;/p&gt;
&lt;h2&gt;hapi-react-views 的 render&lt;/h2&gt;
&lt;p&gt;服务端渲染其实很简单，就是把数据和模板结合的一个过程，最简单的例子可以用 ES6 的字符串模板来理解。&lt;/p&gt;
&lt;p&gt;hapi-react-views 的基本用法文档写的很详细，不赘述，这里着重看下 render 的方法。根据文档有一下 4 种渲染的方式:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;reply.render(‘index’, data)&lt;/li&gt;
&lt;li&gt;request.render(‘index’, data)&lt;/li&gt;
&lt;li&gt;server.render(‘index’, data)&lt;/li&gt;
&lt;li&gt;manager.render(‘index’, data)&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;无论那种方式，首先要调用 render 方法，然后将模板和数据传入到 render 方法中。但是 hapi 自身并没有 render 方法，而是 hapi-react-views 本身提供的，然后注入到 hapi 中并挂载到 hapi 不同的对象上，来方便我们获取到 render 方法而已。&lt;/p&gt;
&lt;p&gt;实际上渲染这个过程与 hapi 并没有太多的直接关系，只要能够拿到 render 方法，我们就能够得到一系列的 html 字符串，然后可以通过 hapi 的 reply 返回给前端。抛开框架，简单示意下流程:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; hapiReactViews &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;hapi-react-views&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; reply&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; render &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; hapiReactViews&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;render&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; htmlString &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;index&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;reply&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;htmlString&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;注: hapi 在注册 views 时，注意 &lt;code&gt;server.root.views&lt;/code&gt; 和 &lt;code&gt;server.views&lt;/code&gt; 的区别，否则会报错。&lt;/p&gt;
&lt;h2&gt;如何静态化&lt;/h2&gt;
&lt;p&gt;网站的静态化就是把整个网站所有可访问的 URL 返回的 HTML 都已文本的方式保存。在细粒度上控制可以有全站静态化，模块静态化，详情静态化，定时静态化，按时间段静态化等。&lt;/p&gt;
&lt;p&gt;实现方式简单来说有两种方式:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;遍历访问所有 URL&lt;/li&gt;
&lt;li&gt;遍历渲染所有的 render 方法&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;第一种方式缺点显而易见，每个 URL 都要走完整的 HTTP 请求，耗时较长，也给服务器带来不必要的压力，但是好处是代码耦合度低。
第二种方式，直接调用 render 保存数据，优点是速度快，缺点是耦合度高。&lt;/p&gt;
&lt;h2&gt;实践&lt;/h2&gt;
&lt;p&gt;hapi 下实现服务端渲染和静态的化的关键在于如何获取 render 方法。虽然有四种方式都可以获取 render 方法，但是并不是每一种都能实现不同细粒度上的静态化。举个例子: 定时静态化 + reply.render(或 request.render)
由于定时静态化并没有 http 请求，所以此时是不存在 request 和 reply 对象，更不用说 render 方法了。那么四种 render 方式，只剩下两种可以选择，这里选择第三种，在 server 对象上获取 render 方法。&lt;/p&gt;
&lt;p&gt;第一步，定义公共的 service 层方法，专门渲染输出静态 html。该设计将渲染工作和具体模板引擎独立开，无论使用或更换什么渲染引擎，只需要传入对应渲染引擎的 render 即可。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token comment&quot;&gt;/**
 * 传入相应的渲染引擎 render，以及对应的业务参数
 * 返回 html 字符串
 * renderService.js
 */&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; renderIndex &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; options &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;render&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; params&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; options&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// 业务层代码 -- 根据 params 参数获取 render 数据&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; data &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getRenderData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;params&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;index&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;第二步，定义 controller 方法，实现 SSR。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token comment&quot;&gt;/**
 * 第一种 controller 层的实现方式
 * 不使用 service 渲染层，而是直接在 controller 中渲染
 * 优点：简单直接，缺点：无法公用 service 层方法，功能分层不明显，抽象度低
 * indexController.js
 */&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; indexController1 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; h&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;params&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
   &lt;span class=&quot;token comment&quot;&gt;// 业务层代码 -- 根据 params 参数获取 render 数据&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; data &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getRenderData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;params&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; h&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;index&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;/**
 * 第二种，调用公共 service 层方法，推荐这种方式
 * service 层抽象了公共的方法，所有需要 html 的地方都可以调用，代码简洁，分层明显
 * indexController.js
 */&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;requestWrapper&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; request &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// 强行将 render 的执行上下文绑定为 request&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; render &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;render&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;bind&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;render &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; render&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; indexController2 &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; h&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;params&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// 在 controller 中，从 request 中获取 render 方法，并强行绑定 render 方法的执行上下文&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;render&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;requestWrapper&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// 调用 service 渲染层方法&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; content &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; renderService&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;renderIndex&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;render&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; params&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;reply&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;content&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;第三步，定义静态化 schedule 层并以插件的形式插入到 hapi 中。server 中 render 可以类似理解为全局的属性，不需要具体的 request 和 reply.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; register &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;server&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; options&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; next&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// 通过 server 获取 render 方法，并强行绑定 render 的执行上下文&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; render &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; server&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;render&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;bind&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;server&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// 调用 service 渲染层，由于公用方法，减少了很多代码量&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; content &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; renderService&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;renderIndex&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;render&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; params&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  fs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;writeFileSync&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;indexPath&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; content&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
register&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;attributes &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  name&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;schedule&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; register&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h2&gt;总结&lt;/h2&gt;
&lt;p&gt;在同时需要处理服务端渲染和静态化的时候，有几个需要注意的知识点：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;hapi 注册 views 时，注意 &lt;code&gt;server.root.views&lt;/code&gt; 和 &lt;code&gt;server.views&lt;/code&gt; 用法，到底有啥子区别？&lt;/li&gt;
&lt;li&gt;javascript 中函数执行上下文绑定，如 &lt;code&gt;server.render.bind(server)&lt;/code&gt;，不这样绑定会怎样？&lt;/li&gt;
&lt;li&gt;service 渲染层的抽象，渲染通常不是在 controller 层吗？&lt;/li&gt;
&lt;/ol&gt;</content:encoded></item><item><title><![CDATA[如何写一个高逼格 README]]></title><description><![CDATA[最近一个项目从程序员变成了一个高级文档哥，好吧，我还称不上高级，但是我发现写文档真不是一件容易的事情，要怎么写的让人看的舒服、巴适、爽的不行，看完就想给你个赞呢？我也总结了一下写文档的一些感想，也不能说是经验，毕竟小弟还年轻，哈哈。 编写一个项目的 README…]]></description><link>https://knownsec-fed.com/2018-03-25-ru-he-xie-yi-ge-gao-bi-ge-readme/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-03-25-ru-he-xie-yi-ge-gao-bi-ge-readme/</guid><pubDate>Sun, 25 Mar 2018 02:33:41 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-81cd8091e971960cd0c5e31184e68a0f-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAEDBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAe7NBFH/xAAXEAADAQAAAAAAAAAAAAAAAAARICEi/9oACAEBAAEFAqdL/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFhAAAwAAAAAAAAAAAAAAAAAAACAx/9oACAEBAAY/AiL/AP/EABoQAAICAwAAAAAAAAAAAAAAAAExACERIFH/2gAIAQEAAT8hJQKmeECt6f/aAAwDAQACAAMAAAAQwA//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAbEAEAAgIDAAAAAAAAAAAAAAABACERIDGBof/aAAgBAQABPxAtF9Ti7LjUoxhZp//Z&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;如何写一个高逼格 README&quot;
        title=&quot;&quot;
        src=&quot;/static/header-81cd8091e971960cd0c5e31184e68a0f-d6978.jpeg&quot;
        srcset=&quot;/static/header-81cd8091e971960cd0c5e31184e68a0f-527f0.jpeg 300w,
/static/header-81cd8091e971960cd0c5e31184e68a0f-9a7cd.jpeg 600w,
/static/header-81cd8091e971960cd0c5e31184e68a0f-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;最近一个项目从程序员变成了一个高级文档哥，好吧，我还称不上高级，但是我发现写文档真不是一件容易的事情，要怎么写的让人看的舒服、巴适、爽的不行，看完就想给你个赞呢？我也总结了一下写文档的一些感想，也不能说是经验，毕竟小弟还年轻，哈哈。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;编写一个项目的 README 就像是写一本书的序言一样，一个好的项目不应该仅仅只有一份高质量代码，同时更应该有一份高质量的文档。而对使用者来说，一份好的文档能够节省大量的时间。&lt;/p&gt;
&lt;h2&gt;国际化&lt;/h2&gt;
&lt;p&gt;要知道比如 GitHub 这样的代码托管平台，可是有着另一个名字，全世界最大的同性交友网站（技术基不说话），你的项目可能不止中国的程序猿在使用，一个好的项目，使用者来自世界各地，那么一份中英双语的文档至关重要。&lt;/p&gt;
&lt;p&gt;毕竟对母语的文档有更加亲和的感觉，同时阅读起来会更加顺畅。&lt;/p&gt;
&lt;p&gt;比如，Ant Design Pro 的文档：&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/read1-4b6d2b1df1b8e4d7ea09cd79dd8f6fa8-69fab.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 571px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 23.992994746059544%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsSAAALEgHS3X78AAAAiElEQVQY052QwQ6CMBBE+/8/12gKWkNPUKjQHiQx9GD7tCZ4w6CTTPYy+3aygg3lnPlHIsZIPwxcp0AzLBi3cI+PgiSl/AGXueeIWMPp5YJJG20La4V+s3DOoVTFpTFIKdFao6oaYwyHo8La/qcXiHm+vZcm7+mspW076tOZcZzwIeB92N2u+AnCA4aP276FBwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;read1&quot;
        title=&quot;&quot;
        src=&quot;/static/read1-4b6d2b1df1b8e4d7ea09cd79dd8f6fa8-69fab.png&quot;
        srcset=&quot;/static/read1-4b6d2b1df1b8e4d7ea09cd79dd8f6fa8-f161a.png 300w,
/static/read1-4b6d2b1df1b8e4d7ea09cd79dd8f6fa8-69fab.png 571w&quot;
        sizes=&quot;(max-width: 571px) 100vw, 571px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h2&gt;项目是干什么的&lt;/h2&gt;
&lt;p&gt;首先，要有一个项目名，不一定要霸气，但是一定要朗朗上口，不会读起来很拗口，而且别太长。&lt;/p&gt;
&lt;p&gt;比如说，chalk、react、vue、commander 等等。如果自己实在不知道怎么起，搞个随机函数，试试自己的运气吧。&lt;/p&gt;
&lt;p&gt;当然了，如果你有 LOGO 是最好的了，一张高清大图 LOGO 帅一脸，看起来就舒服有木有。&lt;/p&gt;
&lt;p&gt;就比如说这样：&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/read-e1a2a950d53723a391359effcbaa12fd-5922e.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 328px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50.91463414634146%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAAA30lEQVQoz2P49ev3f2pihv94wD8g/vPv7/8/f/+C+X+BNIj/DyyDHTD8+weUxoHxgb8geSx6GHAqBoL7X1/9n3V+1/8V63f+//Hz5/9N2w78n35i+/8rnx6jqENxIT4D3//88t9nT9d/zYS4/0WlPf+NYpP+226s+//gy2vSDAQBWLjtfX31v/niiv9GLtH/jaYW/l/x9ASKPFEGoodj0enF//Wm5f9PODT9/8+/v1HUEG3gf2gMg8C190/+W+yo+3/g+TUU8X+keBmmGEbvf3b1/y8CriPaQGTN6BahAwAiBgA9VE7NGgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;read&quot;
        title=&quot;&quot;
        src=&quot;/static/read-e1a2a950d53723a391359effcbaa12fd-5922e.png&quot;
        srcset=&quot;/static/read-e1a2a950d53723a391359effcbaa12fd-da01a.png 300w,
/static/read-e1a2a950d53723a391359effcbaa12fd-5922e.png 328w&quot;
        sizes=&quot;(max-width: 328px) 100vw, 328px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;或者这样：&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/read2-5d5e03cdc0fe4ed3a5042fed13b700f0-63e88.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 219px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 108.67579908675799%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAAAsSAAALEgHS3X78AAAC5UlEQVQ4y51V30tTYRj+LpIIuukviC67ratuKkK3pJsghYx+UP5IgwizhGwLlUjWMmk/gjGwUIxiiLKWTrc53HSbOra5zU1U2qagt7qBMLedp/OdeQ477viDXng557zv9z3neZ7zHj4CNhiG4ZK/zxfybBZENVE/n0eB7YPW92t8EJQUmP0FfOSYAgfM93IsUGm/ULJPBCgqshdXYAGL4UURsLAlvYuJmWn8XU+JQMsYUpk0OtUqkKdynBlQoOnHV8Qi0eLK3SwsTjuuDn4E+fYKFTXXEVzwcy1qAU9IACwwRWm+cAiXmu+BNN8C6WvCac0L1H//ApnxA4j+OYjqCU6xYA872pDOpMtYEkh4Mjr0E+ZfJly4XQky1AHi/gwyrwdpq8WDxnpMj1owZZ3g1u7t7UlL5imnt7fR3PEa1SYtKkxdIIo6nJNdQcV9GYj2Gc5b+lCje48+raZIomQaxB7mix62Kt6ANFaBdNbhbO0NtHYpkUqmMDPvQ3VbC0gLa8WnxyBVl+FxuY/wcH88vKEALsqv4eW7t0isreFg2KaduPmoDpV37yCTTpfNaRlDp2MKBq0Ox0VLYxNSqVSZ7DLAhoYGdHV3Y31jA4FgENFoFJFIREhaSySTkMnl6O/vFySLPOTlbrAgPT090Ov1GBwYxOTEJMb+jGF8bFyU1nErRkZGYDQapSXzgJQBXWT5beHS4XDAbrdLp80Og8Eg7JUEDIfDiMfjgi9UilTmcjkOwGazCXN4KODy8jJOGhQwm80eDri6ugqTyQSdTseBcx8hEECQ/RButxtWqxV+vx8ulwuxWIx7PpLhysoKhoeH4fV6oVaroVQq0d7eDpVKBY1Gw72ot7cXCoWCY0e9PJJhqWTqVSaTwc7Ozv9LDoVCnOyTxrEMKZjT6cTW1hYSiQSS7ADTpH8En/wzvZrNZumxKR3MpaUleDwezM3NwefzSSbtzc7OYnNz8/Aj4GDjpMEcOFf+Ad3dIH4d4GetAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;read2&quot;
        title=&quot;&quot;
        src=&quot;/static/read2-5d5e03cdc0fe4ed3a5042fed13b700f0-63e88.png&quot;
        srcset=&quot;/static/read2-5d5e03cdc0fe4ed3a5042fed13b700f0-63e88.png 219w&quot;
        sizes=&quot;(max-width: 219px) 100vw, 219px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;再接下来，一个好的项目简介，能够帮助使用者了解他能够使用这个工具干什么，能不能满足自己的需求。一般来说，我们希望从简介中，了解下面一些信息：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;什么语言写的？Node、Python 还是其他什么&lt;/li&gt;
&lt;li&gt;这个项目的用途是什么&lt;/li&gt;
&lt;li&gt;最新版本信息&lt;/li&gt;
&lt;li&gt;构建、测试结果等信息&lt;/li&gt;
&lt;li&gt;Demo 演示地址或者官网&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;就像这样：&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/read3-31d573b50e7c98c1e9db00c5d1589cdc-48daa.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 763px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 23.85321100917431%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsSAAALEgHS3X78AAAA7UlEQVQY04WQzU7DMBCE8/4X3qBnJC4VhQNCQiqoggs8AwIppPmxE8duUv992FUDJ8RIo9GsV7O7LtbbSzbliu3ugc3TFevPFfcv17y+3/C4u+Pi9o3nD0VGiJH4BzOyFmXTUOmafTdQS8FgO5TuMceBUSvq4YCxgf+wBBfKeNTokdozaEd06SFEgg+EkIJiwDuHtRaXNPNoHWaOzNZjkz/1nVEIKan2NbKXSNlTdZqvVic11GJEpForJN2Z2YteUTYjXT/StB1yUGhjcN5TTNOcTjOYw5QmRdJiP0z2dMbyd3mTzBh/udR8Css93wN9f9smKdcrAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;read3&quot;
        title=&quot;&quot;
        src=&quot;/static/read3-31d573b50e7c98c1e9db00c5d1589cdc-48daa.png&quot;
        srcset=&quot;/static/read3-31d573b50e7c98c1e9db00c5d1589cdc-7a867.png 300w,
/static/read3-31d573b50e7c98c1e9db00c5d1589cdc-4af92.png 600w,
/static/read3-31d573b50e7c98c1e9db00c5d1589cdc-48daa.png 763w&quot;
        sizes=&quot;(max-width: 763px) 100vw, 763px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;对于我们技术 README 一定要各种徽章砸脸上，比如标配的 travis、coverage、npm 等等，给人一种安全感，如果你自己测试构建都没过，我用着也不放心。至于这些东西大家可以去这儿看看：&lt;a href=&quot;http://shields.io/&quot;&gt;shield.io&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;同时，我们要精要的总结项目的闪光点，有哪些特性是激动人心的，别人没有的，这是吸引用户的好方法。&lt;/p&gt;
&lt;p&gt;比如这样：&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/read4-181e1fda7e48c1f5dd2321a86a7feed3-c7da2.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 633px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 28.751974723538705%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAAAzUlEQVQY041R0Q6CMBDj//+GxG/RKBsMtqEgYIJsAwTqMROelNikabLc9Xq3IAwPYHGCFcuy4B+sdb8YNM0DbfvENE0Yx3HjMAxejbXoOgNLaq3DPM/7hn3f43g6g3EOzmPSGEpriCyFlBL59YZMKnpT0DqnIa/dbQLnHKKIIUkEhBCIGKPmHNdbAZGmeHadT+dc71OvCffWDowxuJBhmkkopX2KmMwZTyil9KZKKRRFiaqu/Rl2E64FZXknlqibBp+btrhX1db87VN+4Q3A/89CzoSeswAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;read4&quot;
        title=&quot;&quot;
        src=&quot;/static/read4-181e1fda7e48c1f5dd2321a86a7feed3-c7da2.png&quot;
        srcset=&quot;/static/read4-181e1fda7e48c1f5dd2321a86a7feed3-90aba.png 300w,
/static/read4-181e1fda7e48c1f5dd2321a86a7feed3-12a46.png 600w,
/static/read4-181e1fda7e48c1f5dd2321a86a7feed3-c7da2.png 633w&quot;
        sizes=&quot;(max-width: 633px) 100vw, 633px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h2&gt;安装及快速开始&lt;/h2&gt;
&lt;p&gt;这部分内容是是文档很重要的部分，通过这些步骤，能够让使用者快速的使用。&lt;/p&gt;
&lt;p&gt;首先，你要告诉用户怎么去获取以及初始化项目，比如下面这样：&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/read5-c02fca4bc88f9daae8ab30d3b087b1e2-95ce6.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 700px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 40.714285714285715%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABEklEQVQoz42S6W6DMBCE8/4vWKlpSlKOloTD+Lahme5uCEp/NKqlT2Mbe8QM7EAj5xkxZSRWIsQE5wN8iILzcVu7dS/ELHt8L8/Lxo4Nz92IfVHh8H7E/nBE1bRouwGXfsSZ4Hl74bUi7eX8oDQ+zx1GbeHZPCRBDPthQnGqUHzUUNrJA2WcMLHSJb7YjRM9ywhpFpO73s3E8Hq9IlLEW4wksVmt80SApbiPcCUpLyu3+a/IbOicEyyhtYa1DsYYUgvjFwx2gSJ8/AYdfzokMpc+USQ1GYpI8SYtaIrLcBSOF1Je9W/WjzLg5fUNx7JBWTX4qlucmLJGR/1y1MeeniGG3J/SRt40UQ8bW1+33+k//AB+HGuX4Bl6NgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;read5&quot;
        title=&quot;&quot;
        src=&quot;/static/read5-c02fca4bc88f9daae8ab30d3b087b1e2-95ce6.png&quot;
        srcset=&quot;/static/read5-c02fca4bc88f9daae8ab30d3b087b1e2-896dd.png 300w,
/static/read5-c02fca4bc88f9daae8ab30d3b087b1e2-9a461.png 600w,
/static/read5-c02fca4bc88f9daae8ab30d3b087b1e2-95ce6.png 700w&quot;
        sizes=&quot;(max-width: 700px) 100vw, 700px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;然后你需要给一个简单的例子，让使用者快速感受到使用它的好处：&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/read6-aa131217a7919e18d73181a70493c634-a072c.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 687px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 56.33187772925764%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAABNElEQVQoz51S2ZKDMAzj//9xewLlyH2QQACtA53OPrVsmRFOHiJLsosYI5TS8N6DMYau67EsM779iikleOdhfYDQHtp6uGHEECeqAT6MGKeEKc2HUCT6WS7RcYsHJ0IX0ciATnnUvUTL1dbMU4NM/gnFNC8wLYPsODrpoElloAikMuBS052Uy91BVv0JRVpXOCbQ3lv8PDREzVBfS5xvFU6XBpczR9OJrfvwVPmecFnhs+U7EVxrNJVBVUtcywa3iprcGpzKliJRL5XvSDfLqhcQZLvpOWVGWTK7DWcfTITN8PFYhikTUl6eHg1x3MMnRJpsRqBzGHccyjDvobUWjvZwq87BGAulNVUDrF/sobEONu8iYQiRVI2vmncr/QNkeQYTCj1NuqfhGAo+jE+r8ZjNv/gFPNlVtCddHP0AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;read6&quot;
        title=&quot;&quot;
        src=&quot;/static/read6-aa131217a7919e18d73181a70493c634-a072c.png&quot;
        srcset=&quot;/static/read6-aa131217a7919e18d73181a70493c634-1b896.png 300w,
/static/read6-aa131217a7919e18d73181a70493c634-c6a2a.png 600w,
/static/read6-aa131217a7919e18d73181a70493c634-a072c.png 687w&quot;
        sizes=&quot;(max-width: 687px) 100vw, 687px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;当然了，在这个地方，最好最直观的方法就是放一张 gif 的图片，吸引用户的注意力，同时给用户展示使用结果，比如这样：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/read-783a490f5dcb64a16f40a29a5114833f.gif&quot; alt=&quot;gif&quot;&gt;&lt;/p&gt;
&lt;h2&gt;API&lt;/h2&gt;
&lt;p&gt;API 是一个项目的灵魂，这是暴露给用户最直接的地方，当使用者有疑问的时候，他会第一时间去找你的 API 文档。&lt;/p&gt;
&lt;p&gt;对于一个 API 应该表述清楚的是：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;作用&lt;/li&gt;
&lt;li&gt;入参及每个参数是否必须，数据类型是什么等等&lt;/li&gt;
&lt;li&gt;返回值&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;如果你的 API 不多，那么可以放在一个文件里，但是如果你的 API 非常多，那么建议你将 API 单独放到一个文件里，这个文件留一个链接就可以。&lt;/p&gt;
&lt;p&gt;同时，如果你的 API 有相当多个版本，那么需要准备几份 API 文档，应对不同的需求。&lt;/p&gt;
&lt;p&gt;就比如这样：&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/read8-5fa4bb2bf7687439638e63eceb5c1c3e-bca50.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 735px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 11.428571428571429%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsSAAALEgHS3X78AAAAUklEQVQI112MUQ6AMAhDd/+7TjaZGgejCjMxWZMXWj5eMjOISKA6oMMmOpGPdcuy3eNJLsp5AxGh8oXSBHx21EPefoO4g1qPW9okfvz3vPeQeh7DApx/pVb/DQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;read8&quot;
        title=&quot;&quot;
        src=&quot;/static/read8-5fa4bb2bf7687439638e63eceb5c1c3e-bca50.png&quot;
        srcset=&quot;/static/read8-5fa4bb2bf7687439638e63eceb5c1c3e-41e4d.png 300w,
/static/read8-5fa4bb2bf7687439638e63eceb5c1c3e-f64ad.png 600w,
/static/read8-5fa4bb2bf7687439638e63eceb5c1c3e-bca50.png 735w&quot;
        sizes=&quot;(max-width: 735px) 100vw, 735px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h2&gt;版本变化&lt;/h2&gt;
&lt;p&gt;还有最好是能有一份 CHANGELOG 文档，对不同版本做了哪些修改，有什么特性等等，让用户知道每个版本干了什么。&lt;/p&gt;
&lt;p&gt;就比如这样：&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/read7-523ba0004ba966c0d5a0540a494588d4-b272b.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 870px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 66.0919540229885%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAABj0lEQVQ4y5VT23aEIBDz//+zra6oCChyMyUjbvfsS1vOmR0ubshkQrdtG5ZlwTRNNWZM8wytNR6jQowRHOd5/jk6Y6wAGWOg1xXramCtw1rXOWdc43zGHwAvoFzKc7O0OQFjrrmcLePX0fHPBO2HAcPjAaUU+n7AWDNl6JXBMC4Y1IppsXB7gtkzNp/gfBYir7J03nvR8C6RF+RKhZmRUhQtc04SMV1s5SxfIDegMKReA9kND4QQJI7jaBEE7Gh7IcQaB3zIOGJBiBk+lqbtBdqRlbVWylN3mT3LH/Hx+SUXjWqqXR/r+YTP0aKffY0Dszkq4zdA6jfKx0o03LYd/x2iX3NDx5LIUFVmy6Ixz5ee3KOleCHXt71Yga7WWl2Edgl2DzBbejanc841sEXs8xuT25X37/tZR+HlpczX7WSj9Srgrr4iMmPjeDHXd143souVHZuWn6Ddvu8CxlJZUmrWuc39Oj+ZS76i+Y6mL+XHOuJDNoRGZunWNTY1OOdbp56y56vevtRcxNw09nvJ30Ve9eYisuHiAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;read7&quot;
        title=&quot;&quot;
        src=&quot;/static/read7-523ba0004ba966c0d5a0540a494588d4-b272b.png&quot;
        srcset=&quot;/static/read7-523ba0004ba966c0d5a0540a494588d4-81012.png 300w,
/static/read7-523ba0004ba966c0d5a0540a494588d4-0f940.png 600w,
/static/read7-523ba0004ba966c0d5a0540a494588d4-b272b.png 870w&quot;
        sizes=&quot;(max-width: 870px) 100vw, 870px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h2&gt;FAQ&lt;/h2&gt;
&lt;p&gt;当然了，如果你不想回答一些非常重复的问题，我想你需要一份 FAQ 来记录一些常见问题。&lt;/p&gt;
&lt;h2&gt;贡献&lt;/h2&gt;
&lt;p&gt;我相信很多人跟我一样，能给一些知名仓库提交 PR 是一件比较自豪的事情。&lt;/p&gt;
&lt;p&gt;所以如果能提供一个提交 PR 的方式或者是途径，能够吸引更多的人来贡献代码，同时将贡献者，展示出来，我想会有更多人愿意贡献出自己的力量。&lt;/p&gt;
&lt;p&gt;比如在这样的列表中也是挺有意思的：&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/read9-f8dc2eaafb477c649a5e38fcd20165ee-8936b.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 920px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 19.021739130434785%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsSAAALEgHS3X78AAABGklEQVQY0w2PS07CAAAFObgHUA+AJhoEFUgEkU+hYrFQGmwpCC2I5ROgfBICRJAqQVZjF5OZ1Uuer25mGU5bDGY6o6nm2WJgCfTmNp+jBlZPoj+xqHd0xpMWna6K7ZgeBlZTpj+t0+yU0LUMq6WDLxQ+RTZTSNINaimEVImRSgeQlSiC6CdfCJBWIoRiF4ivEeK5IE/ZK+qDAg/hM0QlhKBFOfef0O638YnFIFIjg6TEKBtpFF3whi7RzCTVVo6aLXqdoFoTMAdlMtItjy8Bhut3nov3VLyHjWGJzFuc2XKET60kaU2aGLaM/pFHU+/IZ6+pGAlUI8J40WV/WPO73/F33LFzFzhzh/3Rxf35YvO9wt1v2bobDp7/ARiZC4VTx9xSAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;read9&quot;
        title=&quot;&quot;
        src=&quot;/static/read9-f8dc2eaafb477c649a5e38fcd20165ee-8936b.png&quot;
        srcset=&quot;/static/read9-f8dc2eaafb477c649a5e38fcd20165ee-ce236.png 300w,
/static/read9-f8dc2eaafb477c649a5e38fcd20165ee-53a11.png 600w,
/static/read9-f8dc2eaafb477c649a5e38fcd20165ee-8936b.png 920w&quot;
        sizes=&quot;(max-width: 920px) 100vw, 920px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h2&gt;版权&lt;/h2&gt;
&lt;p&gt;相信前不久 Facebook 的开源协议事件大家都知道，也是闹得沸沸扬扬，所以，对于开源协议等等的版权问题一定要慎重，如果你想做的不是一个玩具项目，那么关于这块一定要写清楚。&lt;/p&gt;
&lt;h2&gt;总结&lt;/h2&gt;
&lt;p&gt;最后，总结一下，对于一份好的 README 来说，这些也许够了，也许不够，但是，文档始终是因为使用者才存在的东西，所以使用者关注什么，什么才是我们文档的重点。&lt;/p&gt;
&lt;p&gt;但是这些基础是我们应该都需要的：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;名字&lt;/li&gt;
&lt;li&gt;简介&lt;/li&gt;
&lt;li&gt;功能&lt;/li&gt;
&lt;li&gt;安装配置&lt;/li&gt;
&lt;li&gt;快速教程&lt;/li&gt;
&lt;li&gt;API 文档&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这些是使用者都会去关心的点，应该在编写之前好好斟酌。&lt;/p&gt;
&lt;p&gt;这些只是我在做一些文档工作的时候，查看了挺多的文档，综合感想，写了这么多，但是实际情况可能会大有不同，所以具体是不是要这么写，大家见仁见智啦！&lt;/p&gt;</content:encoded></item><item><title><![CDATA[全栈工程师之路-React Native之扫描二维码]]></title><description><![CDATA[前言 以前开发移动端页面，总会被原生开发各种嫌弃，H5性能太低，动画不流畅，身为一名小前端我能怎么办呢？总是在无人的夜里，心里默默地流泪~ 后来 React Native 出来以后，终于可以翻身农奴把歌唱：哈哈哈，原生的小X人们，等待我 RN 的小皮鞭吧，pia…]]></description><link>https://knownsec-fed.com/2018-03-25-quan-zhan-gong-cheng-shi-zhi-lu-reactnative-zhi-sao-miao-er-wei-ma/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-03-25-quan-zhan-gong-cheng-shi-zhi-lu-reactnative-zhi-sao-miao-er-wei-ma/</guid><pubDate>Sat, 24 Mar 2018 16:43:17 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-9112b6e6ba9dc923931642aa14149b01-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABg0lEQVQoz3WSy0rDQBSG8xzmniZpbk1iQo1gbWhLFYrBlUXEpQuxG3HrbSU+QB/4d/7RCbXQxeHM5cw3/7log8EASZLA931YlgXHcaSPoghBEGA4HMr7OI6lua4LW8Q4wjuOWNu2fKNMy7JMBvKCPs9zCeLDNE2lSYhtIQhDJIw1DVj6ESzD6EEKrBVFAc/zQKVlWYJ7Qhmg1HFNqKnrSI5rlPMV4rM5omYC+y+rXiEfh+JnbkajkYQSxLSVQq5NYbah46RbY7p5x/T5C+P1A7wwElCzV6mxdlTxm5aNtm0xm82kp3Vdh+XyAs14jLw5w+ndIxZvWyxet5g8fSBrL3ugVMi6sY5UwtoRTtV1XUvFVVXJdSpi+Gl5dYvzzSfal2809xsERS1qugNU9SOIAEL5AT3vCFElYCOCokK+vEa5ukEi6sisVENkyrsHHBUqZk13z/txUSMiPqIq1w9k9/91WT2kEcguq5k8BDzkJZCBTI0pMzXu1ZoBqmn7A7w/f8p+AI+0J3jTOiJNAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;全栈工程师之路-React Native之扫描二维码&quot;
        title=&quot;&quot;
        src=&quot;/static/header-9112b6e6ba9dc923931642aa14149b01-d6978.jpeg&quot;
        srcset=&quot;/static/header-9112b6e6ba9dc923931642aa14149b01-527f0.jpeg 300w,
/static/header-9112b6e6ba9dc923931642aa14149b01-9a7cd.jpeg 600w,
/static/header-9112b6e6ba9dc923931642aa14149b01-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h2&gt;前言&lt;/h2&gt;
&lt;p&gt;以前开发移动端页面，总会被原生开发各种嫌弃，H5性能太低，动画不流畅，身为一名小前端我能怎么办呢？总是在无人的夜里，心里默默地流泪~&lt;/p&gt;
&lt;p&gt;后来 React Native 出来以后，终于可以翻身农奴把歌唱：哈哈哈，原生的小X人们，等待我 RN 的小皮鞭吧，pia~&lt;/p&gt;
&lt;p&gt;但是那时候若是不懂点 Android 或者 iOS，完全用 RN 开发一个 App，是非常痛苦的。&lt;/p&gt;
&lt;p&gt;在尝试一段时间以后，由于实在难以忍受调教各种莫明其妙的报错，让我一度对这项新技能又爱又恨，望而生畏~&lt;/p&gt;
&lt;p&gt;但是最近由于项目上的需求又捡了起来，猛然发现，原来不知不觉间，RN 这迷人的小妖精已经成长得越发成熟了~&lt;/p&gt;
&lt;p&gt;好了废话不多说，把口水擦干净后，我们先来讲讲本次主题：如何破解一张有码的图片~&lt;/p&gt;
&lt;h2&gt;项目构建&lt;/h2&gt;
&lt;h3&gt;准备&lt;/h3&gt;
&lt;p&gt;如何读懂这张有码的图片就是我们要攻克的最大难题了，但是如果单凭我自身大脑的人工智能，我想这问题是无解了。&lt;/p&gt;
&lt;p&gt;没错，我们需要用到照相机，随手一搜&lt;code&gt;react-native-camera&lt;/code&gt;。。。&lt;/p&gt;
&lt;p&gt;咦我是乱搜的，还真有这个库啊。。。再搭配&lt;code&gt;react-native-qrcode-scanner&lt;/code&gt;，嗯，就是你了，和我一起拯救银河系吧~&lt;/p&gt;
&lt;h3&gt;开始工作&lt;/h3&gt;
&lt;p&gt;首先项目根目录安装三方库，通过&lt;code&gt;yarn add&lt;/code&gt;命令安装相应包文件&lt;/p&gt;
&lt;p&gt;由于会用到 native 的功能，&lt;code&gt;react link&lt;/code&gt;会自动向 native 模块中添加各种依赖和导包的操作。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-sh&quot;&gt;&lt;code&gt;$ yarn add react-native-camera
$ react-native link react-native-camera
$ yarn add react-native-qrcode-scanner
$ react-native link react-native-qrcode-scanner&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;这里我们假设点击一个小按钮，然后进入相册，扫描出这张有码的二维图后，回到小按钮页面，并弹出扫描内容。&lt;/p&gt;
&lt;p&gt;需要注意的一点是：按钮页和相册扫描是两个页面，这里我们用&lt;code&gt;react-navigation&lt;/code&gt;管理路由，具体使用详见&lt;a href=&quot;https://reactnavigation.org/&quot;&gt;这里&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;先看看App.js：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-jsx&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; React &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; StackNavigator &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react-navigation&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Home &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;./Home&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Scanner &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;./Scanner&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// Home 和 Scanner 是两个页面，点开应用后首先进入 Home&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; Stack &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;StackNavigator&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  Home&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    screen&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Home&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  Scanner&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    screen&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Scanner&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; Stack&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;这里的Home，&lt;code&gt;react-navigation&lt;/code&gt;自动会往props上加个&lt;code&gt;navigation&lt;/code&gt;属性，类似 web 开发时的 history，有 push, pop，replace等多个方法。&lt;/p&gt;
&lt;p&gt;Home.js只需要一个按钮，点击跳转至 Scanner 页即可&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-jsx&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Component &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; PropTypes &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;prop-types&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Button&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Toast &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;antd-mobile&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Home&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// react-navigation 的 StackNavigator 会自动在添加组件的 props 上添加 navigation 属性&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; propTypes &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    navigation&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; PropTypes&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;object&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;isRequired&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// 点击按钮时触发&lt;/span&gt;
  &lt;span class=&quot;token function-variable function&quot;&gt;scan&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;navigation&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;navigate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Scanner&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      onRead&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;onRead
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// 传递给下一个页面的回调函数，显示传入内容&lt;/span&gt;
  &lt;span class=&quot;token function-variable function&quot;&gt;onRead&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;message&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    Toast&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;success&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;message&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;Button&lt;/span&gt;
        &lt;span class=&quot;token attr-name&quot;&gt;onClick&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;scan&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;屠龙宝刀，点击就送&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;Button&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;Scanner.js 就是本次的重点了&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-jsx&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Component &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; QRCodeScanner &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react-native-qrcode-scanner&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;Scanner&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; props &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; state&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; goBack &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;navigation&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// onRead 是相机扫描二维码后自动调用，首先返回上一页，然后再调用传入的回调函数，显示扫描内容&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;QRCodeScanner&lt;/span&gt;
      &lt;span class=&quot;token attr-name&quot;&gt;onRead&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;e &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;goBack&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;params&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;onRead&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; Scanner&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;至此，所有的工作结束。&lt;/p&gt;
&lt;h3&gt;探索&lt;/h3&gt;
&lt;p&gt;依然很麻烦不是么？毕竟需要引入两个三方包呢，未来 RN 升级会不会不兼容？&lt;/p&gt;
&lt;p&gt;所以即使已给了我莫大的好处，我正义凛然的内心依然是拒绝的。&lt;/p&gt;
&lt;p&gt;等等，大侠您等一等！！！先把我脖子上的刀放下来好好说，我不是故意逗你玩的。&lt;/p&gt;
&lt;p&gt;不行，我陈D秀这次一定要站着把话说完！&lt;/p&gt;
&lt;p&gt;这里不得不说下&lt;a href=&quot;https://expo.io/&quot;&gt;Expo&lt;/a&gt;，一款 RN 开发的工具链，集成并提供了 RN 开发过程中各种问题的解决方案，也是官网目前推荐方式。&lt;/p&gt;
&lt;p&gt;于是第二个文件 Scanner.js 修改一下：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-jsx&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Component &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; BarCodeScanner&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Permissions &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;expo&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Scanner&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  state &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    hasCameraPermission&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; propTypes &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    navigation&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; PropTypes&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;object&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;isRequired&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// 这里首先判定是否拥有相机权限，有我们才能正大光明的调用&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;componentWillMount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; status &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; Permissions&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;askAsync&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Permissions&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;CAMERA&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; hasCameraPermission&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; status &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;granted&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// 扫描成功自动调用，这里先返回上一页，再调用回调函数，显示扫描内容&lt;/span&gt;
  &lt;span class=&quot;token function-variable function&quot;&gt;handleBarCodeRead&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; data &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; goBack&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; state &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;navigation&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;goBack&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;params&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;onRead&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; hasCameraPermission &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// 若无权限，提示用户&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;hasCameraPermission &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;Text&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;Requesting &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; camera permission&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;Text&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;hasCameraPermission &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;Text&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;No access to camera&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;Text&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;View&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;style&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; flex&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;BarCodeScanner&lt;/span&gt;
          &lt;span class=&quot;token attr-name&quot;&gt;onBarCodeRead&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;handleBarCodeRead&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;
          &lt;span class=&quot;token attr-name&quot;&gt;style&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;StyleSheet&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;absoluteFill&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;View&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; Scanner&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;好了，圆满了。对于这智慧的结晶，我还是比较满意的，谢谢大家赞许的目光。&lt;/p&gt;
&lt;h2&gt;总结&lt;/h2&gt;
&lt;p&gt;现在使用 RN 最大的感受是，各种开发装备越发全面，当然也或许是之前并未深入学习，对这块的技术链了解太少。&lt;/p&gt;
&lt;p&gt;整个开发体验提升不止一个档次，让我再次燃起了内心征服的欲望。&lt;/p&gt;
&lt;p&gt;哈哈哈，原生的小X人们，等待着我 RN 的小皮鞭吧，pia~&lt;/p&gt;</content:encoded></item><item><title><![CDATA[无线网络另类嗅探]]></title><description><![CDATA[…]]></description><link>https://knownsec-fed.com/2018-03-22-wu-xian-wang-luo-ling-lei-xiu-tan/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-03-22-wu-xian-wang-luo-ling-lei-xiu-tan/</guid><pubDate>Thu, 22 Mar 2018 03:05:34 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-49e7c5b37f51e2a12538a6f4fbef2e96-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAECAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB34WJGAv/xAAXEAEAAwAAAAAAAAAAAAAAAAABAAIg/9oACAEBAAEFApRUx//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABYQAAMAAAAAAAAAAAAAAAAAAAAgIf/aAAgBAQAGPwIq/wD/xAAYEAACAwAAAAAAAAAAAAAAAAAAIREgcf/aAAgBAQABPyEYDyK//9oADAMBAAIAAwAAABCcD//EABYRAQEBAAAAAAAAAAAAAAAAABEQIf/aAAgBAwEBPxA1n//EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAECAQE/EKf/xAAaEAEAAgMBAAAAAAAAAAAAAAABEUEAICEx/9oACAEBAAE/EFgXECTKnxXuv//Z&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;无线网络另类嗅探&quot;
        title=&quot;&quot;
        src=&quot;/static/header-49e7c5b37f51e2a12538a6f4fbef2e96-d6978.jpeg&quot;
        srcset=&quot;/static/header-49e7c5b37f51e2a12538a6f4fbef2e96-527f0.jpeg 300w,
/static/header-49e7c5b37f51e2a12538a6f4fbef2e96-9a7cd.jpeg 600w,
/static/header-49e7c5b37f51e2a12538a6f4fbef2e96-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h1&gt;前沿&lt;/h1&gt;
&lt;p&gt;无线网络对于我而言总有着莫名的吸引力，我一直觉得空气中通过无线网络传播的数据包应该是可以截获或者监听的。虽然它们是无形的，但是却从我的身体我的电脑我的无线网卡中经过。如果我的大脑足够特殊，应该能够抓住他们，可惜我的大脑并不特殊。还好无线网卡足够特殊，可以在监听模式，抓取任何经过的数据包：

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/无线网卡工作模式-eedb3afa76bc691460de59122c94e6c7-56104.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 570px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 158.24561403508773%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAgCAYAAAASYli2AAAACXBIWXMAAAsTAAALEwEAmpwYAAAC5klEQVRIx52W2U4qQRCGef8HUeIVV5oIgnKBiYKJBAmEsKosLiCL7FjnfJUU6Rl6OEslnZlpqv7a/q4mJr/l5+dHl4l9s1arla71eh3Y9+kjMXtxjW1vs9lIuVyWQqEgpVJJv10Qc+SC7gG3262Mx2N5fn6W5XKpit/f3wpSq9VkPp/vQdjn96+vL3l5edk7CgACkslk5Pb2Vo0+Pj7UwWKxkGw2K7vdTg3f399lMpnourq6kru7u2CElgKpJZNJyefzCk7EyGg0kvv7ewWyMgBeqVTk/PxcisWiOt1HyAsKhA8QqVldEKLs9/v6NEGfCNFlkdFBymH53/1YFG2sUUT39vYmr6+vgdTCwAe0IY3pdCqfn5/6bnvUbjgcSq/XC5TC0uY30z+gDZSh2ERinYQiLGqFQwB40px2uy3VanXfwAAgqZ2dncnNzY1GguFsNtsDswCiOTSh2+3K6emp0uyANoSMp2azKZ1OR6M5Jug3Gg0lPMTGUYA27vELn2Vf8X16XsAoIU0isVodpY3bZQzpMoZ8G2GhDMOB5th5RofDQK0DEbpdHgwGUq/X1RBwjh0Nwgn0gY/Ui31ATd87HDCIx+NyfX2t4BjaM5FISCqVUjrReaKHFScnJ5LL5fxdhn94a7VagS5DD4YDLCAiywZdbOCut8uAuk9bfEMlSOxGwr4tbw191IiiTJTNwRUQHl0I0T08PGhqYXKj7zYkECFAKNBJ3qkTyjYj6SrfRhm7ItD3nmV+YKQzuekmtLHzy7J3oxJdZsLTrIMu4+Hp6UnS6bQWnygAtVsNICK1W5F0Hx8flWLhZikgxtQK724KpsiF5V6hOAGIk0Kk3pSjukZkpG+X1F9fAWH+mQI1uri40AzCPDw6bdxNG+kcMwbu5eWlpuhzGOZl7NiNRm2IkEFKl6PS9ALaJoYUm7rZ3xO+7U5h8e3exa7EXOYjDAfSo9sYcdsxXFkMCvYZDID+c8p/El/KvwAbvrA7MYgfFgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;无线网卡工作模式&quot;
        title=&quot;&quot;
        src=&quot;/static/无线网卡工作模式-eedb3afa76bc691460de59122c94e6c7-56104.png&quot;
        srcset=&quot;/static/无线网卡工作模式-eedb3afa76bc691460de59122c94e6c7-26660.png 300w,
/static/无线网卡工作模式-eedb3afa76bc691460de59122c94e6c7-56104.png 570w&quot;
        sizes=&quot;(max-width: 570px) 100vw, 570px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h1&gt;抓包&lt;/h1&gt;
&lt;p&gt;因为我使用的mac笔记本， 所以我打算直接使用自带的airport进行抓包：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;扫描网络查看网络信息，这里我们需要注意网络的SSID和CHANNEL信道：&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;airport scan&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;ol start=&quot;2&quot;&gt;
&lt;li&gt;监听对应的信道：&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;airport sniff 11&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;一段时间后使用Ctrl+C结束监听生产cap包, cap包默认存储在/tmp/文件下。&lt;/p&gt;
&lt;h1&gt;解析&lt;/h1&gt;
&lt;p&gt;使用wireshark打开我们捕获到的数据包：

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/wireshark-fe032109c1501678519402666c4d6928-0f29e.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 58.92457057505601%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAACiklEQVQoz5XO208TQRTH8f3jTNQXNSZEUYoYENT44qMvEoNcQhERhapg6bZLu71t2y0VVBQQKEihXDReSIsQ2gq2QHngKvB1aAwa1Bgn+eR35syZyUjx9xOkkjN8TqZIfkmSSMyTSs2REL1EakaczRGPfWL2c5zE/BzprwssZRZzloWVH5le/CJmE0iVbX3UK320+YZ5pI3QHopiC45i1sJY9Agmd5gWbRhZ9GR9FKUjSps+Rqs/SpMnQqN7JKdGCVNvCSEdP1fCyYJSLhSWcspQxvnia+QVXubkmYucEPIKLnHOUIpBpKGwjIKiK+QXXeW04TLH8os5eraY4/klHMkrouT6DfHD+gaqjXcwVlZTKbLGWEdlTS03y29RXnGbGlEbhdqqaupENor5R80mTELdvUaq6u9SfbeBCnG3qdWMpHU8xeXVsNsUXD4/drcHu9ONRbZha3fgdLlxOl2odgcOh4oqaq/mw+fX8QSCaMEQWkcIr96B3tmF5Ak9R9VCyLIDq1vngbmdhxYV0xOFFllFUX1YFXfuXLY6sdhcyHYvVlcAizOAzRPEFRRv6M/wdfUgWa0ttJqMqOb7WJ40oNqacxyKINKvPuaZX6ZbV3gRsOV0C50+mYDHTMDbhq5Z8LvNvOpyIWWnIySH/KTHn7PxqY+dWD/EBw7sCnt/wMzgb3bFXYm/rD1h9x92DtnvSSsry2QyaZaXl8hmV3J1Jv2V1dUsG+trbG1t8m17i+1fHN7/tIkUj88Qi8XZz9nZOaanY3z48JGFhUVWs6usr63zP0vq6enmpdDb+4rBcD+vB/t4PdDL0JswQyNhwsODTE5NMvV2gql3EwcZnRwVIrkci0YYGxc5HuE7tJ8Mbf7d6mgAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;wireshark&quot;
        title=&quot;&quot;
        src=&quot;/static/wireshark-fe032109c1501678519402666c4d6928-abe1c.png&quot;
        srcset=&quot;/static/wireshark-fe032109c1501678519402666c4d6928-10046.png 300w,
/static/wireshark-fe032109c1501678519402666c4d6928-3c4a3.png 600w,
/static/wireshark-fe032109c1501678519402666c4d6928-abe1c.png 1200w,
/static/wireshark-fe032109c1501678519402666c4d6928-0f29e.png 1339w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;注意这里我们捕获到数据全部都是802.11协议。802.11标准将所有的数据包分为3种：数据、管理、控制。数据链路层是一个很靠近底层的通信协议，所以我们是不能直接看出数据包中携带数据内容。&lt;/p&gt;
&lt;p&gt;配置wireshark的首选项，设置IEEE 802.11协议解析：&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/config-78061f8d23a9a606ba339b57d9cce085-3b1d1.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1012px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 48.81422924901186%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABa0lEQVQoz42R606rQBRGef9X8Z8v4I8mx0QJl1prEelwkUvpQDstIu2JXQ4YbRPt8ZB8mQA7a9be2wh8Hz9JiNMF4XNOHMck/btOnmfEzwXek2AePCGE0N9ysiw7G6Pe7pCy5u0AdbPnxpkydh1s28HzPMIwHCBKKeq6pqqq4TwXo+06XjYV/dPuD9xOAmzLxLJsHQvbcQiCgDRNB5iU8p8xTH/Fn/sSWzSMwy037gzTvMXShjPvkSiKtGExFH8C+/NcjNG05nIUcHHlY/o1nkh5mD2SRHO26x5wLP4NNgC7/Z62b/mwo/v7hvsguHNtrl3BROi5VMd2/suw2ryyXiv0TlAvHfMoocgSrqeS0aRiVcsvy1PY6QXHaOCm3bEocm1S0bzuKOXHtvp2G/UJ+9nqu61eilQt8zBGrhSrpqMol8OPpezzUXQ6x3OGfX251IZZUZLmJXkpNUx+3fTbrE7bXC5yxkJyYSreAS+H6A0tqCy3AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;config&quot;
        title=&quot;&quot;
        src=&quot;/static/config-78061f8d23a9a606ba339b57d9cce085-3b1d1.png&quot;
        srcset=&quot;/static/config-78061f8d23a9a606ba339b57d9cce085-a9e8e.png 300w,
/static/config-78061f8d23a9a606ba339b57d9cce085-3ef88.png 600w,
/static/config-78061f8d23a9a606ba339b57d9cce085-3b1d1.png 1012w&quot;
        sizes=&quot;(max-width: 1012px) 100vw, 1012px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;点击Edit, 使用wpa-pwd的方式设置网络名:网络密码：&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/pw-d17e4689a154f7443c666fb74dcddbcd-db570.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 561px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 75.0445632798574%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAABuUlEQVQ4y7WT3WvUQBTF8zeLCr756rNIX0Rrn0TwSdoHBQVBwX7ubrK7bbKbzUw+ZjKZmbBtV+jW5DiTZMtKS6VSL/w4N7l3DndIrpMeHKIf9zElE8RxgiSJEYQUn3ePMfRcDIceXNdtaPMBfN9v+iil5gwFjVslJIJzEDB8+RHgyOfYG6fYG8UYE4VRJDGYKfSmCv2w1d5Uomfyo4nEYSAMxRX7foGAcDivPlE82fLxYjvGs/cEzz9QvPyYYWMnxdO3ER5sTvHoTYiHhnVd5/FWaPpm+DrI4PDyJ2zUtaHTqqrbd/h7rHouK4AwBYfpRWdYd+X6hudb6PquGVamUP8j1nD568YJ7x5XhtX/NrQf4l6uzMsF7iPsj9EYEnGGcnEJdbaEPl8avbgz+vwC4nSJWSbh5KIAy1cI5IW8HSHBO1Z5xiWYUOB5DidNUzDGml0MwxBaKyglDeoPSi1BYrN+Yw3PV3BPygbvRGFi1jKKFNLMGNrm3ExmVUoJ2eh1bL0o7BQKwmiScnDGMSIa7/bnhlOz/6I1tFNas9U063mL7Exlg9ba3CgGSyjGVOP1tzk2v8/hhQK/AUGvatTZoBrkAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;pw&quot;
        title=&quot;&quot;
        src=&quot;/static/pw-d17e4689a154f7443c666fb74dcddbcd-db570.png&quot;
        srcset=&quot;/static/pw-d17e4689a154f7443c666fb74dcddbcd-6b5ab.png 300w,
/static/pw-d17e4689a154f7443c666fb74dcddbcd-db570.png 561w&quot;
        sizes=&quot;(max-width: 561px) 100vw, 561px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;完成配置后，我们就可以看到解析后的从链路层到应用层的报文了。&lt;/p&gt;
&lt;h1&gt;总结&lt;/h1&gt;
&lt;p&gt;大部分人到了一个咖啡厅一家餐馆，都迫不及待的加入他们的无线网络，但是从不考虑它是否安全，有没有人在监听你的网络偷窥你的隐私。甚至很多人都不会关闭自己手机的wifi自动连接功能， 很多不法分子利用免费wifi盗取手机中的钱财。网络安全不仅仅是交给专业人员去做，很多时候提高自己的安全意识就可以避免。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[【翻译】实用的 UI 动画技巧——改进 UI 微交互的实用建议]]></title><description><![CDATA[原文链接： Good to great UI animation tips 原文作者：Pablo Stanley 让我们来看看一些 UI 动画的例子。只要稍微调整一下，你就可以用动画来提升你的 UI…]]></description><link>https://knownsec-fed.com/2018-03-19-fan-yi-shi-yong-de-ui-dong-hua-ji-qiao-gai-jin-ui-wei-jiao-hu-de-shi-yong-jian-yi/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-03-19-fan-yi-shi-yong-de-ui-dong-hua-ji-qiao-gai-jin-ui-wei-jiao-hu-de-shi-yong-jian-yi/</guid><pubDate>Mon, 19 Mar 2018 01:50:24 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-c3e1993b0cc4c7b27f5385ed4a0252d0-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAQF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAgP/2gAMAwEAAhADEAAAAdqW8pgaf//EABoQAAICAwAAAAAAAAAAAAAAAAABAgMQEjH/2gAIAQEAAQUCluONzFzP/8QAFxEAAwEAAAAAAAAAAAAAAAAAAQIQEf/aAAgBAwEBPwEps//EABcRAAMBAAAAAAAAAAAAAAAAAAECEBH/2gAIAQIBAT8BDZP/xAAYEAACAwAAAAAAAAAAAAAAAAAAASAiMv/aAAgBAQAGPwKqNR//xAAZEAADAQEBAAAAAAAAAAAAAAABETEAIHH/2gAIAQEAAT8hNkCXGRHh0HeP/9oADAMBAAIAAwAAABCsz//EABYRAQEBAAAAAAAAAAAAAAAAAAEQQf/aAAgBAwEBPxDas//EABYRAQEBAAAAAAAAAAAAAAAAAAEQQf/aAAgBAgEBPxDME//EABoQAQACAwEAAAAAAAAAAAAAAAEAERAhMZH/2gAIAQEAAT8QEkR0TxiA86NHtECArAW4TH//2Q==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;【翻译】实用的 UI 动画技巧——改进 UI 微交互的实用建议&quot;
        title=&quot;&quot;
        src=&quot;/static/header-c3e1993b0cc4c7b27f5385ed4a0252d0-d6978.jpeg&quot;
        srcset=&quot;/static/header-c3e1993b0cc4c7b27f5385ed4a0252d0-527f0.jpeg 300w,
/static/header-c3e1993b0cc4c7b27f5385ed4a0252d0-9a7cd.jpeg 600w,
/static/header-c3e1993b0cc4c7b27f5385ed4a0252d0-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;原文链接：&lt;a href=&quot;https://uxdesign.cc/good-to-great-ui-animation-tips-7850805c12e5&quot;&gt;Good to great UI animation tips&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;原文作者：Pablo Stanley&lt;/p&gt;
&lt;p&gt;让我们来看看一些 UI 动画的例子。只要稍微调整一下，你就可以用动画来提升你的 UI 体验。
这些动画相互作用显示了状态之间的连续性，表示了共享元素之间的关系，并将用户的注意力吸引到他们应该注意并采取行动的事情上。&lt;/p&gt;
&lt;h2&gt;在选项卡中显示内容&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;/1-f24d965bd9c345bb9b1c4356f54d9619.gif&quot;&gt;
左边的内容淡入淡出。右边的幻灯片和标签一起滑动。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;好的动画会将内容从一个状态转移到另一个状态。&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;一个伟大的动画通过使内容在不同的状态之间移动来显示过渡的连续性。
当您设计交互式选项卡或弹出式菜单时，请尝试将内容的位置与打开它的操作相关联。通过这种方式，您不仅可以制作内容的可见性，还可以制作位置动画。当你在制作它的时候，添加一个滑动手势，可以将你从一个内容带到另一个。&lt;/p&gt;
&lt;h2&gt;连接卡片的共享元素&lt;/h2&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;/2-9ee678975954f8f6797e74b1a48d130e.gif&quot;&gt;
左侧的内容向上滑动打开一个新的屏幕。右侧的卡扩展并填充屏幕。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;一个好的动画使用像向左或向上滑动的过渡来显示详细信息屏幕上的内容。&lt;/li&gt;
&lt;li&gt;一个伟大的动画通过动画共享内容来建立两个状态之间的连接。
在不同状态之间进行动画制作时，请查看它们之间是否有共享元素并将它们连接起来。使用 InVision Studio 时，在创建运动转换时，在两个链接屏幕之间重复的组件会自动连接。这使原型动画变得轻而易举。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;在内容中使用瀑布效果&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;/3-02b4d88a51ae2fb4a0c1d0b4f3380505.gif&quot;&gt;
左边的卡片通过滑动和淡入来显示。右边的卡片具有相同的动画，但每张卡片都有一个短暂的延迟。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;一个好的动画改变内容进入屏幕时的位置和不透明度。&lt;/li&gt;
&lt;li&gt;一个伟大的动画会迅速错开每个组或元素的显示排列。
要完成瀑布效果，请尝试对每个内容或一组内容应用延迟。保持相同的缓解和持续时间，所以感觉一致。尽管如此，不要串联每个小元素，这些元素组合起来就是一个动画。保持动画快速和快速。谷歌建议开始每个元素不超过 20 毫秒。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;让内容将其他元素排除在外&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;/4-22ff9a2907c23bad9b072720390ec0e7.gif&quot;&gt;
左侧的动画直接在上面显示动画的内容，右侧的动画会随着它的增长推出内容。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;一个好的动画在上下文中移动并显示元素。&lt;/li&gt;
&lt;li&gt;一个伟大的动画显示当他们改变时会影响周围环境的元素。
让您的内容中的元素了解他们的环境。这意味着使内容吸引或排斥周围的元素。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;使菜单显示在上下文中&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;/5-b11da93654072b590b79b959ceafb1d6.gif&quot;&gt;
左边的菜单从下面飞入。右侧的菜单从创建它的操作扩展而来。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;一个好的动画菜单显示从打开它们的按钮的方向出现内容。&lt;/li&gt;
&lt;li&gt;一个伟大的动画菜单从创建它们的动作中浮现出来，从触摸点发展而来。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;使用按钮显示不同的状态&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;/6-bba3d2c12a8b5074e1e29ace3c95dd33.gif&quot;&gt;
左边的按钮显示文本指示状态。右边的按钮使用容器显示不同状态的事件。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;一个好的动画交互显示按钮旁边的事件。&lt;/li&gt;
&lt;li&gt;一个伟大的动画交互使用按钮本身来显示不同的状态。
尝试使用按钮来提供状态的可视反馈。例如，您可以用微调器或加载动画替换 CTA; 或者您可以将动画添加到显示进度的背景&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;引起用户的注意力&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;/7-d9f71a1078728cd6fa8822e865b994c4.gif&quot;&gt;
左边的例子使用颜色和位置来使元素脱颖而出。右边的一个使用微妙的动画来唤起用户的注意力。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;一个好的动画设计使用颜色，大小和位置突出显示用户需要注意或采取行动的重要动作。&lt;/li&gt;
&lt;li&gt;一个伟大的动画设计使用动画来关注那个重要的动作，而不会造成干扰。
当用户需要采取一些重要的行动时，请尝试通过动画来吸引他们的注意力。从微妙的动画开始，增加动作的重要程度（大小，颜色和速度的变化）。只能用于关键性操作 - 使用此效果的次数越多，影响越小… 并且您的用户受到的骚扰越多。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;结论&lt;/h2&gt;
&lt;p&gt;让我们应用动画来解释状态的变化，提请注意必要的操作，确定元素之间的关系，并为我们的产品添加一些乐趣和特征。遵循这些原则，我们将把动画从优秀转变为卓越。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[React ref 指北教程]]></title><description><![CDATA[React，Vue 等前端框架的出现之前 Web 页面交互完全依靠频繁的 Dom 操作实现，在那个刀耕火种的年代 Jquery 作为一个便捷的实现 Dom 操作的库便走上了神坛，成为了 Web 开发工程师必备技能。幸运的是 Web 2.0 时代，React 和 Vue…]]></description><link>https://knownsec-fed.com/2018-03-19-reactref-zhi-bei-jiao-cheng/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-03-19-reactref-zhi-bei-jiao-cheng/</guid><pubDate>Mon, 19 Mar 2018 01:47:51 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-921377915f3d51f9de090e35979d9750-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIDBP/EABQBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAeFkG0B//8QAGRAAAwEBAQAAAAAAAAAAAAAAAAISARMR/9oACAEBAAEFAobzmxzYrSmK0//EABcRAAMBAAAAAAAAAAAAAAAAAAABERL/2gAIAQMBAT8ByiI//8QAFREBAQAAAAAAAAAAAAAAAAAAEBH/2gAIAQIBAT8Bp//EABcQAAMBAAAAAAAAAAAAAAAAAAABMTL/2gAIAQEABj8CyzDMlZWVn//EABoQAAICAwAAAAAAAAAAAAAAAADxARAhMUH/2gAIAQEAAT8h1c1BPGQ2GQ2P/9oADAMBAAIAAwAAABDPP//EABYRAAMAAAAAAAAAAAAAAAAAABBxkf/aAAgBAwEBPxB1F//EABYRAQEBAAAAAAAAAAAAAAAAAAARAf/aAAgBAgEBPxCl1//EABkQAAMBAQEAAAAAAAAAAAAAAAABIfExEf/aAAgBAQABPxBWrewfdp9G3Gjem3N6f//Z&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;React ref 指北教程&quot;
        title=&quot;&quot;
        src=&quot;/static/header-921377915f3d51f9de090e35979d9750-d6978.jpeg&quot;
        srcset=&quot;/static/header-921377915f3d51f9de090e35979d9750-527f0.jpeg 300w,
/static/header-921377915f3d51f9de090e35979d9750-9a7cd.jpeg 600w,
/static/header-921377915f3d51f9de090e35979d9750-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;React，Vue 等前端框架的出现之前 Web 页面交互完全依靠频繁的 Dom 操作实现，在那个刀耕火种的年代 Jquery 作为一个便捷的实现 Dom 操作的库便走上了神坛，成为了 Web 开发工程师必备技能。幸运的是 Web 2.0 时代，React 和 Vue 等前端框架利用组件状态管理避免了频繁的直接的 Dom 操作，增加了代码可读性。但 React 依然为我们提供了便捷的获取 Dom 的方法。在 React 典型的数据流里，props 是父组件控制子组件唯一的方式，要去修改一个子组件，我们通过改变 props 来使子组件重新渲染。但是在有一些场景中我们可以直接更改子组件而不通过常规的数据流，React ref 就是在这种情况下的解决方案。&lt;/p&gt;
&lt;h2&gt;我们什么时候需要使用它？&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;根据官方文档的定义有三种情况我们可能使用到它&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;管理焦点，文本选择，或媒体播放。&lt;/li&gt;
&lt;li&gt;触发命令动画。&lt;/li&gt;
&lt;li&gt;与第三方 DOM 库集成。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;话不多少，我们首先来回顾一下，React 中几种 ref 使用的方式。&lt;/p&gt;
&lt;h2&gt;1. 字符串定义&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;这个方案已经不被 react 官方推荐，而且会在未来的版本中移除。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token comment&quot;&gt;// 在 render 函数里面&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;input type&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;text&quot;&lt;/span&gt; defaultValue&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;First&quot;&lt;/span&gt; ref&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;first&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 获取 ref&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;refs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;first&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h2&gt;2. 使用回调函数&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token comment&quot;&gt;// 在 render 函数里面&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;input
  type&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;text&quot;&lt;/span&gt;
  defaultValue&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Second&quot;&lt;/span&gt;
  ref&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;input &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;second &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; input&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 获取 ref&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;second&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h2&gt;3. 使用 React.createRef()&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;在 react 16.3 中，您将能够使用新的 React.createref() 函数使 ref 创建变得更容易。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token comment&quot;&gt;// 在 class 中声明&lt;/span&gt;
third &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createRef&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 或者在 constructor 中声明&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;third &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createRef&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 在 render 函数中:&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;input type&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;text&quot;&lt;/span&gt; defaultValue&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Third&quot;&lt;/span&gt; ref&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;third&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 获取 ref&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;third&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;current&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 获取 input 的 value &lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;third&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;current&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;注意：我在 react@16.3.0-alpha.2 中使用 this.third.current 取到了值，但是这个 api 目前还不稳定，有的版本是通过 this.third.value 取到 dom 的引用。&lt;/p&gt;
&lt;h2&gt;如何在 HOC 中传递 ref ？&lt;/h2&gt;
&lt;h3&gt;首先我们先试一下在 HOC 中传递 ref&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Component &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; PropTypes &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;prop-types&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; logo &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;./logo.svg&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;./App.css&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;FormSection&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; propTypes &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    fourth&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; PropTypes&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;shape&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; PropTypes&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;instanceOf&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;HTMLInputElement&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;input type&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;text&quot;&lt;/span&gt; defaultValue&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;hoc&quot;&lt;/span&gt; ref&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ref&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// HOC 工厂函数&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;HOCFactory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;WrappedComponent&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HOC&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;WrappedComponent &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;


&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;App&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

  &lt;span class=&quot;token function-variable function&quot;&gt;handleSubmit&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; e &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    e&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;preventDefault&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;refs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;hoc&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; HOCInstance &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;HOCFactory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;FormSection&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;form onSubmit&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;e &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;handleSubmit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;HOCInstance ref&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;hoc&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;button&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;Submit&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;button&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;form&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; App&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;提交后 ref 并没有绑定到我们想要的组件上，而是被指向了 HOC 这个组件，其实如果我们了解 HOC 的原理的话，这个问题我们应该很清楚就明白了。React ref 是一个特殊的属性，它会在在组件 componentDidMount 和 componentDidUpdate 之前被触发。也就是说 ref 是不能作为 props 传递的，因为它会在组件一加载时就会触发回调函数。&lt;/p&gt;
&lt;h3&gt;解决方案&lt;/h3&gt;
&lt;p&gt;使用 React.createRef() 在 HOC 组件中绕开 ref 属性。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;FormSection&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;input type&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;text&quot;&lt;/span&gt; defaultValue&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;hoc&quot;&lt;/span&gt; ref&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;myRef&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;HOCFactory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;WrappedComponent&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;App&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

  hocRef &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createRef&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token function-variable function&quot;&gt;handleSubmit&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; e &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    e&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;preventDefault&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;hocRef&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; HOCInstance &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;HOCFactory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;FormSection&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;form onSubmit&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;e &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;handleSubmit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;/* 通过在父组件中使用自定义的属性，从而使得属性能够传递下去。如果使用 ref 属性，将在父组件加载时就会触发回调，导致 this.hocRef 指向父组件*/&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;HOCInstance myRef&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;hocRef&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;button&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;Submit&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;button&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;form&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;同理我们在现有的 React 版本(@16.2.0以下)里，也可以通过回调函数在父组件中绕开 ref 属性的方式获取子组件的实例。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;FormSection&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;input type&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;text&quot;&lt;/span&gt; defaultValue&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;hoc&quot;&lt;/span&gt; ref&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;myRef&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;HOCFactory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;WrappedComponent&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;App&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

  &lt;span class=&quot;token function-variable function&quot;&gt;handleSubmit&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; e &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    e&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;preventDefault&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;hocRef&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; HOCInstance &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;HOCFactory&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;FormSection&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;form onSubmit&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;e &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;handleSubmit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;HOCInstance myRef&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;el &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;hocRef &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; el&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;button&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;Submit&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;button&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;form&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h2&gt;参考文档&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://www.leighhalliday.com/using-refs-in-react&quot;&gt;Using Refs in React&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://reactjs.org/docs/refs-and-the-dom.html&quot;&gt;React 官方文档&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[【翻译】 如何使你的 Node 应用免于崩溃]]></title><description><![CDATA[原文地址： How to prevent your Node.js process from crashing 原文作者：Alberto Gimeno 通过对一些 Node.js 开发者的采访，我发现没有人能够正确的回答出这两个问题： 在 Node.js…]]></description><link>https://knownsec-fed.com/2018-03-18-fan-yi-how-to-prevent-your-node.js-process-from-crashing/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-03-18-fan-yi-how-to-prevent-your-node.js-process-from-crashing/</guid><pubDate>Sat, 17 Mar 2018 23:08:12 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-cb4c748214e2be4c15303f5123db0749-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAECAwT/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAABxRVcICv/xAAZEAADAAMAAAAAAAAAAAAAAAAAAQIQESH/2gAIAQEAAQUC4Up0PP8A/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFxAAAwEAAAAAAAAAAAAAAAAAAAEhIP/aAAgBAQAGPwKkef/EABoQAQABBQAAAAAAAAAAAAAAAAEhABEgMXH/2gAIAQEAAT8hJSsVsleYv//aAAwDAQACAAMAAAAQS8//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAWEQEBAQAAAAAAAAAAAAAAAAARECH/2gAIAQIBAT8QNZ//xAAcEAACAQUBAAAAAAAAAAAAAAABERAAMUFRkfD/2gAIAQEAAT8QYptoDoQDlot6/OZj/9k=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;如何使你的 Node 应用免于崩溃&quot;
        title=&quot;&quot;
        src=&quot;/static/header-cb4c748214e2be4c15303f5123db0749-d6978.jpeg&quot;
        srcset=&quot;/static/header-cb4c748214e2be4c15303f5123db0749-527f0.jpeg 300w,
/static/header-cb4c748214e2be4c15303f5123db0749-9a7cd.jpeg 600w,
/static/header-cb4c748214e2be4c15303f5123db0749-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;原文地址：&lt;a href=&quot;https://medium.com/dailyjs/how-to-prevent-your-node-js-process-from-crashing-5d40247b8ab2&quot;&gt;How to prevent your Node.js process from crashing&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;原文作者：Alberto Gimeno&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;通过对一些 Node.js 开发者的采访，我发现没有人能够正确的回答出这两个问题：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;在 Node.js 中，不处理 rejected promise 会发生什么?&lt;/li&gt;
&lt;li&gt;不处理  stream 中的错误会发生什么?&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;在 Node.js 中，不处理 rejected promise 会发生什么 ?&lt;/h3&gt;
&lt;p&gt;在最新版本的 Node.js（8.x，9.x以及可能更早的版本）中，您会得到这样的一些警告：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;48446&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; UnhandledPromiseRejectionWarning&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; This is &lt;span class=&quot;token function&quot;&gt;fine&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;48446&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; UnhandledPromiseRejectionWarning&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Unhandled promise rejection&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; This error originated either by throwing inside &lt;span class=&quot;token keyword&quot;&gt;of&lt;/span&gt; an &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; without a &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; block&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; or by rejecting a promise which was not handled &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;rejection id&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;48446&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;DEP0018&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; DeprecationWarning&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Unhandled promise rejections are deprecated&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt; In the future&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; promise rejections that are not handled will terminate the Node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;js process &lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt; a non&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;zero exit code&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;该进程不会崩溃，但在未来的 Node.js 版本中，可能会发生崩溃。应该如何处理 rejected promise 呢?可以监听进程的 unhandledRejection 事件。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;unhandledRejection&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;reason&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; promise&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Unhandled Rejection at:&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; reason&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;stack &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; reason&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// Recommended: send the information to sentry.io&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// or whatever crash reporting service you use&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;对于 rejected 状态的错误，例如：&lt;code&gt;Promise.reject(new Error(&apos;This is fine&apos;))&lt;/code&gt; ，将会打印出堆栈信息，同时也可以监听进程的警告事件，获取到更多的错误相关信息。&lt;/p&gt;
&lt;h3&gt;不处理  stream 中的错误会发生什么?&lt;/h3&gt;
&lt;p&gt;创建应用程序：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; fs &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;fs&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; stream &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; fs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createReadStream&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;does-not-exist.txt&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;以上代码将会异常退出并打印出：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;events&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;js&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;137&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; er&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// Unhandled &apos;error&apos; event&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;^&lt;/span&gt;
Error&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; ENOENT&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; no such file or directory&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; open &lt;span class=&quot;token string&quot;&gt;&apos;do-not-exists.txt&apos;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;用户正在上传文件，服务器端应用程序使用 stream 处理文件，用户上传的文件可能非常大，因为某些原因用户中止上传，stream 被意外关闭，服务器端 Node.js 进程会立即崩溃，同时会影响到其它用户使用。所以，不要忘记处理所有 stream 中的错误事件！&lt;/p&gt;
&lt;h3&gt;补充：JSON.parse()&lt;/h3&gt;
&lt;p&gt;JSON.parse() 中，如果传入的字符串不是有效的JSON，将会抛出一个错误。可以使用 try-catch 把它包裹起来。这同样适用于 Node.js API 中的任何 * Sync() 方法。否则下面的代码会让你的进程崩溃：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;/foo&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;req&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; next&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; foo &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; JSON&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;parse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;req&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;body&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;jsonString&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ...&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h3&gt;总结&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;监听未处理的 rejected 事件，获取堆栈信息，可以有效防止 Node.js 进程退出；&lt;/li&gt;
&lt;li&gt;始终捕获并处理 stream 的异常错误；&lt;/li&gt;
&lt;li&gt;将 JSON.parse()和任何 * Sync() 函数包装在 try-catch 块中。&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[一种方便的跨域开发解决方案]]></title><description><![CDATA[现在越来越多的 Web 项目都采取前后端分离的开发方式，也就是在开发过程中前端工程运行在一个 node server 上，同时提供 REST API 的后端工程作为独立的服务运行在另一个 server 上，这样前后端通过 HTTP…]]></description><link>https://knownsec-fed.com/2018-03-17-yi-zhong-qian-hou-duan-fen-li-de-kua-yu-kai-fa-fang-shi/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-03-17-yi-zhong-qian-hou-duan-fen-li-de-kua-yu-kai-fa-fang-shi/</guid><pubDate>Sat, 17 Mar 2018 14:30:10 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-509052d3640b64511a13f356d08df049-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIDBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHttSyon//EABgQAQEAAwAAAAAAAAAAAAAAAAEAEBEx/9oACAEBAAEFAlbbHM//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAWEAEBAQAAAAAAAAAAAAAAAAAxACD/2gAIAQEABj8CIz//xAAZEAEAAwEBAAAAAAAAAAAAAAABABEhIHH/2gAIAQEAAT8hCtRv6iXRTx//2gAMAwEAAgADAAAAEMsP/8QAFxEAAwEAAAAAAAAAAAAAAAAAARARUf/aAAgBAwEBPxCjF//EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAECAQE/EKf/xAAbEAEBAAEFAAAAAAAAAAAAAAABEQAgITFBUf/aAAgBAQABPxCMCDDBAcGFjsYQbHXmj//Z&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;深入研究一种方便的跨域开发解决方案&quot;
        title=&quot;&quot;
        src=&quot;/static/header-509052d3640b64511a13f356d08df049-d6978.jpeg&quot;
        srcset=&quot;/static/header-509052d3640b64511a13f356d08df049-527f0.jpeg 300w,
/static/header-509052d3640b64511a13f356d08df049-9a7cd.jpeg 600w,
/static/header-509052d3640b64511a13f356d08df049-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;现在越来越多的 Web 项目都采取前后端分离的开发方式，也就是在开发过程中前端工程运行在一个 node server 上，同时提供 REST API 的后端工程作为独立的服务运行在另一个 server 上，这样前后端通过 HTTP 请求进行通信的时候就会遇到跨域的问题，跨域是怎么一回事大家应该都了解，这里就不再赘述。以往解决跨域问题比较常用的方法就是给服务端配置 CORS，但是这种方式会带来一些不便：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;要修改后端代码，如果后端项目运行在自己机器上还好，如果是运行在别的服务器上，甚至是其他团队在维护，那么修改一段代码就会比较麻烦，并且还要确保这些代码不会被发布到生产环境中去。&lt;/li&gt;
&lt;li&gt;每次启动浏览器的时候要输入一长串代码来关闭浏览器的安全策略，比如 Chrome 浏览器的命令如下：
&lt;code&gt;open -a /Applications/Google\ Chrome.app --args --disable-web-security --user-data-dir&lt;/code&gt;
不仅麻烦，万一一不小心在这种模式下访问了一些敏感的数据，还会带来安全隐患。&lt;/li&gt;
&lt;li&gt;开发模式下前端调接口要带上测试后端服务器的 URL，因此发布到生产环境之前还要把它去掉。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;总之就是比较麻烦，体会不到那种脱了裤子就上，完事提上裤子就走的爽快感，我说的是上厕所。所以今天就是要介绍一种更加简单安全的解决方案，同时我们会深入去了解其中的原理是什么。&lt;/p&gt;
&lt;p&gt;首先，用 &lt;a href=&quot;https://github.com/facebook/create-react-app&quot;&gt;create-react-app&lt;/a&gt; 创建一个前端项目，假如你的前端项目运行的地址是 &lt;code&gt;http://localhost:3000&lt;/code&gt;，与此同时提供 API 的后端项目运行的地址是 &lt;code&gt;http://localhost:4000&lt;/code&gt;，你要做的只是在前端工程的 package.json 文件中添加这样一行配置：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-json&quot;&gt;&lt;code&gt;&lt;span class=&quot;token property&quot;&gt;&quot;proxy&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;http://localhost:4000&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;然后你就会神奇地发现，从前端页面发出的 HTTP 请求，虽然访问的依然是 3000 端口，但是会被自动转发到 4000 端口的后端服务器并得到正确的响应，于此同时访问页面的请求却不会被转发，依然能够被前端路由捕获，这样我们就完全不需要再考虑如何处理跨域的问题了。问题是解决了，但是又出现了 2 个问题萦绕在我的心中：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;package.json 中的 &lt;code&gt;proxy&lt;/code&gt; 参数是作用在什么地方的？&lt;/li&gt;
&lt;li&gt;是怎么样做到把访问页面的请求和访问 REST API 的请求区分开的？&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;带着这样的疑问我们一起去看看 &lt;strong&gt;create-react-app&lt;/strong&gt; 的源码是怎样写的，首先在前端项目中的 package.json 里我们能看到，项目启动执行的脚本是 &lt;code&gt;react-script start&lt;/code&gt;，所以我们打开文件 &lt;a href=&quot;https://github.com/facebook/create-react-app/blob/next/packages/react-scripts/scripts/start.js?1521341168780&quot;&gt;create-react-app/packages/react-scripts/scripts/start.js&lt;/a&gt;（为何直接能定位到这个文件，以及 react-script 这个命令是如何注册的，属于其他知识点，本文不展开说明，有疑问的童鞋可以去&lt;a href=&quot;https://docs.npmjs.com/files/package.json#bin&quot;&gt;这里&lt;/a&gt; 学习一个），我们看到有以下代码：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token comment&quot;&gt;// Load proxy config&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; proxySetting &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;paths&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;appPackageJson&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;proxy&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; proxyConfig &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;prepareProxy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;proxySetting&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; paths&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;appPublic&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// Serve webpack assets generated by the compiler over a web sever.&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; serverConfig &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createDevServerConfig&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    proxyConfig&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    urls&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;lanUrlForConfig
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; devServer &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;WebpackDevServer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;compiler&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; serverConfig&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;此处的 &lt;code&gt;paths.appPackageJson&lt;/code&gt; 的声明在 &lt;a href=&quot;https://github.com/facebook/create-react-app/blob/next/packages/react-scripts/config/paths.js?1521342791455&quot;&gt;create-react-app/packages/react-scripts/config/paths.js&lt;/a&gt; 中：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;module&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;exports &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  appPackageJson&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;resolveApp&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;package.json&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;因此我们就知道，这里的 &lt;code&gt;proxySetting&lt;/code&gt; 就是我们之前在前端工程的 package.json 中定义的 &lt;code&gt;proxy&lt;/code&gt; 的值，然后我们看到，&lt;code&gt;proxySetting&lt;/code&gt; 被用来生成了 &lt;code&gt;serverConfig&lt;/code&gt;，最终 &lt;code&gt;serverConfig&lt;/code&gt; 作为配置参数创建了 &lt;code&gt;WebpackDevServer&lt;/code&gt; 实例。&lt;a href=&quot;https://github.com/webpack/webpack-dev-server&quot;&gt;webpack-dev-server&lt;/a&gt; 是一个用于启动 webpack 的测试服务器，并且提供了诸如 HMR 等方便开发的功能，因此我们就得出第一个结论：&lt;strong&gt;前端工程的 package.json 中定义的 &lt;code&gt;proxy&lt;/code&gt; 值，是作用于 WebpackDevServer，最终通过 WebpackDevServer 进行的转发&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;让我们继续试图解答第二个问题——是怎么样做到把访问页面的请求和访问 REST API 的请求区分开的？我们看到 &lt;code&gt;proxySetting&lt;/code&gt; 首先是被传入 &lt;code&gt;prepareProxy&lt;/code&gt; 方法得到 &lt;code&gt;proxyConfig&lt;/code&gt;，然后在 &lt;code&gt;createDevServerConfig&lt;/code&gt; 方法中返回了一个对象，并且对象的 &lt;code&gt;proxy&lt;/code&gt; 字段的值为 &lt;code&gt;proxyConfig&lt;/code&gt;，最终该对象就是 webpack-dev-server 的配置项，在 &lt;a href=&quot;https://webpack.js.org/configuration/dev-server/#devserver-proxy&quot;&gt;webpack-dev-server 文档&lt;/a&gt; 中可以看到 proxy 的作用就是做一层代理，把从页面来的请求转发到另一个地址，因此关键就在于 &lt;code&gt;proxyConfig&lt;/code&gt; 的配置是怎么样的，于是目光转移到 &lt;code&gt;prepareProxy&lt;/code&gt; 方法，&lt;code&gt;prepareProxy&lt;/code&gt; 方法的定义在 &lt;a href=&quot;https://github.com/facebook/create-react-app/blob/next/packages/react-dev-utils/WebpackDevServerUtils.js?1521357351270#L266&quot;&gt;create-react-app/packages/react-dev-utils/WebpackDevServerUtils.js&lt;/a&gt; 中，在这里我们可以看到首先是对 &lt;code&gt;proxy&lt;/code&gt; 进行了类型和格式的检测，然后如果 &lt;code&gt;proxy&lt;/code&gt; 是一个格式正确的字符串，就返回一个只有一个对象元素的数组，在这个对象中的 &lt;code&gt;context&lt;/code&gt; 字段中出现了如下的判断：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;context&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;pathname&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; req&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        req&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;method &lt;span class=&quot;token operator&quot;&gt;!==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;GET&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;mayProxy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;pathname&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
         req&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;headers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;accept &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
         req&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;headers&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;accept&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;indexOf&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;text/html&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;在这里我们看到有对 &lt;code&gt;req.headers.accept&lt;/code&gt; 进行判断，&lt;code&gt;req.headers.accept&lt;/code&gt; 用于表示浏览器通过这次 HTTP 请求希望获取到的内容类型，因此如果 accept 中带有 &lt;code&gt;text/html&lt;/code&gt; 则说明本次请求获取的是一个 document，因此就不应该被转发到后端，这一堆判断逻辑用一幅图表示出来如下：&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/liucheng-162f7b94cff68caa9890b178993c8ba8-84186.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1065px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 33.990610328638496%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3oAH/8QAFBABAAAAAAAAAAAAAAAAAAAAEP/aAAgBAQABBQJ//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAEP/aAAgBAQAGPwJ//8QAFxAAAwEAAAAAAAAAAAAAAAAAAAEQIf/aAAgBAQABPyHYj//aAAwDAQACAAMAAAAQg8//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAaEAACAgMAAAAAAAAAAAAAAAABEQAxQVFh/9oACAEBAAE/EE2IyLIb7GIN3uf/2Q==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;52137908279&quot;
        title=&quot;&quot;
        src=&quot;/static/liucheng-162f7b94cff68caa9890b178993c8ba8-84186.jpeg&quot;
        srcset=&quot;/static/liucheng-162f7b94cff68caa9890b178993c8ba8-c4f59.jpeg 300w,
/static/liucheng-162f7b94cff68caa9890b178993c8ba8-2a931.jpeg 600w,
/static/liucheng-162f7b94cff68caa9890b178993c8ba8-84186.jpeg 1065w&quot;
        sizes=&quot;(max-width: 1065px) 100vw, 1065px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;在这里 context 的含义在 webpack-dev-server 文档中是找不到的，它的说明出现在 &lt;a href=&quot;&quot;&gt;&lt;strong&gt;http-proxy-middleware&lt;/strong&gt;&lt;/a&gt; 中，context 支持传入一个 function 用于自定义转发的逻辑，只在返回值为 true 时才转发请求，&lt;strong&gt;因此该代理将只会转发 ajax 或者 fetch 发出的 HTTP 请求 。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;除了文中提到的这种最简单的配置，webpack-dev-server 的 proxy 还支持多种配置方式以同时满足多种代理规则，感兴趣的同学可以去文档里面了解更多细节。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[基于 Babylon.js 实现 3D 打击效果]]></title><description><![CDATA[基于 Babylon.js 的 3D 打击效果实现 先上效果图 是不是觉得很有意思, 那么就跟随我一起来实现吧! 准备工作 package V babylon 3.1.0 前往  Babylon.js  官网下载 Babylon.js. 准备一个 HTML…]]></description><link>https://knownsec-fed.com/2018-03-16-yuan-chuang-ji-yu-babylonjs-shi-xian-3d-da-ji-xiao-guo/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-03-16-yuan-chuang-ji-yu-babylonjs-shi-xian-3d-da-ji-xiao-guo/</guid><pubDate>Fri, 16 Mar 2018 03:45:22 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-7428e1187e1c65f1b1900d9047e2bace-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMCBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHr12IrE//EABkQAQACAwAAAAAAAAAAAAAAAAIAEQESIP/aAAgBAQABBQIp3eZsuP/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABkQAAIDAQAAAAAAAAAAAAAAAAAyAQISIP/aAAgBAQAGPwKdVFE4/8QAGhAAAgIDAAAAAAAAAAAAAAAAAAERISAxUf/aAAgBAQABPyF+lS0LsHNTRh//2gAMAwEAAgADAAAAEDP/AP/EABcRAQADAAAAAAAAAAAAAAAAAAABEVH/2gAIAQMBAT8QVOv/xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAgEBPxBX/8QAGxAAAgIDAQAAAAAAAAAAAAAAAREAMSAhQYH/2gAIAQEAAT8Q3olJZhfH0QcmeC7w/9k=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;[原创] 基于 Babylon.js 实现 3D 打击效果&quot;
        title=&quot;&quot;
        src=&quot;/static/header-7428e1187e1c65f1b1900d9047e2bace-d6978.jpeg&quot;
        srcset=&quot;/static/header-7428e1187e1c65f1b1900d9047e2bace-527f0.jpeg 300w,
/static/header-7428e1187e1c65f1b1900d9047e2bace-9a7cd.jpeg 600w,
/static/header-7428e1187e1c65f1b1900d9047e2bace-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h1&gt;基于 Babylon.js 的 3D 打击效果实现&lt;/h1&gt;
&lt;h3&gt;先上效果图&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;/attack-map-8dd3907c92e6105de547d4ef883dbf60.gif&quot;&gt;&lt;/p&gt;
&lt;p&gt;是不是觉得很有意思, 那么就跟随我一起来实现吧!&lt;/p&gt;
&lt;h2&gt;准备工作&lt;/h2&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th align=&quot;center&quot;&gt;package&lt;/th&gt;
&lt;th align=&quot;center&quot;&gt;V&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td align=&quot;center&quot;&gt;babylon&lt;/td&gt;
&lt;td align=&quot;center&quot;&gt;3.1.0&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;前往 &lt;a href=&quot;http://www.babylonjs.com/&quot;&gt;Babylon.js&lt;/a&gt; 官网下载 Babylon.js.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;准备一个 HTML 页面, 将下载好的 &lt;code&gt;Babylon.js&lt;/code&gt; 通过 &lt;code&gt;script&lt;/code&gt; 标签引入.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;在这个空白的 HTML 页面中放置一个 &lt;code&gt;canvas&lt;/code&gt;, 让这个 &lt;code&gt;canvas&lt;/code&gt; 占满屏幕&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;文件结构&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;.
|____images             -&gt; 图片资源
| |____attackMap.gif    -&gt; 组件运行效果截图
|____data.json          -&gt; 组件默认数据源
|____lib.js             -&gt; 基于 Babylon.js 实现的类
|____index.js           -&gt; 组件入口文件
|____style.css          -&gt; React 组件的 CSS 样式
|____utils.js           -&gt; 工具方法
|____videoTexture.js    -&gt; 波纹视频材质&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;images/red.png          -&gt; 默认红色攻击线条贴图
images/green.png        -&gt; 默认绿色攻击线条贴图
images/blue.png         -&gt; 默认蓝色攻击线条贴图
images/ring_blue.png    -&gt; 默认红色攻击波纹贴图
images/ring_blue.png    -&gt; 默认红色攻击波纹贴图
images/ring_blue.png    -&gt; 默认红色攻击波纹贴图&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h2&gt;科普一下&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;3D 打击效果实质上就是一条线在一条抛物线轨迹上运动的过程，且这条抛物线轨迹是由两个已知并且处在同一平面（X 轴和 z 轴）上。这条抛物线的高度（y 轴）是随机确定, 这样处理可以让攻击源和目标点之间多次攻击的抛物线在不同高度显示。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;模拟数据&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;[
    {
        &quot;from&quot;: {
            &quot;x&quot;: 61.66897643728131,
            &quot;y&quot;: 0,
            &quot;z&quot;: 57.218511027229994
        },
        &quot;to&quot;: {
            &quot;x&quot;: 22.638902093327285,
            &quot;y&quot;: 0,
            &quot;z&quot;: 88.63784341676953
        },
        &quot;texture&quot;: &quot;green&quot;,
        &quot;attack_power&quot;: 18,
        &quot;data&quot;: {}
    },
    {
        &quot;from&quot;: {
            &quot;x&quot;: 17.25975278621781,
            &quot;y&quot;: 0,
            &quot;z&quot;: 34.859315533740556
        },
        &quot;to&quot;: {
            &quot;x&quot;: 85.73410306095155,
            &quot;y&quot;: 0,
            &quot;z&quot;: 43.63666854877888
        },
        &quot;texture&quot;: &quot;green&quot;,
        &quot;attack_power&quot;: 14,
        &quot;data&quot;: {}
    },
    ...
]&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h2&gt;打击路径 (抛物线的构造)&lt;/h2&gt;
&lt;p&gt;我们将这条抛物线进行分解, 由于抛物线对称的特性, 我们就可以通过计算 &lt;code&gt;后半段的平抛运动&lt;/code&gt; 的坐标点数组, 再通过 &lt;code&gt;对称&lt;/code&gt;, 就可以求出前半段运动的坐标. 在 &lt;code&gt;x-z 轴平面&lt;/code&gt; 上, 运动可以拆解为 &lt;code&gt;x 轴的匀速运动&lt;/code&gt; 和 &lt;code&gt;z 轴的匀速运动&lt;/code&gt;. 来看算法:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;/**
 * 抛物线方程（计算路线）
 * data：攻击起点和终点坐标对象数组
 * avg：点之间的间距
 */
export const parabola = (data, avg) =&gt; {
  const routes = data.map(ele =&gt; {
    const temp = ele;
    // 制作一个 Y-xz 坐标系，x=(Math.abs(x0-x1)^2+Math.abs(z0-z1)^2)^1/2
    // xz 方向的长度
    const xz =
      (Math.abs(temp.to.x - temp.from.x) ** 2 +
        Math.abs(temp.to.z - temp.from.z) ** 2) **
      (1 / 2);
    // 对应的 sin,cos 和 tan
    const cos = Math.abs(temp.to.x - temp.from.x) / xz;
    const sin = Math.abs(temp.to.z - temp.from.z) / xz;
    const tan = (temp.to.z - temp.from.z) / (temp.to.x - temp.from.x);
    // 设置点距（速度）
    const speeds = xz * 1 / avg;
    // 定义抛物线的坐标数组, 并将起点坐标存入
    const XYarray = [];
    // 确定顶点, 一个随机高度
    const mPointY = Math.random() * (xz / 2 - 1) + 1;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;有人可能会问, 为什么要求三角函数 &lt;code&gt;sin&lt;/code&gt;,&lt;code&gt;cos&lt;/code&gt;,&lt;code&gt;tan&lt;/code&gt;? 这里主要的目的是为了求出在 &lt;code&gt;x-z 轴&lt;/code&gt; 上运动的长度投影到 &lt;code&gt;x 轴&lt;/code&gt; 和 &lt;code&gt;z 轴&lt;/code&gt; 上分别对应的 &lt;code&gt;x 轴&lt;/code&gt; 坐标值和 &lt;code&gt;z 轴&lt;/code&gt; 坐标值.&lt;/p&gt;
&lt;h4&gt;接下来我们要算出 &lt;code&gt;后半段平抛运动竖直方向的加速度g&lt;/code&gt;&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;// 得出 g, 平抛运动竖直方向的加速度
    const g = 2 * mPointY / (avg / 2) ** 2;
    // 应为抛物路线是对称的，所以先求出后半段的 Y 轴坐标数组
    const Y = [];
    for (let i = 0; i &lt;= avg / 2; i++) {
      Y.push(mPointY - g * i * i * (1 / 2));
    }
    // 定义点的坐标
    let x = 0;
    let z = 0;
    for (let i = 0; i &lt;= avg; i++) {
      const index = i &lt;= avg / 2 ? avg / 2 - i : i - avg / 2;
      if (tan&gt; 0) {
        if (temp.from.z &lt; temp.to.z) {
          x = temp.from.x + i * speeds * cos;
          z = temp.from.z + i * speeds * sin;
        } else {
          x = temp.from.x - i * speeds * cos;
          z = temp.from.z - i * speeds * sin;
        }
      } else if (temp.from.z&gt; temp.to.z) {
        x = temp.from.x + i * speeds * cos;
        z = temp.from.z - i * speeds * sin;
      } else {
        x = temp.from.x - i * speeds * cos;
        z = temp.from.z + i * speeds * sin;
      }
      const temps = new BABYLON.Vector3(x, Y[index], z);
      XYarray.push(temps);
    }
    return XYarray;
  });
  return routes;
};&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;有了路径之后, 就要有一条线在这条轨迹上运动:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;/**
 * 打击线条构造器
 * scene：容器
 * data：源数据
 * matList：材质
 */
export const createLine = (scene, data, matList) =&gt; {
  const lineArray = data.map((item, index) =&gt; {
    // 初始化线条在3D空间中连线的点
    const point = new Array(LINE_LENGTH).fill(
      new BABYLON.Vector3(item.from.x, item.from.y, item.from.z)
    );
    // 根据连线的点来创建这条线条
    const line = BABYLON.MeshBuilder.CreateTube(
      randomId(&apos;line&apos;),
      {path: point, radius: 0.1, updatable: true},
      scene
    );
    // 为线条贴上纹理
    line.material = matList[index];
    line.pointArray = point;
    // 创建波纹平面
    const plane = createPlane(
      scene,
      item.texture,
      item.attack_power,
      new BABYLON.Vector3(item.to.x, item.to.y, item.to.z)
    );
    line.plane = plane;
    line.plane.isVisible = false;
    return line;
  });

  return lineArray;
};&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;创建线条的纹理贴图:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;/**
 * 线条材质列表
 * scene：容器
 * data：源数据
 */
const creatMatList = (scene, data) =&gt; {
  const colorGenerator = {
    red: &apos;red&apos;,
    green: &apos;green&apos;,
    blue: &apos;blue&apos;,
  };
  const matList = [];
  data.forEach(item =&gt; {
    const myMaterial = new BABYLON.StandardMaterial(randomId(&apos;myMat&apos;), scene);
    const texture = item.texture;
    const color = colorGenerator[texture];
    myMaterial.diffuseTexture = new BABYLON.Texture(
      `/models/images/${color}.png`,
      scene
    );
    myMaterial.diffuseTexture.hasAlpha = true;
    myMaterial.emissiveTexture = myMaterial.diffuseTexture;
    matList.push(myMaterial);
  });
  return matList;
};&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;光是一条线移动是看不出打击效果的, 故我们还要加上一个打击产生波纹的效果:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;/**
 * 波纹构造器
 * scene：容器
 * data：数据源
 * power：大小
 * position：位置
 */
const createPlane = (scene, texture, power, positon) =&gt; {
  const videoMat = getVideoTexture(scene, &apos;meteor&apos;, texture);
  const mat = new BABYLON.StandardMaterial(randomId(&apos;mat&apos;), scene);
  mat.diffuseTexture = videoMat;
  mat.diffuseColor = new BABYLON.Color3(0, 0, 0);
  mat.diffuseTexture.hasAlpha = true;
  mat.emissiveTexture = mat.diffuseTexture;
  mat.backFaceCulling = false;
  mat.alpha = 0.8;
  const plane = BABYLON.MeshBuilder.CreatePlane(
    randomId(&apos;plane&apos;),
    {size: power},
    scene
  );
  plane.material = mat;
  plane.rotation.x = 90 * Math.PI / 180;
  plane.position = positon;
  return plane;
};&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;这里为了优化, 波纹的纹理材质是一个视频, 所以要创建一个视频的贴图 (videoTexture.js 在这个文件中):&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;const TEXTURE_COLORS = [&apos;red&apos;, &apos;green&apos;, &apos;blue&apos;];
const videoTexture = {
  meteor: {},
};

class SourceException {
  constructor(message) {
    this.message = message;
    this.name = &apos;SourceException&apos;;
  }
}

// 获取视频材质
export const getVideoTexture = (scene, type, color) =&gt; {
  if (!videoTexture[type]) {
    throw new SourceException(
      `Error: the video texture of &apos;${type}_${color}&apos; does not exist.`
    );
  }

  videoTexture[type][color] =
    videoTexture[type][color] ||
    new BABYLON.VideoTexture(
      `videoTexture_${type}_${color}`,
      [`models/${type}/${type}_${color}.mp4`],
      scene,
      true,
      false
    );
  return videoTexture[type][color];
};

// 播放视频
export const onScenePointerUp = scene =&gt; {
  Object.keys(videoTexture).forEach(type =&gt; {
    TEXTURE_COLORS.forEach(color =&gt; {
      getVideoTexture(scene, type, color).video.play();
    });
  });
};&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;为了让攻击线条能够以圆滑的方式进场和出场, 所以还要对线条进行一点处理:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;/**
 * 线条数据更新
 * counter：计数器
 * path：移动路线
 * tempArrary：进入平面和移出平面时的线条长度
 */
const setLinePath = (counter, path, tempArrary) =&gt; {
  const temp = tempArrary;
  const head = counter % path.length;
  const tail = (counter - LINE_LENGTH + 1) % path.length;

  // 线条在凋零时
  if (tail&gt; path.length - LINE_LENGTH) {
    temp.splice(head, 1, path[path.length - 1]);
    return temp;
  }
  const curPoints = path.slice(tail, head + 1);

  return curPoints;
};&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;所有的演员已就绪, 现在开始表演:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;/**
 * 攻击线条更新
 * scene：容器
 * data：数据源
 * routes：移动路线数组
 * alpha：计数器数组
 */
export const updataLine = (scene, data, routes, alpha) =&gt; {
  let counter = alpha;
  const matList = creatMatList(scene, data);
  const lineArray = createLine(scene, data, matList);

  // 这里调用Babylon.js内置的一个实现动画的方法
  const anim = scene.onBeforeRenderObservable.add(() =&gt; {
    lineArray.forEach((ele, index) =&gt; {
      let temp = ele;
      const head = counter % routes[index].length;
      const tail = (counter - LINE_LENGTH + 1) % routes[index].length;
      temp.pointArray = setLinePath(counter, routes[index], temp.pointArray);
      // 这里利用Babylon.js中物体自身刷新重载的方法,让物体在自身上进行新的位置刷新,而不是重新构造一个新的物体.这样就可以提高运行的效率
      temp = BABYLON.MeshBuilder.CreateTube(
        randomId(&apos;line&apos;),
        {path: temp.pointArray, radius: 0.1, updatable: true, instance: temp},
        scene
      );
      temp.material = matList[index];
      // 当线条头部分接触平面后,显示波纹,
      if (head === 100) {
        temp.plane.isVisible = true;
        onScenePointerUp(scene);
      }
      // 当线条尾巴部分离开平面后,打击动画停止
      if (tail === 100) {
        temp.plane.isVisible = false;
        temp.plane.dispose();
        temp.dispose();
        scene.onBeforeRenderObservable.remove(anim);
      }
    });
    counter += 1;
  });
};&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;演员演得再好, 没有一个好的舞台背景怎么行呢:&lt;/p&gt;
&lt;p&gt;摄像机来:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;_initCameras = (scene, canvas) =&gt; {
    const camera = new BABYLON.ArcRotateCamera(
      &apos;MainCamera&apos;,
      5,
      10,
      10,
      BABYLON.Vector3(0, 10, 0),
      scene
    );
    camera.lowerBetaLimit = 0.1;
    camera.upperBetaLimit = Math.PI / 2 * 0.99;
    camera.lowerRadiusLimit = 150;
    camera.attachControl(canvas, true);
    return camera;
  };&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;灯光来:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;_initLights = scene =&gt; {
    const pointLight = new BABYLON.HemisphericLight(
      &apos;pointLight&apos;,
      new BABYLON.Vector3(1, 1, 0),
      scene
    );
    pointLight.intensity = 0.06;
    return pointLight;
  };&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;背景来:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt; _initGround = screen =&gt; {
    const ground = BABYLON.MeshBuilder.CreateGround(
      &apos;ground&apos;,
      {
        width: 400,
        height: 400,
      },
      screen
    );
    ground.diffuseColor = new BABYLON.Color3(0, 0, 0);
    return ground;
  };&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;最后,将所有的元素放置到空白 HTML 中的&lt;code&gt;canvas&lt;/code&gt;中&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;/**
   * 当请求数据时更新动画
   */
  _renderLine = scene =&gt; {
    // 页面加载完毕调用动画
    this._beginAnimation(scene, this.startData);
    // 根据props中duration来决定数据请求的间隔时间
    this.lineInterval = setInterval(() =&gt; {
      // 更新数据源
      this.startData = data;
      this._beginAnimation(scene, this.startData);
    }, this.props.duration);
  };

  /**
   * 运行动画
   */
  _beginAnimation = scene =&gt; {
    // 构建路线
    const routes = lib.parabola(this.startData, 100);
    const alpha = 0;
    lib.updataLine(scene, this.startData, routes, alpha);
  };

  _onResize = engine =&gt; {
    engine.resize();
  };

_onLoaded = canvas =&gt; {
    this.engine = new BABYLON.Engine(canvas, true);
    const createScene = () =&gt; {
      const scene = new BABYLON.Scene(this.engine);
      this._initCameras(scene, canvas);
      this._initLights(scene);
      this._initGround(scene);
      this._renderLine(scene);
      return scene;
    };
    const scene = createScene();
    this._renderLoop(this.engine, scene);
    window.addEventListener(&apos;resize&apos;, () =&gt; {
      this._onResize(this.engine);
    });
  };&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;打完, 收工&lt;/p&gt;
&lt;h1&gt;总结&lt;/h1&gt;
&lt;p&gt;3D 打击效果实现的要点主要就是怎么去算出这条打击轨迹.这就需要运用数学和物理上的相关知识了.&lt;/p&gt;
&lt;p&gt;从数学角度来看,打击轨迹就是一条抛物线.所以只需求出已知两点的抛物线就可以得到这条打击轨迹了.但单从数学的角度来做的话,实现起来太过于麻烦.但仔细观察就可以发现这条抛物线是对称的,并且有一半是在做平抛运动,所以只要通过物理上平抛运动的方程就可以解决问题.&lt;/p&gt;
&lt;p&gt;水平方向运动可以将其看成是沿&lt;code&gt;x轴&lt;/code&gt;和&lt;code&gt;z轴&lt;/code&gt;的水平匀速运动.最后通过水平方向运动得到的坐标带入平抛运动方程中,求出竖直方向的坐标,然后对称,就可以得到这条抛物线的所有坐标点了.&lt;/p&gt;
&lt;p&gt;线条运动说穿了就是点的移动,有了抛物线的坐标点,只需安装Babylon.js的规范实现点的移动就可以展示打击效果了&lt;/p&gt;</content:encoded></item><item><title><![CDATA[【译】如何创建交互友好的表单]]></title><description><![CDATA[原文地址： Creating User-friendly forms 作者：Momoh Silm…]]></description><link>https://knownsec-fed.com/2018-03-13-fan-yi-ru-he-chuang-jian-jiao-hu-you-hao-de-biao-dan/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-03-13-fan-yi-ru-he-chuang-jian-jiao-hu-you-hao-de-biao-dan/</guid><pubDate>Tue, 13 Mar 2018 02:16:00 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-8c910dd21b5fa1deb2346fb016ac7523-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIGBf/EABYBAQEBAAAAAAAAAAAAAAAAAAEAAv/aAAwDAQACEAMQAAAB31ZInSkNn//EABoQAQACAwEAAAAAAAAAAAAAAAIAAQMEMTL/2gAIAQEAAQUCiNI5Ndlx+K5//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFREBAQAAAAAAAAAAAAAAAAAAABL/2gAIAQIBAT8BW//EABoQAQADAAMAAAAAAAAAAAAAAAEAEBECMVH/2gAIAQEABj8CmPUwHkelNf/EABoQAAICAwAAAAAAAAAAAAAAAAABESEQQVH/2gAIAQEAAT8hHJcsOWmEYpFwokH/2gAMAwEAAgADAAAAECff/8QAFhEBAQEAAAAAAAAAAAAAAAAAAREA/9oACAEDAQE/EFhcFLv/xAAWEQEBAQAAAAAAAAAAAAAAAAARAAH/2gAIAQIBAT8QSzRf/8QAGRABAQADAQAAAAAAAAAAAAAAAQARITFh/9oACAEBAAE/ENw/y4Rum45jJ77MlKRHsgAAAcL/2Q==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;【翻译】如何创建交互友好的表单&quot;
        title=&quot;&quot;
        src=&quot;/static/header-8c910dd21b5fa1deb2346fb016ac7523-d6978.jpeg&quot;
        srcset=&quot;/static/header-8c910dd21b5fa1deb2346fb016ac7523-527f0.jpeg 300w,
/static/header-8c910dd21b5fa1deb2346fb016ac7523-9a7cd.jpeg 600w,
/static/header-8c910dd21b5fa1deb2346fb016ac7523-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;原文地址：&lt;a href=&quot;https://blog.prototypr.io/creating-user-friendly-forms-46e3f7f4eef2&quot;&gt;Creating User-friendly forms&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;作者：Momoh Silm&lt;/p&gt;
&lt;p&gt;表单对于个人和企业都是至关重要的。在收集数据的时候，我们一般会使用最常见的表单样式（也许是因为在互联网兴起之前，其实它已经在线下存在很久了）。因此，创建用户友好的表单是提高表单完成率的关键。&lt;/p&gt;
&lt;h2&gt;表单结构&lt;/h2&gt;
&lt;p&gt;表单在用途、内容和大小上各不相同，但有一些基本要素可以帮助用户轻松填写表单。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/1-8edc82fd05a569ad3a988b2e73787ee4-79c0e.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1000px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 58.599999999999994%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAABjklEQVQoz4WT2U7DMBBF+/+fUqR+BhJCAlFUHvoCbWjSJs5SO/ESO76MXQopXYg0sS1rTu7cmUy89zg+2yzF8+M9drtdPI/vfnc4uxs/k/BSSkEIgYoVSJN31IITwGMYhpgYkyksnWstwXv9A/0LjsAiz/E0f8FHtkFZVqi6Fn3fwxgDa23ce+fApMBDvgZT7W1gUFeWJSwlBVWWADEI5g+Z5xbcKrlgDJ+bgzopJUF9LE1oBU97F0qnVdkeSdsg7fa3FXICFqsVapajrBl810GTj4ZKd6Q6KnUDhNFY1FvURp6oHEMjUHMOnmyQrxMwvofXPZzSsNqQOhehIIXcKDzmCRpar5Uega1okG9XaKotrBHoNafON9QMdToqFM4PMXr6UOj6RYWqXKBaTpG+zZDMp9i83mG9nEFWyyCMFFLJlCytiR5W5G/wMawXgVxIZDmpZBWyokbdcLjg27fp48A/Ax6BYc6kVDFaqcm3Q/JwBXDWjLOmaA1OjenaFqJTNI9DLPH4pwT3Lqm91OUvhHOp8df+c80AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;1&quot;
        title=&quot;&quot;
        src=&quot;/static/1-8edc82fd05a569ad3a988b2e73787ee4-79c0e.png&quot;
        srcset=&quot;/static/1-8edc82fd05a569ad3a988b2e73787ee4-a085f.png 300w,
/static/1-8edc82fd05a569ad3a988b2e73787ee4-4a5b3.png 600w,
/static/1-8edc82fd05a569ad3a988b2e73787ee4-79c0e.png 1000w&quot;
        sizes=&quot;(max-width: 1000px) 100vw, 1000px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    
亚马逊“创建账户”表格的剖析&lt;/p&gt;
&lt;h3&gt;i. 类别或分组&lt;/h3&gt;
&lt;p&gt;此元素在用户浏览表单时可以引导用户。当您需要收集的数据分别属于表单的多个类别时，它尤其有用，例如个人详细信息，职业详细信息和财务详细信息。&lt;/p&gt;
&lt;h3&gt;ii. 标签&lt;/h3&gt;
&lt;p&gt;标签告诉用户在指定的地方应该输入的数据内容。&lt;/p&gt;
&lt;h3&gt;iii. 提示文字&lt;/h3&gt;
&lt;p&gt;对标签的描述。&lt;/p&gt;
&lt;h3&gt;iv. 错误信息&lt;/h3&gt;
&lt;p&gt;向用户反馈，为什么他们在输入框中的输入内容不符合要求。&lt;/p&gt;
&lt;h3&gt;v. 主动作按钮&lt;/h3&gt;
&lt;p&gt;表单末尾的按钮，用于提交表格&lt;/p&gt;
&lt;h2&gt;表单状态&lt;/h2&gt;
&lt;p&gt;基本上，在用户交互过程中，您的表单应该有三个状态；&lt;/p&gt;
&lt;h3&gt;i. 默认状态&lt;/h3&gt;
&lt;p&gt;这是您的表单在没有输入任何内容之前的样子。&lt;/p&gt;
&lt;h3&gt;ii. 焦点状态&lt;/h3&gt;
&lt;p&gt;该状态聚焦在用户操作时正在输入的字段。如果用户的视线离开了屏幕，该状态帮助用户聚焦、并缩短扫描屏幕的时间。&lt;/p&gt;
&lt;h3&gt;iii. 反馈状态&lt;/h3&gt;
&lt;p&gt;该状态下，用户可收到反馈（通常是报错信息）。有时，用户移动到下一个输入域时，可能会进入本状态。但是，如果无法立即对数据进行校验，则会在用户单击提交表单按钮时触发。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/2-e518defc8c4b93d2e41d0d3054cec41a-79c0e.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1000px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 62.8%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAABuklEQVQ4y51Ty5KbMBDk/78qlWxySC57y81OYsxLi4wkLPSkd4QxoE3lEsowoPa0ZrpHxTzPOF7H7//BivSwIUBZAx/DBj7/MHkHaaft+4iZ4CEIC3PcsIVw9BaVGZeYJdGPU8JFyyzpSSicIUwsxBmhsxb15Q+C/7tCOdzA6jpbf2J6HNFeywf2JJRSoaquaKoSIca9NXrnnKO+XtC/tZlOKQohUBFZ11TZRoVSCop28qRj8B4hPKqMpGd3/Q0tOKK5I04KcW0t1SPaFrrvCTOYJ9KYctN2haSdpkkTkYd3biNMkfMezll4MsZTjHHX0QwDZn3HTGbGlXBxWcoR7O1G7YJcTkR7Wz0fMEiqjpaSvDHuoyKbBveuw2xsXqG+ncBOn9Cev2IoX+D1qhe1LJtXdKfPYOcXjM0PRK83QtUzDG2F4Cb4JMkqR6GkQNuUaAnUIycit2qYTGFo6hKMNXCToKrj5qhkP9Gdv6D79Q2q/o5g5YPQOQ9DZVsXV+sfKallax0m4+DCPharHhiERMcYWM9p7Mzu8sfjs9z4eOXzl2Iyy5DDzsfDZkR4nKHj8czX/32G8/kE3gEs7fmcCwIF4wAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;2&quot;
        title=&quot;&quot;
        src=&quot;/static/2-e518defc8c4b93d2e41d0d3054cec41a-79c0e.png&quot;
        srcset=&quot;/static/2-e518defc8c4b93d2e41d0d3054cec41a-a085f.png 300w,
/static/2-e518defc8c4b93d2e41d0d3054cec41a-4a5b3.png 600w,
/static/2-e518defc8c4b93d2e41d0d3054cec41a-79c0e.png 1000w&quot;
        sizes=&quot;(max-width: 1000px) 100vw, 1000px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    
亚马逊的默认、焦点和反馈状态&lt;/p&gt;
&lt;h2&gt;最佳实践&lt;/h2&gt;
&lt;h3&gt;1. 保持简单&lt;/h3&gt;
&lt;p&gt;尽量使你的表单简单明了。只收集必要的数据，并避免以验证的名义让用户重复输入字段。例如，不是要求再次输入密码，而是允许用户查看他们创建的密码。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/3-588fb6d378a95f77f74ec2b01ba85a71-79c0e.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1000px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 45.8%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAABLElEQVQoz21Qy27CMBD0/38QR7hU6rE9VIJSikBBgPNyYsdeZ/3qxgGpLczB8o52dnaHpTtijNZapdSgFIClMv3FzDQV364/Qpj+zGeEDGuhrJpL2RpjqPwnJoZzXpZciDZmsK7r2gkNAFCN6EZ0MYZHMXkURTFoPSLOloxY2lZKZS3GQB2R2HlwvK+b8tc5V3JOd7nfYkQEGJzvRmydF0SkZwje891enS/kliiUcWR5pB+Grji9F6c3pb9705ATxXAFRfbj/uhaMbUBiPOxb64IEqH3CGyOUVtfd0bbaDBZN11Li4J39AatyWS6mRTFS7lfXb6W4rBEeWC5LTkjm+0rXtep/kxWPl87hKrtq1o0QtKlJLyJo65xs8Ddym0WQZ5vOT2ITYYd3RzoDxDlClYldbN8AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;3&quot;
        title=&quot;&quot;
        src=&quot;/static/3-588fb6d378a95f77f74ec2b01ba85a71-79c0e.png&quot;
        srcset=&quot;/static/3-588fb6d378a95f77f74ec2b01ba85a71-a085f.png 300w,
/static/3-588fb6d378a95f77f74ec2b01ba85a71-4a5b3.png 600w,
/static/3-588fb6d378a95f77f74ec2b01ba85a71-79c0e.png 1000w&quot;
        sizes=&quot;(max-width: 1000px) 100vw, 1000px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    
在 Jumia &amp;#x26; Amazon 网页上，验证用户密码的不同选项&lt;/p&gt;
&lt;h3&gt;2. 使用内部联动验证&lt;/h3&gt;
&lt;p&gt;当给用户反馈错误提示时，最好将反馈信息放置到对应的输入位置处。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/4-75b96a4a2881543245347aeb30fa6132-79c0e.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1000px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 69.10000000000001%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAAB8UlEQVQoz42Sy26bQBSG895VH6B9iFbtMlU37S6yFVVqF00vjmwnNgMeMOY6MBfMbWaAoWOwnbir/Pol0NH5+M8c5qo/SSk1PgdfSA2qa77Pi6ZpzvWr/gUav+vvnOX9T0rpuXKAORemBRfLR2DBx5WxWoPRKMFN0+oGTIgfBGEYIBSN2BNc1Xy1Avez+Xy+XMwfgAkty4H2NowSKQ9DZmlCwlDmOc8yPb2qKjUMPyTXPItRjklTFNkG7jGTXDRCN5dCSN1QYywQ6uu6l1IJoTi/gJnnZ0FQxDG1rPnbN39fvzLfv6MbyDnXDSXGktJDoCb/g/Ua0yDEYbhPMWcZAwAvFsy0UmCNyXmSZL7fldUB09aTP4OFAeDWDSKEdwFyIxqSPSJ5nDIp5ZCcsp1bJagriq4qu7JQQ/24bQ86jmE6a2Nj2q6HPB9FUepDZ1xYniYxtPME9V3Xt+3h5O2zZAi2xsMGru2NsQWa3wVJSkPXG5MFXpTuDbMnFN5o6/emCI5wWdW3998ms+l0NrmdTW1n5wUxSkiEyHhmghzX+m2DXzb449szzizVlKf/zPnXu8/XPz5cf//45e4TYzkhGSZZiqkcFiMaVcu+lqoSfaf6i0tyutVHdZ06a6yURZ4xkjHK9mXbNqprn+CB787uX6x/N6AXLvJwOGoAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;4&quot;
        title=&quot;&quot;
        src=&quot;/static/4-75b96a4a2881543245347aeb30fa6132-79c0e.png&quot;
        srcset=&quot;/static/4-75b96a4a2881543245347aeb30fa6132-a085f.png 300w,
/static/4-75b96a4a2881543245347aeb30fa6132-4a5b3.png 600w,
/static/4-75b96a4a2881543245347aeb30fa6132-79c0e.png 1000w&quot;
        sizes=&quot;(max-width: 1000px) 100vw, 1000px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    
Facebook 和亚马逊采用两种不同的技术进行验证反馈&lt;/p&gt;
&lt;h3&gt;3. 相关字段分组&lt;/h3&gt;
&lt;p&gt;将相关字段组合在一起，并按照标准的排序排列是非常重要的。这可以帮助用户轻松地填写数据，不用花费太多的精力。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/5-037f8d63216a82ef042b13b2bc2a8b31-89095.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 99.625%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsSAAALEgHS3X78AAABz0lEQVQ4y4VTy44TMRDM13LhG5DgACduwBHxCfwJ4hQQilaBVbIDGmbG73c3Zc+SBOTsllpO7J7q6na3N9xQClkfVwsxGxeVDXU1PqbMV7BZf3Khu8kcfi37u2kY5aLcrKzUfhIW4R4hE7NOtEg9SyWkJqLTF/QvuspFSZVzjjE655Q2GUeFajnWaWNKud92yPBA0FmrlAZtNaD9aWF64mfyOM3G2JyTdwhSxb0Pp7RX2b4y3FCWleCNqTQfog9YQ0qQ5YeUceQ8JB1SwDalHFOyzi0IiWDWnjLvK4PcdCrWEKWVjUDryYq+MsJDyraCEQVfZSowvo5N9zRQGby+NWKJ7nEyUhGhjIv++VtOwqA/SDXmiv/q7PWZeLIJ5HHBsBj0SbcycFshxtokurfehBEdZNqLPHuKIUilrKs33KZNhRAeTJs4Eifi0kqAlYt1rStTNeqmrXwWxi8mzNrDhA2T8uLvVvv6Mn3BK+hemAk/hvl2mPfH+eY4fR+Wm+M8CittEBrzltr76ZGhHDLVxK70FbIoKhS+nO5zn3OrGXj9jZ9+5ldf+eUXfrHlJ5/ow7466o3Q9SFZXe/3/HzL73b8dsdvdvxsyx8PZ+8l/gDgVpNLTgt4VgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;5&quot;
        title=&quot;&quot;
        src=&quot;/static/5-037f8d63216a82ef042b13b2bc2a8b31-89095.png&quot;
        srcset=&quot;/static/5-037f8d63216a82ef042b13b2bc2a8b31-f17ae.png 300w,
/static/5-037f8d63216a82ef042b13b2bc2a8b31-8b9c0.png 600w,
/static/5-037f8d63216a82ef042b13b2bc2a8b31-89095.png 800w&quot;
        sizes=&quot;(max-width: 800px) 100vw, 800px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    
hotels.ng 的订单确认页面的使用分割视图展示了相关字段的分组&lt;/p&gt;
&lt;h3&gt;4. 使用标签并将它们左对齐&lt;/h3&gt;
&lt;p&gt;始终将标签（如上图所示）放置在输入框上方。不要用标签替换提示文字。如果没有标签，用户在提交表单前很难交叉检查他们的输入，从而导致他们花费更多时间思考。
使用标签时，请始终将它们放在输入框的上方并且左对齐。&lt;a href=&quot;https://www.uxmatters.com/mt/archives/2006/07/label-placement-in-forms.php&quot;&gt;有一份综合研究报告&lt;/a&gt;，说明这为什么是用户体验最好的方法。&lt;/p&gt;
&lt;h3&gt;5. 匹配输入字段的类型和长度&lt;/h3&gt;
&lt;p&gt;简单来说，请确保输入字段的长度和类型与预期相符。例如，地址字段输入的内容应该比邮政编码字段长。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/6-93b9099a5abca4e62ed0732118faacff-79c0e.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1000px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 37.1%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAAAzElEQVQoz62PTQ6CMBCFuf85WLjSxGt4ADe40ISokYD9Y1oKfU75MaAhcWGTr68z03mdJrq2UIYQdSLGQ44glMZTKAhp0DQe5Jqv+3OSqVhqg4qJsdT10ERsKBW894ir6wIcm/5kWI2G+m1oIU0JWR/h2hOsz1gzWCe55vrpBz4MeQtsGqL25zEma8M5r0O6LcJmP5DuinDhHLllz5xkbfSIUIT7g5BfFfKb7s9Crn93mrCdwy+zEqtt+eushtGt7NWMufndZX80PPyTF0PjFsxkbqwuAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;6&quot;
        title=&quot;&quot;
        src=&quot;/static/6-93b9099a5abca4e62ed0732118faacff-79c0e.png&quot;
        srcset=&quot;/static/6-93b9099a5abca4e62ed0732118faacff-a085f.png 300w,
/static/6-93b9099a5abca4e62ed0732118faacff-4a5b3.png 600w,
/static/6-93b9099a5abca4e62ed0732118faacff-79c0e.png 1000w&quot;
        sizes=&quot;(max-width: 1000px) 100vw, 1000px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    
Flutterwave’s Rave 的登录界面输入字段长度与预期相符&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/7-e892f31ee9943e0656b3122b0d31e5fc-79c0e.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1000px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 30.4%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAAAqUlEQVQY032QWwuCQBCF9///oSDJehAy6AJSj90sRNy11NWVbXbGVoxIrA7fw8DhzI0ZY4io+anvlk0APJitsMiMSPpwTOL7cX89XIQoeVrzVL24qSRVmdRE2IarYJ3PxkUPp3BH+cJbBdHUDyfz8xvXDx3vtNnFTRfGX8v9lT2WIUAlBCE2Q6j9BiL1sMNkrrZLNIZZH7SmgWxvkBLKshvyaZCugUe20RPtuFd8eBdx9QAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;7&quot;
        title=&quot;&quot;
        src=&quot;/static/7-e892f31ee9943e0656b3122b0d31e5fc-79c0e.png&quot;
        srcset=&quot;/static/7-e892f31ee9943e0656b3122b0d31e5fc-a085f.png 300w,
/static/7-e892f31ee9943e0656b3122b0d31e5fc-4a5b3.png 600w,
/static/7-e892f31ee9943e0656b3122b0d31e5fc-79c0e.png 1000w&quot;
        sizes=&quot;(max-width: 1000px) 100vw, 1000px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    
Payporte 输入字段的长度与预期不符&lt;/p&gt;
&lt;h3&gt;6.CTA 按钮&lt;/h3&gt;
&lt;p&gt;所有的表单最后都应该有一个按钮，不管是提交按钮还是下一步按钮，在需要多个按钮的情况下，应该将重点放在主按钮上，淡化其他的按钮。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/8-23d378156f4c137ed33cf4a28fbc27f3-89095.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 42.25%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAAA5UlEQVQY04VQi4rCMBD0/39FwfsZj4MDOdtTtN3UJM1zNw+3loIHlRtCHpudzGQ29QXee2MMEdVCpWSulCfqG2zmZe4AgM/DQQDEGL1zhMjFvJDLc6yQF+UAQoK4AwxdB6NxObGD/I/y/CjqYzhtQ/sBX1v5vQun/XDc3dSVr4bofsz9bPVIcV05Btv3F296dBAt5CAoCI9TN+ZkCV0iKnmdnEvFNHngTX4b09qfOTPnOCZ/vXVN0zbtL4DwLly0xJRGjGy7sUpjqEtyf8jGOmOtVEoqzbPSmo/KGg6c3U62CV9tPwBVSNJ7jVoxYAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;8&quot;
        title=&quot;&quot;
        src=&quot;/static/8-23d378156f4c137ed33cf4a28fbc27f3-89095.png&quot;
        srcset=&quot;/static/8-23d378156f4c137ed33cf4a28fbc27f3-f17ae.png 300w,
/static/8-23d378156f4c137ed33cf4a28fbc27f3-8b9c0.png 600w,
/static/8-23d378156f4c137ed33cf4a28fbc27f3-89095.png 800w&quot;
        sizes=&quot;(max-width: 800px) 100vw, 800px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    
亚马逊在把重点放在主要按钮方面做得很好&lt;/p&gt;
&lt;p&gt;当使用弹框来搜集数据（弹框中的表单）时，备选按钮有时是关闭弹框的按钮。可以在右上角用 X 图标来代替这个按钮，如下所示&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/9-ead8a7173871180bcaa2e922157afee3-89095.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 54.25%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABn0lEQVQoz2WRWW+cMBDH+d59b79Mn/rcJqpSrVSpzXYvYNmjCofZxXhmDGsDyxUTUJRkrb9GY49+c9lq27ZpmmtdF2VZVJUuy+p6Ndem6yqeITsjT3vUVaEFQsjiJBWUySgMGYushPNLnkuldoSjPMK9pPX5tDixRcxWp3gjuEe0RTDRwUaglNa6sBhjjuM8ReFWkoMwas2Tn/bmbrW8X6++L/7NPM8BMUUluGkKCFVVWL7v27b9P/C3hC6CkXHmUfg38P/4T7+Px9FZnuKtRJsJx8PHdfDj/i5JmRUEQRgEfsxG8q12eXZUFy8jk86QLoEL4CHN/XC+XAAKK89zrRRk0nmD2SLdX/Jvs1+fPn+ZrXdm4I2X2kfhcuFK2KK4KHW9VhYgSpL8fU0zoSdpdjh8fXh4DCPj2wk4yVDZQXGQ1HZd3/eWMotTymz7tm3DHNRl2gW9aMgLe8Kmawe4fzm6rm/hsYWPLyj2RHXTTHDXdzyTZs7hPybB67d9kD3sTKhKdl07wZDLMOWR4MYG/MwzolJjoW6kURMpKOrSUM+m51gqHRJZ3AAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;9&quot;
        title=&quot;&quot;
        src=&quot;/static/9-ead8a7173871180bcaa2e922157afee3-89095.png&quot;
        srcset=&quot;/static/9-ead8a7173871180bcaa2e922157afee3-f17ae.png 300w,
/static/9-ead8a7173871180bcaa2e922157afee3-8b9c0.png 600w,
/static/9-ead8a7173871180bcaa2e922157afee3-89095.png 800w&quot;
        sizes=&quot;(max-width: 800px) 100vw, 800px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    
Medium 的登录框使用 X 图标而不是’关闭’按钮&lt;/p&gt;
&lt;h3&gt;7. 搜索栏&lt;/h3&gt;
&lt;p&gt;不要隐藏你的搜索栏，如果你的网站是非常重内容的话，搜索是用户首选。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/10-291178d223e95a217eb7c0d2ad89ad7a-89095.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 10%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAAsSAAALEgHS3X78AAAAhUlEQVQI1wF6AIX/AFBWXzhBTmZsdo+Vm4aLk4eMk4iNlIeMlImOloiMk4aLkoOIj4OJkISKkYSKkYOIkIOKk4B+fEZISi03RQDU1djR09e8v8Coq6qrrq2prKuusbCprKqjo5+qrKuprKqlqKaho6Kbnp2dn5+jpaSmp6alqKiztrS8vrxo1UXtFELafAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;10&quot;
        title=&quot;&quot;
        src=&quot;/static/10-291178d223e95a217eb7c0d2ad89ad7a-89095.png&quot;
        srcset=&quot;/static/10-291178d223e95a217eb7c0d2ad89ad7a-f17ae.png 300w,
/static/10-291178d223e95a217eb7c0d2ad89ad7a-8b9c0.png 600w,
/static/10-291178d223e95a217eb7c0d2ad89ad7a-89095.png 800w&quot;
        sizes=&quot;(max-width: 800px) 100vw, 800px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    
亚马逊的搜索栏非常突出&lt;/p&gt;
&lt;p&gt;此外，用户提交搜索，在显示结果后不要清除搜索内容。这可以使用户回头看看搜索栏，便可以轻松地知道他 / 她最初搜索的内容。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/11-8a80e6b3b368ca66b9e95a85a84fcb06-89095.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 21.999999999999996%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsSAAALEgHS3X78AAAASUlEQVQI12P4////ly9f7t279/Dhw9+/fwO5/4gA/8GAAUIB+X///v0FBnA5ggCkGWjh169f/8IALs1//vyBOA1FM7JL8ABMZQDCCu15S+2qzgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;11&quot;
        title=&quot;&quot;
        src=&quot;/static/11-8a80e6b3b368ca66b9e95a85a84fcb06-89095.png&quot;
        srcset=&quot;/static/11-8a80e6b3b368ca66b9e95a85a84fcb06-f17ae.png 300w,
/static/11-8a80e6b3b368ca66b9e95a85a84fcb06-8b9c0.png 600w,
/static/11-8a80e6b3b368ca66b9e95a85a84fcb06-89095.png 800w&quot;
        sizes=&quot;(max-width: 800px) 100vw, 800px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    
Medium 在显示搜索结果后没有清除搜索栏&lt;/p&gt;
&lt;h3&gt;8. 清晰&lt;/h3&gt;
&lt;p&gt;清晰地向用户传达信息。尽可能清楚地告诉他们预期的输入，不要模棱两可。没有人喜欢填写表单，更没有人喜欢填写两次。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/12-62b79b6bd669643bf9cec2461f24cb42-89095.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 52.75%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAAA8ElEQVQoz5VSPQvCMBDt33FyEvwB4q9ycNBNV0HERSd/hYig4O7mqKNa81HTXpL6mmqwtoI+Xi7Jte94dyQI+Z0JRdoYa7EQcfQsZzzjhAIVk8JOpLVGAK1Nc0Dm0jqtAj4FTMgb4yETQkY4g/aljpMEVy4jW4XEifn5clUqLtf2VcpK2IHbIGQsZJxxcePCNWnsD3jaRlNPEiHrxpMRI3RTTHNW9/zh01vFzfErCuK8/P5kRkuarmm+BfVsQ5M1jVd0vFhX/YtYmywudlTriGZftocR2BpEjZ6sd+X2oP0/1bb/QiY2Rby9rUKmDLysB/9jfcK4vFkuAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;12&quot;
        title=&quot;&quot;
        src=&quot;/static/12-62b79b6bd669643bf9cec2461f24cb42-89095.png&quot;
        srcset=&quot;/static/12-62b79b6bd669643bf9cec2461f24cb42-f17ae.png 300w,
/static/12-62b79b6bd669643bf9cec2461f24cb42-8b9c0.png 600w,
/static/12-62b79b6bd669643bf9cec2461f24cb42-89095.png 800w&quot;
        sizes=&quot;(max-width: 800px) 100vw, 800px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    
Cowrywise 让标签尽可能的清晰，并且在按钮的描述性文字上也做得很好&lt;/p&gt;</content:encoded></item><item><title><![CDATA[【译】让我们从零开始编写一个web服务器]]></title><description><![CDATA[原文链接： Let’s code a web server from scratch with NodeJS Streams!   作者： Ziad Saab 在这篇文章中，我将通过 node.js 的  stream  模块从零开始搭建一个简单的 web…]]></description><link>https://knownsec-fed.com/2018-03-12-fan-yi-rang-wo-men-cong-ling-kai-shi-bian-bian-xie-yi-ge-web-fu-wu-qi/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-03-12-fan-yi-rang-wo-men-cong-ling-kai-shi-bian-bian-xie-yi-ge-web-fu-wu-qi/</guid><pubDate>Mon, 12 Mar 2018 10:45:21 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-4a609cb1c6079044d4ec9e51ff66bb3e-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMBBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHvTqg1X//EABkQAAEFAAAAAAAAAAAAAAAAAAEAAhIgIf/aAAgBAQABBQI4pOFf/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFhAAAwAAAAAAAAAAAAAAAAAAACAx/9oACAEBAAY/AiL/AP/EABkQAQEBAAMAAAAAAAAAAAAAAAERABAhMf/aAAgBAQABPyFxc9Atw0HzPP8A/9oADAMBAAIAAwAAABA4D//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABURAQEAAAAAAAAAAAAAAAAAABBB/9oACAECAQE/EKf/xAAcEAEAAQQDAAAAAAAAAAAAAAABEQAhQVEQMXH/2gAIAQEAAT8QWAkZIohSUXVvvHtMoSSU1XR5/9k=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;【翻译】让我们从零开始变编写一个web服务器&quot;
        title=&quot;&quot;
        src=&quot;/static/header-4a609cb1c6079044d4ec9e51ff66bb3e-d6978.jpeg&quot;
        srcset=&quot;/static/header-4a609cb1c6079044d4ec9e51ff66bb3e-527f0.jpeg 300w,
/static/header-4a609cb1c6079044d4ec9e51ff66bb3e-9a7cd.jpeg 600w,
/static/header-4a609cb1c6079044d4ec9e51ff66bb3e-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;原文链接：&lt;a href=&quot;https://www.codementor.io/ziad-saab/let-s-code-a-web-server-from-scratch-with-nodejs-streams-h4uc9utji&quot;&gt;Let’s code a web server from scratch with NodeJS Streams!&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;作者：&lt;a href=&quot;https://www.codementor.io/ziad-saab&quot;&gt;Ziad Saab&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;在这篇文章中，我将通过 node.js 的 &lt;strong&gt;stream&lt;/strong&gt; 模块从零开始搭建一个简单的 web 服务器。在完成的过程中，我们会回顾 HTTP 请求和响应的结构，并且会对 &lt;a href=&quot;http://nodejs.cn/api/stream.html&quot;&gt;Node’s Stream API&lt;/a&gt; 做一个简单介绍。&lt;/p&gt;
&lt;p&gt;首先，让我们快速回顾一下 Node.js 内置的 &lt;a href=&quot;https://nodejs.org/api/http.html&quot;&gt;http 模块&lt;/a&gt;，通过它，我们会学习到一个 HTTP 请求和响应的大致结构。然后使用 Node.js 的 &lt;code&gt;net&lt;/code&gt; 模块，创建一个简单的 TCP 服务器，并尝试通过它建立一个可用的 web 服务器。&lt;/p&gt;
&lt;h3&gt;Node.js 内置的 http 模块&lt;/h3&gt;
&lt;p&gt;Node.js 自带一个简单的 &lt;code&gt;http 服务器&lt;/code&gt;。这个服务器允许我们去监听任意端口，并且对于每个 http 请求提供了一个回调函数去处理。&lt;/p&gt;
&lt;p&gt;这个回调函数接受两个参数：&lt;a href=&quot;https://nodejs.org/dist/latest-v6.x/docs/api/http.html#http_class_http_incomingmessage&quot;&gt;request 对象&lt;/a&gt; 和 &lt;a href=&quot;https://nodejs.org/dist/latest-v6.x/docs/api/http.html#http_class_http_serverresponse&quot;&gt;response 对象&lt;/a&gt;，request 对象包含 http 请求的相关信息，response 对象是我们要返回给客户端的内容。&lt;/p&gt;
&lt;p&gt;Node.js http 服务器使用案例：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; http &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;http&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; server &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; http&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createServer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
server&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;request&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;req&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Date&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toISOString&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; - &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;req&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;method&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;req&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;url&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setHeader&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Content-Type&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;text/plain&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;end&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Hello World!&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
server&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;listen&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;上面代码将会启动一个 web 服务器监听 3000 端口。当接收到一个 http 请求，会打印一段信息：当前的日期和请求的 &lt;code&gt;method、url&lt;/code&gt;。
这些信息来源于 req 参数，它是 Node.js 创建的 request 对象，request 对象还有一个 &lt;code&gt;.socket&lt;/code&gt; 属性，是一个简易的 &lt;code&gt;TCP socket&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;接下来我们会创建一个 tcp 服务器，并且对于每一个新的连接都会直接访问 &lt;code&gt;socket&lt;/code&gt;，然后通过它来创造我们的 web 服务器。
在上面的代码里，我们访问了 &lt;code&gt;req.method&lt;/code&gt; 和 &lt;code&gt;req.url&lt;/code&gt;，但是我们可能还会想要解析 request 其他内容。&lt;/p&gt;
&lt;p&gt;接下里这一节，我们先看看 HTTP 请求的结构，方便我们去解析它。&lt;/p&gt;
&lt;h3&gt;HTTP 解析&lt;/h3&gt;
&lt;p&gt;下面是一个简单的 http 请求：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;POST /posts/42/comments HTTP/1.1\r\n
Host: www.my-api.com\r\n
Accept: application/json\r\n
Authorization: Bearer N2E5NTU2MzQ5MGQ4N2UzNjIxOTY2ZDU1M2YwNjA3OGFjYjgyMjU4NQ\r\n
Accept-Encoding: gzip, deflate, br\r\n
Content-Type: application/json\r\n
Content-Length: 28\r\n
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.13; rv:58.0)\r\n
\r\n
{&quot;text&quot;:&quot;this is a comment&quot;}&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;需要了解的点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;每一行都使用 &lt;code&gt;\r\n&lt;/code&gt; 分割开&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;第一行被称作请求行，由三个部分组成&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;请求的方法， POST.&lt;a href=&quot;https://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html&quot;&gt;标准的请求方法&lt;/a&gt;。&lt;/li&gt;
&lt;li&gt;请求的 url：/posts/42/comments。&lt;/li&gt;
&lt;li&gt;http 协议版本：HTTP/1.1。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;下面每一行都被称作一个请求头，由一个字段和它的值组成，通过 &lt;code&gt;:&lt;/code&gt; 分开，&lt;a href=&quot;https://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html&quot;&gt;标准的请求头&lt;/a&gt;。&lt;/li&gt;
&lt;li&gt;有一行只有 &lt;code&gt;\r\n&lt;/code&gt;，这一行标志着请求头的结束，在这之后的内容都是请求体。&lt;/li&gt;
&lt;li&gt;这个请求中，请求体是一个 JSON 对象，由 &lt;code&gt;Content-Type&lt;/code&gt; 定义，这个 JSON 对象的长度是 28 字节，由  &lt;code&gt;Content-Length&lt;/code&gt; 定义。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;下面是一个 http 响应：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;HTTP/1.1 200 OK\r\n
Server: nginx/1.9.4\r\n
Date: Fri, 20 Apr 2017 16:19:42 GMT\r\n
Content-Type: application/json\r\n
Content-Length: 141\r\n
\r\n
{
  &quot;id&quot;: &quot;8fh924b42o&quot;,
  &quot;text&quot;: &quot;this is a comment&quot;,
  &quot;createdAt&quot;: &quot;2017-04-20T16:19:42.840Z&quot;,
  &quot;updatedAt&quot;: &quot;2017-04-20T16:19:42.840Z&quot;
}&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;同样的：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;就像 request，每一行由 &lt;code&gt;\r\n&lt;/code&gt; 分开。&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;第一行称作状态栏，组成：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;HTTP 版本，HTTP/1.1.1。&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10&quot;&gt;HTTP 状态码&lt;/a&gt;，200。&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.w3.org/Protocols/rfc2616/rfc2616-sec6.html#sec6&quot;&gt;状态描述&lt;/a&gt;，OK。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;接下来的每一行都是一个响应头，和请求头的结构一样。&lt;/li&gt;
&lt;li&gt;有一行仅包含 &lt;code&gt;\r\n&lt;/code&gt;，标志响应头的结束和响应体的开始。&lt;/li&gt;
&lt;li&gt;请求体是一个 114 字节的 JSON 对象，都在响应头中定义。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;接下来的一节，我们会创建一个 TCP 服务器让我们能够监听到 HTTP 请求，我们将会一步步的获取并且解析这个请求，然后通过 Streams 流返回一个响应。&lt;/p&gt;
&lt;h3&gt;接受并且解析一个 HTTP 请求&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;Node.js 提供了内置的 net 模块创建一个流式的 tcp 服务器。“流式” 指的是服务器可以通过 &lt;a href=&quot;https://nodejs.org/api/stream.html&quot;&gt;Nodejs Stream API&lt;/a&gt; 发送和接收数据。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;http 服务器会在触发 request 事件时给回调函数绑定一个 request 对象和 response 对象，使用 &lt;code&gt;net&lt;/code&gt; 模块创建的 tcp 服务器则会绑定一个 &lt;code&gt;Socket&lt;/code&gt; 对象给 &lt;code&gt;connection&lt;/code&gt; 事件回调函数，简而言之，这意味着它们都可以对数据进行读写。&lt;/p&gt;
&lt;p&gt;如果我们发送一个 HTTP 请求到我们的 TCP 服务器，读取 &lt;code&gt;socket&lt;/code&gt;，我们会得到请求的内容，有两种方式可以读取一个可读的 stream：监听 &lt;code&gt;data&lt;/code&gt; 事件或者直接调用 &lt;code&gt;.read()&lt;/code&gt; 方法。让我们看看第一种方式：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; net &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;net&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; server &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; net&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createServer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
server&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;connection&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; handleConnection&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
server&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;listen&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;handleConnection&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;socket&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  socket&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;data&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;chunk&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Received chunk:\n&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; chunk&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toString&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  socket&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;HTTP/1.1 200 OK\r\nServer: my-web-server\r\nContent-Length: 0\r\n\r\n&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;将这段代码放到一个叫 &lt;code&gt;server.js&lt;/code&gt; 的文件中，通过你的命令行执行它： &lt;code&gt;node server.js&lt;/code&gt;，然后在另一个命令行中，通过 &lt;code&gt;curl&lt;/code&gt; 请求这个服务器：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-shell&quot;&gt;&lt;code&gt;curl -v localhost:3000/some/url&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;你会看到一个很长的输出，展示你的请求头和响应头。在 node 命令行中，你会看到下面的内容：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;Received chunk:
GET /some/url HTTP/1.1
Host: localhost:3000
User-Agent: curl/7.54.0
Accept: */*&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;通过 post 请求发送一些数据：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;curl -v -XPOST -d&apos;hello=world&apos; localhost:3000/some/url&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;在 node 命令行中接收到这些输出：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;Received chunk:
POST /some/url HTTP/1.1
Host: localhost:3000
User-Agent: curl/7.54.0
Accept: */*
Content-Length: 11
Content-Type: application/x-www-form-urlencoded

hello=world&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;如果你发送一个更长的请求体，你应该通过多个 chunks 去接收它，但是一个 web server 并不总是需要去解析一个请求体。&lt;/p&gt;
&lt;p&gt;很多时候，请求头部分已经足够去处理这个请求了。如果我们要编写一个通用的 web server，我们需要一种方式去停止从 socket 中接收 &lt;code&gt;\r\n&lt;/code&gt; 以后的 request 数据。&lt;/p&gt;
&lt;p&gt;如果我们需要控制什么时候停止从 Stream 中拿取数据，我们可以使用 &lt;code&gt;socket&lt;/code&gt; 的 &lt;code&gt;.read()&lt;/code&gt; 方法，下面是一些代码：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; net &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;net&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; server &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; net&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createServer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
server&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;connection&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; handleConnection&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
server&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;listen&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;handleConnection&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;socket&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// 监听一次 readable 事件，回调函数中调用 .read()&lt;/span&gt;
  socket&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;once&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;readable&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 声明一个 buffer 存储 request 数据&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; reqBuffer &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Buffer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 声明一个临时的 buffer 从 socket 中读取数据&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; buf&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; reqHeader&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// 从 socket 中读取数据&lt;/span&gt;
      buf &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; socket&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// 如果没有数据可再次读取，结束循环&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;buf &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

      &lt;span class=&quot;token comment&quot;&gt;// 将新数据存入 reqBuffer 中&lt;/span&gt;
      reqBuffer &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Buffer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;concat&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;reqBuffer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; buf&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

      &lt;span class=&quot;token comment&quot;&gt;// 检查是否读取到 \r\n\r\n （请求头的结束）&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; marker &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; reqBuffer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;indexOf&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;\r\n\r\n&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;marker &lt;span class=&quot;token operator&quot;&gt;!==&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// 如果读取到 \ r\n\r\n，获取它之后的额外数据&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; remaining &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; reqBuffer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;slice&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;marker &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// 请求头是我们读取到所有数据，在 \ r\n\r\n 之前，不包括 \r\n&lt;/span&gt;
        reqHeader &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; reqBuffer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;slice&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; marker&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toString&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// 将额外的数据放回到 socket 中&lt;/span&gt;
        socket&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;unshift&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;remaining&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`Request header:\n&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;reqHeader&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// 此时，我们停止从 socket 中读取数据，且获取到了请求头字符串&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 如果我们还想要获取请求体，我们可以这样做:&lt;/span&gt;

    reqBuffer &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Buffer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;buf &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; socket&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!==&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      reqBuffer &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Buffer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;concat&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;reqBuffer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; buf&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; reqBody &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; reqBuffer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toString&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`Request body:\n&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;reqBody&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// 返回一个响应&lt;/span&gt;
    socket&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;end&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;HTTP/1.1 200 OK\r\nServer: my-custom-server\r\nContent-Length: 0\r\n\r\n&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;代码有点长，因为我们需要一些逻辑去决定是否停止从 stream 中读取数据。我们将请求头和请求体分开，让使用我们的 web server 的开发者去决定如何对请求操作。&lt;/p&gt;
&lt;p&gt;关键的部分是 &lt;code&gt;socket.unshift&lt;/code&gt;，往这个可读流中放回额外的数据。它让使用我们 web server 的用户可以继续获取请求体的数据从 &lt;code&gt;socket&lt;/code&gt; 中。&lt;/p&gt;
&lt;p&gt;下面是我们这个简单的 web server 完整的代码，将前面的所有内容合并在一起。通过函数 &lt;code&gt;createWebServer(requestHandler)&lt;/code&gt; 暴露出我们的服务器，这个函数接收一个处理器，例如:&lt;code&gt;(req, res) =&gt; void&lt;/code&gt;，就像 Node 的 web 服务器，代码中的注释解释了每一个步骤的内容：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; net &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;net&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createWebServer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;requestHandler&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; server &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; net&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createServer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  server&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;connection&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; handleConnection&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;handleConnection&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;socket&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 监听一次 readable 事件，调用. read()&lt;/span&gt;
    socket&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;once&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;readable&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// 声明一个 buffer 存储 request 数据&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; reqBuffer &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Buffer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// 声明一个临时的 buffer 从 socket 中读取数据&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; buf&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; reqHeader&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// 从 socket 中读取数据&lt;/span&gt;
        buf &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; socket&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;read&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// 如果没有数据可再次读取，结束循环&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;buf &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token comment&quot;&gt;// 将新数据存入 reqBuffer 中&lt;/span&gt;
        reqBuffer &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Buffer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;concat&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;reqBuffer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; buf&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token comment&quot;&gt;// 检查是否读取到 \r\n\r\n （请求头的结束）&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; marker &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; reqBuffer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;indexOf&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;\r\n\r\n&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;marker &lt;span class=&quot;token operator&quot;&gt;!==&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token comment&quot;&gt;// 如果读取到 \ r\n\r\n，获取它之后的额外数据&lt;/span&gt;
          &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; remaining &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; reqBuffer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;slice&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;marker &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
          &lt;span class=&quot;token comment&quot;&gt;// 请求头是我们读取到所有数据，在 \ r\n\r\n 之前，不包括 \r\n&lt;/span&gt;
          reqHeader &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; reqBuffer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;slice&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; marker&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toString&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
          &lt;span class=&quot;token comment&quot;&gt;// 将额外的数据放回到 socket 中&lt;/span&gt;
          socket&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;unshift&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;remaining&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
          &lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

      &lt;span class=&quot;token comment&quot;&gt;/* 请求相关业务 */&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// 开始解析请求头&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; reqHeaders &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; reqHeader&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;\r\n&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// 第一行比较特殊&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; reqLine &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; reqHeaders&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;shift&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos; &apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// 接下来的每一行都是一个请求头，创建一个对象存储它&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; headers &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; reqHeaders&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;reduce&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;acc&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; currentHeader&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; currentHeader&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;:&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;acc&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
          &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;trim&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toLowerCase&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;trim&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

      &lt;span class=&quot;token comment&quot;&gt;// 这个对象会被传入请求处理函数中&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; request &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        method&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; reqLine&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        url&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; reqLine&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        httpVersion&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; reqLine&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;/&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        headers&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// 使用这个 web 服务器的用户可以直接从 socket 中获取请求体数据&lt;/span&gt;
        socket
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

      &lt;span class=&quot;token comment&quot;&gt;/* 响应相关业务 */&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// 初始化值&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; status &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; statusText &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;OK&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; headersSent &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; isChunked &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; responseHeaders &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        server&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;my-custom-server&apos;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

      &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setHeader&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        responseHeaders&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toLowerCase&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

      &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;sendHeaders&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// 只触发一次&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;headersSent&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          headersSent &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
          &lt;span class=&quot;token comment&quot;&gt;// 添加 date 响应头&lt;/span&gt;
          &lt;span class=&quot;token function&quot;&gt;setHeader&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;date&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Date&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toGMTString&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
          &lt;span class=&quot;token comment&quot;&gt;// 将状态栏存入 socket 中&lt;/span&gt;
          socket&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`HTTP/1.1 &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;status&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;statusText&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;\r\n`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
          &lt;span class=&quot;token comment&quot;&gt;// 将所有的响应头存入 socket 中&lt;/span&gt;
          Object&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;keys&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;responseHeaders&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;headerKey &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            socket&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;headerKey&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;: &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;responseHeaders&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;headerKey&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;\r\n`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
          &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
          &lt;span class=&quot;token comment&quot;&gt;// 存入 \r\n 在 socket 中分割响应头和响应体&lt;/span&gt;
          socket&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;\r\n&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
     &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

     &lt;span class=&quot;token comment&quot;&gt;// response 对象&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; response &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;chunk&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;headersSent&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token comment&quot;&gt;// 如果没有 content-length 响应头，定义 Transfer-Encoding 响应头为 chunked&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;responseHeaders&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;content-length&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
              isChunked &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
              &lt;span class=&quot;token function&quot;&gt;setHeader&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;transfer-encoding&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;chunked&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;token function&quot;&gt;sendHeaders&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
          &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
          &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;isChunked&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; size &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; chunk&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;length&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toString&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            socket&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;size&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;\r\n`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            socket&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;chunk&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            socket&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;\r\n&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
          &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
          &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            socket&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;chunk&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
          &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;end&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;chunk&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;headersSent&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token comment&quot;&gt;// 设置响应的 content-length&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;responseHeaders&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;content-length&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                    &lt;span class=&quot;token comment&quot;&gt;// 假设 chunk 是一个 buffer，不是一个字符串!&lt;/span&gt;
                    &lt;span class=&quot;token function&quot;&gt;setHeader&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;content-length&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; chunk &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; chunk&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;length &lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
                &lt;span class=&quot;token function&quot;&gt;sendHeaders&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;isChunked&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;chunk&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; size &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;chunk&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;length&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toString&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;16&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                socket&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;size&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;\r\n`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                socket&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;chunk&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                socket&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;write&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;\r\n&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
                socket&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;end&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;0\r\n\r\n&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
                socket&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;end&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;chunk&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        setHeader&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;setStatus&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;newStatus&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; newStatusText&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; status &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; newStatus&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; statusText &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; newStatusText &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// 通过服务器发送 JSON&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;headersSent&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Headers sent, cannot proceed to send JSON&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
          &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
          &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; json &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Buffer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;JSON&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;stringify&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
          &lt;span class=&quot;token function&quot;&gt;setHeader&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;content-type&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;application/json; charset=utf-8&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
          &lt;span class=&quot;token function&quot;&gt;setHeader&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;content-length&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; json&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;length&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
          &lt;span class=&quot;token function&quot;&gt;sendHeaders&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
          socket&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;end&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;json&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

      &lt;span class=&quot;token comment&quot;&gt;// 传递 request 和 response 给处理器函数&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;requestHandler&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; response&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    listen&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;port&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; server&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;listen&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;port&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; webServer &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createWebServer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;req&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// 这是我们最开始使用 http 模块的代码&lt;/span&gt;
  console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Date&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toISOString&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; - &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;req&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;method&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;req&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;url&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setHeader&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Content-Type&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;text/plain&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;end&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Hello World!&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

webServer&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;listen&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;&lt;strong&gt;该服务器代码不可用于商业生产。它的目的仅仅是帮助对 &lt;code&gt;streams&lt;/code&gt; 和  &lt;code&gt;buffers&lt;/code&gt; 的学习&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;大部分这里的代码含义应该都很清楚了，我们使用前面章节学习到的规则解析请求，返回响应。&lt;/p&gt;
&lt;p&gt;仅仅有一点点新增的内容：&lt;code&gt;Transfer-Encoding: chunked&lt;/code&gt;，当我们不能提前知道响应的长度时很有用。你可以 &lt;a href=&quot;https://en.wikipedia.org/wiki/Chunked_transfer_encoding&quot;&gt;在维基百科上查看它的内容&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h3&gt;总结&lt;/h3&gt;
&lt;p&gt;通过使用简单的模块，例如：&lt;code&gt;net，Stream，Buffer&lt;/code&gt;，我们能够基于一个 TCP 服务器创建一个基本的 HTTP 服务器，实现一些解析逻辑。在过程中，我们学习一些内容关于 HTTP 请求和响应，可读写的 streams 和 buffers 的基础知识。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[由屎色自行车棚引发的思考]]></title><description><![CDATA[…]]></description><link>https://knownsec-fed.com/2018-03-11-bikeshedding/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-03-11-bikeshedding/</guid><pubDate>Sun, 11 Mar 2018 09:30:53 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-858cbc95bb035aea6a80f498840f04fb-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAwACBP/EABcBAAMBAAAAAAAAAAAAAAAAAAABAgP/2gAMAwEAAhADEAAAAR6GHOgswv/EABgQAAMBAQAAAAAAAAAAAAAAAAECEQAD/9oACAEBAAEFAuj0p0AUvS2cC7//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAgEBPwGq/8QAGhAAAgIDAAAAAAAAAAAAAAAAAAIQIRExcf/aAAgBAQAGPwLRhrKheR//xAAbEAEAAgMBAQAAAAAAAAAAAAABABEhMVFBof/aAAgBAQABPyEKNn5FXmxiEyqOTJb5NQIo4T//2gAMAwEAAgADAAAAECvP/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQMBAT8Qiv/EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAECAQE/ELU//8QAGxAAAgMBAQEAAAAAAAAAAAAAASEAETFRQXH/2gAIAQEAAT8QASyNgN5FQABtgULE4EMBdREwtvyAVuZbkF57cn//2Q==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;由屎色自行车棚引发的思考&quot;
        title=&quot;&quot;
        src=&quot;/static/header-858cbc95bb035aea6a80f498840f04fb-d6978.jpeg&quot;
        srcset=&quot;/static/header-858cbc95bb035aea6a80f498840f04fb-527f0.jpeg 300w,
/static/header-858cbc95bb035aea6a80f498840f04fb-9a7cd.jpeg 600w,
/static/header-858cbc95bb035aea6a80f498840f04fb-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;有一天，我走在路上，看到了一个屎色的自行车棚。车棚颜色饱满，让我不禁停下了脚步。在阳光的照射下甚至感觉闻道了什么莫名的味道。&lt;/p&gt;
&lt;p&gt;路边走来一个老大爷，站到了我的旁边，开始吐槽起来：“如果我是市长，一定不会批准人们使用这个颜色来建造自行车棚！简直是太可恶啦！”&lt;/p&gt;
&lt;p&gt;我对着大爷笑了笑作为回应，然后转身走开。&lt;/p&gt;
&lt;p&gt;但内心却升起了疑问：“自行车棚到底应该使用什么颜色？”&lt;/p&gt;
&lt;h1&gt;自行车棚应该使用什么颜色？&lt;/h1&gt;
&lt;p&gt;简短的回答是：你不需要关心这个问题。&lt;/p&gt;
&lt;p&gt;长一点的解释是：拥有建造一个自行车棚的能力并不代表你就要阻止别人建造一个&lt;strong&gt;屎&lt;/strong&gt;色的自行车棚。&lt;/p&gt;
&lt;p&gt;这个比喻是说：不能因为你懂，就要去针对每一个细枝末节争论不休。有人发现一个问题所引发的争论会与问题的复杂度成反比。&lt;/p&gt;
&lt;h1&gt;这是什么梗？&lt;/h1&gt;
&lt;p&gt;在上古世纪（约 1999 年左右），&lt;a href=&quot;https://www.freebsd.org&quot;&gt;FreeBSD&lt;/a&gt; 开发社区在关于 &lt;a href=&quot;https://www.freebsd.org/cgi/man.cgi?query=sleep&amp;#x26;sektion=1&amp;#x26;manpath=freebsd-release-ports&quot;&gt;sleep(1)&lt;/a&gt; 函数是否应该接受非整数参数（以精确到毫秒、微秒的级别）展开了一场旷日持久的争论。&lt;/p&gt;
&lt;p&gt;每个人都能看懂这个问题，于是每个人都开始发表自己的看法，导致当时的邮件列表里充满了关于这个问题的讨论。&lt;/p&gt;
&lt;p&gt;当时 FreeBSD 的精神领袖 &lt;a href=&quot;http://phk.freebsd.dk/&quot;&gt;Poul Henning Kamp&lt;/a&gt; 在一封标题为 &lt;a href=&quot;https://shed.bike/&quot;&gt;[A bike shed (any colour will do) on greener grass…]&lt;/a&gt; 的邮件中引用了&lt;strong&gt;自行车棚 (Bikeshed)&lt;/strong&gt; 这个说法：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The sleep(1) saga is the most blatant example of a &lt;strong&gt;bike shed&lt;/strong&gt;
discussion we have had ever in FreeBSD.  The proposal was well
thought out, we would gain compatibility with OpenBSD and NetBSD,
and still be fully compatible with any code anyone ever wrote.&lt;/p&gt;
&lt;p&gt;Yet so many objections, proposals and changes were raised and
launched that one would think the change would have plugged all
the holes in swiss cheese or changed the taste of Coca Cola or
something similar serious.&lt;/p&gt;
&lt;p&gt;“What is it about this bike shed ?” Some of you have asked me.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;他说关于 sleep(1) 函数的讨论是在 FreeBSD 社区内出现过的、自行车棚问题的典型代表。这个问题引发了那么多的反对、建议以及变更，搞得好像是一旦做了这个调整，世界上所有瑞士奶酪上小孔都会被堵住、所有可口可乐都会变味一样。&lt;/p&gt;
&lt;p&gt;从此之后，在 FreeBSD 社区内，&lt;strong&gt;Bikeshed（自行车棚）&lt;/strong&gt; 这个单词就有了特殊的含义，通常用来指 &lt;a href=&quot;https://www.freebsd.org/doc/en/articles/mailing-list-faq/bikeshed.html&quot;&gt;某些简单到所有人都可以发表观点，并且几乎所有人都会去发表观点的问题&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;久而久之，随着 FreeBSD 开发者当时在网上的影响力，&lt;strong&gt;Bikeshed（自行车棚）&lt;/strong&gt; 这个说法逐渐传播开来。&lt;/p&gt;
&lt;h1&gt;帕金森定理&lt;/h1&gt;
&lt;p&gt;但 &lt;strong&gt;Bikeshed （自行车棚）&lt;/strong&gt; 到底是从何说起的呢？&lt;/p&gt;
&lt;p&gt;在 1957 年，英国作家 &lt;a href=&quot;https://en.wikipedia.org/wiki/C._Northcote_Parkinson&quot;&gt;西里尔·诺斯古德·帕金森&lt;/a&gt; 提出了&lt;a href=&quot;https://en.wikipedia.org/wiki/Law_of_triviality&quot;&gt;「帕金森琐碎定理」&lt;/a&gt;，用来说明大型组织会花费大量时间在讨论无关紧要的琐事上，但是真正重大的决议反而可以轻松过关这种现象。&lt;/p&gt;
&lt;p&gt;帕金森描述了一个虚构的财政会议，其中有三个议题：第一项是搭建一个价值千万英镑的核反应堆，第二项是建一个价值 350 英镑的员工自行车棚，第三项是每年为联合福利议会咖啡店赞助 21 英镑的提案。&lt;/p&gt;
&lt;p&gt;关于这三个提案，帕金森分别做了描述：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;一千万英镑的核反应堆在数额和技术含量上都高高在上、遥不可及，在 2.5 分钟的讨论之后便通过了。一名议会成员提出了完全不同的计划，然而没有人愿意放弃议会目前取得的进展所以响应寥寥，另一位熟悉该议题的成员略有担忧，但是他觉得无法向议会的其他成员解释清楚，最终作罢。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;自行车棚的议题则处于所有人的理解范围之内，并有丰富人生经验予以支撑意见，议会成员 Softleigh 先生表示铝制棚顶价格高昂，应使用石棉；Holdfast 先生提议使用镀锌铁；Daring 先生则对是否有必要建自行车棚表示质疑；Holdfast 表示反对。辩论自此拉开帷幕… 在经过 45 分钟的讨论，并得出有可能节省 50 英镑的结果之后，议会成员们带着完成使命的成就感纷纷坐回原位。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;帕金森继续描写第三项议题：“也许有些成员无法区分铝制棚顶或石棉棚顶，但是所有人都了解咖啡：它是什么，应该如何做，该在哪买，以及到底该不该买。这项议题将会占用议会成员一小时十五分钟的时间，然而由于时间关系，会议结束时议员要求会议秘书提供更多信息，同时将此项议题的决定留待下次议会处理。”&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h1&gt;当下的自行车棚问题&lt;/h1&gt;
&lt;p&gt;现在我们知道 &lt;strong&gt;Bikeshed （自行车棚）&lt;/strong&gt; 可以用来代表一些无关紧要但会引起大量争论的问题，那么我们软件开发行业当下的自行车棚问题有那些呢？&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;世界上最好的编程语言是？（或许这个问题已&lt;a href=&quot;http://php.net/manual/fa/faq.languages.php&quot;&gt;无需争论&lt;/a&gt;）&lt;/li&gt;
&lt;li&gt;React 和 Vue，哪个更好？&lt;/li&gt;
&lt;li&gt;世界上最好的编辑器是哪个？Emacs 还是 Vim？&lt;/li&gt;
&lt;li&gt;代码中的缩进应该用 Tab 还是空格？&lt;/li&gt;
&lt;li&gt;…&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;类似的问题还有很多，并且通常争论不休。与其参与到其中图个嘴上痛快，不如踏踏实实地关注眼前的问题。愿你能够辨别自行车棚问题、远离自行车棚会议，充实地过好每分每秒。&lt;/p&gt;
&lt;p&gt;还有更多关于自行车棚的资料，感兴趣可以继续阅读：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://bikeshed.com/&quot;&gt;Why Should I Care What Color the Bikeshed Is?&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://www.quora.com/Hacker-Culture-Who-was-Brett-Glass-named-in-the-original-bikeshed-email&quot;&gt;Who was Brett Glass named in the original “bikeshed” email?&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[新手视角的 Docker]]></title><description><![CDATA[Docker 简介 Docker 是什么: 官网 是怎么介绍的，“Docker is the world’s leading software containerization platform”。其实翻译一下就是，“Docker 是容器的一种封装”！ Docker…]]></description><link>https://knownsec-fed.com/2018-03-11-xin-shou-shi-jiao-de-docker/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-03-11-xin-shou-shi-jiao-de-docker/</guid><pubDate>Sun, 11 Mar 2018 03:23:38 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-921c244e6c64ea7bd34e8a01b7a6542a-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAEDBAX/xAAWAQEBAQAAAAAAAAAAAAAAAAAAAgP/2gAMAwEAAhADEAAAAefdkazIP//EABgQAQEAAwAAAAAAAAAAAAAAAAIBAxIg/9oACAEBAAEFAjNksdJ4/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGRAAAQUAAAAAAAAAAAAAAAAAEQACIJGx/9oACAEBAAY/AhqJbcf/xAAcEAEAAQQDAAAAAAAAAAAAAAABABARITFBUXH/2gAIAQEAAT8hYCh6tHmh0WOeas//2gAMAwEAAgADAAAAEPvv/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGhABAAIDAQAAAAAAAAAAAAAAAQAhETGBUf/aAAgBAQABPxB+Qi0Cj2IOrmw4RUVPJldrFXaxOds//9k=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;新手视角的 Docker&quot;
        title=&quot;&quot;
        src=&quot;/static/header-921c244e6c64ea7bd34e8a01b7a6542a-d6978.jpeg&quot;
        srcset=&quot;/static/header-921c244e6c64ea7bd34e8a01b7a6542a-527f0.jpeg 300w,
/static/header-921c244e6c64ea7bd34e8a01b7a6542a-9a7cd.jpeg 600w,
/static/header-921c244e6c64ea7bd34e8a01b7a6542a-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;最近投入的一个项目后台是 PHP + MySQL + Apache，且其它各种环境配置起来特别麻烦。还好使用了 docker，方便了不少。
于是作为初学者，总结了部分知识并整理了一点点资料。&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h2&gt;Docker 简介&lt;/h2&gt;
&lt;h3&gt;Docker 是什么:&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;https://www.docker.com/what-docker&quot;&gt;官网&lt;/a&gt;是怎么介绍的，“Docker is the world’s leading software containerization platform”。其实翻译一下就是，“Docker 是容器的一种封装”！&lt;strong&gt;Docker&lt;/strong&gt; 在 &lt;strong&gt;容器&lt;/strong&gt; 的基础上，进行了进一步的 &lt;strong&gt;封装&lt;/strong&gt;，从文件系统、网络互联到进程隔离等等，极大的简化了容器的创建和维护。&lt;/p&gt;
&lt;h3&gt;容器（Container）与虚拟机（Virtual Machines）的区别&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;https://user-gold-cdn.xitu.io/2018/3/11/16211269cead66bd?w=928&amp;#x26;h=832&amp;#x26;f=png&amp;#x26;s=53050&quot; alt=&quot;容器&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://user-gold-cdn.xitu.io/2018/3/11/162112736db8fab5?w=928&amp;#x26;h=834&amp;#x26;f=png&amp;#x26;s=56608&quot; alt=&quot;虚拟机&quot;&gt;&lt;/p&gt;
&lt;p&gt;上面这两张图片来自&lt;a href=&quot;https://www.docker.com/what-container&quot;&gt;官网&lt;/a&gt;，可以很清晰的看出 Docker 与 虚拟机 的区别.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;虚拟机
虚拟机是物理硬件的抽象，是虚拟出一套硬件后在其上运行一个完整操作系统，在该系统上再运行所需应用进程。管理程序允许多个虚拟机在一台机器上运行，每个虚拟机包括一个操作系统的完整副本、一个或多个应用程序、必要的二进制文件。因此虚拟机可以实现在同一电脑下，根据项目情况进行环境配置并做到相互隔离，但是虚拟机占用资源多体积大速度慢。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;容器
容器内的应用进程直接运行于宿主的内核，容器内没有自己的内核，而且也没有进行硬件虚拟。多个容器可以在同一台机器上运行，并与其他容器共享OS内核，每个容器在用户空间中作为单独的进程运行。因此容器同样也可以实现不同项目的不同环境配置和隔离，且占用资源少体积小速度快！而 Docker 正是基于容器的一种封装。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;相关概念&lt;/h2&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/docker-33be3272d9088179f1e9cc1e6350cfb7-e55fd.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1009px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 52.428146679881074%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAAB7ElEQVQoz2WN22vTYADF8/8K7sknwQdBYTIUHeKDoLMXrZbpGu1l7VbYBVzSC+lla5o21y/3+5ovyXJrnApzssN5OfD7cZAJzVO6y/sZ6yV2lAFNHy3YKSPQNhTDXPBT3ks4L5H8xIH+lAVT0xP9dKPef7BPIN/nSocU2oxRX2i4smrPRZSUDpbq13PwiWCrU7HJuw3GqjEOYYafe1Rzt1bivVcY9XziIAcSHApaX9Bx0e6JVoM2ijOjQmrvp3Jhppcv1NJEKlJWhTIH1lXrBKef3vtC6j+JwZ4UI4dgNeSUgaAPlcu+4nZZk2DAmFrObVikvSNWX1AUNueOJG9ghdXuqPtws0A5b4FZAiFS4y73l1qbMTtghSkrXIOcYb9EW4dneHVpD40g2NpY7WyOYY7psNLq/bj/aGeubTPgAw8RCUZykMpBAmDihjGu+cByt9EWRtLfeEiYQc5d5KpwpkLacI1kLea5GqQ6zBQYI/mtrLMM03zBtF+jzfGSQ+WY9HPn8RP+2dax4mow+s2ssxseWV/vm/6VLedNvTNiASpHhBsbJ6fW+Bx3YhVeXQvZLf7Osx4IhvViFyVorqOn75iwbGQFNS2zvhPG+R/n33P+n70+luHYDBsz/lQw96SoKKYfQVwCSQVE9h35F89vDG2D6dXcAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;docker&quot;
        title=&quot;&quot;
        src=&quot;/static/docker-33be3272d9088179f1e9cc1e6350cfb7-e55fd.png&quot;
        srcset=&quot;/static/docker-33be3272d9088179f1e9cc1e6350cfb7-83f61.png 300w,
/static/docker-33be3272d9088179f1e9cc1e6350cfb7-07419.png 600w,
/static/docker-33be3272d9088179f1e9cc1e6350cfb7-e55fd.png 1009w&quot;
        sizes=&quot;(max-width: 1009px) 100vw, 1009px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;从图中可以看出三个概念：容器（container），镜像（image），以及仓库（repository）。&lt;/p&gt;
&lt;h3&gt;Docker 镜像（image）&lt;/h3&gt;
&lt;p&gt;Docker 镜像是用于创建 Docker 容器的模板。操作系统分为内核和用户空间，对于 Linux 而言，内核启动后，会挂载 root 文件系统为其提供用户空间支持。而 Docker 镜像，就相当于是一个 root 文件系统，它将运行时所需要的所有东西(如设置，依赖包，系统工具等)打包进里面，是一个轻量级的、独立的、可执行的软件包。&lt;/p&gt;
&lt;h3&gt;Docker 容器&lt;/h3&gt;
&lt;p&gt;Docker 容器是独立运行的一个或一组应用。如果把 Docker 镜像比作是一个面向对象中的类，那么 Docker 容器就是实例。一个类可以 new 多个实例，同样一个 Docker 镜像也可以生成多个同时运行的 Docker 容器实例。&lt;/p&gt;
&lt;h3&gt;仓库（repository）&lt;/h3&gt;
&lt;p&gt;Docker 仓库用来保存镜像，可以理解为代码控制中的代码仓库。&lt;a href=&quot;https://user-gold-cdn.xitu.io/2018/3/11/1621161e281296d9&quot;&gt;Docker Hub&lt;/a&gt; 提供了庞大的镜像集合供使用。&lt;/p&gt;
&lt;h2&gt;使用 Docker&lt;/h2&gt;
&lt;h3&gt;安装 Docker&lt;/h3&gt;
&lt;p&gt;Docker 分为 社区版本（Community Edition）和 企业（Enterprise Edition) 两个版本，个人的话直接安装社区版本即可。&lt;a href=&quot;https://docs.docker.com/install/&quot;&gt;官方手册&lt;/a&gt; 中有不同系统的安装步骤，我使用的是Ubuntu，将手册中 &lt;a href=&quot;https://docs.docker.com/install/linux/docker-ce/ubuntu/#set-up-the-repository&quot;&gt;Ubuntu的安装&lt;/a&gt; 过程复制了下来。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-bash&quot;&gt;&lt;code&gt;&lt;span class=&quot;token comment&quot;&gt;# Update the apt package index:&lt;/span&gt;
$ &lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;apt-get&lt;/span&gt; update
&lt;span class=&quot;token comment&quot;&gt;# Install packages to allow apt to use a repository over HTTPS:&lt;/span&gt;
$ &lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;apt-get&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; \
    apt-transport-https \
    ca-certificates \
    curl \
    software-properties-common
&lt;span class=&quot;token comment&quot;&gt;# Add Docker’s official GPG key:&lt;/span&gt;
$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; apt-key add -
&lt;span class=&quot;token comment&quot;&gt;# set up the stable repository.&lt;/span&gt;
$ &lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; add-apt-repository \
    &lt;span class=&quot;token string&quot;&gt;&quot;deb [arch=amd64] https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu \
    &lt;span class=&quot;token variable&quot;&gt;&lt;span class=&quot;token variable&quot;&gt;$(&lt;/span&gt;lsb_release -cs&lt;span class=&quot;token variable&quot;&gt;)&lt;/span&gt;&lt;/span&gt; \
    stable&quot;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# Update the apt package index:&lt;/span&gt;
$ &lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;apt-get&lt;/span&gt; update
&lt;span class=&quot;token comment&quot;&gt;# Install the latest version of Docker CE&lt;/span&gt;
$ &lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;apt-get&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; docker-ce
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h3&gt;添加普通用户到group&lt;/h3&gt;
&lt;p&gt;避免每次操作 Docker 都需要 sudo 的权限。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-bash&quot;&gt;&lt;code&gt;&lt;span class=&quot;token comment&quot;&gt;# 将普通用户(我这里是qqqian)添加到用户组&lt;/span&gt;
$ &lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; gpasswd -a qqqian  docker
&lt;span class=&quot;token comment&quot;&gt;# 修改权限&lt;/span&gt;
$ &lt;span class=&quot;token function&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;chmod&lt;/span&gt; a+rw /var/run/docker.sock
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h3&gt;常用命令&lt;/h3&gt;
&lt;p&gt;太多太多了，下面贴出了很少很少的一部分命令。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;docker —help（docker 自带，所有命令一应俱全）&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.runoob.com/docker/docker-command-manual.html&quot;&gt;菜鸟教程 - docker 命令行大全&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-bash&quot;&gt;&lt;code&gt;&lt;span class=&quot;token comment&quot;&gt;# 添加镜像：Docker 官方提供的 image 文件，都放在library组里面，所以它的是默认组，hello-world是 image 文件的名字。&lt;/span&gt;
$ docker image pull library/hello-world
&lt;span class=&quot;token comment&quot;&gt;# 查找 ubuntu镜像&lt;/span&gt;
$ docker search ubuntu
&lt;span class=&quot;token comment&quot;&gt;# 列出镜像&lt;/span&gt;
$ docker image &lt;span class=&quot;token function&quot;&gt;ls&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# 删除镜像 hello-world&lt;/span&gt;
$ docker image &lt;span class=&quot;token function&quot;&gt;rm&lt;/span&gt; hello-world
&lt;span class=&quot;token comment&quot;&gt;# 导入镜像:&lt;/span&gt;
$ docker &lt;span class=&quot;token function&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;OPTIONS&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;file&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;URL&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;- &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;REPOSITORY&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;:TAG&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# 启动 hello-world:  命令会从 image 文件，生成一个正在运行的容器实例。如果本地没有 hello-world 镜像，那么则会去 library 中拉取&lt;/span&gt;
$ docker run hello-world
&lt;span class=&quot;token comment&quot;&gt;# 启动容器：&lt;/span&gt;
$ docker container run hello-world
&lt;span class=&quot;token comment&quot;&gt;# 列出容器&lt;/span&gt;
$ docker &lt;span class=&quot;token function&quot;&gt;ps&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;# 进入运行的容器： -t 分配一个伪终端&lt;/span&gt;
$ docker &lt;span class=&quot;token function&quot;&gt;exec&lt;/span&gt; -t CONTAINER
&lt;span class=&quot;token comment&quot;&gt;# 将镜像名为 konwnsec 的 3000 端口映射到本机的 8080端口；并启动 Bash，保证用户可以使用 Shell；容器的 Shell 映射到当前的 Shell&lt;/span&gt;
docker container run -p 8080:3000 -it knownsec /bin/bash
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h3&gt;定制镜像 Dockerfile&lt;/h3&gt;
&lt;p&gt;定制镜像，其实上就是定制镜像的配置文件。Docker 会从 dockerfile 这个脚本中一步步读取其中包含的指令进行构建镜像。网上太多资料，参考下面几个链接。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.docker.com/reference/builder/&quot;&gt;Dockerfile reference&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.docker.com/articles/dockerfile_best-practices/&quot;&gt;Best practices for writing Dockerfiles&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https://yeasy.gitbooks.io/docker_practice/content/image/build.html&quot;&gt;使用 Dockerfile 定制镜像&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https://yeasy.gitbooks.io/docker_practice/content/image/dockerfile/&quot;&gt;Dockerfile 指令详解&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;http://seanlook.com/2014/11/17/dockerfile-introduction/&quot;&gt;常见 Dockerfile 指令&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;配置网络&lt;/h3&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.docker.com/network/&quot;&gt;Configure networking&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https://yeasy.gitbooks.io/docker_practice/content/advanced_network/&quot;&gt;高级网络配置&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;http://www.infoq.com/cn/articles/docker-network-and-pipework-open-source-explanation-practice&quot;&gt;Docker网络详解&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;安全&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://juejin.im/entry/577083fd5bbb5000596a1528&quot;&gt;Docker安全&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://yeasy.gitbooks.io/docker_practice/content/security/&quot;&gt;安全&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;数据管理&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://docs.docker.com/storage/#choose-the-right-type-of-mount&quot;&gt;Manage application data&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://yeasy.gitbooks.io/docker_practice/content/data_management/&quot;&gt;Docker 数据管理&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;总结&lt;/h2&gt;
&lt;p&gt;刚开始学习 Docker，很多东西了解得不深入不全面，只知道一点表象知识。Docker 的命令很多，Dockerfile 配置文件的命令也很多，所以需要经常使用才能牢记。高级网络配置，安全等暂时还不了解的知识希望在以后的路上慢慢补上来！&lt;/p&gt;</content:encoded></item><item><title><![CDATA[【译】基于 Cypress 测试 React 应用]]></title><description><![CDATA[原文链接： Testing React app with Cypress 作者： Adam Trzciński 两周(原文发布于2017/11/6)以前，Cypress 开源了并且适用于任何人。 Cypress…]]></description><link>https://knownsec-fed.com/2018-03-07-fan-yi-ji-yu-cypress-ce-shi-react-ying-yong/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-03-07-fan-yi-ji-yu-cypress-ce-shi-react-ying-yong/</guid><pubDate>Wed, 07 Mar 2018 08:41:36 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-d7343fcc2f16967864203ae4485571ab-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAQFA//EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAGyrnPS0KB//8QAGhAAAgMBAQAAAAAAAAAAAAAAAQIAAxIRE//aAAgBAQABBQIqCG86zjs00vJ0rNz/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAbEAACAgMBAAAAAAAAAAAAAAAAAQIyESExUf/aAAgBAQAGPwLGhRl5nhVFmLbLM//EABwQAQACAgMBAAAAAAAAAAAAAAEAETFRIWHR4f/aAAgBAQABPyFzQaaxEk2vJSZl64/Yi3bK3PdJ/9oADAMBAAIAAwAAABBc/wD/xAAVEQEBAAAAAAAAAAAAAAAAAAAREP/aAAgBAwEBPxAZ/8QAFREBAQAAAAAAAAAAAAAAAAAAEQD/2gAIAQIBAT8QSb//xAAbEAEAAwEBAQEAAAAAAAAAAAABABEhMWFRkf/aAAgBAQABPxChNrAr6ByKlVtoQfDsAgBdcafeQ91+uOJBAqvsRpdeuf/Z&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;【翻译】基于 Cypress 测试 React 应用&quot;
        title=&quot;&quot;
        src=&quot;/static/header-d7343fcc2f16967864203ae4485571ab-d6978.jpeg&quot;
        srcset=&quot;/static/header-d7343fcc2f16967864203ae4485571ab-527f0.jpeg 300w,
/static/header-d7343fcc2f16967864203ae4485571ab-9a7cd.jpeg 600w,
/static/header-d7343fcc2f16967864203ae4485571ab-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;原文链接：&lt;a href=&quot;https://blog.callstack.io/testing-react-app-with-cypress-246a7732ee63&quot;&gt;Testing React app with Cypress&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;作者：&lt;a href=&quot;https://twitter.com/adam_Trzc&quot;&gt;Adam Trzciński&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;两周(原文发布于2017/11/6)以前，Cypress 开源了并且适用于任何人。&lt;/p&gt;
&lt;p&gt;Cypress 是一个工具，它使得你的端对端测试写起来更快。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;对浏览器中运行的任何内容进行快速，简单和可靠的测试。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;让我们来试一试，并验证这是真的！&lt;/p&gt;
&lt;p&gt;我们将把 Cypress 与我们的项目之一—&lt;code&gt;Eedi&lt;/code&gt; 集成在一起。 &lt;code&gt;Eedi&lt;/code&gt; 是英国教师、学生及家长的绝佳教育平台。关键是，任何使用它的人，在浏览时都有愉快而流畅的体验，并且所有的功能都能按预期工作。&lt;/p&gt;
&lt;h2&gt;配置&lt;/h2&gt;
&lt;p&gt;在我们应用程序的根目录下，让我们添加 Cypress 作为 dev 依赖。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;$ yarn add --dev cypress&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;调整 &lt;code&gt;package.json&lt;/code&gt; 中的 “scripts”:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token string&quot;&gt;&quot;scripts&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
   &lt;span class=&quot;token string&quot;&gt;&quot;cypress:open&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;cypress open&quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;就像正常开发一样，在本地运行服务，然后在新的终端窗口中打开 Cypress:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;$ yarn run cypress:open&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/one-9808590923b1b9e5f35147df7f15e7be-93f87.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1147px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 64.25457715780297%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAAAvUlEQVQoz+2Ryw6CMBBF+7fAQig+qBj1n5QUBV3QypZIAfkUSS0PB01cGDew9uZkctPJySyKyMyeExdjgrED2FMCGIalaRPdMDXN7ItuWnjxXgEOWZPlZuVu0W5PPY9SejgGYRCeGbtEEYfJeMxY3M9XgccPnMd+eKJ+gKpK3iupVNMNzEPVSCnVtl3bZ5gMYi93o/KXR8hSSvilZmBAARFBG3e5rmuUJFeR5mmafZFleVGUxa0U2Y+tEDmIT17EzEGk+E/vAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;one&quot;
        title=&quot;&quot;
        src=&quot;/static/one-9808590923b1b9e5f35147df7f15e7be-93f87.png&quot;
        srcset=&quot;/static/one-9808590923b1b9e5f35147df7f15e7be-1acea.png 300w,
/static/one-9808590923b1b9e5f35147df7f15e7be-0e8cc.png 600w,
/static/one-9808590923b1b9e5f35147df7f15e7be-93f87.png 1147w&quot;
        sizes=&quot;(max-width: 1147px) 100vw, 1147px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;过了一会儿，Cypress 应该打开了，我们应该看到一个窗口弹出。&lt;/p&gt;
&lt;p&gt;在这里，我们可以访问我们所有的测试，甚至开箱即用。&lt;/p&gt;
&lt;p&gt;Cypress 已创建新的文件夹&lt;code&gt;cypress&lt;/code&gt; 与子文件夹 &lt;code&gt;fixtures&lt;/code&gt;, &lt;code&gt;integration&lt;/code&gt;和&lt;code&gt;support&lt;/code&gt;。它还添加了一个空配置文件&lt;code&gt;cypress.json&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;由于我们经常访问我们的根路径，因此将它抽象为配置文件是一种很好的做法。打开&lt;code&gt;cypress.json&lt;/code&gt;文件，并添加一个带有键&lt;code&gt;baseUrl&lt;/code&gt;和 url 的新条目作为值:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token string&quot;&gt;&quot;baseUrl&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;http://localhost:3000&quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;在&lt;code&gt;example_spec.js&lt;/code&gt;文件中，我们可以看到’Kitchen Sink Tests’，当我们想要浏览一些常见的测试场景时可以派上用场。但是让我们现在写我们自己的测试。&lt;/p&gt;
&lt;h2&gt;测试登录&lt;/h2&gt;
&lt;p&gt;登录是任何应用程序最重要的功能之一。如果做得不好，用户将无法看到我们其它的工作，并且再做其他事情就没有任何意义。&lt;/p&gt;
&lt;p&gt;创建一个新文件&lt;code&gt;login_spec.js&lt;/code&gt;。在这里，我们将测试我们关于登录的所有逻辑。&lt;/p&gt;
&lt;p&gt;让我们写下我们的第一个测试，让我们来检查一下 happy path 是否如预期一样工作：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token function&quot;&gt;describe&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Log In&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;it&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;succesfully performs login action&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 访问 &apos;baseUrl&apos;&lt;/span&gt;
    cy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;visit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;/&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 断言我们是否处于好的位置 - 搜索&apos;smarter world&apos;&lt;/span&gt;
    cy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;contains&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;smarter world&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 搜索带有 &apos;Teachers&apos; 的div, 并点击它&lt;/span&gt;
    cy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;a[data-testid=&quot;main-link-teachers&quot;]&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;click&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 检查url是否改变&lt;/span&gt;
    cy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;should&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;includes&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;teachers&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    cy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;contains&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;more time to teach&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 找到Login按钮并点击它&lt;/span&gt;
    cy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;button[data-testid=&quot;menu-button-login&quot;]&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;click&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 检查url是否改变&lt;/span&gt;
    cy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;should&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;includes&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;/login&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 提交输入表单并点击提交按钮&lt;/span&gt;
    cy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;input[data-testid=&quot;login-form-username&quot;]&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;test@email.com&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    cy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;input[data-testid=&quot;login-form-password&quot;]&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;password&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    cy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;button[data-testid=&quot;login-form-submit&quot;]&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;click&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 验证是否被重定向&lt;/span&gt;
    cy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; timeout&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3000&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;should&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;includes&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;/c/&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;现在，请转到 Cypress 应用程序并选择我们刚刚创建的测试。它应该在一个文件中运行所有的测试，我们可以看到它们的表现如何：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/two-16287261e66e2b1c8ecbc30283ebc238.gif&quot; alt=&quot;two&quot;&gt;&lt;/p&gt;
&lt;p&gt;在测试运行器的左侧窗格中，我们可以看到 Cypress 执行的所有操作，查找到的元素以及浏览器重定向的元素。我们还可以使用漂亮的时间旅行功能，并检查我们测试的每一步。&lt;/p&gt;
&lt;p&gt;让我们停下来！修改测试的第12行：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;cy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;contains&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Log In&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;click&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;&lt;img src=&quot;/three-40cd3a8174ad86ccd75ba4978d6270be.gif&quot; alt=&quot;three&quot;&gt;&lt;/p&gt;
&lt;p&gt;它失败了。这很好，我们已经确定 happy path 确实很 happy。Cypress 为我们提供了详细的堆栈跟踪 — 发生了什么问题以及在哪里发生的问题。&lt;/p&gt;
&lt;p&gt;添加更多的用例:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;不成功的登录操作应该会产生错误消息&lt;/li&gt;
&lt;li&gt;未经授权的用户应该无法访问受限制的网址&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token function&quot;&gt;describe&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Log In&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;it&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;succesfully performs login action&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;it&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;displays error message when login fails&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 直接转到登录路径&lt;/span&gt;
    cy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;visit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;/login&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 尝试使用不正确的凭证登录&lt;/span&gt;
    cy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;input[data-testid=&quot;login-form-username&quot;]&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;test@email.com&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    cy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;input[data-testid=&quot;login-form-password&quot;]&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;fail_password&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    cy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;button[data-testid=&quot;login-form-submit&quot;]&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;click&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 应该出现错误信息&lt;/span&gt;
    cy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;contains&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Something went wrong&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;it&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;redirects unauthorized users&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 转到受保护的路径&lt;/span&gt;
    cy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;visit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;/c&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 应该重定向到登录页面&lt;/span&gt;
    cy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;should&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;contains&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;/login&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;我们保存测试文件之后，Cypress应该重新运行所有的测试：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/four-f844f2b4fc8de8453cd52d56ea490fb4.gif&quot; alt=&quot;four&quot;&gt;&lt;/p&gt;
&lt;h2&gt;测试注销&lt;/h2&gt;
&lt;p&gt;下一个要覆盖的功能是注销操作。我们希望确定该用户可以正确地从我们的应用程序注销。听起来很简单，对吧？&lt;/p&gt;
&lt;p&gt;但是，让我们再考虑一下…为了注销，我们需要先登录，对吧？我们是否应该重用先前测试的代码，然后再添加更多逻辑？听起来很傻，我们是开发者，我们可以做得更好！&lt;/p&gt;
&lt;p&gt;Cypress 提供了另一个便利的功能 — 命令。它允许我们创建可以在任何测试中重用的自定义操作。而且由于大多数场景应该为登录用户编写，因此此操作是自定义命令的完美候选。&lt;/p&gt;
&lt;p&gt;打开位于&lt;code&gt;support&lt;/code&gt;文件夹中的&lt;code&gt;commands.js&lt;/code&gt;文件。 Cypress 为我们提供了一些示例，取消注释即可使用！&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token comment&quot;&gt;// -- This is a parent command --&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// Cypress.Commands.add(&quot;login&quot;, (email, password) =&gt; { ... })&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;//&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;使用我们的自定义行为来增强此登录命令，但首先让我们考虑一下我们想要做什么。&lt;/p&gt;
&lt;p&gt;我们已经测试了登录，不是吗？所以，我们接下来要写的每一个测试都是重复相同的步骤，是没有意义的。我们甚至可以阅读&lt;a href=&quot;https://docs.cypress.io/guides/getting-started/testing-your-app.html#Logging-In&quot;&gt;文档&lt;/a&gt;：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;完全测试登录流程 - 但只有一次！&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;同样的：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;在每次测试之前，请勿使用您的用户界面登录。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;那我们能做什么呢？&lt;/p&gt;
&lt;p&gt;我们可以使用&lt;code&gt;cy.request()&lt;/code&gt;直接向我们的后端服务请求登录，然后像往常一样继续。如下：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;Cypress&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Commands&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;login&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;email&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; password&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// 向后端发出POST请求&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// 我们正在使用GraphQL，因此我们正在通过转变:&lt;/span&gt;
  cy
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;request&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      url&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;http://localhost:4000/graphql&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      method&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;POST&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      body&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        query&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
          &lt;span class=&quot;token string&quot;&gt;&apos;mutation login($email: String!, $password: String!) {loginUser(email: $email, password: $password)}&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        variables&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; email&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; password &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;resp &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// 断言来自服务器的响应&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;expect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;resp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;status&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;to&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;eq&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;expect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;resp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;body&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;to&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;have&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;property&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;data&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// 我们所有的private路径都会检查存在redux store上的auth token,所以让我们把它传递到那里&lt;/span&gt;
      window&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;localStorage&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setItem&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&apos;reduxPersist:user&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        JSON&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;stringify&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; refreshToken&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; resp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;body&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;loginUser &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// 到仪表盘&lt;/span&gt;
      cy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;visit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;/c&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;现在，在每个测试中，我们可以调用&lt;code&gt;cy.login（&apos;username&apos;，&apos;password&apos;）&lt;/code&gt;，并且它应该执行登录操作而不需要使用UI。&lt;/p&gt;
&lt;p&gt;现在我们准备测试注销操作，创建&lt;code&gt;logout_spec.js&lt;/code&gt;并添加一些断言：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; baseUrlMatcher &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RegExp&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;localhost:3000/$&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token function&quot;&gt;describe&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Log out user properly&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// 在每次测试前登录:&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;beforeEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    cy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;login&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;test@email.com&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;password&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;it&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;can select dropdown and perform logout action&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 检查我们是否登录:&lt;/span&gt;
    cy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;should&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;contains&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;/c/&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    cy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;div[data-testid=&quot;main-menu-settings&quot;]&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;click&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    cy
      &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;.Popover-body ul li&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;first&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;click&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    cy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;should&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;match&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; baseUrlMatcher&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;it&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;/logout url should work as well&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    cy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;should&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;contains&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;/c/&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    cy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;visit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;/log-out&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    cy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;should&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;match&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; baseUrlMatcher&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;it&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;should clear auth token from local storage&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    cy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;should&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;contains&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;/c/&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    cy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;visit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;/logout&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    cy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;should&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;match&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; baseUrlMatcher&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; user &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; JSON&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;parse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;window&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;localStorage&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getItem&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;reduxPersist:user&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    assert&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isUndefined&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;user&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;token&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;refreshToken is undefined&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;观察它们失败：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/five-ae7b3cf4dc7ee6dcf728982cda4f057b.gif&quot; alt=&quot;five&quot;&gt;&lt;/p&gt;
&lt;p&gt;然后修改第14行和第20行（将&lt;code&gt;first()&lt;/code&gt;更改为&lt;code&gt;last()&lt;/code&gt;，将&lt;code&gt;cy.visit(&apos;log-out&apos;)&lt;/code&gt;更改为&lt;code&gt;cy.visit(&apos;logout&apos;)&lt;/code&gt;并观察测试如何通过:&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/six-b76faf266822ed0723117fad901929b5.gif&quot; alt=&quot;six&quot;&gt;&lt;/p&gt;
&lt;h2&gt;TL;DR&lt;/h2&gt;
&lt;p&gt;总之，用 Cypress 写测试真的很有趣。&lt;/p&gt;
&lt;p&gt;正如所宣称的，配置几乎为零，编写断言很简单，感觉很自然，而且 GUI 非常棒！您可以进行时间旅行，调试所有步骤，并且因为它们都作为 Electron 应用程序启动，所以我们甚至可以访问开发者工具以了解每个动作发生了什么。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;网络已经进化，测试依旧会如此。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;让我们写一些测试吧，愿原力与你同在！&lt;/p&gt;</content:encoded></item><item><title><![CDATA[【译】如何找到完美的色彩搭配 - 介绍 ColorClaim]]></title><description><![CDATA[原地网址： How to find your perfect color pairings — Introducing ColorClaim 作者：Tobias van Schneider…]]></description><link>https://knownsec-fed.com/2018-03-05-fan-yi-ru-he-zhao-dao-wan-mei-de-se-cai-da-pei-jie-shao-colorclaim/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-03-05-fan-yi-ru-he-zhao-dao-wan-mei-de-se-cai-da-pei-jie-shao-colorclaim/</guid><pubDate>Mon, 05 Mar 2018 12:41:57 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-5cde8a3daf4d59e378749b07275a9925-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIDBAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAD/9oADAMBAAIQAxAAAAFpdSKDtHDX/8QAGhAAAgIDAAAAAAAAAAAAAAAAAQMCERIhM//aAAgBAQABBQKTIBzGikbTQzcBS+f/xAAVEQEBAAAAAAAAAAAAAAAAAAAQIf/aAAgBAwEBPwGH/8QAFhEAAwAAAAAAAAAAAAAAAAAAARAS/9oACAECAQE/AaK//8QAGxAAAgIDAQAAAAAAAAAAAAAAAAIRcRASISL/2gAIAQEABj8CfZZ6eUixaG5haP/EABoQAQADAQEBAAAAAAAAAAAAAAEAESExUaH/2gAIAQEAAT8hOFQ+MA83LUSlbjYpd+TQonwJ/9oADAMBAAIAAwAAABAkP//EABcRAAMBAAAAAAAAAAAAAAAAAAABITH/2gAIAQMBAT8QbqCw/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAERMf/aAAgBAgEBPxBR0Z//xAAbEAEBAQEBAAMAAAAAAAAAAAABEQAhQTFxwf/aAAgBAQABPxAibEgPfcuF2oLfEM5BIa/WflifYuidUlmIGEPy3//Z&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;【翻译】如何找到完美的色彩搭配 - 介绍 ColorClaim&quot;
        title=&quot;&quot;
        src=&quot;/static/header-5cde8a3daf4d59e378749b07275a9925-d6978.jpeg&quot;
        srcset=&quot;/static/header-5cde8a3daf4d59e378749b07275a9925-527f0.jpeg 300w,
/static/header-5cde8a3daf4d59e378749b07275a9925-9a7cd.jpeg 600w,
/static/header-5cde8a3daf4d59e378749b07275a9925-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;原地网址：&lt;a href=&quot;https://medium.com/@vanschneider/how-to-find-your-perfect-color-parings-introducing-colorclaim-d00254c65ebc&quot;&gt;How to find your perfect color pairings — Introducing ColorClaim&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;作者：Tobias van Schneider&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;由于许多人问我关于色彩的工作流程，所以我在这写了一篇的简短关于色彩搭配的文章。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;每当我开始一个新项目工作时，都会定义一个新的调色板。并且每次我创建新的颜色配对后，都会将它们保存到我的的 JPG 文件里。到现在已经建立了自己的色彩参考库。&lt;/p&gt;
&lt;p&gt;介绍： &lt;a href=&quot;http://www.vanschneider.com/colors&quot;&gt;ColorClaim&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/1-6fa539ec12b61a9771da6358b343b2de-75324.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 60.266666666666666%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIDBf/EABUBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAHWYVIFCo//xAAXEAEBAQEAAAAAAAAAAAAAAAABIRAx/9oACAEBAAEFAiDxLv8A/8QAGBEAAgMAAAAAAAAAAAAAAAAAAAECESH/2gAIAQMBAT8BctLR/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFhAAAwAAAAAAAAAAAAAAAAAAECAx/9oACAEBAAY/AhU//8QAGRABAQADAQAAAAAAAAAAAAAAAQAhMWFx/9oACAEBAAE/ITsuCezsJlLbOL//2gAMAwEAAgADAAAAEMQP/8QAGhEAAgIDAAAAAAAAAAAAAAAAAAERITGR8P/aAAgBAwEBPxCSw2PHbP/EABcRAQEBAQAAAAAAAAAAAAAAAAEAIVH/2gAIAQIBAT8QDIHt/8QAGxABAAMBAAMAAAAAAAAAAAAAAQARITFRcYH/2gAIAQEAAT8QIaa8i0FF+oocQPAq5qCrRZsSq77J/9k=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;1&quot;
        title=&quot;&quot;
        src=&quot;/static/1-6fa539ec12b61a9771da6358b343b2de-d6978.jpg&quot;
        srcset=&quot;/static/1-6fa539ec12b61a9771da6358b343b2de-527f0.jpg 300w,
/static/1-6fa539ec12b61a9771da6358b343b2de-9a7cd.jpg 600w,
/static/1-6fa539ec12b61a9771da6358b343b2de-d6978.jpg 1200w,
/static/1-6fa539ec12b61a9771da6358b343b2de-75324.jpg 1500w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;我不喜欢使用传统的调色板，所以就会在网上下载一些图片，吸取里面的颜色进行搭配。我认为色彩搭配时应多思考，多尝试着搭配。&lt;/p&gt;
&lt;p&gt;对于色彩理论，我不太关注，因为我认为那只是理论上的。&lt;/p&gt;
&lt;p&gt;当需要到新的颜色时，我主要是从摄影，自然，时尚和建筑中获得灵感。&lt;/p&gt;
&lt;p&gt;我最喜欢的博客之一是“ &lt;a href=&quot;http://whereiseefashion.tumblr.com&quot;&gt;WISF&lt;/a&gt; ”。用 Bianca 的话来解释它（原作者）：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;“我在那里看到的时尚是一个关于时尚和启发一切的时尚博客，如艺术，设计，自然，摄影等等。它是由不同因素相互关联的图片集合，例如颜色，形状，感觉，概念。“&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/2-8bfe714070f58f9239ededda45ff3163-4c612.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 68.14345991561181%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAECAwQF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAgAB/9oADAMBAAIQAxAAAAG95o4mc0j/AP/EABwQAAEEAwEAAAAAAAAAAAAAABEAAQIDEiIxM//aAAgBAQABBQIh5epkreX7Pmv/xAAWEQEBAQAAAAAAAAAAAAAAAAABEBH/2gAIAQMBAT8BTJ//xAAXEQADAQAAAAAAAAAAAAAAAAAAAREC/9oACAECAQE/AbUXR//EABwQAAICAgMAAAAAAAAAAAAAAAABESExMhBSsf/aAAgBAQAGPwJTjApT12K9EV1nj//EABwQAQADAAIDAAAAAAAAAAAAAAEAESExQWFxgf/aAAgBAQABPyHySuIqwj2cfIkorPSZiWxYckudE//aAAwDAQACAAMAAAAQCM//xAAZEQEAAgMAAAAAAAAAAAAAAAABACFRkdH/2gAIAQMBAT8QdXKwaOT/xAAXEQEBAQEAAAAAAAAAAAAAAAABABHw/9oACAECAQE/EDIl1rf/xAAeEAEAAgEEAwAAAAAAAAAAAAABESEAMUFhgVGR8f/aAAgBAQABPxAgQiBdIhbmvkJDBXQq6cAgC2i+lyLggJYHYL78ZRwPmj7mhW5Qc//Z&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;2&quot;
        title=&quot;&quot;
        src=&quot;/static/2-8bfe714070f58f9239ededda45ff3163-d6978.jpeg&quot;
        srcset=&quot;/static/2-8bfe714070f58f9239ededda45ff3163-527f0.jpeg 300w,
/static/2-8bfe714070f58f9239ededda45ff3163-9a7cd.jpeg 600w,
/static/2-8bfe714070f58f9239ededda45ff3163-d6978.jpeg 1200w,
/static/2-8bfe714070f58f9239ededda45ff3163-fee16.jpeg 1800w,
/static/2-8bfe714070f58f9239ededda45ff3163-4c612.jpeg 1896w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;这个博客里色彩搭配的原则主要是根据形状和颜色进行参考搭配。所以看完这些后，如果我想要搭配新的颜色时，就会根据一些摄影、艺术、自然等图片，创建一个新的调色板，并与其他颜色搭配使用。&lt;/p&gt;
&lt;p&gt;现在当我开始一个新项目时，就会直奔 ColorClaim（我自己配对的小颜色库），然后将一对图像复制到 Photoshop 文档中进行色彩搭配。&lt;/p&gt;
&lt;p&gt;正如下面的图片，ColorClaim 色彩搭配已经创建，可以作为一个独立的色彩调色板进行工作。其中我只是将两种到三种颜色（最多）结合起来，使用一种微妙的 BG 颜色，一种高光和一种高对比度颜色。这只是简单地创建一个颜色情绪板，了解颜色光谱以及颜色如何在更加明亮或黑暗的主题艺术方向上使用。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/3-abb71544c75a857a38a0374c46d842aa-11afe.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 62.33766233766234%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAADA0lEQVQoz42Ta0hTYRjHZxcILKMvZkRgEhRkWuaFQghSy0ookMovYZgZ9CHCFAqFIinzMp1TN0WZqbmbM91Fp7OdszPnLp6zczbnLS8pXgizvkRRbnNP79l0JPShF/48L7x//vzO8zyHw0HHbB0Pf9umSKjmNSYKG1rjefymxNp6UYJKg8famZl9nP88L4U9gYvBSJeR9DTocXIdM1AbmIFEotwW2zgo1fgd1tPY1h+WdKOoJvR07gOQKA+uFfNaoPD1VU5EVmJKHrddKNZFB5Nxwl7ldC2AcYjxIIFfRsZL0TMgV2jzWE9Da19aeRMO528+/6oSykvAMAY/yxup5BNZ3dGpJXDy+jPB34GVjPMTYGanG8mHmUd9uNnpsZGTIJFp7rGepcW1vaIObXXBi4ZHwjL+flOHugrnNadrLmYn3YrJknBCk+ODgQbCzqURId2td9t7MHDK+n3o7rUhQqlUnct6jkZG7d7yDzAzZxTkZL7YOnZ8WxPDcgIVG2K4TmYWVl8J3cuVIpgTSnwL/Hav2TkHnVK1nzAmNu4QKqF91rFsUmtah3cacAxalgZNDt4HndVPNz89GxIgNFBc+/girJXUu5eqWmBUqvUtlzd7LNQUSDc/GZ09hZV1kRadZeV7cQ0IzmX/7hR0gZma+KEftF1gDUaTY0egh0aa63DMwViHxo3CwCXu9VEqg3eEmQGJRHWf9aSdOhvG1i+yXvHTy4+BE57pib5UAJjBvmK2uSLYN2KICQkOhUZD0Vtd63qLy4eqDxt2ekZIRCjX5G61qMvIxI8S1MrtjELghGX8OhD3EERinQkAdm0GBowESzg6j1aFdiOxFYZMjNfOEkoDhP5eE3aeA/VVIe6H2GvFcOVu6ey3z6uH2Td5D7EjOByVdrjCSn4ERLqOE+xiUxudSsKt1Fqhtf19zpYPERzDCTrTQk0UoH4NTE3MRW+G7dxG2CSSRfHrROk1tU0p/Nrm1BqkNxWClNIKQXr+k6IjrGcQGwn51++GFt5PVlTW4Q/8A70C13pz3YBnAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;3&quot;
        title=&quot;&quot;
        src=&quot;/static/3-abb71544c75a857a38a0374c46d842aa-abe1c.png&quot;
        srcset=&quot;/static/3-abb71544c75a857a38a0374c46d842aa-10046.png 300w,
/static/3-abb71544c75a857a38a0374c46d842aa-3c4a3.png 600w,
/static/3-abb71544c75a857a38a0374c46d842aa-abe1c.png 1200w,
/static/3-abb71544c75a857a38a0374c46d842aa-11afe.png 1540w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;然后，将这些颜色，放在不同背景上，进行绘制，渐变，合并等。如果合适，我就会将它放入到我的工作的文档里。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;当工作中搭配色彩时&lt;/strong&gt;：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;颜色的搭配使用上必须适合该项目（色彩理论派上用场），风格保持一致。（艺术品，界面设计等）&lt;/li&gt;
&lt;li&gt;打开 ColorClaim 看看过去的颜色色板里是否有适合该项目的色彩搭配。（ColorClaim 就像我一直想要使用的“待办事项列表）。&lt;/li&gt;
&lt;li&gt;如果在 &lt;a href=&quot;http://www.vanschneider.com/colors&quot;&gt;ColorClaim&lt;/a&gt; 中找不到合适色彩配对，那就去创建新的配色。（通常的是我的 ColorClaim 库里都会有）。&lt;/li&gt;
&lt;li&gt;由于研究颜色是我主要从事品牌项目的工作，所以我比较偏向简约的风格。我搭配颜色时要么选择一种主要颜色、然后搭配黑色和白色，要么选择一种主要高光颜色、然后选择两种辅助颜色。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;我的配色过程比想象的要简单得多，希望您能够理解这个过程，同时也希望 &lt;a href=&quot;http://www.vanschneider.com/colors&quot;&gt;ColorClaim&lt;/a&gt; 对您有所帮助。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[如何使用Mac破解Wifi]]></title><description><![CDATA[无线网络认证原理 802.11无线网络常见的认证方式包括： 不启动安全 WEP WPA/WPA2-PSK WAP/WPA2 802.1x (radius认证) 本文主要讨论的是大家日常生活中用到的WPA-PSK认证方式的破解过程， 其中的关键是获取握手包， 4way…]]></description><link>https://knownsec-fed.com/2018-03-05-ru-he-shi-yong-mac-po-jie-wifi/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-03-05-ru-he-shi-yong-mac-po-jie-wifi/</guid><pubDate>Mon, 05 Mar 2018 03:56:30 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-49e7c5b37f51e2a12538a6f4fbef2e96-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAECAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB34WJGAv/xAAXEAEAAwAAAAAAAAAAAAAAAAABAAIg/9oACAEBAAEFApRUx//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABYQAAMAAAAAAAAAAAAAAAAAAAAgIf/aAAgBAQAGPwIq/wD/xAAYEAACAwAAAAAAAAAAAAAAAAAAIREgcf/aAAgBAQABPyEYDyK//9oADAMBAAIAAwAAABCcD//EABYRAQEBAAAAAAAAAAAAAAAAABEQIf/aAAgBAwEBPxA1n//EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAECAQE/EKf/xAAaEAEAAgMBAAAAAAAAAAAAAAABEUEAICEx/9oACAEBAAE/EFgXECTKnxXuv//Z&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;如何使用Mac破解Wifi&quot;
        title=&quot;&quot;
        src=&quot;/static/header-49e7c5b37f51e2a12538a6f4fbef2e96-d6978.jpeg&quot;
        srcset=&quot;/static/header-49e7c5b37f51e2a12538a6f4fbef2e96-527f0.jpeg 300w,
/static/header-49e7c5b37f51e2a12538a6f4fbef2e96-9a7cd.jpeg 600w,
/static/header-49e7c5b37f51e2a12538a6f4fbef2e96-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h1&gt;无线网络认证原理&lt;/h1&gt;
&lt;p&gt;802.11无线网络常见的认证方式包括：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;不启动安全&lt;/li&gt;
&lt;li&gt;WEP&lt;/li&gt;
&lt;li&gt;WPA/WPA2-PSK&lt;/li&gt;
&lt;li&gt;WAP/WPA2 802.1x (radius认证)&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;本文主要讨论的是大家日常生活中用到的WPA-PSK认证方式的破解过程， 其中的关键是获取握手包，&lt;/p&gt;
&lt;p&gt;4way-handshake：

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/4-way-handshake-af2eba35b70fcf45d780b28caa42faab-678bc.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 393px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 79.64376590330788%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAABYUlEQVQ4y42T0U6DQBBFF6xFRQERXKCmUq021miq0TdjfDDxzSfjP/j/P+BsPNts1yU6yQ0Lw9yZuTOrlFI7gqXgWrAQnKkfi9SwWV9DrI2rFYSdYCLIBJUXnAh6vu96vhxSLSgEpXUUZPgSvPA+4ce54FXwTBeaAgzRVHBPlYY8NmQzmKc4LgRHJIoD7ca0bH1btlVrd1Qzg/QU+JpFA7qOqXZtl4JzwQryE4jVP4ZiNd4g7Gm5p9XaETcVtAwroZP9QIImlPWY4JqzRtM3BnXLcJb4aob0yfuv8jVrYUQe8RyyEXEZO9iFhmiq2h7QKwpo1zK8mpUz71c+YaL+NkvaQWIG+Uj7c/dHPUBQgcJpzVY4ZlAdg2zdwEPBB9lK5zY8OCv1ROKGvb1hWIvQta28tYgdkVPvexTYkOAuZQTnnM3zAH1WnHOwx4V4d+SK/ApLJ8CiIEnKOXcSadpe3+Vvc90UQ1CCRhYAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;4-way-handshake&quot;
        title=&quot;&quot;
        src=&quot;/static/4-way-handshake-af2eba35b70fcf45d780b28caa42faab-678bc.png&quot;
        srcset=&quot;/static/4-way-handshake-af2eba35b70fcf45d780b28caa42faab-a49b3.png 300w,
/static/4-way-handshake-af2eba35b70fcf45d780b28caa42faab-678bc.png 393w&quot;
        sizes=&quot;(max-width: 393px) 100vw, 393px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    
4次握手就是认证器(AP)和请求者(SPA)之间的4次消息交换过程， 用一个伪随机函数PRF生成PTK.&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;PMK = pdkdf2_SHA1(passphrase，SSID，SSID length，4096)

PTK = PRF(PMK + ANonce + SNonce + AP_MAC + SPA_MAC)&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;step1: AP生成一个ANonce。 发送给请求者SPA。&lt;/p&gt;
&lt;p&gt;step2: SPA生成一个SNonce和利用2个Nonces生成PTK， 最后发送SNone和MIC作为PMK的验证。&lt;/p&gt;
&lt;p&gt;step3: AP生成PTK， 验证MIC信息，验证成功后发送GTK， MIC， RSC信息给SPA。&lt;/p&gt;
&lt;p&gt;step4: SPA验证MIC， 安装密钥， 发送消息给AP。&lt;/p&gt;
&lt;h1&gt;无线网络破解原理&lt;/h1&gt;
&lt;p&gt;利用网络攻击让SPA和AP断开， 随后SPA会自动尝试连接AP， 在这个重新连接的过程中，数据通信就产生了， 利用工具或者脚本捕获4次握手过程，生成一个包含了4次握手的cap包， 然后利用字典进行暴力破解。&lt;/p&gt;
&lt;h1&gt;Mac下无线网络破解&lt;/h1&gt;
&lt;p&gt;使用mac进行无线网络破解主要需要解决的是Aircrack-ng的安装以及握手包的获取。&lt;/p&gt;
&lt;h3&gt;安装Aircrack-ng&lt;/h3&gt;
&lt;p&gt;方式一： 使用MAcport进行安装，sudo port install aircrack-ng&lt;/p&gt;
&lt;p&gt;方式二： 使用HomeBrew进行安装， brew install aircrack-ng&lt;/p&gt;
&lt;h3&gt;握手包获取&lt;/h3&gt;
&lt;p&gt;直接使用aircrack-ng会出现问题，提示wireless-tools找不到， 因为airmon-ng依赖于wireless-tools， 而wireless-tool在Mac下编译有问题。其实Mac自带一个airport工具， 可以方便的扫描，监听模式下监听。&lt;/p&gt;
&lt;h2&gt;操作步骤：&lt;/h2&gt;
&lt;p&gt;step1: ifconfig 查看网卡名称&lt;/p&gt;
&lt;p&gt;step2: airport en0 scan 扫描网络&lt;/p&gt;
&lt;p&gt;step3: sudo airport en0 sniff 6 监听模式监听信道6， 等待握手包的捕获，一段时间后使用control+C结束。 文件位于/tmp/airportSiffXXX.cap&lt;/p&gt;
&lt;p&gt;step4: aircarck-ng -w ~/wordlist.txt /tmp/airportSniffXXX.cap 使用密码字典进行暴力破解。&lt;/p&gt;
&lt;h1&gt;总结&lt;/h1&gt;
&lt;p&gt;由于多数用户缺乏相关安全意识， 仅使用手机号码，生日以及简单的数字作为WPA-PSK的密码，密码字典可以针对这类密码进行快速的破解。&lt;/p&gt;
&lt;p&gt;最后我们再做个简单计算让大家了解提高密码复杂度的必要性， 按照现在主流单机环境配置，维持100~~300k/s(k/s指的是破解时每秒调用的key数量)的破解速率，要把一个以小写字母和数字组合的5位WPA密码破开大概需要2-7天。这还只是5位数WPA密码，若是采用WPA密码为纯小写字母且长度在10位数以上，则最快需要时间是14921年! 如果在加上特殊符号， 暴力破解将彻底失去意义。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[程序员偷懒指南——用chrome插件实现前端资讯推送]]></title><description><![CDATA[最近接触了一下 chrome 扩展，也就是我们常说的插件，发现这确实是一个好东西，使用简单的 HTML，CSS 和 JavaScript 就可为浏览器新增我们想要的功能，并且，使用 chrome 扩展开发，不用担心跨域等消息传递问题，还有讨厌的兼容性问题，结合操作用户页面 dom…]]></description><link>https://knownsec-fed.com/2018-03-05-yi-ge-chrome-kuo-zhan-jiu-zhe-yang-dan-sheng-liao/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-03-05-yi-ge-chrome-kuo-zhan-jiu-zhe-yang-dan-sheng-liao/</guid><pubDate>Mon, 05 Mar 2018 02:42:42 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-474dca67cb6167d917c8b72ae98b8aea-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAwAE/8QAFQEBAQAAAAAAAAAAAAAAAAAAAgP/2gAMAwEAAhADEAAAAXTO9IHDMf/EABkQAAMBAQEAAAAAAAAAAAAAAAABAhEiMf/aAAgBAQABBQJPSeh0yTWP3//EABgRAAMBAQAAAAAAAAAAAAAAAAACIQES/9oACAEDAQE/AVaU60//xAAYEQADAQEAAAAAAAAAAAAAAAAAASECEf/aAAgBAgEBPwHSsOI//8QAHBAAAQMFAAAAAAAAAAAAAAAAIQABEAIRMUFh/9oACAEBAAY/AsHTJ7js1mP/xAAcEAACAgIDAAAAAAAAAAAAAAABEQAhMYEQQWH/2gAIAQEAAT8hKDsng4JAMRdFHsg6nWOuR3xf/9oADAMBAAIAAwAAABC47//EABgRAQADAQAAAAAAAAAAAAAAAAEAMVHw/9oACAEDAQE/EEVbthrP/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAERYf/aAAgBAgEBPxBrSoYH/8QAHBABAAMAAgMAAAAAAAAAAAAAAQARITFBgZGh/9oACAEBAAE/EGAdSp9h3EwCCVR8K2Briy9XEghREp8xpxrMU9zkn//Z&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;程序员偷懒指南-- 用chrome插件实现前端资讯推送&quot;
        title=&quot;&quot;
        src=&quot;/static/header-474dca67cb6167d917c8b72ae98b8aea-d6978.jpeg&quot;
        srcset=&quot;/static/header-474dca67cb6167d917c8b72ae98b8aea-527f0.jpeg 300w,
/static/header-474dca67cb6167d917c8b72ae98b8aea-9a7cd.jpeg 600w,
/static/header-474dca67cb6167d917c8b72ae98b8aea-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;最近接触了一下 chrome 扩展，也就是我们常说的插件，发现这确实是一个好东西，使用简单的 HTML，CSS 和 JavaScript 就可为浏览器新增我们想要的功能，并且，使用 chrome 扩展开发，不用担心跨域等消息传递问题，还有讨厌的兼容性问题，结合操作用户页面 dom，开发的开心度可谓是可观的。下面，我们就一起通过一个实例来看看 chrome 扩展开发。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;这个实例不是很复杂，是我之前一直想做的，就是 &lt;strong&gt;通过 chrome 扩展来同步每日阅读的不错的前端资讯&lt;/strong&gt;。相信大家也有清晰地感受到，前端社区在诸多社区中可谓最为活跃的，所以，坚持筛选学习的内容是比较考验耐心，也是尤为重要的，相对微信公众号，twitter 和 newsletter 等方式，个人感觉 chrome 扩展也不失为一种友好的方式。&lt;/p&gt;
&lt;h2&gt;构思&lt;/h2&gt;
&lt;p&gt;首先，我们得准备一个仓库来储存我们每日收集的资讯，最好大家也能贡献，这个好像不用想，没有比 GitHub 更为合适了的吧，并且 GitHub 提供的 REST API 应该可以帮助我们解决一些额外的问题，查了查果然：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;POST /markdown&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;可以将 text 渲染成 Markdown 文档，测试一下：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
	&lt;span class=&quot;token string&quot;&gt;&apos;https://api.github.com/markdown&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
	&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
   	method&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;POST&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
		body&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; JSON&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;stringify&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
	  	text&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&gt; # hello fengshangwuqi&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;res &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;返回：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-html&quot;&gt;&lt;code&gt;&quot;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;blockquote&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;h1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;a&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;user-content-hello-fengshangwuqi&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;anchor&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;href&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;#hello-fengshangwuqi&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;aria-hidden&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;true&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;span&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;aria-hidden&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;true&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;octicon octicon-link&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;span&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;a&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;hello fengshangwuqi&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;h1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;blockquote&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&quot;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;很好，这样，我们就可以将获取到的 text 数据通过该 API 转化为 markdown，然后操作 dom，添加进点击扩展图标弹出的小窗口的 document 中，再用 CSS 修改下样式，增加一些切换资讯等功能，初始版本应该算完成了吧。现在想想感觉较简单，不过，在实际演练的过程中，应该会发散一些问题。&lt;/p&gt;
&lt;p&gt;于是，立即创建了仓库 &lt;a href=&quot;https://github.com/FengShangWuQi/Daily-Front-End-News&quot;&gt;Daily-Front-End-News&lt;/a&gt;。&lt;/p&gt;
&lt;h2&gt;准备&lt;/h2&gt;
&lt;h3&gt;书写配置文件 manifest.json&lt;/h3&gt;
&lt;p&gt;先从 &lt;a href=&quot;https://crxdoc-zh.appspot.com/extensions/getstarted&quot;&gt;chrome 开发文档&lt;/a&gt; 复制配置模板：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-json&quot;&gt;&lt;code&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;manifest_version&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;

  &lt;span class=&quot;token property&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;One-click Kittens&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;description&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;This extension demonstrates a browser action with kittens.&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;version&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;1.0&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;

  &lt;span class=&quot;token property&quot;&gt;&quot;permissions&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&quot;https://secure.flickr.com/&quot;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;browser_action&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;default_icon&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;icon.png&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;default_popup&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;popup.html&quot;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;name&lt;/strong&gt; 和 &lt;strong&gt;version&lt;/strong&gt; 是必须的；&lt;/li&gt;
&lt;li&gt;Chrome 应用的开发者当前必须指定 &lt;strong&gt;‘manifest_version’: 2&lt;/strong&gt;；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;permissions&lt;/strong&gt; 声明需要申请的权限，比如访问浏览器选项卡（tabs）、浏览器通知（notifications）等，可以根据需要添加，目前，我们的实例主要是从 GitHub 获取数据并展示数据，暂时不需要申请什么 permissions；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;browser_action&lt;/strong&gt; 指定扩展的图标放在 Chrome 工具栏中，它定义了扩展图标文件位置（default&lt;em&gt;icon）、悬浮提示（default&lt;/em&gt;title）和点击扩展图标所显示的页面位置（default_popup）；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;background&lt;/strong&gt; 是一个长时间运行的脚本，在扩展的整个生命周期都存在，用于管理一些任务和状态；&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;options_page&lt;/strong&gt; 属性定义了扩展的设置页面，配置后在扩展图标点击右键可以看到选项 ，点击即打开指定页面;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;content_scripts&lt;/strong&gt; 则是直接注入页面的脚本。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;我们要从 GitHub 获取数据，并在 popup.html 中展示出来，需要申请 &lt;strong&gt;webRequest&lt;/strong&gt; 权限，用于点击图标弹出的窗口和背景页之间的数据传递，并添加需要的 background 和 popup 脚本，其中，background 脚本在配置文件中添加，而 popup 脚本通过 &lt;code&gt;&amp;#x3C;script&gt;&lt;/code&gt; 标签在 popup.html 引入。&lt;/p&gt;
&lt;h3&gt;消息传递&lt;/h3&gt;
&lt;p&gt;当我们点击图标，打开 popup.html 时，popup 脚本会去从 &lt;strong&gt;背景页&lt;/strong&gt; 获取需要的数据，这里就涉及到内容脚本与扩展其余部分之间的通信。chrome 扩展的 &lt;a href=&quot;https://crxdoc-zh.appspot.com/apps/messaging&quot;&gt;数据传递&lt;/a&gt; 方式有多种，比如 &lt;strong&gt;简单的一次性请求&lt;/strong&gt;，&lt;strong&gt;长时间的连接&lt;/strong&gt;，&lt;strong&gt;跨扩展程序消息传递&lt;/strong&gt; 等，目前我们用到的应该只有一次性请求。&lt;/p&gt;
&lt;p&gt;一次性请求即使用简单的 &lt;a href=&quot;https://crxdoc-zh.appspot.com/apps/runtime#method-sendMessage&quot;&gt;runtime.sendMessage&lt;/a&gt; 方法，向扩展的另一部分发送消息，并且它提供可选的 callback 处理回应。如下，一条消息就在 popup 发送出去了：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;chrome&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;runtime&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;sendMessage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    action&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;getNew&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  res &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;res&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;在背景页，我们使用 &lt;a href=&quot;https://crxdoc-zh.appspot.com/apps/runtime#event-onMessage&quot;&gt;runtime.onMessage&lt;/a&gt; 事件监听器来处理消息。如下，我们可以回应来自 popup 的 getNew 请求：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;handleMessage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;message&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; sender&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; sendResponse&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;message&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;action&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;getNew&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;sendResponse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getNew&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;sendResponse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

chrome&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;runtime&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;onMessage&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addListener&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;message&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; sender&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; sendResponse&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;handleMessage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;message&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; sender&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; sendResponse&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;其中，&lt;strong&gt;sendResponse()&lt;/strong&gt; 即背景页的回应，并且，某一次事件只有第一次调用 sendResponse() 有效，所有其他回应将被忽略，&lt;strong&gt;return true&lt;/strong&gt; 是用于处理我们的异步请求，如果删除，异步请求仍能正常发送，但返回给 popup 的数据将不再是请求得到的数据。&lt;/p&gt;
&lt;h2&gt;使用 REST API 处理数据&lt;/h2&gt;
&lt;p&gt;在上面，我们已经发现了一个不错的 API 可以帮助我们渲染 markdown，接下来我们只需专注地思考如何获取数据。&lt;/p&gt;
&lt;p&gt;当然，获取数据肯定不止一次 POST 请求那么简单，因为，实例若不支持查看之前的资讯，即比如切换到昨天的资讯，那这个实例意义也不大。首先，还是先查看一下 REST API 是怎么获取数据的。在 Repositories 的 Contents 目录下，我们发现有这样一个请求：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;GET /repos/:owner/:repo/contents/:path&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;如果这个 contents 是一个文件，它将返回下面这样的一个对象：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-json&quot;&gt;&lt;code&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;type&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;file&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;README.md&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;path&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;README.md&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  ...
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;而如果这个 contents 是一个目录，它将返回：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-json&quot;&gt;&lt;code&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;type&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;dir&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;fileName&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;path&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;folder/fileName&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    ...
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;哈哈，这下我们就可以放心大胆地在 GitHub 存放数据了。我们可以将我们每日的资讯都记录在 README 中，然后将之前资讯按照日期放在对应的目录下，最终目录结构像这样：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;history
├── 2018
│   ├── 03
│   │   └── 04
│   │   |   ├── README.md
│   │   └── 05
│   │       ├── README.md&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;然后如下获取最新资讯的 path：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; year &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; GITHUB&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getContent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;history&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; month &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; GITHUB&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getContent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`history/&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;year&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;year&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;length &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; day &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; GITHUB&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getContent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`history/&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;year&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;year&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;length &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;month&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;month&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;length &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; path &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;year&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;month&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;day&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;pop&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;path 得到了，接下来，就可轻松通过上面的 API 获取对应的 content，至此，通过 REST API 处理数据算是搞定了。下面是示例代码：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;API&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;url&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; owner&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; repo&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;url &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; url&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;owner &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; owner&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;repo &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; repo&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;/* github
	 * Render an arbitrary Markdown document
	 * */&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getMarkdown&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;text&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; res &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;url&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;/markdown`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      method&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;POST&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      body&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; JSON&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;stringify&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        text&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;res &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;/* github
	 * Get contents
	 * */&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getContent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;path&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; res &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;fetch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;url&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;/repos/&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;owner&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;repo&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;/contents/&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;path&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        method&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;GET&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;res &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;json &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; json&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;path &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; path&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;上面使用 class 对 API 做了一个封装，并非完全出于对代码的整洁，还有一个重要的原因是避免重名，虽然扩展支持根据域名加载不同 js 文件，但如果有隐藏域名的需求也说不准了。&lt;/p&gt;
&lt;h2&gt;打通 background 和 popup&lt;/h2&gt;
&lt;p&gt;接下来的问题主要是处理 popup 给 background 发送消息获取对应的数据，在上面的准备中，其实我们已经搞定的差不多了。&lt;/p&gt;
&lt;p&gt;思路相对也很清晰，首先，popup 发送消息获取 paths，即所有可以查看的资讯的路径，这个路径，相当于每条资讯的 title，上面我们已经知道如何获取最新资讯的 path 了，我们只需做一个简单的操作和判断，我们将最新资讯的 path 存储在 localStorage 中，如果 localStorage 中最新资讯的 path 不全等于实际最新资讯的 path，那么我们就执行请求获取实际最新资讯的 path。&lt;/p&gt;
&lt;p&gt;看似不使用 localStorage 感觉也没什么，实际上，是不得不使用 localStorage。GitHub REST API 有一个 &lt;a href=&quot;https://developer.github.com/v3/#rate-limiting&quot;&gt;Rate Limit&lt;/a&gt;，它限制了每小时你发送请求的次数，显然，不使用 localStorage 储存，结果将是比较尴尬的，你将在多次打开 popup 后，得到一个尴尬的提示：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-json&quot;&gt;&lt;code&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;token property&quot;&gt;&quot;message&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;API rate limit exceeded for xxx.xxx.xxx.xxx. (But here&apos;s the good news: Authenticated requests get a higher rate limit. Check out the documentation for more details.)&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
   &lt;span class=&quot;token property&quot;&gt;&quot;documentation_url&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;https://developer.github.com/v3/#rate-limiting&quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;紧接着是发送一个新的消息获取当前想要查看的资讯，消息回应的有资讯的 content，还有资讯的 path，资讯的 content 不用说，肯定是动态地创建 dom 添加到 popup 中，而 path 主要用于切换，之前我们得到了所有可查看资讯的路径，接下来，我们就可以结合 paths 和 path 决定是否可以向前或向后切换，切换核心代码如下：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;NewsCard&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function-variable function&quot;&gt;getCurrNew&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;path&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  chrome&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;runtime&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;sendMessage&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      action&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;getCurrNew&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      path&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    res &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; card &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;new-card&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

      card&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;innerHTML &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`&amp;lt;div id=&quot;path&quot;&gt;&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;path&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&amp;lt;/div&gt;
&amp;lt;div id=&quot;left-arrow&quot; class=&quot;card-arrow&quot;&gt;&amp;lt;&amp;lt;&amp;lt;&amp;lt;/div&gt;
&amp;lt;div id=&quot;right-arrow&quot; class=&quot;card-arrow&quot;&gt;&gt;&gt;&gt;&amp;lt;/div&gt;
&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;text&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

      NewsCard&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addListeners&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h2&gt;调试&lt;/h2&gt;
&lt;p&gt;popup 跟普通页面一样，右键检查，background 需要进入扩展程序页面，点击检查视图背景页。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/inspect-ba9b75079421fa6cbd667c459a53427c-87eaa.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 738px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 27.371273712737125%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsSAAALEgHS3X78AAAA4ElEQVQY04WPvUrEQBRG8852gq2PYafWWgqClYiFrKyBJJtZk0z+VpOMM5NxEYtjdiCyIIvFgVOd+90gtkeE3TGy2CBEiiwlXfeGHke01gx1jbHWuzHGs+9FIclz6b1tG4Ln+oSH+JRaKF4jSRY1tO+Woaqo7m7ZJDHGuYPBvu89O1dKETj7zWi+WC0KxEtJci9YXt7wdH5FuoimdVsf0Nr8RuboDjutt3sfBMZo1DAQhktk1ZNdP5KeXVDJkWat6Bs1Rc3BhXN4dh80k+RZzioSrJOSj63DfU6XnfkT+48fiPx0safZkPYAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;inspect&quot;
        title=&quot;&quot;
        src=&quot;/static/inspect-ba9b75079421fa6cbd667c459a53427c-87eaa.png&quot;
        srcset=&quot;/static/inspect-ba9b75079421fa6cbd667c459a53427c-78f28.png 300w,
/static/inspect-ba9b75079421fa6cbd667c459a53427c-c5fff.png 600w,
/static/inspect-ba9b75079421fa6cbd667c459a53427c-87eaa.png 738w&quot;
        sizes=&quot;(max-width: 738px) 100vw, 738px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h2&gt;总结&lt;/h2&gt;
&lt;p&gt;就这样，我们的 chrome 初始版本就没有什么阻塞项了，目前截图如下：&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/new-7a39364d0a5281cfd8a1b60392002c66-7fd71.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 615px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 77.39837398373983%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAACrklEQVQ4y6VTS08TURSeH+RKiAsjBk1cqUFCdKGJW7ea+EfcYIhiFBR1YRSIJPKKBowYDS1NB7BqC9POdDrtvN+dx+e5t61i3Gi8zZfvnnPuuXO+e06FM9M7YBidLvVB9oMSxh6XMf6kjIuzZVwgXKJ9zyfi/KyI0ftFjDzcxdl7BVy/NYUbN6dwbnILwsmnMk49UzD06ADDM4cYIpyYPcTEvIJrSyrGXymYWFBwebGJK4Srr5sYe9nA8HMVp+/uYOL2DEbubOHYCwPHJ4sQFkQF86KMjWaItw0P72Sf2MeK5GG55mGF4aDHzF6uulhrRFhcL2F9bgHvqzpW5S42JB9LdJcgFyuobe4BMQA3BxyClxGIwUB7JIT01z5PkEhVMpkf/XjGzwiBlsKshGjtW5DLbWgVG16zC/swRhQlCKIIfhAiCCOEcczZ80OEaUbx+GcsCChOtlCXatgVRf6dnP3SvPexvF/UkZXnDPlRD7cHvjSlCm16H3XbgFHy0Cm4aH9yoH120N52YR24VIEH13FgWzZHp92GaZrwXIpbFgyDcnUDLtkxKRCCwIeu6zzo2DaxyZP0TgeWafUSiZmPsU3nGLOcIAjQ7XZ/g1Ddr2Bt6Q1UWcX/Li5Z33MgrbZRX+2gvtJB66MDXaYqqUJN1WD2JTFpDknXWhqhxX2mYRLrvFrP86hJEV2oa/hW3UeYUPlZTANApYNxjDiJkGUZujF56HCapFwWS2TM3mwglS12VpBECZtzH2B/D5EYgF+jUSH4X+nKdkrJNCJhSBfSGIW9PZPGLk2SpO+n0fL9XoWBEUIt61B2NTS+KKgXm5AKChoFFbpk8eYMpJlMJnWYPQNjm5rI9qz7jH3Ph5DStMcZfZWJTUlC3gf/6+T/1BQu+ciM/rEGg/w3YIfZU/wA/5tSxmbEf3cAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;news&quot;
        title=&quot;&quot;
        src=&quot;/static/new-7a39364d0a5281cfd8a1b60392002c66-7fd71.png&quot;
        srcset=&quot;/static/new-7a39364d0a5281cfd8a1b60392002c66-3e88b.png 300w,
/static/new-7a39364d0a5281cfd8a1b60392002c66-5db1b.png 600w,
/static/new-7a39364d0a5281cfd8a1b60392002c66-7fd71.png 615w&quot;
        sizes=&quot;(max-width: 615px) 100vw, 615px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;该实例还存在很多 TODO 的内容：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;更换 icon；&lt;/li&gt;
&lt;li&gt;优化 UI；&lt;/li&gt;
&lt;li&gt;限制切换次数，优化储存；&lt;/li&gt;
&lt;li&gt;添加新内容，例如来源，作者等信息；&lt;/li&gt;
&lt;li&gt;添加新功能，例如查看全部等；&lt;/li&gt;
&lt;li&gt;发布；&lt;/li&gt;
&lt;li&gt;…&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;目前该扩展处于内测阶段，尚未发布，如果大伙中有人有兴趣，&lt;a href=&quot;https://github.com/FengShangWuQi/chrome-Daily-Front-End-news&quot;&gt;chrome-Daily-Front-End-news&lt;/a&gt; 仓库期待收到你的 PR，&lt;a href=&quot;https://github.com/FengShangWuQi/Daily-Front-End-News&quot;&gt;Daily-Front-End-News&lt;/a&gt; 同上。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[危险的 target="_blank" 与 “opener”]]></title><description><![CDATA[在网页中使用链接时，如果想要让浏览器自动在新的标签页打开指定的地址，通常的做法就是在  a  标签上添加  target等于"_blank"  属性。 然而，就是这个属性，为钓鱼攻击者带来了可乘之机。 起源 parent  与  opener 在说  opener…]]></description><link>https://knownsec-fed.com/2018-03-01-wei-xian-de-targetblank-yu-opener/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-03-01-wei-xian-de-targetblank-yu-opener/</guid><pubDate>Thu, 01 Mar 2018 15:43:42 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-b2d5797f97e9d99eadd2357194ee34da-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEBf/EABYBAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAAB1kUMwmLCv//EABsQAAIBBQAAAAAAAAAAAAAAAAECAAMQESEi/9oACAEBAAEFAnUZNNWnEQ7W3//EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAEDAQE/AYf/xAAXEQEBAQEAAAAAAAAAAAAAAAABABES/9oACAECAQE/ATG5L//EABoQAAEFAQAAAAAAAAAAAAAAAAEAAhAikTL/2gAIAQEABj8CFBio1cnYMf/EABkQAQADAQEAAAAAAAAAAAAAAAEAESExwf/aAAgBAQABPyFhWELXRW9qA/BRnawhgDZVcn//2gAMAwEAAgADAAAAEPzP/8QAFhEAAwAAAAAAAAAAAAAAAAAAAAER/9oACAEDAQE/EHDKf//EABcRAAMBAAAAAAAAAAAAAAAAAAABEWH/2gAIAQIBAT8QhrRij//EAB0QAAICAwADAAAAAAAAAAAAAAERACExQWFxkaH/2gAIAQEAAT8QYN1Zbd3qo6xTIssH4a7BL9w15iKUEaJh/OOAolAAHJ//2Q==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;危险的 target=&quot;_blank&quot; 与 “opener”&quot;
        title=&quot;&quot;
        src=&quot;/static/header-b2d5797f97e9d99eadd2357194ee34da-d6978.jpeg&quot;
        srcset=&quot;/static/header-b2d5797f97e9d99eadd2357194ee34da-527f0.jpeg 300w,
/static/header-b2d5797f97e9d99eadd2357194ee34da-9a7cd.jpeg 600w,
/static/header-b2d5797f97e9d99eadd2357194ee34da-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;在网页中使用链接时，如果想要让浏览器自动在新的标签页打开指定的地址，通常的做法就是在 &lt;code&gt;a&lt;/code&gt; 标签上添加 &lt;code&gt;target等于&quot;_blank&quot;&lt;/code&gt; 属性。&lt;/p&gt;
&lt;p&gt;然而，就是这个属性，为钓鱼攻击者带来了可乘之机。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1&gt;起源&lt;/h1&gt;
&lt;h2&gt;&lt;code&gt;parent&lt;/code&gt; 与 &lt;code&gt;opener&lt;/code&gt;&lt;/h2&gt;
&lt;p&gt;在说 &lt;code&gt;opener&lt;/code&gt; 之前，可以先聊聊 &lt;code&gt;&amp;#x3C;iframe&gt;&lt;/code&gt; 中的 &lt;code&gt;parent&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;我们知道，在 &lt;code&gt;&amp;#x3C;iframe&gt;&lt;/code&gt; 中提供了一个用于父子页面交互的对象，叫做 &lt;code&gt;window.parent&lt;/code&gt;，我们可以通过 &lt;code&gt;window.parent&lt;/code&gt; 对象来从框架中的页面访问父级页面的 &lt;code&gt;window&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;opener&lt;/code&gt; 与 &lt;code&gt;parent&lt;/code&gt; 一样，只不过是用于 &lt;code&gt;&amp;#x3C;a target=&quot;_blank&quot;&gt;&lt;/code&gt; 在新标签页打开的页面的。通过 &lt;code&gt;&amp;#x3C;a target=&quot;_blank&quot;&gt;&lt;/code&gt; 打开的页面，可以直接使用 &lt;code&gt;window.opener&lt;/code&gt; 来访问来源页面的 &lt;code&gt;window&lt;/code&gt; 对象。&lt;/p&gt;
&lt;h2&gt;同域与跨域&lt;/h2&gt;
&lt;p&gt;浏览器提供了完整的跨域保护，在域名相同时，&lt;code&gt;parent&lt;/code&gt; 对象和 &lt;code&gt;opener&lt;/code&gt; 对象实际上就直接是上一级的 &lt;code&gt;window&lt;/code&gt; 对象；而当域名不同时，&lt;code&gt;parent&lt;/code&gt; 和 &lt;code&gt;opener&lt;/code&gt; 则是经过包装的一个 &lt;code&gt;global&lt;/code&gt; 对象。这个 &lt;code&gt;global&lt;/code&gt; 对象仅提供非常有限的属性访问，并且在这仅有的几个属性中，大部分也都是不允许访问的（访问会直接抛出 &lt;code&gt;DOMException&lt;/code&gt;）。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/same-b0119f9d1839c8a2a30132fac8ccfed1-67abc.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 729px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 5.761316872427984%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsSAAALEgHS3X78AAAAOElEQVQI1zWKyQ2AQAzEaIfcoYH0X5VhkfKyx5rL3YkIMpOZobs5bbmuqpgZVfW3s+XOj/t5EBFe0P0e0WR93swAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;同域&quot;
        title=&quot;&quot;
        src=&quot;/static/same-b0119f9d1839c8a2a30132fac8ccfed1-67abc.png&quot;
        srcset=&quot;/static/same-b0119f9d1839c8a2a30132fac8ccfed1-942e0.png 300w,
/static/same-b0119f9d1839c8a2a30132fac8ccfed1-08b62.png 600w,
/static/same-b0119f9d1839c8a2a30132fac8ccfed1-67abc.png 729w&quot;
        sizes=&quot;(max-width: 729px) 100vw, 729px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/cross-c634dd4e086fcbb57b8fca08e8075337-67abc.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 729px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 5.761316872427984%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsSAAALEgHS3X78AAAANklEQVQI1z2IxwEAIAgDXQepLsD+W0XDw9eV5e6ICGQmunvIV1Uws++qOk3nY2/JR3/NfyAiuMzTHrheFbgtAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;跨域&quot;
        title=&quot;&quot;
        src=&quot;/static/cross-c634dd4e086fcbb57b8fca08e8075337-67abc.png&quot;
        srcset=&quot;/static/cross-c634dd4e086fcbb57b8fca08e8075337-942e0.png 300w,
/static/cross-c634dd4e086fcbb57b8fca08e8075337-08b62.png 600w,
/static/cross-c634dd4e086fcbb57b8fca08e8075337-67abc.png 729w&quot;
        sizes=&quot;(max-width: 729px) 100vw, 729px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;在 &lt;code&gt;&amp;#x3C;iframe&gt;&lt;/code&gt; 中，提供了一个 &lt;code&gt;sandbox&lt;/code&gt; 属性用于控制框架中的页面的权限，因此即使是同域，也可以控制 &lt;code&gt;&amp;#x3C;iframe&gt;&lt;/code&gt; 的安全性。&lt;/p&gt;
&lt;h1&gt;利用&lt;/h1&gt;
&lt;p&gt;如果，你的网站上有一个链接，使用了 &lt;code&gt;target=&quot;_blank&quot;&lt;/code&gt;，那么一旦用户点击这个链接并进入一个新的标签，新标签中的页面如果存在恶意代码，就可以将你的网站直接导航到一个虚假网站。此时，如果用户回到你的标签页，看到的就是被替换过的页面了。&lt;/p&gt;
&lt;h2&gt;详细步骤&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;在你的网站 &lt;code&gt;https://example.com&lt;/code&gt; 上存在一个链接：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-html&quot;&gt;&lt;code&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;a&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;href&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;https://an.evil.site&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;_blank&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;进入一个“邪恶”的网站&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;a&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;用户点击了这个链接，在新的标签页打开了这个网站。这个网站可以通过 HTTP Header 中的 &lt;code&gt;Referer&lt;/code&gt; 属性来判断用户的来源。&lt;/p&gt;
&lt;p&gt;并且，这个网站上包含着类似于这样的 JavaScript 代码：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; url &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;encodeURIComponent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;{{header.referer}}&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
window&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;opener&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;location&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;https://a.fake.site/?&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; url&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;此时，用户在继续浏览这个新的标签页，而原来的网站所在的标签页此时已经被导航到了 &lt;code&gt;https://a.fake.site/?https%3A%2F%2Fexample.com%2F&lt;/code&gt;。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;恶意网站 &lt;code&gt;https://a.fake.site&lt;/code&gt; 根据 Query String 来伪造一个足以欺骗用户的页面，并展示出来（期间还可以做一次跳转，使得浏览器的地址栏更具有迷惑性）。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;用户关闭 &lt;code&gt;https://an.evil.site&lt;/code&gt; 的标签页，回到原来的网站………………已经回不去了。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;
&lt;p&gt;上面的攻击步骤是在跨域的情况下的，在跨域情况下，&lt;code&gt;opener&lt;/code&gt; 对象和 &lt;code&gt;parent&lt;/code&gt; 一样，是受到限制的，仅提供非常有限的属性访问，并且在这仅有的几个属性中，大部分也都是不允许访问的（访问会直接抛出 &lt;code&gt;DOMException&lt;/code&gt;）。&lt;/p&gt;
&lt;p&gt;但是与 &lt;code&gt;parent&lt;/code&gt; 不同的是，&lt;strong&gt;在跨域的情况下，&lt;code&gt;opener&lt;/code&gt; 仍然可以调用 &lt;code&gt;location.replace&lt;/code&gt; 方法&lt;/strong&gt;而 &lt;code&gt;parent&lt;/code&gt; 则不可以。&lt;/p&gt;
&lt;p&gt;如果是在同域的情况下（比如一个网站上的某一个页面被植入了恶意代码），则情况要比上面严重得多。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1&gt;防御&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;&amp;#x3C;iframe&gt;&lt;/code&gt; 中有 &lt;code&gt;sandbox&lt;/code&gt; 属性，而链接，则可以使用下面的办法：&lt;/p&gt;
&lt;h2&gt;1. Referrer Policy 和 noreferrer&lt;/h2&gt;
&lt;p&gt;上面的攻击步骤中，用到了 HTTP Header 中的 &lt;code&gt;Referer&lt;/code&gt; 属性，实际上可以在 HTTP 的响应头中增加 &lt;code&gt;Referrer Policy&lt;/code&gt; 头来保证来源隐私安全。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Referrer Policy&lt;/code&gt; 需要修改后端代码来实现，而在前端，也可以使用 &lt;code&gt;&amp;#x3C;a&gt;&lt;/code&gt; 标签的 &lt;code&gt;rel&lt;/code&gt; 属性来指定 &lt;code&gt;rel=&quot;noreferrer&quot;&lt;/code&gt; 来保证来源隐私安全。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-html&quot;&gt;&lt;code&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;a&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;href&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;https://an.evil.site&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;_blank&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;rel&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;noreferrer&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;进入一个“邪恶”的网站&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;a&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;但是要注意的是：即使限制了 &lt;code&gt;referer&lt;/code&gt; 的传递，仍然不能阻止原标签被恶意跳转。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;2. noopener&lt;/h2&gt;
&lt;p&gt;为了安全，现代浏览器都支持在 &lt;code&gt;&amp;#x3C;a&gt;&lt;/code&gt; 标签的 &lt;code&gt;rel&lt;/code&gt; 属性中指定 &lt;code&gt;rel=&quot;noopener&quot;&lt;/code&gt;，这样，在打开的新标签页中，将无法再使用 &lt;code&gt;opener&lt;/code&gt; 对象了，它为设置为了 &lt;code&gt;null&lt;/code&gt;。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-html&quot;&gt;&lt;code&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;a&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;href&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;https://an.evil.site&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;_blank&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;rel&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;noopener&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;进入一个“邪恶”的网站&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;a&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h2&gt;3. JavaScript&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;noopener&lt;/code&gt; 属性看似是解决了所有问题，但是…浏览器的兼容性问题…&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/caniuse-93575c220af3d268563890501021a14f-c4b3c.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 67.84591194968553%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAA7EAAAOxAGVKw4bAAADHElEQVQ4y32S/U9bZRTH7z+2n32JkWwYN5IpdQNE1mHUTaMZ+BLDVoyGbUAFNrJhZAgi2dYBHULV0gLztrf0vfX2nb7c9t62G5svccnHp2UsMxJ/+OY55+Q5n/M9eR5JS8kUftsiG3eTS21SLwSo5f1P1cjvF4MH6kEphJ71CSnUi2GqpRhSMeUlp3ooJWUacD3rpSIuVTIKRs4noAF2tfCBeliONAfWC/5mXC36kfTAPJo8RUk061qUyk4YQ3VQLWyh57Yx0t7mkHJGDEp5KAsDWlqhkvaI00tJ1CppvzCwZ0IqiFUz6iaxhavcGzyLfOc6uW0HsQsfkfT/TDboJBtzkgg7SYk84XeiBl2kgz+hBn4hqqyJ2hapsJtEyIlkiP2NukpueICvP3yOAfsZ/NZPsQ63Y2ghDLHS/vrGjnC843sm3peyVxeSGtbLepScdZDRwVfpm+1kuet5XneZic8Mo0VclEVTY+UDlf53LukCWDFiZEctjJ5v5ePZLlZ6j9BhMyF3tVL0rIgmMTT5q3gs5Wlj5YmezfeAjUCPULh0gYnPW+mfE8DThzmxaMJjbhMO1wkNnCFjn8Yoh/fg/wdsBPVaAnn+In0Tx/hsppO7vYc5uXgCuecoWtSN710TqZuTAhhpOv0PsLHlPjByqZ/81SHGnBZe2uzE8k0Hy28/AQqHpfA6yvsdJBtA8Xjl/DaltPizGU8TVBJnRfxJLac061Lwk9MEXjjE0Jev0OIzc/6aibVTLZiW2gl0H2v+w+h7HeSXb1CNuKlu2Pldi7NbCFMTjh/mQ5RXf+BBwsujYhRJ7j/F5ouHsFiO0LJ2ks75dsxTbRy9fZyz117j3p0rLPQdZ+WdNmzdL/PdUA93o7f4cXGEjf4e7BtT9I63MuO4zKoyhxR3zOEb+IARazdd9l7MNjNvLHXzpu0tzq2ewzX9FbddkzgXRlhbGmNGnuSGe4xbq1bk6Yt8vz7OrOc6s64JoXGk3WqcxxUVR2yeL5RBvg1dwanexJWwUSsFeFRP8Leu8mctyV/VRPPuY13URPzH/WQz3q819A+t4JpnwGaxKAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;noopener 的兼容性&quot;
        title=&quot;&quot;
        src=&quot;/static/caniuse-93575c220af3d268563890501021a14f-abe1c.png&quot;
        srcset=&quot;/static/caniuse-93575c220af3d268563890501021a14f-10046.png 300w,
/static/caniuse-93575c220af3d268563890501021a14f-3c4a3.png 600w,
/static/caniuse-93575c220af3d268563890501021a14f-abe1c.png 1200w,
/static/caniuse-93575c220af3d268563890501021a14f-c4b3c.png 1272w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;可以看到，现在绝大多数浏览器都已经兼容了 &lt;code&gt;rel=&quot;noopener&quot;&lt;/code&gt; 属性了。但是，为了保护稍旧的“近代”浏览器或是很旧的“古代”浏览器甚至是“远古”浏览器，只有 &lt;code&gt;noopener&lt;/code&gt; 属性还是远远不够的。&lt;/p&gt;
&lt;p&gt;这时，就只能请出下面这段原生 JavaScript 来帮忙了。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript 1.8&quot;&gt;&lt;code&gt;&quot;use strict&quot;;
function openUrl(url) {
  var newTab = window.open();
  newTab.opener = null;
  newTab.location = url;
}&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h1&gt;推荐&lt;/h1&gt;
&lt;p&gt;首先，在网站中的链接上，如果使用了 &lt;code&gt;target=&quot;_blank&quot;&lt;/code&gt;，就要带上 &lt;code&gt;rel=&quot;noopener&quot;&lt;/code&gt;，并且建议带上 &lt;code&gt;rel=&quot;noreferrer&quot;&lt;/code&gt;。类似于这样：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-html&quot;&gt;&lt;code&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;a&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;href&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;https://an.evil.site&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;_blank&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;rel&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;noopener noreferrer&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;进入一个“邪恶”的网站&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;a&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;当然，在跳转到第三方网站的时候，为了 SEO 权重，还建议带上 &lt;code&gt;rel=&quot;nofollow&quot;&lt;/code&gt;，所以最终类似于这样：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-html&quot;&gt;&lt;code&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;a&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;href&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;https://an.evil.site&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;target&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;_blank&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;rel&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;noopener noreferrer nofollow&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;进入一个“邪恶”的网站&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;a&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h1&gt;性能&lt;/h1&gt;
&lt;p&gt;最后，再来说说性能问题。&lt;/p&gt;
&lt;p&gt;如果网站使用了 &lt;code&gt;&amp;#x3C;a target=&quot;_blank&quot;&gt;&lt;/code&gt;，那么新打开的标签页的性能将会影响到当前页面。此时如果新打开的页面中执行了一个非常庞大的 JavaScript 脚本，那么原始标签页也会受到影响，会出现卡顿的现象（当然不至于卡死）。&lt;/p&gt;
&lt;p&gt;而如果在链接中加入了 &lt;code&gt;noopener&lt;/code&gt;，则此时两个标签页将会互不干扰，使得原页面的性能不会受到新页面的影响。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Active Record 和 Data Mappers 模式简介]]></title><description><![CDATA[nodejs 开发 web 应用时，orm 框架如 mongoose，sequelize 等能够帮助我们快速的开发项目，但是当想要再去抽象数据库访问层的时候（如 J2EE 中的 DAO 层），发现很困难，本人一直困惑到底问题出现在哪里，直到有天接触了 typeorm…]]></description><link>https://knownsec-fed.com/2018-02-28-activerecord-he-datamappers-mo-shi-jian-jie/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-02-28-activerecord-he-datamappers-mo-shi-jian-jie/</guid><pubDate>Wed, 28 Feb 2018 07:38:46 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-65455b15c786b9e8aba91ba7050a53e9-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEAf/EABUBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAGFWzpSJCv/xAAZEAACAwEAAAAAAAAAAAAAAAAAAQIQEUH/2gAIAQEAAQUCaMqZ0//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABgQAAIDAAAAAAAAAAAAAAAAAAAyASAi/9oACAEBAAY/AoyKLT//xAAcEAEAAgEFAAAAAAAAAAAAAAABABExECFhcaH/2gAIAQEAAT8hRLJfIi82uZ2ptxq//9oADAMBAAIAAwAAABBrz//EABcRAAMBAAAAAAAAAAAAAAAAAAABETH/2gAIAQMBAT8QWih//8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQIBAT8QZ//EABoQAQACAwEAAAAAAAAAAAAAAAEAIRExQVH/2gAIAQEAAT8QRlhxYpRwvCMRwAAr1i0oXRFeoan/2Q==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;Active Record 和 Data Mappers 模式简介&quot;
        title=&quot;&quot;
        src=&quot;/static/header-65455b15c786b9e8aba91ba7050a53e9-d6978.jpeg&quot;
        srcset=&quot;/static/header-65455b15c786b9e8aba91ba7050a53e9-527f0.jpeg 300w,
/static/header-65455b15c786b9e8aba91ba7050a53e9-9a7cd.jpeg 600w,
/static/header-65455b15c786b9e8aba91ba7050a53e9-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;nodejs 开发 web 应用时，orm 框架如 mongoose，sequelize 等能够帮助我们快速的开发项目，但是当想要再去抽象数据库访问层的时候（如 J2EE 中的 DAO 层），发现很困难，本人一直困惑到底问题出现在哪里，直到有天接触了 typeorm，才揭开了问题的根源。&lt;/p&gt;
&lt;h2&gt;什么是 ORM&lt;/h2&gt;
&lt;p&gt;在深入之前，让我们看看 ORM 是什么。ORM 是一种使用面向对象编程语言在不兼容类型系统之间转换数据的编程技术。相当于创建里一个可以在编程语言中使用的 “虚拟对象数据库”。更简单的来说，让面向对象编程脱离了对手写 sql 的要求。当然 ORM 有这样或那样的问题，不再本篇讨论。&lt;/p&gt;
&lt;h2&gt;Active Record 和 Data Mappers 与 ORM 的关系&lt;/h2&gt;
&lt;p&gt;定义了 ORM 的功能，那么 ORM 有也不同的实现模式。Active Record 和 Data Mappers 是两种 ORM 最常见的实现模式。

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/orm-ebf05926127131367c2761dd4a8774b2-08176.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 819px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 113.18681318681318%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAACXBIWXMAAAsSAAALEgHS3X78AAAEc0lEQVQ4y42US2xUVRjHz8y905lpO53pPM7rvubO7ctSaGtLaUFsbIm6caXGhSEhbbEzLRSoEFHjypUbTYyGV4waQ0JCohuJRBALvqKmCxNjDEs3KtSEFZYp7fF/7nRqRUy8yS//c7/vO//zzblnDiH/8XyYz4W66jrxNddJQZtBsuo6UR1/LJH415xLlNYGqq+XqD1jRO0crrFrhKiSHwlzrtMHngVPgSkgw3jgR8La3buIGnzwb9cvGWv8nNGGzyiNXWY0/ilj8YvQBc4SJ3M58zfbyv9hW/Yvlmxdsi3rupSps4W8eQV1uh5z41fBNfCjEFHyFWdJbTyfzUbu/Qm/JuP33Q61ibl0S22LsMgXjMXIN4w1hEWfXCLcD0xeLMVC9QOjKWiPDGE8glivX4ppDaAUOVZqi9JSm9GzrT80XGTU+JbD8AJaJ4VwW4h0i7bl+bvBMNhuecVt0K3QATAI+i232AcCxEfwHtS7PseZuagNrzCaSFpOxnY8IV2Pw9SCOlAHk1zb8y2oBHoxK8w7noS6QFqY12q7uX2cJ27BNHQXnr/XLpZugxvgpgaTb0qN6y9hrLm5rkvIL63X/Q7uoO5N7fOxZTXUDZ9z/EAhuYF+L7Z1hHhB+wb31rmlNoVF3tU+70m5YTipk0jcga5AVzB5Zefu0ZChnQ+F+vDY+EpXz7YV4Xgr63XLegF0eCbcx02GFb2SjaSzCR3bTL3DOmGHiMHwA+3zkSVr54x7/hNIfgeugmt10MF92VSzABZheFyfyYu6w/P6YBdYg53OGM0taaMlkzZSaW40N5eiuXzRyOU9M5srGvlC0czlg2g6UzTSrdJsSqVQ22pkk41Rki/EJrhI/Cm4Sb7W5xBPj/CiVNgRJrqj5H88VLRHqHAjvihGCB8gC4zrg22Sn0U+NOyUZdOSB03HPhqRopIRvCIkr2Qln0lBU4LPpBHLgrwUMxlLzhkaT86aZFSRG5RELzMeIydYl76H/vE/zmefTHI22c3ohM/Z1BbO9u+A9jO6T+p3qLi34wm6K3FLNNYONuXTo5KX30dnpyxZOQ1OYfy24OV3QHg3QTvAacRPIH8CegaclKJ8lvHyePiVRWft2CAw61hHleAHFaM1BJ9TtVhlb82w8rhtzYdxzuocUI59XHFemdc1b4ihRN1wUopZtbXn2PLwjleqmge6nl/Gvil08XR4cYjKGDpc69lyrDq0/eXq4MBL1d7eF27b1iGF+RVd89YmwykpDqj2tsN3t3QfXYPxWlA6dFfHYPRMzbA8jo+h2oJDq12d82udHfNrHe1HqrY8jA7Ls7rmNTG0frB5eT++mOJ0WtFCDc7KSsewt+uGlXG9gI4zWmd61baOaMMDuuZ1sT1OVJYYzWzaRZd7uKw8wq2ZMQH0mCLWystcF7ewck5vflgjdb5Wg9ijyLkvZqj5kxQxcpk76e8L8YRqIVGVBGliqAiJhFd8I4leoIWmV1lf5hx1mtev/0hYk0BtBorYDwUzfp4HLdd5xvwLWoqF2PohksYAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;orm&quot;
        title=&quot;&quot;
        src=&quot;/static/orm-ebf05926127131367c2761dd4a8774b2-08176.png&quot;
        srcset=&quot;/static/orm-ebf05926127131367c2761dd4a8774b2-47a98.png 300w,
/static/orm-ebf05926127131367c2761dd4a8774b2-85419.png 600w,
/static/orm-ebf05926127131367c2761dd4a8774b2-08176.png 819w&quot;
        sizes=&quot;(max-width: 819px) 100vw, 819px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h2&gt;Active Recode 和 Data Mapper 不同&lt;/h2&gt;
&lt;h3&gt;Active Recode 模式&lt;/h3&gt;
&lt;p&gt;Active Record 模式最早源于 Ruby On Rails 框架，从此流行起来。nodejs 中常用的 mongoose 和 sequelize 就是采用此模式。该模式下，模型对象都会继承一个基类，这个基类就是 Active Record 的实现，里面包含里完整的数据库操作方法。&lt;/p&gt;
&lt;p&gt;典型的写法:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; user &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
user&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;knownsecer&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
user&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;可以看出，你的 POJO 和数据库的持久化方法都集成到一个复杂的对象上了，这里每个对象对应数据库中的一行。&lt;/p&gt;
&lt;h3&gt;Data Mapper 模式&lt;/h3&gt;
&lt;p&gt;Data Mapper 模式是 ORM 最早的一种实现方式，该模式完全把数据和数据库持久化方法分离开，所以你的对象完全是干净的对象。nodejs 中采用该模式的框架比如 typeorm。该模式会提供一个统一的实体对象管理器 &lt;strong&gt;EntityManager&lt;/strong&gt; 用来持久化操作。&lt;/p&gt;
&lt;p&gt;典型写法:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; user &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
user&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;knownsecer&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; entityManager &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; connection&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;manager&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
entityManager&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;save&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;user&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h2&gt;Active Record 和 Data Mappers 应用场景&lt;/h2&gt;
&lt;p&gt;Active Record 和 Data Mapper 是长期存在的两种模式，不存在孰优孰劣的问题，只是适用于不同的应用场景。&lt;/p&gt;
&lt;p&gt;Active Record，简单，易用，开发效率高。由于数据库记录和系统对象紧密匹配，适用于简单的领域模型或小型项目。正是由于这些特点，Active Record 成为 web 开发最受欢迎的 ORM。&lt;/p&gt;
&lt;p&gt;Data Mappers，灵活，高性能，更符合 OOP 思想。可以使对象和数据之间存在一个抽象层，可以构建更复杂模型，适合大型的，长期发展的项目。&lt;/p&gt;
&lt;h2&gt;问题&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;大家目前都在使用什么样的 ORM？&lt;/li&gt;
&lt;li&gt;思考下该 ORM 是属于哪种模式？&lt;/li&gt;
&lt;li&gt;既然选择里该框架肯定是冲着她的优点去的，那么在开发的过程在有没有体会到该框架带来的弊端？&lt;/li&gt;
&lt;li&gt;有没有想过有朝一日放弃所有的 ORM，返璞归真，从 sql 开始？&lt;/li&gt;
&lt;/ol&gt;</content:encoded></item><item><title><![CDATA[【译】不仅仅是漂亮：图像如何驱动用户体验]]></title><description><![CDATA[原文地址： More Than Just Pretty: How Imagery Drives User Experience — Smashing Magazine 原文作者：Nick Babich…]]></description><link>https://knownsec-fed.com/2018-02-26-bu-jin-jin-shi-piao-liang-tu-xiang-ru-he-qu-dong-yong-hu-ti-yan/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-02-26-bu-jin-jin-shi-piao-liang-tu-xiang-ru-he-qu-dong-yong-hu-ti-yan/</guid><pubDate>Mon, 26 Feb 2018 03:07:19 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-f817b2bbffd38015871e18584c9287f5-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQBAgP/xAAVAQEBAAAAAAAAAAAAAAAAAAADBP/aAAwDAQACEAMQAAABTzqqdjRAb//EABkQAQACAwAAAAAAAAAAAAAAAAEAEQIQMf/aAAgBAQABBQIClwrT2f/EABcRAQADAAAAAAAAAAAAAAAAAAIBAxD/2gAIAQMBAT8BuUnP/8QAFxEAAwEAAAAAAAAAAAAAAAAAAQIQEf/aAAgBAgEBPwFBs//EABcQAAMBAAAAAAAAAAAAAAAAAAAgMWL/2gAIAQEABj8Cppf/xAAaEAACAwEBAAAAAAAAAAAAAAAAAREhMRBx/9oACAEBAAE/IW1bv6IRmj1TfdhYj//aAAwDAQACAAMAAAAQP+//xAAXEQEBAQEAAAAAAAAAAAAAAAABACFR/9oACAEDAQE/EABOxpf/xAAWEQEBAQAAAAAAAAAAAAAAAAABEBH/2gAIAQIBAT8QNuz/xAAbEAEAAgIDAAAAAAAAAAAAAAABABEQoSFBYf/aAAgBAQABPxAeBV4QUy+QPLKD3qsWzZZrE//Z&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;不仅仅是漂亮：图像如何驱动用户体验&quot;
        title=&quot;&quot;
        src=&quot;/static/header-f817b2bbffd38015871e18584c9287f5-d6978.jpeg&quot;
        srcset=&quot;/static/header-f817b2bbffd38015871e18584c9287f5-527f0.jpeg 300w,
/static/header-f817b2bbffd38015871e18584c9287f5-9a7cd.jpeg 600w,
/static/header-f817b2bbffd38015871e18584c9287f5-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;原文地址：&lt;a href=&quot;https://www.smashingmagazine.com/2017/01/more-than-just-pretty-how-imagery-drives-user-experience/&quot;&gt;More Than Just Pretty: How Imagery Drives User Experience — Smashing Magazine&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;原文作者：Nick Babich&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;俗话说：“一图胜千言”&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;人类是高度可视化的生物，他们几乎可以瞬间处理视觉信息，我们所感知到的所有信息中，有 90% 是视觉传达的。图像可以成为吸引用户注意力和区分产品的有力手段。一个单一的图像比一个复杂的文本更能传达给观察者关键信息。此外，图像可以跨越语言障碍，在某种程度上，文本是做不到的。&lt;/p&gt;
&lt;p&gt;图像不仅仅是装饰，他们还有能力创造或破坏用户的体验。在本文中，我们将介绍大量有用的原则和最佳实践，它们将帮助您成功地将映像集成到您的设计中。&lt;/p&gt;
&lt;h2&gt;只使用相关的图片&lt;/h2&gt;
&lt;p&gt;每一张图片都有一个故事要讲。就像写作一样，如果你在开始前知道自己想说什么就更好了。引人注目的图像有独特的能力去激发和吸引你的观众，但不是所有的图像都能提高体验。有些只是占用空间，有的甚至会给用户造成干扰。在任何设计中，最危险的元素之一就是传达错误信息的图像。

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/1-5d9e14be74d21dacba6ee5de1acd9ade-0d623.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 160.46511627906978%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAgABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMEAQL/xAAWAQEBAQAAAAAAAAAAAAAAAAADAgH/2gAMAwEAAhADEAAAAZ611lUJ2DVj59XFmA1//8QAHRAAAQMFAQAAAAAAAAAAAAAAAQACEQMSEyExMv/aAAgBAQABBQIXOqYUy5MBkuAG5iWaVX0OJ3f/xAAYEQACAwAAAAAAAAAAAAAAAAAAARAhMf/aAAgBAwEBPwFKhZP/xAAYEQACAwAAAAAAAAAAAAAAAAAAMQECEP/aAAgBAgEBPwEs8ln/xAAdEAACAgIDAQAAAAAAAAAAAAAAAQIRITEQIlGB/9oACAEBAAY/Aqs6zf0djYsjsSiazwsxNo9P/8QAHRABAAIDAAMBAAAAAAAAAAAAAQARITFBUXGhsf/aAAgBAQABPyEUrLYtMphUCbGGqPuJBbO4U6VuHSNytmX5wN3LzMuPvC9GGzM//9oADAMBAAIAAwAAABAPJDL/xAAWEQEBAQAAAAAAAAAAAAAAAAABADH/2gAIAQMBAT8QJS2UsZf/xAAXEQADAQAAAAAAAAAAAAAAAAAAAREh/9oACAECAQE/EG5Ih9ieF0f/xAAeEAEAAwEAAgMBAAAAAAAAAAABABExIUGBUWGRsf/aAAgBAQABPxB4RUu8LlUrvlxfjmQBK0RcyE8BaCWFsUCztFENSpq9xjwVpeXvfcuShTA8+ZjygOkMAueWE5/ZeL+1kpTm0o/Z/9k=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;1&quot;
        title=&quot;&quot;
        src=&quot;/static/1-5d9e14be74d21dacba6ee5de1acd9ade-d6978.jpg&quot;
        srcset=&quot;/static/1-5d9e14be74d21dacba6ee5de1acd9ade-527f0.jpg 300w,
/static/1-5d9e14be74d21dacba6ee5de1acd9ade-9a7cd.jpg 600w,
/static/1-5d9e14be74d21dacba6ee5de1acd9ade-d6978.jpg 1200w,
/static/1-5d9e14be74d21dacba6ee5de1acd9ade-0d623.jpg 1290w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    
（与主题无关的图片经常引起信息传达的混淆。)&lt;/p&gt;
&lt;p&gt;用户对视觉效果的反应比文本快，所以要确保你的内容与视觉效果相匹配。你应该选择与你的产品目标有密切关系的图像，并确保它们与上下文相关。&lt;/p&gt;
&lt;h2&gt;图像不应该产生视觉噪音&lt;/h2&gt;
&lt;p&gt;“越多越好”的原则不适用于图像。不要花太多精力去创造纯粹的装饰性图像，因为人们通常会忽略这些图像。相反，能展示你产品的图片。在你的设计中使用有限数量的醒目的视觉效果——那些能真正吸引用户注意力的视觉效果。&lt;/p&gt;
&lt;h2&gt;使用高质量的图片，不要失真&lt;/h2&gt;
&lt;p&gt;确保您的图像适合在所有平台上显示。图像不应该出现像素化，所以一定要测试特定比例和设备的适当分辨率。显示照片和图形的原始纵横比，并且不要缩放它们超过 100%。不要让你的产品看起来倾斜的艺术品或图形，太小或太大。

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/2-252c6b3400343797e5a9ffc52e45f74f-1716d.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1088px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 36.764705882352935%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAEDBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHHkioV/8QAFxABAQEBAAAAAAAAAAAAAAAAAQISMf/aAAgBAQABBQKUzKFPf//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABkQAAMAAwAAAAAAAAAAAAAAAAECEQAQIf/aAAgBAQAGPwJhO4tF1//EABkQAAMBAQEAAAAAAAAAAAAAAAERIQAxUf/aAAgBAQABPyHsshD5iMghMKOK7//aAAwDAQACAAMAAAAQ/wDP/8QAFxEBAAMAAAAAAAAAAAAAAAAAAAExUf/aAAgBAwEBPxDE2//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABgQAQEBAQEAAAAAAAAAAAAAAAERACEx/9oACAEBAAE/EKACHhYxloyvHIEhXL5v/9k=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;2&quot;
        title=&quot;&quot;
        src=&quot;/static/2-252c6b3400343797e5a9ffc52e45f74f-1716d.jpg&quot;
        srcset=&quot;/static/2-252c6b3400343797e5a9ffc52e45f74f-da88b.jpg 300w,
/static/2-252c6b3400343797e5a9ffc52e45f74f-b1d2a.jpg 600w,
/static/2-252c6b3400343797e5a9ffc52e45f74f-1716d.jpg 1088w&quot;
        sizes=&quot;(max-width: 1088px) 100vw, 1088px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    
（左：失真模糊的图像   右：高清图像）&lt;/p&gt;
&lt;p&gt;响应式网站和移动应用程序经常会选择最适合各种用户设备的图像分辨率。很明显，所有屏幕分辨率和不同设备的图像都不够用。但是，每个像素的图像太多，如果你有大量的图像，每次裁剪一张图像可能会感到崩溃。&lt;/p&gt;
&lt;p&gt;那么，如何才能自动选择最佳响应图像大小呢？希望这些在线工具可以帮助您管理整个图像文件夹的多个大小。其中之一是 Cloudinary，它使您能够交互地生成响应性的图像断点。该工具使用高级算法，轻松为每个上传的图像生成最佳匹配断点，对图像进行分析，以图像为基础找到最佳的断点，而不是创建所有可能的图像分辨率。

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/3-0d172f2d11d30c8545007051a2949409-e863f.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 56.22254758418741%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHapwjGL//EABgQAAIDAAAAAAAAAAAAAAAAAAEQABEx/9oACAEBAAEFAi6Exf/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABkQAAEFAAAAAAAAAAAAAAAAABAAITEyof/aAAgBAQAGPwKumEw//8QAFxABAQEBAAAAAAAAAAAAAAAAAREAIf/aAAgBAQABPyEN4EyF0NLsZKnBjf/aAAwDAQACAAMAAAAQD+//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAgEBPxCn/8QAHhABAAICAQUAAAAAAAAAAAAAAQARITFBUXGBkaH/2gAIAQEAAT8QF30afKjgFHmXafTByAXb1gVQBgNEFXvfLc//2Q==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;3&quot;
        title=&quot;&quot;
        src=&quot;/static/3-0d172f2d11d30c8545007051a2949409-d6978.jpg&quot;
        srcset=&quot;/static/3-0d172f2d11d30c8545007051a2949409-527f0.jpg 300w,
/static/3-0d172f2d11d30c8545007051a2949409-9a7cd.jpg 600w,
/static/3-0d172f2d11d30c8545007051a2949409-d6978.jpg 1200w,
/static/3-0d172f2d11d30c8545007051a2949409-e863f.jpg 1366w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    
(Cloudinary 是一个基于云的服务，用于批量、裁剪和调整图像。)&lt;/p&gt;
&lt;h2&gt;图像聚焦设计并不适用于每一页&lt;/h2&gt;
&lt;p&gt;用赏心悦目的图像吸引人们的注意力当然是有价值的，但它的代价是让其他元素更不容易被看到和使用。&lt;/p&gt;
&lt;p&gt;在你的设计中过多地关注图像可能会造成视觉上的过度，这会严重地分散用户的注意力。您可以在 SoundCloud 的应用程序中看到这种效果，其中图像引起了所有人的注意，而几乎没有注意到这两个按钮。

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/4-f67db247319db6f069d1e8ab73dfbd77-57027.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 414px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 144.9275362318841%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAdABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAUBAwYE/8QAFwEAAwEAAAAAAAAAAAAAAAAAAAECA//aAAwDAQACEAMQAAABvSPUprqiAy5lDFYr0RYOP//EABwQAAMAAgMBAAAAAAAAAAAAAAECAwQRABIzIf/aAAgBAQABBQLLDNXs45E7jlKC+vkPCx1SzdhDwzJksJsSi9U//8QAGBEAAwEBAAAAAAAAAAAAAAAAARASAiH/2gAIAQMBAT8BkShri//EABcRAQADAAAAAAAAAAAAAAAAABACMUH/2gAIAQIBAT8BjZp//8QAJBAAAgECAwkAAAAAAAAAAAAAAAECESEDUXISIjEyM1KBkaH/2gAIAQEABj8CosTZ3Tnl7IN5Db7SRDSeCyapxIaRSU6WOp8IxyR//8QAHxAAAwABBAMBAAAAAAAAAAAAAAERITFBobFRccHh/9oACAEBAAE/IUN5VUs8n6IMYK2tZtSJ9Erc06pDgui4sZTVeym6jbg4Lo2M1IPyvOozZYKn/9oADAMBAAIAAwAAABDnzoD/xAAXEQEBAQEAAAAAAAAAAAAAAAABERAh/9oACAEDAQE/EBAzuRjP/8QAFxEAAwEAAAAAAAAAAAAAAAAAARARMf/aAAgBAgEBPxDSoCUv/8QAHxABAQABBAIDAAAAAAAAAAAAAREAITFRYUHwgcHR/9oACAEBAAE/EB0+QYVe2+mDmX5C+8b0rRqsNcFvxm627MAkm6K+c9LwwNV1ywxxZMolq8Df3Pe8Me3vTditt7yfS+Qfi51IylhLn//Z&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;4&quot;
        title=&quot;&quot;
        src=&quot;/static/4-f67db247319db6f069d1e8ab73dfbd77-57027.jpg&quot;
        srcset=&quot;/static/4-f67db247319db6f069d1e8ab73dfbd77-6431a.jpg 300w,
/static/4-f67db247319db6f069d1e8ab73dfbd77-57027.jpg 414w&quot;
        sizes=&quot;(max-width: 414px) 100vw, 414px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    
（在 Soundcloud 的主页视图中，屏幕按钮被图像所弱化。)&lt;/p&gt;
&lt;p&gt;尽管在某些情况下（例如，苹果的主页），以图像为中心的设计是适当的，但绝大多数应用程序和网站应该遵循一个平衡的方法——在用户界面中使用的图像应该支撑产品，但不能掩盖其他重要的内容或主要功能。&lt;/p&gt;
&lt;h2&gt;使用多种媒介&lt;/h2&gt;
&lt;p&gt;插图和摄影都可以在同一产品中使用。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;摄影是理想的展示特定的实体和故事。例如，我们需要展示一朵玫瑰时：

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/5-06ec134972b7495c720fe131fad48afc-1ec8f.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1024px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 66.69921875%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIDBP/EABQBAQAAAAAAAAAAAAAAAAAAAAL/2gAMAwEAAhADEAAAAd8rai3GEP/EABsQAAIDAAMAAAAAAAAAAAAAAAEDAAIEEhMx/9oACAEBAAEFAtL+uV53A80IDopYXSf/xAAYEQACAwAAAAAAAAAAAAAAAAABEhAhMf/aAAgBAwEBPwEqtbH/xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAgEBPwGH/8QAGxABAAIDAQEAAAAAAAAAAAAAAQIRABASMUH/2gAIAQEABj8C5GnIz78+6G6TCJr/xAAZEAADAQEBAAAAAAAAAAAAAAAAARExQVH/2gAIAQEAAT8hsTjVaiWUtJpLVoeccynBjvpT/9oADAMBAAIAAwAAABBHD//EABYRAAMAAAAAAAAAAAAAAAAAAAEQEf/aAAgBAwEBPxAZI//EABYRAQEBAAAAAAAAAAAAAAAAAAEQEf/aAAgBAgEBPxDSz//EABsQAQADAQEBAQAAAAAAAAAAAAEAESExUWFx/9oACAEBAAE/EDx6WGjzfY0oxMBPE4xiBT9uWhdw0L/SaRg1GxhquT//2Q==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;5&quot;
        title=&quot;&quot;
        src=&quot;/static/5-06ec134972b7495c720fe131fad48afc-1ec8f.jpg&quot;
        srcset=&quot;/static/5-06ec134972b7495c720fe131fad48afc-c575d.jpg 300w,
/static/5-06ec134972b7495c720fe131fad48afc-bcea4.jpg 600w,
/static/5-06ec134972b7495c720fe131fad48afc-1ec8f.jpg 1024w&quot;
        sizes=&quot;(max-width: 1024px) 100vw, 1024px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    
（对于具体的实体，使用照片表示。)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;插图可以有效表达概念和隐喻，摄影可能会达不到这种效果。

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/6-a8ea12403a463f4b5fdb7066b52ba7b0-09846.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 546px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 125.0915750915751%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAZABQDASIAAhEBAxEB/8QAGQABAAIDAAAAAAAAAAAAAAAAAAECAwQF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAHt4tmk1cXKLAD/xAAbEAEAAgIDAAAAAAAAAAAAAAABAhADERIgIf/aAAgBAQABBQKbxjDJtoCzw6f/xAAWEQEBAQAAAAAAAAAAAAAAAAABESD/2gAIAQMBAT8BEmP/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAZEAACAwEAAAAAAAAAAAAAAAABEQAQMDH/2gAIAQEABj8CYiN8w//EABkQAQEBAAMAAAAAAAAAAAAAAAEREAAgIf/aAAgBAQABPyF1CvECN0/oLogdf//aAAwDAQACAAMAAAAQ68wA/8QAFhEBAQEAAAAAAAAAAAAAAAAAASAh/9oACAEDAQE/EAITY//EABURAQEAAAAAAAAAAAAAAAAAACBB/9oACAECAQE/EKP/xAAcEAEBAAEFAQAAAAAAAAAAAAABEQAQICExQWH/2gAIAQEAAT8QjIOC9H3J1H4aMjesWmhSho8kwwPDb//Z&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;6&quot;
        title=&quot;&quot;
        src=&quot;/static/6-a8ea12403a463f4b5fdb7066b52ba7b0-09846.jpg&quot;
        srcset=&quot;/static/6-a8ea12403a463f4b5fdb7066b52ba7b0-4d3b8.jpg 300w,
/static/6-a8ea12403a463f4b5fdb7066b52ba7b0-09846.jpg 546w&quot;
        sizes=&quot;(max-width: 546px) 100vw, 546px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    
（插图更加写意，能表达一些创作者的思想。)&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;有一个焦点&lt;/h2&gt;
&lt;p&gt;意象是一种传达信息的视觉传达工具。清晰的焦点一目了然地传达了这一概念，而缺乏重点则使图像变得毫无意义。&lt;/p&gt;
&lt;p&gt;当焦点被遮挡时，图像的图标质量会丢失：

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/7-80d64136df21e9480b70bfd693399511-1ec8f.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1024px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 66.69921875%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBAgT/xAAVAQEBAAAAAAAAAAAAAAAAAAACBP/aAAwDAQACEAMQAAABVLbTU5AGf//EABkQAAIDAQAAAAAAAAAAAAAAAAATAQIDEf/aAAgBAQABBQJo0nUXXqKSWx5P/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAECEv/aAAgBAwEBPwFVRuj/xAAXEQADAQAAAAAAAAAAAAAAAAAAAQIS/9oACAECAQE/AXkUyf/EABcQAQEBAQAAAAAAAAAAAAAAAAAxEEH/2gAIAQEABj8C2Oq//8QAGxABAAICAwAAAAAAAAAAAAAAAQARMUEhcYH/2gAIAQEAAT8hBoZ0uKOJhp53iJKKew6xz//aAAwDAQACAAMAAAAQV8//xAAXEQEBAQEAAAAAAAAAAAAAAAABADFR/9oACAEDAQE/EOiQdv/EABcRAQEBAQAAAAAAAAAAAAAAAAEAESH/2gAIAQIBAT8QJ6kk0L//xAAcEAEAAgIDAQAAAAAAAAAAAAABABEhMUFhoXH/2gAIAQEAAT8QWXEhML4bjM97lYYeDLyXsW9lo9bOyf/Z&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;7&quot;
        title=&quot;&quot;
        src=&quot;/static/7-80d64136df21e9480b70bfd693399511-1ec8f.jpg&quot;
        srcset=&quot;/static/7-80d64136df21e9480b70bfd693399511-c575d.jpg 300w,
/static/7-80d64136df21e9480b70bfd693399511-bcea4.jpg 600w,
/static/7-80d64136df21e9480b70bfd693399511-1ec8f.jpg 1024w&quot;
        sizes=&quot;(max-width: 1024px) 100vw, 1024px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    
（缺乏焦点会使图像失去意义。)&lt;/p&gt;
&lt;p&gt;避免用户寻找图像中的意义，并确保用一种令人难忘的方式将一个清晰的概念传达给用户。

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/8-8e763e689230ae85cf63fd383be25b22-1ec8f.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1024px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 66.69921875%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIEA//EABUBAQEAAAAAAAAAAAAAAAAAAAEA/9oADAMBAAIQAxAAAAF5HcYTUb//xAAbEAACAgMBAAAAAAAAAAAAAAAAAQIDERITFP/aAAgBAQABBQKUJIe+WmeiwsusR3mf/8QAFhEBAQEAAAAAAAAAAAAAAAAAABEB/9oACAEDAQE/AZiP/8QAFhEBAQEAAAAAAAAAAAAAAAAAABEB/9oACAECAQE/Abqv/8QAHRAAAQIHAAAAAAAAAAAAAAAAAAExAhARISIyQf/aAAgBAQAGPwK0JrJxMuVHP//EABoQAAIDAQEAAAAAAAAAAAAAAAABESEx4fD/2gAIAQEAAT8htpBXaYkmz3RSdLgbeT//2gAMAwEAAgADAAAAEDcP/8QAFhEBAQEAAAAAAAAAAAAAAAAAABEx/9oACAEDAQE/EJYh/8QAFhEBAQEAAAAAAAAAAAAAAAAAAAER/9oACAECAQE/EJRp/8QAHhABAAIBBAMAAAAAAAAAAAAAAQARITFBcZFRsdH/2gAIAQEAAT8QH0U859TdAtNbdS9qjxL0x6w7EuMNWLWheHyf/9k=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;8&quot;
        title=&quot;&quot;
        src=&quot;/static/8-8e763e689230ae85cf63fd383be25b22-1ec8f.jpg&quot;
        srcset=&quot;/static/8-8e763e689230ae85cf63fd383be25b22-c575d.jpg 300w,
/static/8-8e763e689230ae85cf63fd383be25b22-bcea4.jpg 600w,
/static/8-8e763e689230ae85cf63fd383be25b22-1ec8f.jpg 1024w&quot;
        sizes=&quot;(max-width: 1024px) 100vw, 1024px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    
（清晰的焦点可以一目了然地传达概念。)&lt;/p&gt;
&lt;p&gt;尽量减少分心并把注意力集中在图像中有意义的元素上。&lt;/p&gt;
&lt;h2&gt;显示真实的人&lt;/h2&gt;
&lt;p&gt;人的形象是一个非常有效的方式让你的用户参与。当我们看到别人的脸时，我们会觉得我们实际上是在和他们联系，而不仅仅是使用产品。然而，许多企业网站是臭名昭著的过度使用虚假的摄影是用来“建立信任。”（图片）
人的形象是让用户参与其中的一种非常有效的方式。当我们看到别人的脸时，我们会觉得我们实际上是在和他们联系，而不仅仅是使用一个冷冰冰的产品。然而，许多企业网站因过度使用用于“建立信任”的虚假摄影而臭名昭着。

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/9-fad3c61ca24284fb903ae4c74f4f8b2e-c79f3.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 720px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 75.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAUBAgT/xAAVAQEBAAAAAAAAAAAAAAAAAAACAf/aAAwDAQACEAMQAAABcrLQG2MJT//EABsQAAMAAgMAAAAAAAAAAAAAAAECAwASESEx/9oACAEBAAEFAqPoOmoPKtvVFBJfjP/EABYRAQEBAAAAAAAAAAAAAAAAAAABEf/aAAgBAwEBPwGMf//EABYRAQEBAAAAAAAAAAAAAAAAAAABEv/aAAgBAgEBPwG1p//EABwQAAEEAwEAAAAAAAAAAAAAAAEAAhAREjFBcf/aAAgBAQAGPwL1PtouG1oLLpj/xAAaEAEBAQADAQAAAAAAAAAAAAABEQAhMUFR/9oACAEBAAE/IRJSqgZvXH3mbozwPhkXMTUd7//aAAwDAQACAAMAAAAQYx//xAAWEQEBAQAAAAAAAAAAAAAAAAABERD/2gAIAQMBAT8QEK5//8QAFhEBAQEAAAAAAAAAAAAAAAAAEQEQ/9oACAECAQE/EEpj/8QAGxABAQADAAMAAAAAAAAAAAAAAREAITFBUXH/2gAIAQEAAT8Q6+M0r9xaQJVWhyYiFGAdwwJLd8r1xEiAQYQ5feathd8z/9k=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;9&quot;
        title=&quot;&quot;
        src=&quot;/static/9-fad3c61ca24284fb903ae4c74f4f8b2e-c79f3.jpg&quot;
        srcset=&quot;/static/9-fad3c61ca24284fb903ae4c74f4f8b2e-85aac.jpg 300w,
/static/9-fad3c61ca24284fb903ae4c74f4f8b2e-f2bdb.jpg 600w,
/static/9-fad3c61ca24284fb903ae4c74f4f8b2e-c79f3.jpg 720w&quot;
        sizes=&quot;(max-width: 720px) 100vw, 720px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    
（不真实的图像给用户留下了一种浅薄、虚假的伪装感。）&lt;/p&gt;
&lt;p&gt;可用性测试表明，纯装饰性的照片很少会给设计增加价值，而且往往会损害用户体验。用户通常会忽略这些图片，甚至可能会对它们感到失望。&lt;/p&gt;
&lt;p&gt;一个非常简单的经验法则是，使用与你的应用程序或网站角色匹配的人的高质量照片。使用的图像应该真实的表示你的产品，公司或文化。

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/10-1eacf5154c0aecbf29eef0f2e44e7496-dfbe2.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 780px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 66.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMFAgT/xAAWAQEBAQAAAAAAAAAAAAAAAAABAAL/2gAMAwEAAhADEAAAAXY5KJKJhl//xAAaEAACAwEBAAAAAAAAAAAAAAABAgADERIT/9oACAEBAAEFAl3aSwnuqSs41gHGCf/EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAEDAQE/AVf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAdEAACAQQDAAAAAAAAAAAAAAAAARECECFhIjFx/9oACAEBAAY/AopWPSFByy9COtW//8QAGhABAAIDAQAAAAAAAAAAAAAAAQAhETFBYf/aAAgBAQABPyHAuC+JZWvY0AJbsTOsF1UCDR4qJOp//9oADAMBAAIAAwAAABBXL//EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAEDAQE/EKt//8QAFhEBAQEAAAAAAAAAAAAAAAAAABEx/9oACAECAQE/ENR//8QAHRABAQACAgMBAAAAAAAAAAAAAREAMUGRIVFhgf/aAAgBAQABPxCDe6njQ3q4ZsKL743ccDGMz0S/mSQqqA3hvIhyI/cYAAz/2Q==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;10&quot;
        title=&quot;&quot;
        src=&quot;/static/10-1eacf5154c0aecbf29eef0f2e44e7496-dfbe2.jpg&quot;
        srcset=&quot;/static/10-1eacf5154c0aecbf29eef0f2e44e7496-71414.jpg 300w,
/static/10-1eacf5154c0aecbf29eef0f2e44e7496-c062d.jpg 600w,
/static/10-1eacf5154c0aecbf29eef0f2e44e7496-dfbe2.jpg 780w&quot;
        sizes=&quot;(max-width: 780px) 100vw, 780px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    
（展示真实的，脚踏实地的人，并确保他们真的与你产品的角色匹配。)&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;小贴士：&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;尽量避免人群拍摄，使用具有单一主要主题的照片。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;选择代表真实故事的图像。给你的人拍一些有趣的照片。如果你有一个产品，可以考虑他们与产品互动的方式。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;使图像与设计相融合&lt;/h2&gt;
&lt;p&gt;当你在你的设计中使用图像时，问问你自己，你所拍摄的图片是否符合你的应用程序或网站的美感。Squarespace 的主页是一个关注图像的好例子。优雅，干净，并且使用大量的留白和大型全屏图像来创建引人注目的大胆设计。

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/11-bdcde2be05db900873d1d3ef01be840c-6bead.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 49.20754716981131%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAUCAwT/xAAVAQEBAAAAAAAAAAAAAAAAAAABAP/aAAwDAQACEAMQAAABZVSzEyAT/8QAGhAAAgIDAAAAAAAAAAAAAAAAAQMSEwAhMv/aAAgBAQABBQK0SS2RB07hIF2f/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAHBAAAQMFAAAAAAAAAAAAAAAAAQACEBESITFC/9oACAEBAAY/AiMp4uJpOuY//8QAGhAAAwEAAwAAAAAAAAAAAAAAAAERMSFhcf/aAAgBAQABPyHQ0t4YuwGpWlV6arsUeJkR/9oADAMBAAIAAwAAABCkH//EABcRAQADAAAAAAAAAAAAAAAAAAEQESH/2gAIAQMBAT8QDLj/xAAVEQEBAAAAAAAAAAAAAAAAAAAQQf/aAAgBAgEBPxCn/8QAHRABAAICAgMAAAAAAAAAAAAAAREhADFBUXGh0f/aAAgBAQABPxCBAStArdxHvKhMpdiLXzEJCeFeeAQJ2TiiBZEN3hI1zn//2Q==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;11&quot;
        title=&quot;&quot;
        src=&quot;/static/11-bdcde2be05db900873d1d3ef01be840c-d6978.jpg&quot;
        srcset=&quot;/static/11-bdcde2be05db900873d1d3ef01be840c-527f0.jpg 300w,
/static/11-bdcde2be05db900873d1d3ef01be840c-9a7cd.jpg 600w,
/static/11-bdcde2be05db900873d1d3ef01be840c-d6978.jpg 1200w,
/static/11-bdcde2be05db900873d1d3ef01be840c-6bead.jpg 1325w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    
（选择适合主题的图片是很重要的。)&lt;/p&gt;
&lt;h2&gt;改善您的电子商务设计&lt;/h2&gt;
&lt;p&gt;通过产品形象销售产品。用户通常依靠产品图像来评估产品及其特性。无论你的产品是什么，无论是耳机还是玩具，产品摄影都是任何电子商务网站最重要的元素。最终，你的产品吸引访问者的吸引力越高，他们对你的产品越有信心，购买意愿越强烈，并且你的转化率会更高。

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/12-2795a8c3a84cf99bb9c3a5292ec89f55-c1165.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAUGAv/EABUBAQEAAAAAAAAAAAAAAAAAAAEA/9oADAMBAAIQAxAAAAFhlc6iYKMH/8QAGhABAAIDAQAAAAAAAAAAAAAAAgEDBBESIf/aAAgBAQABBQLXYVNbrRkrEt5UT6iJn//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAECAQE/AVn/xAAdEAACAQQDAAAAAAAAAAAAAAAAARECEiIxIWJx/9oACAEBAAY/Apux6ltPDIeyx6ZFKM4b8P/EABoQAAMBAQEBAAAAAAAAAAAAAAABESFBMVH/2gAIAQEAAT8hxPHKyTl1Q5LiHW/IRSFXzCiQD//aAAwDAQACAAMAAAAQYO//xAAXEQEAAwAAAAAAAAAAAAAAAAABEBEh/9oACAEDAQE/EKDY/8QAFxEBAQEBAAAAAAAAAAAAAAAAAQARIf/aAAgBAgEBPxAQ7bf/xAAcEAEAAgIDAQAAAAAAAAAAAAABABEhMUFRYXH/2gAIAQEAAT8QLqoFLT13UF8+cqPss3WkY+X1zmnklr7YYD73FesbNDrM/9k=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;12&quot;
        title=&quot;&quot;
        src=&quot;/static/12-2795a8c3a84cf99bb9c3a5292ec89f55-c1165.jpg&quot;
        srcset=&quot;/static/12-2795a8c3a84cf99bb9c3a5292ec89f55-c552c.jpg 300w,
/static/12-2795a8c3a84cf99bb9c3a5292ec89f55-b5c43.jpg 600w,
/static/12-2795a8c3a84cf99bb9c3a5292ec89f55-c1165.jpg 800w&quot;
        sizes=&quot;(max-width: 800px) 100vw, 800px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    
（通过图像来感受产品。）&lt;/p&gt;
&lt;p&gt;使产品图像变得美丽。一个好的形象能为你做好所有的努力：它抓住了用户的注意力，并使你的产品与众不同。然而，好的产品摄影需要方法。请考虑阅读“如何为您的产品拍摄高质量照片”一文中的文章“使用精美的产品照片改进您的电子商务设计”。&lt;/p&gt;
&lt;p&gt;让产品推销自己。考虑下面显示的 Gorilla Pod 示例。照片充分展示了该产品的优点。

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/13-f8e743caaf48635deb9f70fc03f0b2b5-64ecf.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 38.94658753709199%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAP/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAABvQLCP//EABoQAAICAwAAAAAAAAAAAAAAAAECAAMREhP/2gAIAQEAAQUCF2qvZkdBP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAECAQE/AVf/xAAZEAACAwEAAAAAAAAAAAAAAAAAAQIREjL/2gAIAQEABj8Ct2RzJo6P/8QAGxAAAgIDAQAAAAAAAAAAAAAAAAEhMRFhcYH/2gAIAQEAAT8hXI9KS2I8+CeqLp//2gAMAwEAAgADAAAAEPP/AP/EABYRAAMAAAAAAAAAAAAAAAAAAAABEf/aAAgBAwEBPxBKkP/EABYRAQEBAAAAAAAAAAAAAAAAAAEQEf/aAAgBAgEBPxBcj//EABoQAQEAAwEBAAAAAAAAAAAAAAERAGFxIbH/2gAIAQEAAT8QNxFgi3esCjwUhw35lRxr3P/Z&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;13&quot;
        title=&quot;&quot;
        src=&quot;/static/13-f8e743caaf48635deb9f70fc03f0b2b5-d6978.jpg&quot;
        srcset=&quot;/static/13-f8e743caaf48635deb9f70fc03f0b2b5-527f0.jpg 300w,
/static/13-f8e743caaf48635deb9f70fc03f0b2b5-9a7cd.jpg 600w,
/static/13-f8e743caaf48635deb9f70fc03f0b2b5-d6978.jpg 1200w,
/static/13-f8e743caaf48635deb9f70fc03f0b2b5-64ecf.jpg 1348w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;在折叠上方显示主图像。不要让用户滚动来查看产品的主要图像。主要的产品形象应该固定在一个显眼的位置，以便销售你的优先产品。&lt;/p&gt;
&lt;p&gt;为了让图像更有效，它需要很大——尽可能大。然后，当你把你的图像的尺寸缩小了，你需要集成放大产品具体细节的功能。这对于像服装这样的产品尤其重要，因为用户更关心细节。放大后的图像也需要保持高质量。

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/14-9f7b4ca10e0addac3e385e8d62a52161-f3cd9.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 387px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 177.51937984496124%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAkABQDASIAAhEBAxEB/8QAGQABAQADAQAAAAAAAAAAAAAAAAIBAwUE/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAevN4ltsHjm9VnQSMQJuC//EAB0QAAMAAgMBAQAAAAAAAAAAAAECAwAxBBESEyH/2gAIAQEAAQUCanTmnQX9DuiZJ50warL6FJU9jT8hJuOUnaH0h3g1/8QAFxEAAwEAAAAAAAAAAAAAAAAAABEgIf/aAAgBAwEBPwHBz//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8BX//EACEQAAEDAwQDAAAAAAAAAAAAAAEAAhEQEiEgMUFxIpGh/9oACAEBAAY/AreVlSF5kDtGwzFJG4Qc5+32ha6Z6WZ9IEc6P//EABsQAQACAwEBAAAAAAAAAAAAAAEAERAhMUFh/9oACAEBAAE/IQSz8VLBuEVaUMt29Ytxe2sTjVw3LWvkwvLA5B1ZDo5h8FsTXDhP/9oADAMBAAIAAwAAABDPLAB/z//EABcRAAMBAAAAAAAAAAAAAAAAAAABISD/2gAIAQMBAT8QTmDy/8QAFxEAAwEAAAAAAAAAAAAAAAAAABEgIf/aAAgBAgEBPxDRT//EAB4QAQADAAIDAQEAAAAAAAAAAAEAESExQXGx4VFh/9oACAEBAAE/EMYkumKiOidh9iP47CDn1ArXDjuAhCBWy/MNEP19wib7YaDXD0whgGrcD0/zzPY+5unK5Ck+S8GMHRObb4lg1WxTTs2V3sGoah//2Q==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;14&quot;
        title=&quot;&quot;
        src=&quot;/static/14-9f7b4ca10e0addac3e385e8d62a52161-f3cd9.jpg&quot;
        srcset=&quot;/static/14-9f7b4ca10e0addac3e385e8d62a52161-c0890.jpg 300w,
/static/14-9f7b4ca10e0addac3e385e8d62a52161-f3cd9.jpg 387w&quot;
        sizes=&quot;(max-width: 387px) 100vw, 387px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    
（放大的视图迫使用户查看特定的部分。）

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/15-352386b6bfc5a5d4ff445d32c5816cd8-52361.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 750px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 92%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAASABQDASIAAhEBAxEB/8QAGQABAAIDAAAAAAAAAAAAAAAAAAIDAQQF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAeviEI21arAkwv8A/8QAHBAAAgICAwAAAAAAAAAAAAAAAQIAAxETISIx/9oACAEBAAEFAiexbEXkM9ObNRlIVUPpgn//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAEDAQE/AR//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAfEAACAQMFAQAAAAAAAAAAAAABEQACAyIgITEyQXH/2gAIAQEABj8C7gTe5SJy/kyTEyqRXkVssaP/xAAbEAEAAgMBAQAAAAAAAAAAAAABABEhMUEQUf/aAAgBAQABPyFLCjhcJhidLU3K/LHZ06ZiQVTC1Ym+h34cTWf/2gAMAwEAAgADAAAAEDwAwP/EABcRAAMBAAAAAAAAAAAAAAAAAAAQETH/2gAIAQMBAT8Qpr//xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/EB//xAAdEAEAAgICAwAAAAAAAAAAAAABABEhMVFxQZGx/9oACAEBAAE/EBpotwGvGLzHRFMJLzvUWkl4SQzFX0sCOPUEKu1pWpuoLdtV3c2dzA6E+s//2Q==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;15&quot;
        title=&quot;&quot;
        src=&quot;/static/15-352386b6bfc5a5d4ff445d32c5816cd8-52361.jpg&quot;
        srcset=&quot;/static/15-352386b6bfc5a5d4ff445d32c5816cd8-120ae.jpg 300w,
/static/15-352386b6bfc5a5d4ff445d32c5816cd8-756d1.jpg 600w,
/static/15-352386b6bfc5a5d4ff445d32c5816cd8-52361.jpg 750w&quot;
        sizes=&quot;(max-width: 750px) 100vw, 750px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    
（让用户拥有操控权，允许他们放大他们喜欢的部分【深度和缩放范围都由用户控制】。)&lt;/p&gt;
&lt;h2&gt;表达个性，激发用户情感&lt;/h2&gt;
&lt;p&gt;图像可以传达产品或服务的本质，但它也能带来惊喜和愉悦。图像有娱乐的能力，也有提供信息的能力。如果你已经有了满意的用户体验，为你的产品添加乐趣可以帮助你和你的用户建立情感联系。情感强大的图像是确保用户继续深入体验您的产品的一个因素。

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/16-f86e1461c70b0e132bd7128f494a8b83-ae448.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 56.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQBAgX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB1136xIB//8QAGBABAAMBAAAAAAAAAAAAAAAAAgEQEQP/2gAIAQEAAQUC6HYIUXlf/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGhAAAQUBAAAAAAAAAAAAAAAAAQAgMUGBkf/aAAgBAQAGPwK8Kk9b/8QAGRABAQADAQAAAAAAAAAAAAAAAREAEDGB/9oACAEBAAE/ITsp8MZkh7dEuA1//9oADAMBAAIAAwAAABA73//EABYRAAMAAAAAAAAAAAAAAAAAABARIf/aAAgBAwEBPxBUf//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABsQAQEBAAIDAAAAAAAAAAAAAAERABAhYaHh/9oACAEBAAE/EL8h0U9NPmVFPuCEMAjiKzvy8f/Z&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;16&quot;
        title=&quot;&quot;
        src=&quot;/static/16-f86e1461c70b0e132bd7128f494a8b83-d6978.jpg&quot;
        srcset=&quot;/static/16-f86e1461c70b0e132bd7128f494a8b83-527f0.jpg 300w,
/static/16-f86e1461c70b0e132bd7128f494a8b83-9a7cd.jpg 600w,
/static/16-f86e1461c70b0e132bd7128f494a8b83-d6978.jpg 1200w,
/static/16-f86e1461c70b0e132bd7128f494a8b83-ae448.jpg 1350w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    
（图像能够唤起观众的情感反应。一点点幽默可以减轻用户的负担，让用户产生好感。)&lt;/p&gt;
&lt;p&gt;情感大脑容易受到照片和插图，尤其是人物和故事的影响。说到插画，即使是不包含画风的网站或应用，可以使用插画来实现这些目的。例如，插图可用于说明，教程和空白状态。

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/17-f7c5659172197f619c88f08983783d5d-62d4d.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1080px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 177.77777777777777%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAkABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAECAwX/xAAWAQEBAQAAAAAAAAAAAAAAAAAABAP/2gAMAwEAAhADEAAAAUUm2ezIdiN6S7UbjOAA/8QAGxAAAgIDAQAAAAAAAAAAAAAAAAEQEwIDESH/2gAIAQEAAQUClHgynWU6ynAYszqjij//xAAYEQACAwAAAAAAAAAAAAAAAAAAIQEQEf/aAAgBAwEBPwEYjIv/xAAYEQADAQEAAAAAAAAAAAAAAAAAAREQEv/aAAgBAgEBPwGIiKzp7//EABkQAAIDAQAAAAAAAAAAAAAAAAAxARAgEf/aAAgBAQAGPwLSEKuS8//EACAQAQACAQQCAwAAAAAAAAAAAAEAESExQVGREPBhsfH/2gAIAQEAAT8hUrbuWcks5JT47mrbuUvE9qw/Sz3sVmGpkwn2INo+FtS6gAYKn//aAAwDAQACAAMAAAAQB+Wxg8//xAAaEQACAgMAAAAAAAAAAAAAAAAAERBRITFh/9oACAEDAQE/EM2OwtEcJ//EABcRAQEBAQAAAAAAAAAAAAAAAGEAARD/2gAIAQIBAT8QCOfZd7//xAAgEAEAAgEEAgMAAAAAAAAAAAABABFBITFRYYGRwdHw/9oACAEBAAE/EKHXtFO3ujfueYLt4GRAavTi1BgV0xAbVfrMQ8sSrKF7/c0R1zVwi+AsrbkPmAXYckQa6hIHgvErxDgn/9k=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;17&quot;
        title=&quot;&quot;
        src=&quot;/static/17-f7c5659172197f619c88f08983783d5d-62d4d.jpg&quot;
        srcset=&quot;/static/17-f7c5659172197f619c88f08983783d5d-997c4.jpg 300w,
/static/17-f7c5659172197f619c88f08983783d5d-7dd84.jpg 600w,
/static/17-f7c5659172197f619c88f08983783d5d-62d4d.jpg 1080w&quot;
        sizes=&quot;(max-width: 1080px) 100vw, 1080px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    
（选择引人注目的图片来吸引人们的注意，并表达特性。)&lt;/p&gt;
&lt;h2&gt;真实场景：如何为登陆页面选择图片，以实现目的&lt;/h2&gt;
&lt;p&gt;登录页面本质上是你的商店窗口，在大多数情况下，你只有一次机会来给用户留下深刻印象。当涉及到登录页面时，您希望访问者在页面上只有一个任务——转换。巨大的登录页面围绕着坚实的用户体验而建立，图像在建立这种体验中起着重要作用。当用户来到你的页面时，他们会有某种反应。无论是积极的还是消极的，很大程度上取决于他们所看到的。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;下面是几点提议：&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;h3&gt;01、选择适合你信息的图片。&lt;/h3&gt;
&lt;p&gt;选择能简单解释产品或服务概念的图片很重要。这并不意味着图像需要说所有的东西——单独看到的图像可能看起来并不清楚，但是当它与页面上的其他内容相连接时，它应该符合逻辑。它应该在视觉上强化你试图传达给访问者的信息。&lt;/p&gt;
&lt;h3&gt;02、在正确的地方展示图片。&lt;/h3&gt;
&lt;p&gt;如果图像带有高优先级目标，它应该具有更多的视觉重点，相反，与次要目标相关的图像应该更少强调。最重要的图像应该被放在一个突出的位置（即在折叠的上方），并且应该是焦点的主要焦点。&lt;/p&gt;
&lt;h3&gt;03、选择醒目的视觉效果来吸引眼球。&lt;/h3&gt;
&lt;p&gt;专注于选择你能找到的最引人注目的图片。正如斯蒂文·斯奈尔所说：“生动鲜明的形象将会留在游客的脑海中。文字可能被阅读和遗忘，但是强烈的图像将被记住。”&lt;/p&gt;
&lt;h3&gt;04、使用情感强大的意象。&lt;/h3&gt;
&lt;p&gt;你的图像应该具有情感上的说服力——会产生情感上的影响并加强你试图创造的感觉。毕竟，当涉及到决策时，情绪往往会压倒逻辑。&lt;/p&gt;
&lt;p&gt;下面是一个由 Intercom 提供的登录页面示例，该服务可以让你更有效地与你的客户进行通信。登录页采用了相当复杂的想法，很容易理解这个产品是如何工作的，以及为什么它可能是有益的。

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/18-9629d9eb5de92febf4def12c49c89a8b-4f1fe.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 48.99777282850779%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAIBAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHbaHRCsT//xAAZEAABBQAAAAAAAAAAAAAAAAAQAQIRITH/2gAIAQEAAQUCkaXUv//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABYQAAMAAAAAAAAAAAAAAAAAAAAgIf/aAAgBAQAGPwJYf//EABsQAQACAgMAAAAAAAAAAAAAAAEAESExEFFx/9oACAEBAAE/Id8Eba6gGVDELONTDyf/2gAMAwEAAgADAAAAEPAv/8QAFhEBAQEAAAAAAAAAAAAAAAAAAAER/9oACAEDAQE/EI1//8QAFhEBAQEAAAAAAAAAAAAAAAAAAAER/9oACAECAQE/EKyv/8QAGhABAAIDAQAAAAAAAAAAAAAAAQARITFREP/aAAgBAQABPxBqjANbxNQ0t9gllu0BjLQc884TV1hP/9k=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;18&quot;
        title=&quot;&quot;
        src=&quot;/static/18-9629d9eb5de92febf4def12c49c89a8b-d6978.jpg&quot;
        srcset=&quot;/static/18-9629d9eb5de92febf4def12c49c89a8b-527f0.jpg 300w,
/static/18-9629d9eb5de92febf4def12c49c89a8b-9a7cd.jpg 600w,
/static/18-9629d9eb5de92febf4def12c49c89a8b-d6978.jpg 1200w,
/static/18-9629d9eb5de92febf4def12c49c89a8b-4f1fe.jpg 1347w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h2&gt;总结&lt;/h2&gt;
&lt;p&gt;从可用性的角度来考虑图像是很重要的。在你的设计中所有的视觉传达都会给用户留下累积的印象。&lt;/p&gt;
&lt;p&gt;令人信服的图像具有独特的能力，可以激励和吸引你的观众提供有用的信息。花时间让你的应用或网站中的每张图片都能强化用户体验。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[CSS3 clip-path 用法介绍]]></title><description><![CDATA[ ## 一、基本概念 刷新 QQ 空间动态时，发现一则广告，随着用户上下滑动动态列表，就会自动切换广告图片，这样的效果对移动端本就不大的屏幕来说，无疑是很精妙的考虑，这样的效果是怎么实现的呢？ 你可以点击这里： QQ空间广告示意demo…]]></description><link>https://knownsec-fed.com/2018-02-23-css3-clip-path-yong-fa-jie-shao/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-02-23-css3-clip-path-yong-fa-jie-shao/</guid><pubDate>Fri, 23 Feb 2018 10:07:47 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-1c2d6b76dfae6405f62a3a1abd482ee2-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMEAgX/xAAVAQEBAAAAAAAAAAAAAAAAAAACA//aAAwDAQACEAMQAAABuwmeseqLA//EABoQAQADAAMAAAAAAAAAAAAAAAEDERITITP/2gAIAQEAAQUCF1ydDZI1MLiHy//EABcRAQEBAQAAAAAAAAAAAAAAAAEAAjH/2gAIAQMBAT8BdMcv/8QAFhEBAQEAAAAAAAAAAAAAAAAAAAER/9oACAECAQE/AcV//8QAGBAAAwEBAAAAAAAAAAAAAAAAAAERIYH/2gAIAQEABj8CaWws4UUG7uCP/8QAHBAAAgICAwAAAAAAAAAAAAAAAREAIUFREDGx/9oACAEBAAE/IUAIdiTHJ4NvYrpei4ZoQ01mX0tZ8H//2gAMAwEAAgADAAAAENPf/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAERcf/aAAgBAwEBPxCiaNUZ/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAR/9oACAECAQE/EA5DFL//xAAcEAEAAgMBAQEAAAAAAAAAAAABABEhMUFhUZH/2gAIAQEAAT8QM/IM2NcIYzrBGRfRVleSutHwfsChTUq63NI4Cywzi5u9RX1tn//Z&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;CSS3 clip-path 用法介绍&quot;
        title=&quot;&quot;
        src=&quot;/static/header-1c2d6b76dfae6405f62a3a1abd482ee2-d6978.jpeg&quot;
        srcset=&quot;/static/header-1c2d6b76dfae6405f62a3a1abd482ee2-527f0.jpeg 300w,
/static/header-1c2d6b76dfae6405f62a3a1abd482ee2-9a7cd.jpeg 600w,
/static/header-1c2d6b76dfae6405f62a3a1abd482ee2-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
     ## 一、基本概念&lt;/p&gt;
&lt;p&gt;刷新 QQ 空间动态时，发现一则广告，随着用户上下滑动动态列表，就会自动切换广告图片，这样的效果对移动端本就不大的屏幕来说，无疑是很精妙的考虑，这样的效果是怎么实现的呢？&lt;/p&gt;
&lt;p&gt;你可以点击这里：&lt;a href=&quot;http://sandbox.runjs.cn/show/9mjidsy2&quot;&gt;QQ空间广告示意demo&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;接下来就说说这个效果的具体实现思路：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;将两张图片通过定位，相对于图片容器堆叠在一起；&lt;/li&gt;
&lt;li&gt;在图片容器的左上角或右下角选取一个圆心，绘制一个圆，不断加大圆的半径来显示第二张图片；&lt;/li&gt;
&lt;li&gt;上划下拉时，根据滑动速度动态改变圆的半径；&lt;/li&gt;
&lt;li&gt;当图片容器距屏幕顶部或底部的距离为 0 时，则相应的改变图片堆叠顺序及圆心位置。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;在图片上绘制圆，为什么就能显示出第二张图片呢？说到这里，就不得不说一下咱们今天的主角 clip-path，引用 MDN 上的描述：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;clip-path属性可以创建一个只有元素的部分区域可以显示的剪切区域。区域内的部分显示，区域外的隐藏。剪切区域是被引用内嵌的URL定义的路径或者外部svg的路径，或者作为一个形状例如circle().。clip-path属性代替了现在已经弃用的剪切 clip属性。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;clip-path 的含义就是裁剪路径，通过指定的闭合路径或者形状，甚至是 SVG 中 clipPath 标签定义的形状，裁剪出部分需要保留的区域，这样网页中的布局实现可以是多种多样的。&lt;/p&gt;
&lt;p&gt;在 clip-path 出现之前，CSS2.1 中的 clip 属性也有裁剪的效果，但是它只支持矩形，而且只对 position:absolute 或者 position:fixed 的元素生效，使用方式如下：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;clip: rect(60px, 60px, 60px, 60px); // 标准写法
clip: rect(60px  60px  60px  60px); // 兼容 ie 及 火狐浏览器&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;注意: rect 参数的顺序为 top、right、botton、left&lt;/p&gt;
&lt;p&gt;所有主流浏览器都支持 clip 属性，在雪碧图（ CSS Sprite ）的展示仍然有它的用武之地，但是由于 clip 属性的局限性， clip 已经被 clip-path 代替。平常开发中我们可以使用 border、border-radius 等属性制作三角形、圆或圆角矩形等简单图案，clip-path 为我们提供了更多的可能，结合 SVG 的 path、animate 等标签可以制作更多的有趣的图案。&lt;/p&gt;
&lt;h2&gt;二、用法实践&lt;/h2&gt;
&lt;p&gt;clip-path 属性可以裁剪出很多图形，circle、ellipse、polygon、inset，同时也可以使用动画和 SVG 的 clipPath 标签。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;圆 circle&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;clip-path: circle(25% at 50% 50%);&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;椭圆 ellipse&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;clip-path: ellipse(25% 25% at 50% 50%);&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;inset&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;clip-path: inset(35% 35% 35% 35% round 0 70% 0 70%);&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;多边形 polygon&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;clip-path: polygon(50% 0, 25% 50% ,75% 50%);&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;你可以点击这里：&lt;a href=&quot;http://sandbox.runjs.cn/show/gdcpiqf5&quot;&gt;clip-path示意demo&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;url&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-html&quot;&gt;&lt;code&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;section&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;container&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;img01.jpg&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;contract&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;img&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;img02.jpg&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;section&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;svg&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;height&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;0&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;0&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;clipPath&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;clip02&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;circle&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;cx&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;400&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;cy&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;210&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;r&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;0&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;animate&lt;/span&gt;
        &lt;span class=&quot;token attr-name&quot;&gt;attributeType&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;CSS&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token attr-name&quot;&gt;attributeName&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;r&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token attr-name&quot;&gt;values&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;0;480;0&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token attr-name&quot;&gt;dur&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;9s&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token attr-name&quot;&gt;repeatCount&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;2&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;circle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;clipPath&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;svg&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;.contract {
  clip-path: url(#clip02);
  z-index:1;
}&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;值得说明的是使用 SVG 的 clipPath 标签可以包裹 animate，其中 animate 标签的 attributeName 是指设置圆的半径，values 可以设置动画的帧，可以有多个值用分号分割，dur 是指动画的持续时间，repeatCount 是指动画的次数。&lt;/p&gt;
&lt;h3&gt;兼容性&lt;/h3&gt;
&lt;p&gt;目前 IE 和 Edge 都不支持这个属性。Firefox 仅部分支持 clip-path，部分支持是指只支持形状和 URL(#path) 内联SVG的语法。Chrome、Safari 和 Opera 需要使用 -webkit- 的前缀兼容此属性。不支持外部的 SVG 形状。更多兼容信息可以点击这里查看 &lt;a href=&quot;https://caniuse.com/#search=clip-path&quot;&gt;clip-path 浏览器兼容情况&lt;/a&gt;。&lt;/p&gt;
&lt;h2&gt;三、经验总结&lt;/h2&gt;
&lt;p&gt;使用 URL(#path) 内联SVG 的方式，我们可以很轻易的裁剪出复杂的形状，也能够包含一些形象生动的动画效果，比如在扑克游戏出牌下注的倒计时上添加扇形遮罩，或是在矩形边缘添加倒计时进度，加载中的动画等等，都能够使用clip-path 属性巧妙的实现，同时在使用 clip-path 属性可以裁剪图形时可以灵活的使用相对单位。&lt;/p&gt;
&lt;h2&gt;四、参考链接&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://developer.mozilla.org/zh-CN/docs/Web/CSS/clip-path&quot;&gt;clip-path&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://species-in-pieces.com/&quot;&gt;species-in-pieces&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.zhangxinxu.com/wordpress/2014/12/css3-svg-clip-path/&quot;&gt;CSS3/SVG clip-path路径剪裁遮罩属性简介&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[读书笔记：可视化是一种艺术 -《不只是美：信息图表设计原理与经典案例》序章]]></title><description><![CDATA[…]]></description><link>https://knownsec-fed.com/2018-02-23-du-shu-bi-ji-ke-shi-hua-shi-yi-zhong-yi-shu-bu-zhi-shi-mei-xin-xi-tu-biao-she-ji-yuan-li-yu-jing-dian-an-li-xu-zhang/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-02-23-du-shu-bi-ji-ke-shi-hua-shi-yi-zhong-yi-shu-bu-zhi-shi-mei-xin-xi-tu-biao-she-ji-yuan-li-yu-jing-dian-an-li-xu-zhang/</guid><pubDate>Fri, 23 Feb 2018 08:38:03 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-7bcc04033704065f31ef0c3b7993bd04-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAEEAgP/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAABm3N2sYw//8QAGRAAAgMBAAAAAAAAAAAAAAAAABACERIx/9oACAEBAAEFAumSlBf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAYEAACAwAAAAAAAAAAAAAAAAAAASAyQf/aAAgBAQAGPwLCyj//xAAcEAACAQUBAAAAAAAAAAAAAAAAATEQEUFhgXH/2gAIAQEAAT8hW6estwztKIdHJ//aAAwDAQACAAMAAAAQE9//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAgEBPxBn/8QAGxABAAICAwAAAAAAAAAAAAAAAQARITFBYYH/2gAIAQEAAT8QWVVeqDJx3qNXcSaZqlNsz//Z&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;读书笔记：可视化是一种艺术 -《不只是美：信息图表设计原理与经典案例》序章&quot;
        title=&quot;&quot;
        src=&quot;/static/header-7bcc04033704065f31ef0c3b7993bd04-d6978.jpeg&quot;
        srcset=&quot;/static/header-7bcc04033704065f31ef0c3b7993bd04-527f0.jpeg 300w,
/static/header-7bcc04033704065f31ef0c3b7993bd04-9a7cd.jpeg 600w,
/static/header-7bcc04033704065f31ef0c3b7993bd04-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h2&gt;表达与挖掘的相互关系&lt;/h2&gt;
&lt;p&gt;在看到这个主题时，相信大多数的同学会和我第一次看到一样觉得数据表达与挖掘之间貌似没有什么关系，可是当我读完这部分之后发现并不是这样的。&lt;/p&gt;
&lt;p&gt;在一开始，作者就提出，我们的大脑是有创建并理解不同程度抽取的可视化表达的能力，而这些可视化表达式对数据、概念、关系以及地理位置编码后的图表。这句话读起来可能会有点绕，简单的来说这里作者就提出我们的大脑会对这些可视化图表进行不同程度的抽取，也就是说信息挖掘，这里就隐隐的点出了表达与挖掘之间的关系。&lt;/p&gt;
&lt;p&gt;后面作者解释道，&lt;strong&gt;大脑不仅仅处理眼睛所获得的信息，也产生心里视觉图像，通过这些图像我们进行推断并采取正确的行动。&lt;/strong&gt;这也是说明了我们在看图表所表达的事情的时候其实我们的大脑已经默认的帮我们进行了一些挖掘工作，当然这仅仅只是说在查看简单图表的时候。比如一个柱状图，折线图，我们可以轻易地看出其突出点，但是如果我们看的是一个复杂的图表，我们就需要动脑去思考图表表达的是什么意思，这就是挖掘。&lt;/p&gt;
&lt;h2&gt;信息图表与可视化的统一共存&lt;/h2&gt;
&lt;p&gt;接下来作者提出，&lt;strong&gt;信息图表与可视化的统一共存&lt;/strong&gt;这一观点。想象两根平行线，上面这根线左边标注“信息图表”，右边标注“可视化”，下面那根左边标注“表达”，右边标注“挖掘”。如图1，所有的图表都代表数据并允许一定程度的挖掘。一些图表几乎全是表达，所以只能够对其进行有限的挖掘，如图2，我们认为他们偏向与信息图表，而其他的则更多与让读者自己分析展示的内容，在我们的直线上他们偏向于可视化，如图3，在读者花费一定时间分析后，能够找出其模式并发现不同的信息。所有的信息图表和可视化都有表达和挖掘的成分：表达信息，同时也利于读者从不同角度分析内容。这也就诠释了表达与挖掘之间的关系，还有很多的例子，大家可以去找来进行相应的分析试试。&lt;/p&gt;
&lt;div class=&quot;img-box&quot;&gt;
  
  &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/recorder1-1-c39f684360eba804dd2027b9e577271d-21a29.png&quot; style=&quot;display: block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
  
  &lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 51.87747035573123%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABuElEQVQoz02S7Y7TMBBF+/4PskJC7IKgLS2IFU3j77HjJG3aXXiWyx23i/bHkR3Lc2bGk9Xr6PA6ObyMFtdquXpcuF+qIQ5nnp24n4vBlImupcc89DgNhnDl2cL9ZbBY/ZkDhYEirrNwL7hOkdKApREpDQz0FHOtnkJLIZMx+YmS82Bb8gtZ/Z0TDrtvWD9+xObpE1LfITsDcT0SibaHN0fCvbNI3sF0B+y/b3D8/YwqESOZJGDOQStMqJ5Bh2ccfuyQGFhjQAkeOYSGkHQnesWj7zo43s16lwykJgpfpsS3E5Zb+A6FWYQZhZlvDKRIJgU5ZQqUtzPhWWzSIWmlicJRcGa5SxGiwszyVZopvAW9IRQln1ixwBwN6RD4BIUyFVYVXmvEkiOOP/f4tV0j8JJYg2gMgrFsy7zDwhJte7ve4MPDA75++YzKrkprmcJLCU3Y7XfYPj3e35AZSeEFIfk9WqmexwRvXUukFZakwojVIhx95MjZ8pmZJn0LBozp1vLQ2s73ltP/4QgT3tDBcYDRt8GsztE24YkfM5kYNPJiTRzInaIiTjbwtwnONXTSqeEgRKX6Z/wDj/ykJZCtLZcAAAAASUVORK5CYII=&amp;apos;); background-size: cover; display: block;&quot;&gt;
      &lt;img class=&quot;gatsby-resp-image-image&quot; style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot; alt=&quot;recorder1 1&quot; title=&quot;&quot; src=&quot;/static/recorder1-1-c39f684360eba804dd2027b9e577271d-abe1c.png&quot; srcset=&quot;/static/recorder1-1-c39f684360eba804dd2027b9e577271d-10046.png 300w,
/static/recorder1-1-c39f684360eba804dd2027b9e577271d-3c4a3.png 600w,
/static/recorder1-1-c39f684360eba804dd2027b9e577271d-abe1c.png 1200w,
/static/recorder1-1-c39f684360eba804dd2027b9e577271d-1c9b7.png 1800w,
/static/recorder1-1-c39f684360eba804dd2027b9e577271d-21a29.png 2024w&quot; sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    
  &lt;span style=&quot;
      display: block;
      width: 100%;
      line-height: 30px;
      text-align: center;
    &quot;&gt;&amp;#x56FE;1 - &amp;#x8868;&amp;#x8FBE;&amp;#x4E0E;&amp;#x6316;&amp;#x6398;&amp;#x5173;&amp;#x7CFB;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;img-box&quot;&gt;
  
  &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/recorder1-2-f221df1a7e8fc594cdf6d843ff588c5a-ef6ef.png&quot; style=&quot;display: block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
  
  &lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; ; max-width: 591px; margin-left: auto; margin-right: auto;&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 65.65143824027074%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAACGUlEQVQ4y41Tz2sTURDev8ijCKKHeujBm2gFoQdPXi1IwR8g3uwPBRF6qAepHhQP1VqKAWOP1mjS4jZoNUpDYhOy2202m/2R3bdvP9+bt7tJWw8OfDAzu/PN9+bN05IkQcw54jiG9LnwCdL/D8gaaao2gSYDxhjCMMw/EKB+PGoyHyecIC1OGPzAy+u1rENGdqg4JZfFo2pGLRJiHMdBFEWKkLqI40qV0h5/L+LaxhJ27PY/FfYiH3PVAmar72CHfqp6KCAnzDrcLC1ibHUKFfMnxU3XQmFvG9/sPYoNv4vLxXuYEJC+NC5OkKnXeHoRWSe7dhdm5Tx8e5NyK/VPOPH6Omb0ZYpZaMLavooDgVj4StkIoVSnZqCGyn7dQrR5DrxXprhvFFAvjcOqL6ji0ACrXiFIPyPMTMtWJesQ1O7ALY8jTgm5uQZWPoO48UjFgsTTJwl8RGFOONyhNLl7A9BPA06JRpDsvwXfOomk+UANP+oAOxcUhE+5o4TyhgeDASXW1j9g4fkzNFotivUfvzHz5CWKHytqBJ6LF29eEVzhj67XsT2UNr3k4extG59rao1WvwxwarqLhysexR2b49JcHxdn+zBsnt5ycniGwyMnmF82MTnfhL4b0A/rX11M3G/g6Xu1Ivs9hqnFtkALlsNywmMKs4uxbB+Nto0gZNQgCGP86Tjo+0y9GvFejQMfZtcnH0Q2fGV/AUA3zp1E6CcnAAAAAElFTkSuQmCC&amp;apos;); background-size: cover; display: block;&quot;&gt;
      &lt;img class=&quot;gatsby-resp-image-image&quot; style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot; alt=&quot;recorder1 2&quot; title=&quot;&quot; src=&quot;/static/recorder1-2-f221df1a7e8fc594cdf6d843ff588c5a-ef6ef.png&quot; srcset=&quot;/static/recorder1-2-f221df1a7e8fc594cdf6d843ff588c5a-a5f2a.png 300w,
/static/recorder1-2-f221df1a7e8fc594cdf6d843ff588c5a-ef6ef.png 591w&quot; sizes=&quot;(max-width: 591px) 100vw, 591px&quot;&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    
  &lt;span style=&quot;
      display: block;
      width: 100%;
      line-height: 30px;
      text-align: center;
    &quot;&gt;&amp;#x56FE;2 - &amp;#x7B80;&amp;#x5355;&amp;#x67F1;&amp;#x72B6;&amp;#x56FE;&lt;/span&gt;
&lt;/div&gt;
&lt;div class=&quot;img-box&quot;&gt;
  
  &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/recorder1-3-45cab3c2680569e6c0c634737ce9a32e-71258.jpg&quot; style=&quot;display: block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
  
  &lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; ; max-width: 382px; margin-left: auto; margin-right: auto;&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 70.68062827225131%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3KoB/8QAFxAAAwEAAAAAAAAAAAAAAAAAAAEQEf/aAAgBAQABBQKIy//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEABj8CX//EABgQAAMBAQAAAAAAAAAAAAAAAAABETFB/9oACAEBAAE/Iam2WcYkRrSQTP/aAAwDAQACAAMAAAAQo8//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAbEAACAwEBAQAAAAAAAAAAAAAAIQERUTFBYf/aAAgBAQABPxDgKr3ThJIPplKsJoTeiGf/2Q==&amp;apos;); background-size: cover; display: block;&quot;&gt;
      &lt;img class=&quot;gatsby-resp-image-image&quot; style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot; alt=&quot;recorder1 3&quot; title=&quot;&quot; src=&quot;/static/recorder1-3-45cab3c2680569e6c0c634737ce9a32e-71258.jpg&quot; srcset=&quot;/static/recorder1-3-45cab3c2680569e6c0c634737ce9a32e-f587f.jpg 300w,
/static/recorder1-3-45cab3c2680569e6c0c634737ce9a32e-71258.jpg 382w&quot; sizes=&quot;(max-width: 382px) 100vw, 382px&quot;&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    
  &lt;span style=&quot;
      display: block;
      width: 100%;
      line-height: 30px;
      text-align: center;
    &quot;&gt;&amp;#x56FE;3 - Stefanie Posavec &amp;#x7684;&amp;#x201C;&amp;#x6587;&amp;#x5B66;&amp;#x6709;&amp;#x673A;&amp;#x4F53;&amp;#x201D;&lt;/span&gt;
&lt;/div&gt;
&lt;h2&gt;美感源于优雅的实用性&lt;/h2&gt;
&lt;p&gt;作者在阐明了信息图表与可视化的统一共存之后立马指出了，&lt;strong&gt;图表、图解和地图不仅仅是用于欣赏的工具，更是用于解读和详细分析的工具。&lt;/strong&gt;这句话的意思就是，信息图表首要目的不是满足眼睛的感官，而是&lt;strong&gt;可读性&lt;/strong&gt;，但是很多人在实际操作中却往往会忽视这一个重要的规则，要么就是将大量数据如乱麻一般展示，或者就是展示错误数据，数据之间并不能反映出一些客观事实。&lt;/p&gt;
&lt;p&gt;作者在这里使用了一个他自己制作的一张图，来向我们展示了一些复杂的事情。如图4，这张图上的彩色折线如同历史标记一般，因为他揭示了两种变量之间的关系。这里补充一下背景知识：Lula执政期间，采取几项收入分配政策后，经济取得了持续稳定的增长；Jose Sarney和Fernando Collor执政期间，经济增长缓慢，不均等性无规律上下波动；Fernndo Henrique Cardoso上台后，采取一系列慰问措施，使得巴西走出了通货膨胀的黑洞。&lt;/p&gt;
&lt;p&gt;在这个例子中，作者仅仅使用了一条简单的折线图以及折线图上面的颜色进行划分，就向我们展示了巨大的信息量，从历史出发，到每一任领导人的执政方针，以及年代国情，这张图上面展示的东西太多太多，为了能够跟上作者的思想，我还专门去查了这些领导人以及当时巴西的国情，我想这就是我对这张图的一个挖掘过程吧。&lt;/p&gt;
&lt;div class=&quot;img-box&quot;&gt;
  
  &lt;a class=&quot;gatsby-resp-image-link&quot; href=&quot;/static/recorder1-4-da0e3e24cd0cf8e989e145c991135fa9-c11f4.png&quot; style=&quot;display: block&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;
  
  &lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; ; max-width: 1176px; margin-left: auto; margin-right: auto;&quot;&gt;
    &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 78.91156462585035%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAADLklEQVQ4yy1Ta3eiSBTk//+D2Uk2k0nGOIJvQZGHCAgIiOAramZyNtmzv6O2bjsf6nTTtnXr1q3W/rvu8fm6xcd5i+suQ50tCB/1eoEt19N2RSQKxyrGuclw2a9x3ef4uNb4fGvwcakVPq8NtH8vO5x5+Vwn2BdLNOsAZeIij+YK2XKGlEiCKVa+pVY5X0c29psY+zLC71OpyBThx6XBkT8cyhBNHqAmNomHNJhh6YyIMSLPhD8bIJgPkYW2KpDHDkmloI3LLsc/f1Rqb7sCp80Kr39aEtKmCBWqLLiRzkeIfBOZEEQOUpLmLHpi+2eSXQ8FVVZ4p23apRE/CrwfK7zWKd4OJf1KcWCBPf0rVh6q9RIFCeoyRpnSW1pTFxHPA7zST+lKcZwraML867jBbxLuRFXu40ii826NIvWxmA/UKmQRPfTsIWL66E77CNwxVtyLl8LxftqwZSr6Rcj0tpxsU3Iw4mmdYcd1yyIbnld5CMfqYtxrwRq2YbTuYbzcw5katOaWhushh3alB0J4pI/pckoPlzhVEb+XbDlRpE0pypdwZ31F1O98gzVoo9v+G/ZEVwOStvebEJoQNcxeyRjk8fw2wWCMxB9hJXt6l8UeSt4RwoH+HXrrDkP9ifiOsfGE0J2gIKnkVosYhcQjQWAxXw49cenNjJjAY1Q8e6B8E2Kfd7vtB+hsddz7oWD2W1iIr94EycKClnFTen2ktoF1OKfxDC4V5bHLnDFrrBzxjmRQhiCFhFjUymBcqwfH7DJaQ4SMmFatfDScYrVyKdtVKgUqtMxbwoCnqpAJ19RJYHDyN3KPhM6kC3vU4drBgkU0Z6QjmA3Vh0ODfa4W2/CmPcSMibyS0DVvyngm565pYD7uwBaQbMoBWf0XmEyAFjkme5+pdxrxT+JFQE8C+/bsxB/xUlp0LIEQiiodXU58+PMRo84j+u1v6L08QCvpVxG5yAL79vhprDw18cxnSzMqsCcGJpI/KhEVw45M9xmdp68YkFB/vkP78QuMp7tby4spJ0kvpr0XeFQgbczHulIx6nKa3RZDTAXtR6p6UATGj3tFoj/L+hd+ct/h+j8kBQx1cYHPXQAAAABJRU5ErkJggg==&amp;apos;); background-size: cover; display: block;&quot;&gt;
      &lt;img class=&quot;gatsby-resp-image-image&quot; style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot; alt=&quot;recorder1 4&quot; title=&quot;&quot; src=&quot;/static/recorder1-4-da0e3e24cd0cf8e989e145c991135fa9-c11f4.png&quot; srcset=&quot;/static/recorder1-4-da0e3e24cd0cf8e989e145c991135fa9-83625.png 300w,
/static/recorder1-4-da0e3e24cd0cf8e989e145c991135fa9-8d635.png 600w,
/static/recorder1-4-da0e3e24cd0cf8e989e145c991135fa9-c11f4.png 1176w&quot; sizes=&quot;(max-width: 1176px) 100vw, 1176px&quot;&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    
  &lt;span style=&quot;
      display: block;
      width: 100%;
      line-height: 30px;
      text-align: center;
    &quot;&gt;&amp;#x56FE;4 - &amp;#x5DF4;&amp;#x897F;&amp;#x7ECF;&amp;#x6D4E;&amp;#x589E;&amp;#x957F;&amp;#x4E0E;&amp;#x793E;&amp;#x4F1A;&amp;#x4E0D;&amp;#x5747;&amp;#x7B49;&amp;#x6027;&amp;#x5173;&amp;#x7CFB;&lt;/span&gt;
&lt;/div&gt;
&lt;h2&gt;序章结语&lt;/h2&gt;
&lt;p&gt;在读完序章之后，突然发现原来可视化是一个丰富的但是也是复杂的一个学问，一门艺术。在平时工作时注意到的点以及没有注意到的点，都被作者一一抓住并且做了解释。可视化不仅仅只是展示数据那么简单，首先需要进行数据的表达，根据实际需要，剖析数据，找出关联数据，将其按照一定的方式进行展示，接下来是对展示的数据进行挖掘，对于表达与挖掘的关系，我们也是需要深入的理解，多维的表达相应的能够挖掘到隐藏更深的问题或者发现，我们在挖掘数据时，可以进行多维数据比较展示，这样反应的事实也许更接近于现实。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[每个 node 应用可能存在的 timing-attack 安全漏洞]]></title><description><![CDATA[前言 假如你在项目中遇到过 eslint 报错  Potential timing attack  ，不可忽视！这是一个涉及到安全的问题：时序攻击。 eslint 报错原因 首先 eslint 引入了一个叫做 eslint-plugin-security…]]></description><link>https://knownsec-fed.com/2018-02-23-mei-ge-node-ying-yong-ke-neng-cun-zai-de-timing-attack-an-quan-lou-dong/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-02-23-mei-ge-node-ying-yong-ke-neng-cun-zai-de-timing-attack-an-quan-lou-dong/</guid><pubDate>Fri, 23 Feb 2018 06:07:59 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-b6620fa1c67ec6dc84e727023c85be4d-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAIBAwX/xAAXAQADAQAAAAAAAAAAAAAAAAAAAQID/9oADAMBAAIQAxAAAAHcQUVZJrH/xAAYEAADAQEAAAAAAAAAAAAAAAAAAQIQIf/aAAgBAQABBQLhJUKdZ//EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAEDAQE/AUf/xAAVEQEBAAAAAAAAAAAAAAAAAAAAAf/aAAgBAgEBPwFK/8QAFxAAAwEAAAAAAAAAAAAAAAAAAAERIP/aAAgBAQAGPwIdhFj/xAAcEAEBAAEFAQAAAAAAAAAAAAABEQAQITFBUZH/2gAIAQEAAT8hkFn3EME+YgUk731bec//2gAMAwEAAgADAAAAEDzP/8QAFxEBAQEBAAAAAAAAAAAAAAAAAQARIf/aAAgBAwEBPxBOyNv/xAAWEQEBAQAAAAAAAAAAAAAAAAAAARH/2gAIAQIBAT8QVx//xAAbEAEBAAMAAwAAAAAAAAAAAAABEQAhMUFRkf/aAAgBAQABPxBHRMOxkUAYht+5WAKqrr5xV6uGnWsQanXvP//Z&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;每个 node 应用可能存在的 timing-attack 安全漏洞&quot;
        title=&quot;&quot;
        src=&quot;/static/header-b6620fa1c67ec6dc84e727023c85be4d-d6978.jpeg&quot;
        srcset=&quot;/static/header-b6620fa1c67ec6dc84e727023c85be4d-527f0.jpeg 300w,
/static/header-b6620fa1c67ec6dc84e727023c85be4d-9a7cd.jpeg 600w,
/static/header-b6620fa1c67ec6dc84e727023c85be4d-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h2&gt;前言&lt;/h2&gt;
&lt;p&gt;假如你在项目中遇到过 eslint 报错 &lt;span style=&quot;color: red;&quot;&gt;Potential timing attack&lt;/span&gt; ，不可忽视！这是一个涉及到安全的问题：时序攻击。&lt;/p&gt;
&lt;h2&gt;eslint 报错原因&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;首先&lt;code&gt;eslint&lt;/code&gt;引入了一个叫做&lt;code&gt;eslint-plugin-security&lt;/code&gt;的插件，这个插件有助于识别出潜在的安全问题，但同时也会产生误报的问题，附上插件 &lt;a href=&quot;https://github.com/nodesecurity/eslint-plugin-security/blob/master/rules/detect-possible-timing-attacks.js&quot;&gt;源码地址&lt;/a&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;  &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; keywords &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;((&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&apos;password&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&apos;secret&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&apos;api&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&apos;apiKey&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&apos;token&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&apos;auth&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&apos;pass&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token string&quot;&gt;&apos;hash&apos;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;)|(&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;))&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; re &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;RegExp&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;^&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; keywords &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;$&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;im&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;containsKeyword&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;type &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Identifier&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;re&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;


  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;test&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;operator &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;==&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;test&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;operator &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;===&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;test&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;operator &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;!=&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;test&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;operator &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;!==&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 在这里 console 出错误&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;首先这个插件会判断本次的运算符是否为 &lt;code&gt;==、===、！=、！==&lt;/code&gt;其中一种，其次检查标识符（字段名）是否包含特殊字符串&lt;code&gt;password、secret、api、apiKey、token、auth、pass、hash&lt;/code&gt;，如果同时满足二者情况，eslint 就会编译报错 &lt;span style=&quot;color: red;&quot;&gt;Potential timing attack&lt;/span&gt;。&lt;/p&gt;
&lt;h2&gt;攻击定义&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;timing attack&lt;/code&gt;：时序攻击，属于侧信道攻击 / 旁路攻击，侧信道攻击指的是利用信道外的信息，比如加解密的数据、数据比较时间、密文传输的流量和途径进行攻击的方式，相当于是“旁敲侧击”。&lt;/p&gt;
&lt;h3&gt;攻击点&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;首先讲讲&lt;code&gt;js&lt;/code&gt;比较两个字符串大小的原理：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;判断字符串长度是否为&lt;code&gt;0&lt;/code&gt;，如果为&lt;code&gt;0&lt;/code&gt;，就可以直接比较出结果；反之，进入到第二步。&lt;/li&gt;
&lt;li&gt;字符串是由一个个字符组成，通过每个字符的&lt;code&gt;charCode&lt;/code&gt;进行比较。&lt;/li&gt;
&lt;li&gt;在第二步中，只要出现一个字符不同，就 &lt;code&gt;return false&lt;/code&gt;，剩余的字符不再做比较。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;单个字符的比较是很快的，攻击者可以细化测量时间精度到微秒，通过响应时间的差异推算出是从哪一个字符开始不用的，这样一次次实验或者用 Python 写个脚本去跑，就可以试出正确的密码，密码破解的难度也降低了不少。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;容易受攻击的写法&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;user&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;password &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; password&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; state&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 登录成功&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h3&gt;防御措施&lt;/h3&gt;
&lt;p&gt;每次不同的输入会造成处理时间的不同。为了防止它，我们需要使字符串比较花费相同的时间量，无论输入的密码是什么。&lt;/p&gt;
&lt;h4&gt;不容易受攻击的写法&lt;/h4&gt;
&lt;p&gt;系统中每一个密码的长度是固定的，每次比较密码是否相同时，使用正确密码的长度作为比较次数，使用异或比较每一个字符的 Unicode 编码是否相等，并且把每一次的比较结果存放到一个数组中，最后再判断数组的每一个元素是否为&lt;code&gt;0（为 0 表示两个字符相同）&lt;/code&gt;。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;  &lt;span class=&quot;token comment&quot;&gt;// psdReceived 为用户输入密码；&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// psdDb 为系统中存储的正确用户密码&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;correctUser&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;psdDb&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; psdReceived&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; state &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; psdDb&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;length&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;psdReceived&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;psdReceived&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;charCodeAt&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;^&lt;/span&gt; psdDb&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;charCodeAt&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;length &lt;span class=&quot;token operator&quot;&gt;!==&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;every&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;item &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;item&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h4&gt;三方包推荐&lt;/h4&gt;
&lt;p&gt;也可以使用 &lt;a href=&quot;https://github.com/hapijs/cryptiles&quot;&gt;cryptiles&lt;/a&gt; 这个 npm 模块来解决这个问题&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; cryptiles &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;cryptiles&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; cryptiles&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fixedTimeCimparison&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;passwordFromDb&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; passwordReceived&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;</content:encoded></item><item><title><![CDATA[咱来聊聊 Vue - compile]]></title><description><![CDATA[在 Vue 里，模板编译也是非常重要的一部分，里面也非常复杂，这次探究不会深入探究每一个细节，而是走一个全景概要，来吧，大家和我一起去一探究竟。 初体验 我们看了 Vue 的初始化函数就会知道，在最后一步，它进行了  vm.$mount(el)  的操作，而这个 $mount…]]></description><link>https://knownsec-fed.com/2018-02-09-zan-lai-liao-liao-vuecompile/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-02-09-zan-lai-liao-liao-vuecompile/</guid><pubDate>Fri, 09 Feb 2018 08:07:44 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-f0b08c7250e24c1bbc82345e98f547eb-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIB/8QAFgEBAQEAAAAAAAAAAAAAAAAAAAIE/9oADAMBAAIQAxAAAAG6xOID/8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQABBQJf/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAGBABAAMBAAAAAAAAAAAAAAAAAQARIDH/2gAIAQEAAT8hiBxvP//aAAwDAQACAAMAAAAQjC//xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAwEBPxCn/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGxAAAQQDAAAAAAAAAAAAAAAAAQARIUEgMWH/2gAIAQEAAT8QTRtTFCge4//Z&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;咱来聊聊 Vue - compile&quot;
        title=&quot;&quot;
        src=&quot;/static/header-f0b08c7250e24c1bbc82345e98f547eb-d6978.jpeg&quot;
        srcset=&quot;/static/header-f0b08c7250e24c1bbc82345e98f547eb-527f0.jpeg 300w,
/static/header-f0b08c7250e24c1bbc82345e98f547eb-9a7cd.jpeg 600w,
/static/header-f0b08c7250e24c1bbc82345e98f547eb-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;在 Vue 里，模板编译也是非常重要的一部分，里面也非常复杂，这次探究不会深入探究每一个细节，而是走一个全景概要，来吧，大家和我一起去一探究竟。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;初体验&lt;/h2&gt;
&lt;p&gt;我们看了 Vue 的初始化函数就会知道，在最后一步，它进行了 &lt;strong&gt;vm.$mount(el)&lt;/strong&gt; 的操作，而这个 $mount 在两个地方定义过，分别是在 &lt;strong&gt;entry-runtime-with-compiler.js(简称：eMount)&lt;/strong&gt; 和 &lt;strong&gt;runtime/index.js(简称：rMount)&lt;/strong&gt; 这两个文件里，那么这两个有什么区别呢？&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token comment&quot;&gt;// entry-runtime-with-compiler.js&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; mount &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Vue&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;prototype&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;$mount &lt;span class=&quot;token comment&quot;&gt;// 这个 $mount 其实就是 rMount&lt;/span&gt;
Vue&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;prototype&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function-variable function&quot;&gt;$mount&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  el&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; string &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; Element&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  hydrating&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; boolean
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Component &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; options &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;$options
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;options&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;render&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;template&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; render&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; staticRenderFns &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;compileToFunctions&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;template&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        shouldDecodeNewlines&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        shouldDecodeNewlinesForHref&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        delimiters&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; options&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;delimiters&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        comments&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; options&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;comments
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      options&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;render &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; render
      options&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;staticRenderFns &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; staticRenderFns
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; mount&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; el&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; hydrating&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;其实 eMount 最后还是去调用的 rMount，只不过在 eMount 做了一定的操作，如果你提供了 render 函数，那么它会直接去调用 rMount，如果没有，它就会去找你有没有提供 template，如果你没有提供 template，它就会用 el 去查询 dom 生成 template，最后通过编译返回了一个 render 函数，再去调用 eMount。&lt;/p&gt;
&lt;p&gt;从上面可以看出，最重要的一部分就是 compileToFunctions 这个函数，它最后返回了 render 函数，关于这个函数，它有点复杂，我画了一张图来看一看它的关系，可能会有误差，希望大侠们可以指出。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/compile-41dc70dd9a286a383a57a560d829cbc6-5f0c3.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1157px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 57.21694036300779%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAABIklEQVQoz22TB47FIAxEuf8903vvYfUsDeJHizTCNngyNo57nsd/cV2Xr+va53nuj+Ow2H3fAfjv+/7EAHlOBOA8Tztg7fvu13U1m1jbtj5NU0NZlnZOLgtywXEwjqPv+94Pw+CnaTIfhU3TmM/ZPM/hI8uyGIjzoa7rAhwlccCXIYAMYuzYB9jbtgVAVlWVz7LMdnwn2SRAroV8LZQpmb5CjFL1Elu9dQpwEckkqxwpBPFDSA0+cRECI6RPyKZvlIIPWVEURh6/qIj1WDwk1ZFnhHpVmo6ty1wEStRIiQQCcqgsSRITQMuMEBUEGB0lUzoPxU6cHRLuUiK+Zg8ijZzDoDQIRaadXtEGeogaJans7w9hhPFwfi9oWGP/vz8rJvwD1EJYZuDhn4kAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;compile&quot;
        title=&quot;&quot;
        src=&quot;/static/compile-41dc70dd9a286a383a57a560d829cbc6-5f0c3.png&quot;
        srcset=&quot;/static/compile-41dc70dd9a286a383a57a560d829cbc6-082e2.png 300w,
/static/compile-41dc70dd9a286a383a57a560d829cbc6-bfbf4.png 600w,
/static/compile-41dc70dd9a286a383a57a560d829cbc6-5f0c3.png 1157w&quot;
        sizes=&quot;(max-width: 1157px) 100vw, 1157px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h2&gt;编译三步走&lt;/h2&gt;
&lt;p&gt;看一下这个编译的整体过程，我们其实可以发现，最核心的部分就是在这里传进去的 baseCompile 做的工作：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;parse:&lt;/strong&gt; 第一步，我们需要将 template 转换成抽象语法树(AST)。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;optimizer:&lt;/strong&gt; 第二步，我们对这个抽象语法树进行静态节点的标记，这样就可以优化渲染过程。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;generateCode:&lt;/strong&gt; 第三步，根据 AST 生成一个 render 函数字符串。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;好了，我们接下来就一个一个慢慢看。&lt;/p&gt;
&lt;h3&gt;解析器&lt;/h3&gt;
&lt;p&gt;在解析器中有一个非常重要的概念 AST，大家可以去自行了解一下。&lt;/p&gt;
&lt;p&gt;在 Vue 中，ASTNode 分几种不同类型，关于 ASTNode 的定义在 &lt;strong&gt;flow/compile.js&lt;/strong&gt; 里面，请看下图：&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/astnode-6928ea6354e06a0777e78807a497ca38-68f50.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 773px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 86.9340232858991%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsSAAALEgHS3X78AAACH0lEQVQ4y5VUyVLbQBTU16UIGDBeMDbeF222JMubbNnB2AEqKSrhQiWcOOZCJYf8YOf1kCEmDtg5TM2ip1a/7h4Zh9UO/jUOKu21/X7Z3VhnbALTQEd1D+Zwjmo3RrLWQUr2um613ngJjHOi5AiQLwCeAPjwZ1do9N7hSACTUpMoS+3/MKz4E9TDGUqdSLGzowXcyVKBf/56h+svd9gpWIrxq4BssSggzf6ZGi0Z7niJweIagbDMNAPUumOU/WhN1xcBT9ujZ+2nGwEsYWkO5sgK4IHU7BadzRrqAjKkflxrQEqQkvmw2n7W5iqooV1McIgJ+7/ngjtUZnD/aJCLrBnCER2Lwp7n6YYvLG3slf4wNfhSyRujGsTi4EzNZEcDGJW0tJdthWrNczpNTVMClhKW9TAW00ZPWhpspdadKrGji0+Ir25gjc4Rnn1AJ76ALWtGhXM4/6gAc1ZPsWF0Hn5+x+39Pd6cmKojpeGJ3ZeiPo6lUK/JNu8MVGTK0gFNYoS86SXy9gB7YkhGWJKZZqda1hquDhZTQ13EL1OrnHxMsRY5msJauf3XbXnVZW0KDWGblWCCTKuLY7OHnBj09tTaDlAHm/pSBgKTFTNIcD4vOH20J4vtcsgXqJ87fq+AnGipDPNnl8rdXWHmT5f49uPhKasbfw4EZXs0g7Exh+fKEOYwK+dJCfdO3txeQw2q/zoMM+PDDNL5x9virbX8C0ca4eeABbVPAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;astnode&quot;
        title=&quot;&quot;
        src=&quot;/static/astnode-6928ea6354e06a0777e78807a497ca38-68f50.png&quot;
        srcset=&quot;/static/astnode-6928ea6354e06a0777e78807a497ca38-a72c5.png 300w,
/static/astnode-6928ea6354e06a0777e78807a497ca38-4e2cc.png 600w,
/static/astnode-6928ea6354e06a0777e78807a497ca38-68f50.png 773w&quot;
        sizes=&quot;(max-width: 773px) 100vw, 773px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;我们用一个简单的例子来说明一下：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-html&quot;&gt;&lt;code&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;demo&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;h1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;Latest Vue.js Commits&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;h1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;p&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;{{1 + 1}}&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;p&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;我们想一想这段代码会生成什么样的 AST 呢？&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/example-e5fd9070797706977dbc8c9b704b4edc-f3fa3.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 621px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 53.623188405797094%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAABo0lEQVQoz4VS2VbiUBDk+0R0RH1wISwSJQmBAEnYQQSViMuMc1yOx38tu1rAuD/U6U7f7rpVfZNYz5VBrGWdZUwZNlIS1z4gpWfz3Hjti88xJhaE8eJW0UO6UMHGHOkFDqrYFLDGuCl98blPhLxxy/Rgt05QbPRRCo9hSX4YDBUH9b6gp7W819WePSfEasZ6I4yzM982a9gvN4V0jODkAt3pX9SHERrHEUx/AMNtoXV6hR3LF4XVJeGffEwhiVhc2S+pnboMUyVJy50JnPYY1f4ZvMF0+c1z1qg6KbOrGVs5VCFJKD9f66kKt3uqFkvhCEaljYLUreZICU1/qLCFlD0k50y22kHO6yDBva3nHDjzvR3JoSkxUw6RFXuG2CfhoRIN1CJ3yEsL9dc9s54TwiPJ1XKxOYZ/fova5Abt2T1Gt8+aB9P/sPsRdoWERNwtsWMFqrDSO0Mv+odwfKmroKAE7TaiOwSXj2hc3MOfLeKD1prXT0gXa0jKfukmqQ/gqpqKqHS7E10HVeZpefHKbPoSsd/qO7Bvo+C+f+XfEO/7aeYFwzLrwvS+SOEAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;example&quot;
        title=&quot;&quot;
        src=&quot;/static/example-e5fd9070797706977dbc8c9b704b4edc-f3fa3.png&quot;
        srcset=&quot;/static/example-e5fd9070797706977dbc8c9b704b4edc-2b8c4.png 300w,
/static/example-e5fd9070797706977dbc8c9b704b4edc-4d703.png 600w,
/static/example-e5fd9070797706977dbc8c9b704b4edc-f3fa3.png 621w&quot;
        sizes=&quot;(max-width: 621px) 100vw, 621px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;我们这个例子最后生成的大概就是这么一棵树，那么 Vue 是如何去做这样一些解析的呢？我们继续看。&lt;/p&gt;
&lt;p&gt;在 parse 函数中，我们先是定义了非常多的全局属性以及函数，然后调用了 parseHTML 这么一个函数，这也是 parse 最核心的函数，这个函数会不断的解析模板，填充 root，最后把 root(AST) 返回回去。&lt;/p&gt;
&lt;h4&gt;parseHTML&lt;/h4&gt;
&lt;p&gt;在这个函数中，最重要的是 while 循环中的代码，而在解析过程中发挥重要作用的有这么几个正则表达式。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; attribute &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;^&lt;/span&gt;\s&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;^&lt;/span&gt;\s&lt;span class=&quot;token string&quot;&gt;&quot;&apos;&amp;lt;&gt;\/=]+)(?:\s*(=)\s*(?:&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;]*)&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;([^&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;+|([^\s&quot;&apos;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`]+)))?/
const ncname = &apos;[a-zA-Z_][\\w\\-\\.]*&apos;
const qnameCapture = `&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;$&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;ncname&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;\\&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;$&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;ncname&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`
const startTagOpen = new RegExp(`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;$&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;qnameCapture&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`)
const startTagClose = /^\s*(\/?)&gt;/
const endTag = new RegExp(`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;\\&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;$&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;qnameCapture&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;^&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;`&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; doctype &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token regex&quot;&gt;/^&amp;lt;!DOCTYPE [^&gt;]+&gt;/i&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; comment &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token regex&quot;&gt;/^&amp;lt;!\--/&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; conditionalComment &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token regex&quot;&gt;/^&amp;lt;!\[/&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;Vue 通过上面几个正则表达式去匹配开始结束标签、标签名、属性等等。&lt;/p&gt;
&lt;p&gt;关于 while 的详细注解我放在我&lt;a href=&quot;https://github.com/balancelove/readingNotes/blob/master/vue/while.md&quot;&gt;仓库&lt;/a&gt;里了，有兴趣的可以去看看。&lt;/p&gt;
&lt;p&gt;在 while 里，其实就是不断的去用 &lt;code&gt;html.indexOf(&apos;&amp;#x3C;&apos;)&lt;/code&gt; 去匹配，然后根据返回的索引的不同去做不同的解析处理：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;等于 0：&lt;/strong&gt;这就代表这是注释、条件注释、doctype、开始标签、结束标签中的某一种&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;大于等于 0：&lt;/strong&gt;这就说明是文本、表达式&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;小于 0：&lt;/strong&gt;表示 html 标签解析完了，可能会剩下一些文本、表达式&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;parse 函数就是不断的重复这个工作，然后将 template 转换成 AST，在解析过程中，其实对于标签与标签之间的空格，Vue 也做了优化处理，有些元素之间的空格是没用的。&lt;/p&gt;
&lt;p&gt;compile 其实要说要说非常多的篇幅，但是这里只能简单的理一下思路，具体代码还需要各位下去深扣。&lt;/p&gt;
&lt;h3&gt;优化器&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt; 从代码中的注释我们可以看出，优化器的目的就是去找出 AST 中纯静态的子树：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;把纯静态子树提升为常量，每次重新渲染的时候就不需要创建新的节点了&lt;/li&gt;
&lt;li&gt;在 patch 的时候就可以跳过它们&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;p&gt;optimize 的代码量没有 parse 那么多，我们来看看：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;optimize&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;root&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;ASTElement&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; options&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; CompilerOptions&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// 判断 root 是否存在&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;root&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// 判断是否是静态的属性&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// &apos;type,tag,attrsList,attrsMap,plain,parent,children,attrs&apos;&lt;/span&gt;
  isStaticKey &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;genStaticKeysCached&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;options&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;staticKeys &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// 判断是否是平台保留的标签，html 或者 svg 的&lt;/span&gt;
  isPlatformReservedTag &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; options&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;isReservedTag &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; no
  &lt;span class=&quot;token comment&quot;&gt;// 第一遍遍历: 给所有静态节点打上是否是静态节点的标记&lt;/span&gt;
 &lt;span class=&quot;token function&quot;&gt; markStatic&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;root&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// 第二遍遍历:标记所有静态根节点&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;markStaticRoots&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;root&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;下面两段代码我都剪切了一部分，因为有点多，这里就不贴太多代码了，详情请参考&lt;a href=&quot;https://github.com/balancelove/readingNotes/blob/master/vue/optimize.md&quot;&gt;我的仓库&lt;/a&gt;。&lt;/p&gt;
&lt;h4&gt;第一遍遍历&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;markStatic&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; ASTNode&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;isStatic&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;type &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;其实 markStatic 就是一个递归的过程，不断地去检查 AST 上的节点，然后打上标记。&lt;/p&gt;
&lt;p&gt;刚刚我们说过，AST 节点分三种，在 isStatic 这个函数中我们对不同类型的节点做了判断：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;isStatic&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; ASTNode&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; boolean &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;type &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// expression&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;type &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// text&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pre &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;hasBindings &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// no dynamic bindings&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// not v-if or v-for or v-else&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isBuiltInTag&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;tag&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// not a built-in&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;isPlatformReservedTag&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;tag&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// not a component&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isDirectChildOfTemplateFor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
    Object&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;keys&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;every&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;isStaticKey&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;可以看到 Vue 对下面几种情况做了处理：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;当这个节点的 type 为 2，也就是表达式节点的时候，很明显它不是一个静态节点，所以返回 false&lt;/li&gt;
&lt;li&gt;当 type 为 3 的时候，也就是文本节点，那它就是一个静态节点，返回 true&lt;/li&gt;
&lt;li&gt;如果你在元素节点中使用了 &lt;code&gt;v-pre&lt;/code&gt; 或者使用了 &lt;code&gt;&amp;#x3C;pre&gt;&lt;/code&gt; 标签，就会在这个节点上加上 pre 为 true，那么这就是个静态节点&lt;/li&gt;
&lt;li&gt;如果它是静态节点，那么需要它不能有动态的绑定、不能有 v-if、v-for、v-else 这些指令，不能是 slot 或者 component 标签、不是我们自定义的标签、没有父节点或者元素的父节点不能是带 v-for 的 template、 这个节点的属性都在 &lt;strong&gt;type,tag,attrsList,attrsMap,plain,parent,children,attrs&lt;/strong&gt; 里面，满足这些条件，就认为它是静态的节点。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;接下来，就开始对 AST 进行递归操作，标记静态的节点，至于里面做了哪些操作，可以到上面那个仓库里去看，这里就不展开了。&lt;/p&gt;
&lt;h4&gt;第二遍遍历&lt;/h4&gt;
&lt;p&gt;第二遍遍历的过程是标记静态根节点，那么我们对静态根节点的定义是什么，首先根节点的意思就是他不能是叶子节点，起码要有子节点，并且它是静态的。在这里 Vue 做了一个说明，如果一个静态节点它只拥有一个子节点并且这个子节点是文本节点，那么就不做静态处理，它的成本大于收益，不如直接渲染。&lt;/p&gt;
&lt;p&gt;同样的，我们在函数中不断的递归进行标记，最后在所有静态根节点上加上 staticRoot 的标记，关于这段代码也可以去上面的仓库看一看。&lt;/p&gt;
&lt;h3&gt;代码生成器&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;在这个函数中，我们将 AST 转换成为 render 函数字符串，代码量还是挺多的，我们可以来看一看。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;generate&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  ast&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; ASTElement &lt;span class=&quot;token operator&quot;&gt;|&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;void&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  options&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; CompilerOptions
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; CodegenResult &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// 这就是编译的一些参数&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; state &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CodegenState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;options&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// 生成 render 字符串&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; code &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; ast &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;genElement&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ast&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; state&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;_c(&quot;div&quot;)&apos;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    render&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`with(this){return &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;code&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;}`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    staticRenderFns&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;staticRenderFns
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;可以看到在最后代码生成阶段，最重要的函数就是 genElement 这个函数，针对不同的指令、属性，我们会选择不同的代码生成函数。最后我们按照 AST 生成拼接成一个字符串，如下所示：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;with&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;_c&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;div&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;attrs&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;id&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;demo&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;_c&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;h1&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;_v&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Latest Vue.js Commits&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;_e&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;在 render 这个函数字符串中，我们会看到一些函数，那么这些函数是在什么地方定义的呢？我们可以在 &lt;strong&gt;core/instance/index.js&lt;/strong&gt; 这个文件中找到这些函数：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token comment&quot;&gt;// v-once&lt;/span&gt;
target&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;_o &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; markOnce
&lt;span class=&quot;token comment&quot;&gt;// 转换&lt;/span&gt;
target&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;_n &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; toNumber
target&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;_s &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; toString
&lt;span class=&quot;token comment&quot;&gt;// v-for&lt;/span&gt;
target&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;_l &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; renderList
&lt;span class=&quot;token comment&quot;&gt;// slot&lt;/span&gt;
target&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;_t &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; renderSlot
&lt;span class=&quot;token comment&quot;&gt;// 是否相等&lt;/span&gt;
target&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;_q &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; looseEqual
&lt;span class=&quot;token comment&quot;&gt;// 检测数组里是否有相等的值&lt;/span&gt;
target&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;_i &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; looseIndexOf
&lt;span class=&quot;token comment&quot;&gt;// 渲染静态树&lt;/span&gt;
target&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;_m &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; renderStatic
&lt;span class=&quot;token comment&quot;&gt;// 过滤器处理&lt;/span&gt;
target&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;_f &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; resolveFilter
&lt;span class=&quot;token comment&quot;&gt;// 检查关键字&lt;/span&gt;
target&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;_k &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; checkKeyCodes
&lt;span class=&quot;token comment&quot;&gt;// v-bind&lt;/span&gt;
target&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;_b &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; bindObjectProps
&lt;span class=&quot;token comment&quot;&gt;// 创建文本节点&lt;/span&gt;
target&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;_v &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; createTextVNode
&lt;span class=&quot;token comment&quot;&gt;// 创建空节点&lt;/span&gt;
target&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;_e &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; createEmptyVNode
&lt;span class=&quot;token comment&quot;&gt;// 处理 scopeslot&lt;/span&gt;
target&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;_u &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; resolveScopedSlots
&lt;span class=&quot;token comment&quot;&gt;// 处理事件绑定&lt;/span&gt;
target&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;_g &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; bindObjectListeners
&lt;span class=&quot;token comment&quot;&gt;// 创建 VNode 节点&lt;/span&gt;
vm&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function-variable function&quot;&gt;_c&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; b&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; c&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; d&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createElement&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;vm&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; a&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; b&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; c&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; d&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;在编译结束后，我们根据不同的指令、属性等等去选择需要调用哪一个处理函数，最后拼接成一个函数字符串。&lt;/p&gt;
&lt;p&gt;我们可以很清楚的看到，最后生成了一个 render 渲染字符串，那么我们要如何去使用它呢？其实在后面进行渲染的时候，我们进行了 &lt;code&gt;new Function(render)&lt;/code&gt; 的操作，然后我们就能够正常的使用 render 函数了。&lt;/p&gt;
&lt;h2&gt;总结&lt;/h2&gt;
&lt;p&gt;大流程走完之后，我相信大家会对编译过程有一个比较清晰的认识，然后再去挖细节相信也会容易的多了，读源码，其实并不是一个为了读而读的过程，我们可以在源码中学到很多我们可能在日常开发中没有了解到的知识。&lt;/p&gt;
&lt;p&gt;至于最后代码生成器中的那一大段代码，我还没有把它注释好，后面应该会将源码注释放到仓库里，不过我也相信大家也能够顺利的去读懂源码。&lt;/p&gt;
&lt;p&gt;还有一点要提的是在 render 函数中，Vue 使用了 with 函数，我们平时肯定没见过，因为官方不推荐我们去使用 with，我抱着这样的想法去找了找原因，最后我在知乎上找到了尤大大的回答，这是&lt;a href=&quot;https://www.zhihu.com/question/49929356/answer/118563361&quot;&gt;链接&lt;/a&gt;，大家可以去了解下。&lt;/p&gt;
&lt;p&gt;在结束之际，给大家拜个晚年，祝各位同行者在新的一年成为自己心中的自己。&lt;/p&gt;
&lt;p&gt;To Be yourself!&lt;/p&gt;
&lt;p&gt;最后，借组长的话：愿平静、快乐与你同在！&lt;/p&gt;
&lt;p&gt;PS: 如果各位大侠看的可还行，欢迎到&lt;a href=&quot;https://github.com/balancelove/readingNotes&quot;&gt;我的仓库&lt;/a&gt;给个 star 支持一波，笔芯。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[记一次简单的 CSRF 攻击实验]]></title><description><![CDATA[CSRF 攻击实验 CSRF 攻击涉及用户受害者, 受信任的网站和恶意网站。当受害者与受信任的站点拥有一个活跃的会话同时，如果访问恶意网站，恶意网站会注入一个 HTTP 请求到为受信任的站点，从而破话用户的信息。 CSRF…]]></description><link>https://knownsec-fed.com/2018-02-05-ji-yi-ci-jian-dan-de-csrf-gong-ji-shi-yan/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-02-05-ji-yi-ci-jian-dan-de-csrf-gong-ji-shi-yan/</guid><pubDate>Mon, 05 Feb 2018 09:14:41 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-fca87732a6ebaccb88714ddc855e572f-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQBAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB1qnoVcZD/8QAGhAAAgIDAAAAAAAAAAAAAAAAAAECERAiI//aAAgBAQABBQLeuyFGTRWP/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQMBAT8BiP/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EAB0QAAECBwAAAAAAAAAAAAAAAAEAAhEgITFBUWH/2gAIAQEABj8C6rg0xtCLjJ//xAAaEAEAAgMBAAAAAAAAAAAAAAABABEhMVFB/9oACAEBAAE/Ib9HfHkQslXwkORmjTKOSnCUcn//2gAMAwEAAgADAAAAEBcP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxAP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHBAAAgMAAwEAAAAAAAAAAAAAAREAIUExkfHB/9oACAEBAAE/ELhSNlDnEcz7DBYyEIqLKYfkuZeC7Qb5tuOx1PGgFwHU/9k=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;记一次简单的 CSRF 攻击实验&quot;
        title=&quot;&quot;
        src=&quot;/static/header-fca87732a6ebaccb88714ddc855e572f-d6978.jpeg&quot;
        srcset=&quot;/static/header-fca87732a6ebaccb88714ddc855e572f-527f0.jpeg 300w,
/static/header-fca87732a6ebaccb88714ddc855e572f-9a7cd.jpeg 600w,
/static/header-fca87732a6ebaccb88714ddc855e572f-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h1&gt;CSRF 攻击实验&lt;/h1&gt;
&lt;p&gt;CSRF 攻击涉及用户受害者, 受信任的网站和恶意网站。当受害者与受信任的站点拥有一个活跃的会话同时，如果访问恶意网站，恶意网站会注入一个 HTTP 请求到为受信任的站点，从而破话用户的信息。&lt;/p&gt;
&lt;p&gt;CSRF 攻击总是涉及到三个角色: 信赖的网站（Collabtive）、受害者的 session 或 cookie 以及一个恶意网站。受害者会同时访问恶意网站与受信任的站点会话的时候。攻击包括一系列步骤，如下:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;受害者用户使用他 / 她的用户名和密码登录到可信站点，从而创建一个新的会话。&lt;/li&gt;
&lt;li&gt;受信任站点存储受害者会话的 cookie 或 session 在受害者用户的 web 浏览器端。&lt;/li&gt;
&lt;li&gt;受害者用户在不退出信任网站时就去访问恶意网站。&lt;/li&gt;
&lt;li&gt;恶意网站的网页发送一个请求到受害者的受信任的站点用户的浏览器。&lt;/li&gt;
&lt;li&gt;web 浏览器将自动连接会话 cookie，因为它是恶意的要求针对可信站点。&lt;/li&gt;
&lt;li&gt;受信任的站点如果受到 CSRF 攻击，攻击者的一些恶意的请求会被攻击者发送给信任站点。&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;恶意网站可以建立 HTTP GET 或 POST 请求到受信任的站点。一些 HTML 标签, 比如 img iframe, 框架, 形式没有限制的 URL, 可以在他们的使用属性中。&lt;/p&gt;
&lt;h1&gt;环境搭建&lt;/h1&gt;
&lt;h2&gt;服务器&lt;/h2&gt;
&lt;p&gt;我使用的是 koa 框架作为后端框架搭建的服务器，顺便也算是学习一下 koa 框架，之前没有学过，由于是初学，搭建过程有点漫长。&lt;/p&gt;
&lt;p&gt;话不多说上代码：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;  &lt;span class=&quot;token comment&quot;&gt;// app.js&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; Koa &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;koa&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; app &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Koa&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; server &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;koa-static&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; router &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;koa-router&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; PouchDB &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;pouchdb&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; db &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;PouchDB&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;http://localhost:5984/csrf&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;use&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ctx&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; next&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`Process &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;ctx&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;method&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;ctx&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;url&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;...`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// add url-route:&lt;/span&gt;
  router&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;/login&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ctx&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; next&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; postData &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;parsePostData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ctx&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; response &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; db&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`id_&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;postData&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; exp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Date&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      ctx&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cookies&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;token string&quot;&gt;&apos;id&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`id_&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;postData&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          domain&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;localhost&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;// 写 cookie 所在的域名&lt;/span&gt;
          path&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;/userInfo.html&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;       &lt;span class=&quot;token comment&quot;&gt;// 写 cookie 所在的路径&lt;/span&gt;
          maxAge&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;24&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;60&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;60&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// cookie 有效时长&lt;/span&gt;
          expires&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; exp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setTime&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;exp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getTime&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;24&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;60&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;60&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;// cookie 失效时间&lt;/span&gt;
          httpOnly&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;// 是否只用于 http 请求中获取&lt;/span&gt;
          overwrite&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;  &lt;span class=&quot;token comment&quot;&gt;// 是否允许重写&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;response&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;password &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; postData&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;password&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; ctx&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;redirect&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;userInfo.html&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      ctx&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;body &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&amp;lt;p&gt; 登录失败，点击 &amp;lt; a href=&apos;index.html&apos;&gt; 这里 &amp;lt;/a &gt; 返回 &amp;lt;/p&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  router&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;/regist&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ctx&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; next&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; postData &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;parsePostData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ctx&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    postData&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;_id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`id_&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;postData&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; response &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; db&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;postData&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      ctx&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;body &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&amp;lt;p&gt; 注册成功，点击 &amp;lt; a href=&apos;index.html&apos;&gt; 这里 &amp;lt;/a &gt; 返回至登录界面 &amp;lt;/p&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      ctx&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;body &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&amp;lt;p&gt; 用户名已存在，点击 &amp;lt; a href=&apos;index.html&apos;&gt; 这里 &amp;lt;/a &gt; 返回 &amp;lt;/p&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;


  router&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;/getUserInfo&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ctx&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; next&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; postData &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;parsePostDataFromAjax&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ctx&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; _id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    _id&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;postData&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;:&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; postData&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;:&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; doc &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; db&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;_id&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      ctx&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;body &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; doc&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      ctx&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;body &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;发生错误&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  router&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;/change&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ctx&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; next&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; postData &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;parsePostData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ctx&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;postData&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; doc &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; db&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;postData&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; response &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; db&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;put&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        _id&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; doc&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;_id&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        _rev&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; doc&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;_rev&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        name&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; postData&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        password&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; doc&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;password&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        sex&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; postData&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sex&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        desc&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; postData&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;desc
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      ctx&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;body &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&amp;lt;p&gt; 修改成功，点击 &amp;lt; a href=&apos;index.html&apos;&gt; 这里 &amp;lt;/a &gt; 返回至登录界面 &amp;lt;/p&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;err&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;use&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;router&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;routes&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;use&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;server&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;__dirname &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;/&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;listen&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3001&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;/**
  *
  * 对于 POST 请求的处理，koa2 没有封装获取参数的方法，
  * 需要通过解析上下文 context 中的原生 node.js 请求
  * 对象 req，将 POST 表单数据解析成 query string（例
  * 如：a=1&amp;amp;b=2&amp;amp;c=3），再将 query string 解析成
  * JSON 格式（例如：{&quot;a&quot;:&quot;1&quot;, &quot;b&quot;:&quot;2&quot;, &quot;c&quot;:&quot;3&quot;}）
  */&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// 解析上下文里 node 原生请求的 POST 参数，这个是处理表单 form 传入参数&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;parsePostData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ctx&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;resolve&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; reject&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; postdata &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        ctx&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;req&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addListener&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;data&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          postdata &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; data
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        ctx&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;req&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addListener&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;end&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; parseData &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;parseQueryStr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;postdata&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

          &lt;span class=&quot;token function&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;parseData&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;err&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// 解析上下文里 node 原生请求的 POST 参数，这个是处理 Ajax 传入参数&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;parsePostDataFromAjax&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ctx&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Promise&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;resolve&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; reject&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; postdata &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        ctx&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;req&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addListener&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;data&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          postdata &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; data
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        ctx&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;req&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addListener&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;end&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;postdata&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;err&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// 将 POST 请求参数字符串解析成 JSON&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;parseQueryStr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;queryStr&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; queryData &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; queryStrList &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; queryStr&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;&amp;amp;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt; index&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; queryStr&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;of&lt;/span&gt; queryStrList&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;entries&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; itemList &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; queryStr&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;=&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      queryData&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;itemList&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;decodeURIComponent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;itemList&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; queryData
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;就这一个文件，里面包含了很多东西&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;koa-static&lt;/code&gt; 是 koa 的一个中间件，用于获取静态文件的&lt;/li&gt;
&lt;li&gt;&lt;code&gt;koa-router&lt;/code&gt; 是 koa 的一个中间件，用于路由系统&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pouchDB&lt;/code&gt; 是我使用的 &lt;code&gt;couchDB&lt;/code&gt; 的配套使用的框架&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;数据库&lt;/h2&gt;
&lt;p&gt;我使用的是 couchDB 数据库，具体怎么使用看 &lt;a href=&quot;http://couchdb.apache.org/&quot;&gt;这里&lt;/a&gt;，用法很简单，他的界面是一个网页，我这里贴一张图

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/couchDB-20be86f3ffc225e7f6ed87ef36baa424-3a5b9.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 54.77308294209703%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACj0lEQVQoz1VRy0tUYRy9f0G0dFEgtvARYS9FeyBFUaQEWRG0s4KQFj0WgYQQgqJukl7ULMJIijZBtKggaTJtRsdxfDU2r/v6vvv67r3OOM7+9LtXJVsczv3u/X7nd865Um9bGy61tqC5rhbPhoawapoQmgaPc3iGAaGqsPM5Qn4b/4Mo5OFaJqynI+AP7kP6erQJsQvt+NbciPhAHwy5ADkxjWwshsLMNJLR71hKpbCytISFZBKz8TiS0/GQ5+i7XijApsWBkczzJ5DG9u9B9OwxfDlci89XOhAbfIjJnjuY6rmNibs3MT8agV8qwXUcWDTkCoFV34PvbWDV90OsFYswdR3S68YafDreiPfVO/Gh5x7Gf01hciKKuVQSidkZpNNpuDToui5cGiyvrxMqm0wol7FGqFQqcGiZ9CYQbN2Ld7t3YLy/FwrToKwsQ839gZJJg6kKubNh6yocTYEIeAsGg2PyEK5lgGsqpLck+OP8CXysrUJsuA9u0QfLZ8CVPLichWVwCFqiTUXBYpNgiymw34tgywtg2RUwOQdWyNL9HJnIQOraV4fulkO4WrMLY8MD1IeARu4YCQYXTa6H2w0SMGmRyTVYbAsqLHJq6gpsetbpnXSgvh4HGxpQXVWFR8ODKJNgEDdwyMihoWtUPvUnHHjCJjjbQGfHgucKlAg8mYB05kgrOk+fwsnmJkQej6DkOeQwsymYCx0G/bG5GfDZODg55cvz4OlF8M1qDE2GKeeh/IxCutzRjls3rqOz/RxGIy9QFBZUuhiI6cQGxbDpZ+hx6i+V2Oh3C5SABx0GSUhYUWVIF0mo+1oXAn4VeYk1imJlM9QJdRfEoXMQOYznOmG8DXb+i+/TWdgW/gIc+tYj9/fP+QAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;couchDB&quot;
        title=&quot;&quot;
        src=&quot;/static/couchDB-20be86f3ffc225e7f6ed87ef36baa424-abe1c.png&quot;
        srcset=&quot;/static/couchDB-20be86f3ffc225e7f6ed87ef36baa424-10046.png 300w,
/static/couchDB-20be86f3ffc225e7f6ed87ef36baa424-3c4a3.png 600w,
/static/couchDB-20be86f3ffc225e7f6ed87ef36baa424-abe1c.png 1200w,
/static/couchDB-20be86f3ffc225e7f6ed87ef36baa424-1c9b7.png 1800w,
/static/couchDB-20be86f3ffc225e7f6ed87ef36baa424-532d2.png 2400w,
/static/couchDB-20be86f3ffc225e7f6ed87ef36baa424-3a5b9.png 2556w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h2&gt;前端页面&lt;/h2&gt;
&lt;p&gt;前端页面总共有三个，分别是 &lt;code&gt;index.html&lt;/code&gt;,&lt;code&gt;regist.html&lt;/code&gt;,&lt;code&gt;userInfo.html&lt;/code&gt;，其作用分别是登录，注册，展示 / 修改用户信息，我这里没有使用 css 样式。。。有点丑。&lt;/p&gt;
&lt;h3&gt;index.html&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-html&quot;&gt;&lt;code&gt;  &lt;span class=&quot;token doctype&quot;&gt;&amp;lt;!DOCTYPE html&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;html&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;lang&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;en&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;head&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;meta&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;charset&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;UTF-8&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;meta&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;viewport&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;width=device-width, initial-scale=1.0&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;meta&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;http-equiv&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;X-UA-Compatible&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;ie=edge&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;title&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; 登录 &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;title&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;head&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;body&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;h2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; 登录 &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;h2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;form&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;login&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;action&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;/login&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;post&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      姓名：&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;input&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;tyep&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;text&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;
      密码：&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;input&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;password&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;password&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;form&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;button&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;button&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; 登录 &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;button&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;a&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;href&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;./regist.html&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; 注册 &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;a&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;body&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; button &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;button&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; form &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;login&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    button&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function-variable function&quot;&gt;onclick&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      form&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;submit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;html&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h3&gt;regist.html&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-html&quot;&gt;&lt;code&gt;  &lt;span class=&quot;token doctype&quot;&gt;&amp;lt;!DOCTYPE html&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;html&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;lang&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;en&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;head&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;meta&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;charset&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;UTF-8&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;meta&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;viewport&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;width=device-width, initial-scale=1.0&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;meta&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;http-equiv&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;X-UA-Compatible&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;ie=edge&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;title&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; 注册 &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;title&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;head&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;body&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;h2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; 注册 &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;h2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;form&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;regist&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;action&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;/regist&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;post&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      姓名：&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;input&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;tyep&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;text&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;br&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      密码：&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;input&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;password&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;password&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;br&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      性别：&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;input&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;radio&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;sex&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;male&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt; 男 &amp;lt; input type=&quot;radio&quot; name=&quot;sex&quot; value=&quot;female&quot; /&gt; 女 &amp;lt; br&gt;
      描述：&amp;lt;textarea name=&quot;desc&quot; id=&quot;&quot;cols=&quot;30&quot;rows=&quot;10&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;textarea&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;form&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;button&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;button&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; 注册 &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;button&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;a&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;href&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;./index.html&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; 登录 &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;a&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;body&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; button &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;button&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; form &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;regist&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    button&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function-variable function&quot;&gt;onclick&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      form&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;submit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;html&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h3&gt;userInfo.html&lt;/h3&gt;
&lt;p&gt;这个页面我使用了 ajax，所以引入了 jQuery。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-html&quot;&gt;&lt;code&gt;  &lt;span class=&quot;token doctype&quot;&gt;&amp;lt;!DOCTYPE html&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;html&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;lang&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;en&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;head&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;meta&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;charset&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;UTF-8&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;meta&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;viewport&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;width=device-width, initial-scale=1.0&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;meta&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;http-equiv&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;X-UA-Compatible&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;ie=edge&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;script&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;./jquery-3.2.1.min.js&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;title&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; 用户信息 &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;title&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;head&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;body&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;h1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; 用户信息 &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;h1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; 姓名：&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;span&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;span&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; 性别：&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;span&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;sex&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;span&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; 描述：&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;span&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;desc&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;span&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;h1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; 修改信息 &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;h1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;form&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;change&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;action&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;/change&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;post&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
        &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;input&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;id&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;hidden&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;
        姓名：&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;input&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;tyep&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;text&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;br&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
        性别：&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;input&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;radio&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;sex&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;male&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;/&gt;&lt;/span&gt;&lt;/span&gt; 男 &amp;lt; input type=&quot;radio&quot; name=&quot;sex&quot; value=&quot;female&quot; /&gt; 女 &amp;lt; br&gt;
        描述：&amp;lt;textarea name=&quot;desc&quot; id=&quot;&quot;cols=&quot;30&quot;rows=&quot;10&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;textarea&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;form&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;button&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;button&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; 修改 &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;button&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;body&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;
    window&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function-variable function&quot;&gt;onload&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; id &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cookie&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;=&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;:&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      $&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;ajax&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        url&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;http://localhost:3001/getUserInfo&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        data&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; id&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        method&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;post&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;res&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; doc &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;#name&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;doc&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;#sex&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;doc&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;sex&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;#desc&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;doc&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;desc&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;$&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;#id&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;val&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;doc&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;_id&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; form &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;change&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; button &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getElementById&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;button&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      button&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function-variable function&quot;&gt;onclick&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        form&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;submit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;html&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;最后放上 &lt;code&gt;package.json&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-json&quot;&gt;&lt;code&gt;  &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;csrf&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;version&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;1.0.0&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;description&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;main&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;app.js&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;scripts&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;start&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;node app.js&quot;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;author&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;license&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;ISC&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;devDependencies&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;koa&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;^2.2.0&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;koa-router&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;^7.2.1&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;koa-static&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;^3.0.0&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token property&quot;&gt;&quot;pouchdb&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;^6.2.0&quot;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;命令行执行&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;  npm install
  npm start&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h1&gt;CSRF 攻击&lt;/h1&gt;
&lt;p&gt;终于到了关键，其实也就那么一刹那，很快我们的步骤如下：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;首先我注册了一个账户，然后我登录这个账户查看信息如图
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/userInfo-06f1ecda4669dfef97d23c4b5e399373-c0462.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB+UlEQVQ4y62T3U/TUBjGz18iXIAhuq1usK3tZteVWcbYBzA/xsbWDVo0ICRLjNH4Eb3C+B95YfwnjPHOxOmFTAa6Mbeu7ePpGRAwkBDiSX553ve8T06fnrQkr79FfnUbs8XXCEbT8HAheP3CGfAIhCT4Kd6ACA/t+ZsqpmcWoajzlAWm5MP7d/jW+ILmj+9oNnfwc7dF2T2TVmuPcdTv7/9Cu32A3+0O1Q5T0jno4n8u0mh8hW1bcBwHjm3T2jkX5qHYzun+JOTjp8/o9U1qAjO6iw0vm3Bnr4tu38Yf06Jqnfvki0JwIkvfcljSYUr7cgk7vQFL5tLumrAO7/H41dl92QzLsk7VLoOBiYHZG9YUUl2ro6Tdx3JtHZq+CW1lHRW9Dn1rG+XqAxTLBgolnWnN2ESVsrK2hbLrX92AZtRRMR7hzlINpYoBMiXcwiSfABeU4ZuUcP1GBNyUhGg8DX9YoR90FOFoku7FcI3jMTLmxcg4hytjPlp7MBFQ4YvcxejVAEbHfSDZ4jPka6+QK7+EevsxY67wFNrDN8guP0eq8ITOXtD9OpKJe0gpKcixJBQ5CSk2i1BkBkExQf+aFHhpDkSML8JFkIcqxvMQWL+Ao5kLL89DnV6CquQgxtKIyBmqGerLQpRzENyaQtxTL0aaEWaaOe7/5S9+owLxgGV6SgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;userInfo&quot;
        title=&quot;&quot;
        src=&quot;/static/userInfo-06f1ecda4669dfef97d23c4b5e399373-abe1c.png&quot;
        srcset=&quot;/static/userInfo-06f1ecda4669dfef97d23c4b5e399373-10046.png 300w,
/static/userInfo-06f1ecda4669dfef97d23c4b5e399373-3c4a3.png 600w,
/static/userInfo-06f1ecda4669dfef97d23c4b5e399373-abe1c.png 1200w,
/static/userInfo-06f1ecda4669dfef97d23c4b5e399373-1c9b7.png 1800w,
/static/userInfo-06f1ecda4669dfef97d23c4b5e399373-532d2.png 2400w,
/static/userInfo-06f1ecda4669dfef97d23c4b5e399373-c0462.png 2560w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    ，以及他的 cookie 参数
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/cookie-87556f18b2e73a4164a3dca38238f238-c0462.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 62.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB70lEQVQ4y62QTXPSUBSG81PUhZ126ChIC6QQGsJHEpKxaIXYlI8mQBFs2bh14UY3/iE3+jNYutB2RrFYoS4kH68nF+rADC7smJln3vvee+57zwn3pP0Wj+03UA5eYSupIXRvG5vhxAriiGwLCBObER4h8vFUHlLhETL5PaLElPvw/h0+f/qI4ZczDIdf8e1iRFysZDT6zrj2l5c/MJn8xHhyRXrFlBuPJ/ifH3d2fg7P8+D7PlPP8/9KUMPq/GW/CDcYDDCdTpdeCQ5u3GEQ5jgOw3Xdla/+C9xiL95CZ77v3axDx5myzhzHZaNf/0cWyoLB9tw5jhtM82s2Fd1zXY8R1AQZXKPVh1lroXrUQd3uoWZ1ULP7sE9e47DexkG1CcO0YJLadhfHz16gd/oSltWDbXVRpbsVs4F9o8pyOFF/jl29ix2lA77QRizbxI7cRrHcR1rrIp6zkS2dIJOtIRpO4n5URZQ3sLHBY33tAUJrUdwmbt2N4M76FjhZr6G434RSOoIoG4y8ZsKon6LwsI6cdkhnDaiKgZzaglp4CkHUwUtlxCQDUqaMpFQhbxAVcHGhCEZKxZ81EVvwMUJMKZDSJeiZPciiTGsVKdrPCioS87pAKVBHQCI90yVPJISZJoldQYNApGkvYObndXN+Ay3SBXAvV1NNAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;cookie&quot;
        title=&quot;&quot;
        src=&quot;/static/cookie-87556f18b2e73a4164a3dca38238f238-abe1c.png&quot;
        srcset=&quot;/static/cookie-87556f18b2e73a4164a3dca38238f238-10046.png 300w,
/static/cookie-87556f18b2e73a4164a3dca38238f238-3c4a3.png 600w,
/static/cookie-87556f18b2e73a4164a3dca38238f238-abe1c.png 1200w,
/static/cookie-87556f18b2e73a4164a3dca38238f238-1c9b7.png 1800w,
/static/cookie-87556f18b2e73a4164a3dca38238f238-532d2.png 2400w,
/static/cookie-87556f18b2e73a4164a3dca38238f238-c0462.png 2560w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    ，在图中我们发现 cookie 里面有一个重要信息是 ID，这个就是当前用户的 ID。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;接下来我通过浏览器开发者工具查看表单数据以及请求的 url 以方便我构造假请求。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;编写 csrf_hack.html。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-html&quot;&gt;&lt;code&gt;  &lt;span class=&quot;token doctype&quot;&gt;&amp;lt;!DOCTYPE html&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;html&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;lang&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;en&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;head&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;meta&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;charset&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;UTF-8&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;meta&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;viewport&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;width=device-width, initial-scale=1.0&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;meta&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;http-equiv&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;X-UA-Compatible&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;ie=edge&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;title&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; 攻击页面 &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;title&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;head&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;body&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
      &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;h1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt; 这是一个攻击页面 &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;h1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;body&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;
      &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;hack&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; fields&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        fields &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&amp;lt;input type=&apos;hidden&apos;name=&apos;id&apos;value=&apos;id_1111&apos;/&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        fields &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&amp;lt;input type=&apos;hidden&apos;name=&apos;name&apos;value=&apos;testName&apos;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        fields &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&amp;lt;input type=&apos;hidden&apos;name=&apos;sex&apos;value=&apos;testSex&apos;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        fields &lt;span class=&quot;token operator&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&amp;lt;input type=&apos;hidden&apos;name=&apos;desc&apos;value=&apos;testDesc&apos;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; url &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;http://localhost:3001/change&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; p &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createElement&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;form&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        p&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;action &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; url&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        p&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;innerHTML &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; fields&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        p&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;target &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;_self&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        p&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;method &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;post&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

        document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;body&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;appendChild&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;p&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        p&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;submit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      window&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function-variable function&quot;&gt;onload&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;hack&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;html&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
```
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;然后在启动一个服务，将刚才编写的 csrf&lt;em&gt;hack.html 页面放进去，然后访问这个页面（这里我偷懒，直接把刚才的端口修改了一个，然后另开一个控制台启动服务，然后访问），接下来再次登录刚才的账号，发现刚才写在 csrf&lt;/em&gt;hack.html 页面的信息更替上去了。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;总结&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;如果要使用 async,await 这两个方法，node 版本需要在 7 以上。&lt;/li&gt;
&lt;li&gt;相信大家一定也想到了，这个实验最重要的是需要获得被攻击方的 ID，但是我们没有被攻击方的密码，怎么能够获取他 ID 呢，这个我也在继续思考。&lt;/li&gt;
&lt;li&gt;虽然这个实验是一个简单的实验，但是也还是折射出网络安全的重要性，虽然我们是前端工程师，也还是需要将安全检测做到位。&lt;/li&gt;
&lt;/ol&gt;</content:encoded></item><item><title><![CDATA[【译】React Scope介绍]]></title><description><![CDATA[原文链接： React Scope 作者： Tiffany Lin 随着React应用程序复杂度的增长， components 、 state  、 props 的复杂性也变得越来越高。上个月，一些开发人员和我对于这个问题建立了解决方案。我们决定开发Chrome的插件 React…]]></description><link>https://knownsec-fed.com/2018-02-04-fan-yi-reactscope-jie-shao/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-02-04-fan-yi-reactscope-jie-shao/</guid><pubDate>Sun, 04 Feb 2018 01:24:37 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-9b54ff1cab86ce5fd0b762b1d94ad917-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABLklEQVQoz4VR20rDQBTc//8aEUUEER9ERR+0L0KgSSpqTNPGXnLdzWXcWbphU2w7MNnk5Oyc2Vmhwgj9xEfiBXj3PEynPiz6vh/Rrdn3/T6h2hZJkiCOY0TRD9I0RZ7nqKpq2HBowP4wQsTzOfwgxHq91mK/WK1WKIoCZVkNIuHsA59f3ziGIJwhWSwgnp5fcP/wOHLQdR1a7ZwstdOz8wvc3N5BKYWmafTa7FY1rJdX13h9m0DYCdxshPTPVip0jjAhZW1OcAqilnKUASdKXXPBPDebDZbLVEdRIssyk3O+i4a1uq6NU8HHcGOadERRN3AO2G4zLHRGzJekIPtsNOzjtxF0i66grdMhHTCCYzAO2WhF7OpOJunolJiNy2RI5UNkEwV57MYZ+B+lvsw/N70MkQsOVsMAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;【翻译】React Scope介绍&quot;
        title=&quot;&quot;
        src=&quot;/static/header-9b54ff1cab86ce5fd0b762b1d94ad917-d6978.jpeg&quot;
        srcset=&quot;/static/header-9b54ff1cab86ce5fd0b762b1d94ad917-527f0.jpeg 300w,
/static/header-9b54ff1cab86ce5fd0b762b1d94ad917-9a7cd.jpeg 600w,
/static/header-9b54ff1cab86ce5fd0b762b1d94ad917-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;原文链接：&lt;a href=&quot;https://levelup.gitconnected.com/introducing-react-scope-a87d9f5247df&quot;&gt;React Scope&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;作者：&lt;a href=&quot;https://levelup.gitconnected.com/@tiffanylin_54989&quot;&gt;Tiffany Lin&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;随着React应用程序复杂度的增长，&lt;em&gt;components&lt;/em&gt;、&lt;em&gt;state&lt;/em&gt; 、&lt;em&gt;props&lt;/em&gt;的复杂性也变得越来越高。上个月，一些开发人员和我对于这个问题建立了解决方案。我们决定开发Chrome的插件&lt;em&gt;React Scope&lt;/em&gt;，它提供了开发人员的React应用程序组件的分层树视图。&lt;/p&gt;
&lt;p&gt;&lt;em&gt;React Scope&lt;/em&gt;也是交互式的；当开发者在他们的应用中（例如：通过点击事件或者输入表单）触发&lt;em&gt;state&lt;/em&gt;的变化，这个树形的表就相应的更新。形象的展现state的变化和分清props从哪里传递下来可以使得调试React应用变得更加简单。&lt;/p&gt;
&lt;h3&gt;如何工作&lt;/h3&gt;
&lt;p&gt;&lt;em&gt;React Scope&lt;/em&gt;利用&lt;em&gt;React Developer Tools&lt;/em&gt;来检索有关客户端应用程序的信息。然后，我们使用这些数据来实现DOM树的可视化。用户只需将鼠标悬停在树内的节点上即可查看每个组件的name、state和props。&lt;/p&gt;
&lt;p&gt;接下来，开发人员可以与他们的React应用程序交互来触发状态更改。 &lt;em&gt;React Scope&lt;/em&gt;将这些数据保存在一个缓存中，该缓存连接到一个监听器函数跟踪状态的变化。&lt;/p&gt;
&lt;p&gt;最后，&lt;em&gt;React Scope&lt;/em&gt;提供了&lt;em&gt;previous&lt;/em&gt;和&lt;em&gt;next&lt;/em&gt;按钮。点击这些呈现从缓存到树的数据，允许开发人员在他们的应用程序的当前和之前的状态间&lt;em&gt;time travel&lt;/em&gt;。&lt;/p&gt;
&lt;h3&gt;技术挑战&lt;/h3&gt;
&lt;p&gt;建立React Scope带来了一系列技术挑战，这些挑战提升了我们的极限。但是随着挑战的提升，我们从这个项目学到了很多。
这是我们必须解决的主要技术障碍：&lt;/p&gt;
&lt;h4&gt;检索客户端应用程序数据&lt;/h4&gt;
&lt;p&gt;我们利用&lt;em&gt;React Developer Tools&lt;/em&gt;的&lt;em&gt;fiber root&lt;/em&gt;（以及&lt;em&gt;React 15&lt;/em&gt;及以下版本渲染器）来获取客户端的应用数据，这些数据返回了一个对象。由于对象嵌套严重，因此解析这个特别困难。我们编写了递归函数来提取必要的数据（组件name、state 和 props），然后根据&lt;em&gt;D3.js&lt;/em&gt;的严格格式进行格式化。&lt;/p&gt;
&lt;h4&gt;处理异步事件&lt;/h4&gt;
&lt;p&gt;由于&lt;em&gt;iframe&lt;/em&gt;与主浏览器窗口之间的异步关系，从&lt;em&gt;React Developer Tools&lt;/em&gt;获取数据有点棘手。我们使用&lt;em&gt;Async&lt;/em&gt; / &lt;em&gt;Await&lt;/em&gt;来确保从用户应用程序传递给&lt;em&gt;React Scope&lt;/em&gt;的数据是准确的。&lt;/p&gt;
&lt;h4&gt;管理state数据&lt;/h4&gt;
&lt;p&gt;最后，我们需要确定一个可行的缓存系统来存储初始和随后的状态改变数据。我们确定一个双向链表的线性结构是最有意义的。我们将客户端应用程序的初始状态存储为&lt;em&gt;head/tail&lt;/em&gt;，并将任何新的状态数据添加到&lt;em&gt;head&lt;/em&gt;。然后，当用户点击&lt;em&gt;previous&lt;/em&gt;和&lt;em&gt;next&lt;/em&gt;按钮，我们应用链表逻辑来呈现相关的状态数据。例如，如果他们点击&lt;em&gt;previous&lt;/em&gt;按钮，我们的应用程序将访问当前状态的&lt;em&gt;node.prev.value&lt;/em&gt;并将该数据呈现给树形图。&lt;/p&gt;
&lt;h3&gt;为什么我们相信它&lt;/h3&gt;
&lt;p&gt;我们相信&lt;em&gt;React Scope&lt;/em&gt;有可能简化React应用程序开发，特别是我们的&lt;em&gt;state time traveling&lt;/em&gt;功能。例如，如果用户的输入触发意外的状态变化，开发人员可以简单地引用先前的状态来确定发生错误的位置。&lt;/p&gt;
&lt;p&gt;而且，能够很容易地看到&lt;em&gt;props&lt;/em&gt;如何传递，可以使调试变得更容易。例如，如果一个&lt;em&gt;props&lt;/em&gt;在某个组件中是不可访问的，那么用户可以在树中查找以确定它传递失败的位置。&lt;/p&gt;
&lt;h3&gt;入门&lt;/h3&gt;
&lt;p&gt;您可以从&lt;a href=&quot;https://chrome.google.com/webstore/detail/react-scope/nkkiickggkoojpdiajhgkbdmfgcinlai&quot;&gt;Chrome网上应用店&lt;/a&gt;安装&lt;em&gt;React Scope&lt;/em&gt;。如果您有任何想法或建议，请给我们反馈。这是我们每个人热爱的项目，我们正在积极探索改善它的方法。&lt;/p&gt;
&lt;p&gt;了解更多信息，请访问&lt;a href=&quot;http://reactscope.com/&quot;&gt;React Scope官网&lt;/a&gt;和&lt;a href=&quot;https://github.com/React-Scope/React-Scope&quot;&gt;GitHub&lt;/a&gt;。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[【译】六个选择UI颜色的技巧]]></title><description><![CDATA[原文链接： Color Matters. 6 Tips on Choosing UI Colors. – UX Planet 作者：Tubik Studio…]]></description><link>https://knownsec-fed.com/2018-02-03-fan-yi-liu-ge-xuan-ze-ui-yan-se-de-ji-qiao/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-02-03-fan-yi-liu-ge-xuan-ze-ui-yan-se-de-ji-qiao/</guid><pubDate>Sat, 03 Feb 2018 13:21:00 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-f098b9c6f8de6f011c024d9d0c4fe2bd-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMEBQb/xAAVAQEBAAAAAAAAAAAAAAAAAAACAf/aAAwDAQACEAMQAAABeIlm5wsxD//EABkQAAIDAQAAAAAAAAAAAAAAAAECAxExQ//aAAgBAQABBQIOAHa4mje13md//8QAFxEBAAMAAAAAAAAAAAAAAAAAAAESIf/aAAgBAwEBPwGcWf/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABwQAAEDBQAAAAAAAAAAAAAAAAEAEBESITJRcf/aAAgBAQAGPwKmb6CMFYlhxv/EABkQAQEBAQEBAAAAAAAAAAAAAAEAESFBYf/aAAgBAQABPyHNSA0Kd+/h9lugZ5HMon1f/9oADAMBAAIAAwAAABDrz//EABYRAQEBAAAAAAAAAAAAAAAAABEAAf/aAAgBAwEBPxDQclf/xAAWEQEBAQAAAAAAAAAAAAAAAAARAAH/2gAIAQIBAT8Qx1Yv/8QAHBABAQACAgMAAAAAAAAAAAAAAREAIUFRMYHB/9oACAEBAAE/ELFY0MnDduWVEFBrfIT5iYg9JMsovczYaJonGMVT7z//2Q==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;【翻译】六个选择UI颜色的技巧&quot;
        title=&quot;&quot;
        src=&quot;/static/header-f098b9c6f8de6f011c024d9d0c4fe2bd-d6978.jpeg&quot;
        srcset=&quot;/static/header-f098b9c6f8de6f011c024d9d0c4fe2bd-527f0.jpeg 300w,
/static/header-f098b9c6f8de6f011c024d9d0c4fe2bd-9a7cd.jpeg 600w,
/static/header-f098b9c6f8de6f011c024d9d0c4fe2bd-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;原文链接：&lt;a href=&quot;https://uxplanet.org/color-matters-6-tips-on-choosing-ui-colors-260f56197a7b&quot;&gt;Color Matters. 6 Tips on Choosing UI Colors. – UX Planet&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;作者：Tubik Studio&lt;/p&gt;
&lt;p&gt;用户体验设计涉及很多流程，需要进行深思熟虑才能够使界面符合目标受众的需求。虽然看起来不太复杂，但是每一步都需要深入细节。&lt;/p&gt;
&lt;p&gt;在用户界面创建的过程中耗时最多的阶段之一就是关于颜色的选择。设计师有时可能会花好几个小时去选择合适的颜色。在本文中，我们将介绍六个有用的技巧，帮助设计师为UI选择合适的颜色，让这个过程变的更加轻松，更加高效。&lt;/p&gt;
&lt;h2&gt;了解60-30-10规则&lt;/h2&gt;
&lt;p&gt;这个规则来自于室内设计，所以经常被用于装饰房屋。而且这个想法也很简单。为了使颜色达到平衡，颜色应该以60％-30％-10％的比例组合。最大的部分应该是主色调，第二部分是副色，其次是点缀色，这有助于颜色的主次和谐。&lt;/p&gt;
&lt;p&gt;对于人眼来说这样的比例是令人愉快的，因为它可以逐渐感知到所有的视觉元素。知道这个规则的设计师可以成功地结合所有颜色，而不会把UI的颜色弄的一团糟。

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/2-bea582fb040fa371fefeb005f3dc4fdf-89095.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsSAAALEgHS3X78AAACwklEQVQoz31SS08TURidnX/Cv+DOtRqXrEzkYWBhAkTRxLDQGI0YoLQUiiQgSNCQulCJUAkIgpVCaIdCX7TTF7S20KA8+6CPTGemc5/eNoIJUW9uZr578p1zbu53uMdXA8Yn8Q/tifH27YmOuKkjOtUZme4Mz2hCcxr/fJfPrPUsap1L2rUVHc/rVta6l509Fo/e/PXGS05XHUqm8hDT/y5EKMaUYIoRwYQVANkaX3P66hAosTMl5PzGFUX5RPkycuC1pVnN2JSUQVyC9sZXXO/NIFQrXeS8HakgUkq2TGYWTbtSRqqAZRSr0NE0xBmqBQQJAGqppAL2U1WEEACQ1WeKpYKc2xXjfKoMoAoZQHfTAPei2ssOkWh0xbrq9ni9Xr/LvWG12YOhMCqv8qV+htKumYPgwmGZdkr2Nfdz/TVuiune/j6/uu50eQR/0CcE7HaH3x/a8Aq8fS0W/nEkFAav6bfX9/84q1BoNnCDtS4MiSgWU6mTVCp7cpLL5vLsm8lkk8cZhYhhk/jw4jPLlRpQkM5egjmH7vRwQ3UOBAhCiijmJDmfL+QYk2kVJVmSFdY3y0daqx7dvnApzm9CmcppVS0SpIDNuzpuuNbOhPhVajDQgQGaSJSFJLlEKs8Ki9jY2iUsRp5evmUemlOSNLsjSykEimq0RcuN1tnYQI+T1OejwQAVRUZCECKMCUZUjKTbri+E1ktL90cDkwElz8YOEGBzBrGWTm6sfgWBv8+ZIUc7RfNnZTdMtizp1XEvKDBPxEQJgPGWdu5tvQVVQkLQaYB+R4wSSFQZKVDc8kHBgROL7vyBiFXC2ogKdlqec+8avv3T+TTWbB8XKUtNtnB6JwB377VxY1VTS+28VWPlNcvrWotTa/bo5n3dswH9dFg/tdVjivVOxPTvhZFP34c/7vUa9/qMB/1jh31vEg0PfgFQMAQIdvFvXQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;2&quot;
        title=&quot;&quot;
        src=&quot;/static/2-bea582fb040fa371fefeb005f3dc4fdf-89095.png&quot;
        srcset=&quot;/static/2-bea582fb040fa371fefeb005f3dc4fdf-f17ae.png 300w,
/static/2-bea582fb040fa371fefeb005f3dc4fdf-8b9c0.png 600w,
/static/2-bea582fb040fa371fefeb005f3dc4fdf-89095.png 800w&quot;
        sizes=&quot;(max-width: 800px) 100vw, 800px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h2&gt;对比是朋友&lt;/h2&gt;
&lt;p&gt;色彩对比是任何视觉构图的关键部分。它为每个UI元素带来了个性，使它们都变的显而易见。如果一个UI中仅有来自相同色相或者色环中的颜色，用户是很难注意到这个页面。而且，会使这个用户界面中的其他的内容看起来难以辨认，这使得用户与产品的交互变的很难。&lt;/p&gt;
&lt;p&gt;设计师应该根据其能够达到的目标来控制对比度的高低。例如，如果您需要用户特别注意特定的用户界面中的元素，则最好使用蓝色和红色两种高度对比的颜色。CTA按钮设计通常使用高对比度。&lt;/p&gt;
&lt;p&gt;但是，如果将UI作为一个整体，高强度的色彩对比可能并不是很奏效。如果其中的内容和背景颜色对比太多，则很难读取或扫描文本。这就是为什么建议设计师去创建一个相对温和的对比度，而只在为了突出元素时采用高对比颜色。在各种设备上进行用户测试可以帮助设计人员确保其解决方案的有效性。

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/3-e25251f1a8244121ee2a67628c2ef0a7-963aa.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 66.625%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQCBQb/xAAVAQEBAAAAAAAAAAAAAAAAAAACAf/aAAwDAQACEAMQAAABbiqwbmi5EP/EABsQAQACAgMAAAAAAAAAAAAAAAECEQMTEiIx/9oACAEBAAEFAotQyrql6Hfiamr/AP/EABcRAQADAAAAAAAAAAAAAAAAAAABEiH/2gAIAQMBAT8BnFn/xAAVEQEBAAAAAAAAAAAAAAAAAAAQMf/aAAgBAgEBPwGn/8QAGxAAAQQDAAAAAAAAAAAAAAAAAAECEBExQWH/2gAIAQEABj8C03g6LsQwh//EABsQAQACAwEBAAAAAAAAAAAAAAEAESExQVGB/9oACAEBAAE/IUqKAs3ZbjhsxFbl9izzkBsLNp6xaC+T/9oADAMBAAIAAwAAABB7H//EABURAQEAAAAAAAAAAAAAAAAAABBB/9oACAEDAQE/EKj/xAAWEQEBAQAAAAAAAAAAAAAAAAARAAH/2gAIAQIBAT8QxTF//8QAHBABAAIDAAMAAAAAAAAAAAAAAQARITFRYYHB/9oACAEBAAE/EDZ7sEOq/Kh9qOKiPCWSJYFEydvEFLYHPuexyROACf/Z&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;3&quot;
        title=&quot;&quot;
        src=&quot;/static/3-e25251f1a8244121ee2a67628c2ef0a7-d6978.jpg&quot;
        srcset=&quot;/static/3-e25251f1a8244121ee2a67628c2ef0a7-527f0.jpg 300w,
/static/3-e25251f1a8244121ee2a67628c2ef0a7-9a7cd.jpg 600w,
/static/3-e25251f1a8244121ee2a67628c2ef0a7-d6978.jpg 1200w,
/static/3-e25251f1a8244121ee2a67628c2ef0a7-963aa.jpg 1600w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h2&gt;考虑颜色的心理学&lt;/h2&gt;
&lt;p&gt;正如我们在前面的文章中提到的，心理学是帮助设计工作流程正常进行的基础研究之一。有一个心理学分支——色彩心理学，它显示颜色对人类情绪和行为的影响。它表明，我们的大脑对每一种颜色都有相应的反应，而我们通常都注意不到。当人的眼睛看到到一种颜色时，我们的大脑向内分泌系统发出信号，释放影响情绪和控制情绪的激素。&lt;/p&gt;
&lt;p&gt;每种颜色对于我们的思维都会产生影响，对颜色心理学的了解可以帮助设计师传递正确的信息并呼吁用户做出预期的行动。以下是一些常见颜色的心理寓意。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;红色：它象征着爱情，自信，激情以及愤怒。&lt;/li&gt;
&lt;li&gt;橙色：充满活力和温暖的色彩，可以带来兴奋的感觉。&lt;/li&gt;
&lt;li&gt;黄色：这是幸福，阳光，欢乐和温暖的颜色。&lt;/li&gt;
&lt;li&gt;绿色：自然的色彩会带来平静和更新的感觉。&lt;/li&gt;
&lt;li&gt;蓝色：它通常代表一些企业形象。可能与距离和悲伤有关。&lt;/li&gt;
&lt;li&gt;紫色：很长一段时间里它与皇室和财富有关。这也是一种神秘和魔力的颜色。&lt;/li&gt;
&lt;li&gt;黑色：它与悲剧和死亡联系在一起，意味着一个谜。同时，它可以是传统的和现代的。&lt;/li&gt;
&lt;li&gt;白色：颜色意味着纯洁无瑕，以及整体性和清晰度。

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/4-812e9d8b5c3895c720071fc5e77e51ba-89095.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsSAAALEgHS3X78AAACl0lEQVQoz3WTT0gUYRjG95juzs66SkZRebJCqMBjBNGhm5fCpKB1zRCiNHdmFse1SILwECRFF49FB0k9RJdoNKGiOlihoqtL68y4/2Z2XXfdfzOzO/O9fbO6q1LBw8t3+X3f8z7f+1qQkTO0lZLi1xU/PuyTuoyUGVCmQeWQwqHCdFWgcGBsWAxttShTaaE/xffrcUaT6IqYotwLISeI1oLfmfc7jTV7KYhFGrwdhBp8qQlrElWUvYUInQtRShTzjBqjNMm7JXgSvxohahM/ndiad0KIAIGsyAbKzA6MgWSQivr7MiKlb7ClOAs59tXItYFbTsQ3rX1sResNSGhAfB0I9X/DtJ4aM7JTKPtGDoyvfnvxdeLO22fU86GLocVRacEN6Zso4YaUD2LngT8AArHvZVXyGZvDkUV2nqOMDfbDlM/nHZl9fRSk4/nAkeTC4Yz/WGq5Wf3dCKId+P22zccTdGKlN7Z4FzLe8NK9LpdrbrYHwoQWINRVu4prwKoHcVqOXds47WwlqlLci4XPkGXeTT50uVhx7hREahEGRHJHe3suxelksB9nizEthqNmihKtSveH6O6Otp7ZiasQqzHWHJWc60A8CLx117YqsarkLZtnzGfTzE+OuX3Z7Wm/8djVmfrRBGEb4jGPPeOfPwR87Z6eZVarwhEa8oPvxzo6T7f2nTvbfbJlkmqGpB2tk//956oKYQqKD14OXThjsVxyONscDVeIRu5RXSlAGsF/wbhPJUpjqeUKmcEv4+3D11tGuuyjbuKJmxh12T4/JTe/kxBylP3vwh4MZNY9WPmwOTB4PPVNFjIUyPUQs4JMgEToQQKPN4j1Ztvbs729VWiPtldKV1d0ZQnlp1GeM8oVzGWqytyqP3MFiGPsY4nvAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;4&quot;
        title=&quot;&quot;
        src=&quot;/static/4-812e9d8b5c3895c720071fc5e77e51ba-89095.png&quot;
        srcset=&quot;/static/4-812e9d8b5c3895c720071fc5e77e51ba-f17ae.png 300w,
/static/4-812e9d8b5c3895c720071fc5e77e51ba-8b9c0.png 600w,
/static/4-812e9d8b5c3895c720071fc5e77e51ba-89095.png 800w&quot;
        sizes=&quot;(max-width: 800px) 100vw, 800px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;另外，设计师需要记住，每个人对于视觉的感受都是相当独特的。年龄和性别等因素对色彩偏好都有很大影响，因此了解目标受众的特征是至关重要。您可以在我们以前的文章中找到颜色含义和偏好的详细说明。&lt;/p&gt;
&lt;h2&gt;不要忘记文化差异&lt;/h2&gt;
&lt;p&gt;每种文化都有自己的传统和信仰，所以在你选择颜色之前，你需要确保你所选择的颜色对不同信仰的人会带来的对立影响。一种颜色在不同国家可能有完全相反的意思。例如，在欧洲国家，白色代表纯度，常用于婚礼，而在许多亚洲国家，这种颜色意味着死亡和悲伤。错误的使用可能会导致对产品的致命误解。通过了解文化背后的颜色来降低对专业设计师被误解的风险。&lt;/p&gt;
&lt;h2&gt;努力使颜色和谐&lt;/h2&gt;
&lt;p&gt;为了让用户感到高兴和舒适，和谐是UI设计努力的目标。设计者试图将平衡带入用户界面设计。色彩的和谐是为了让使用者感知到色彩吸引力的最有效的方式。和谐的颜色有助于帮助网站或应用程序建立良好的第一印象。&lt;/p&gt;
&lt;p&gt;经过多年的搜索，设计师们建立了有效运作的基本配色方案。让我们看看他们是什么。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;单色：色彩和谐是基于一种颜色和各种色调和色调。&lt;/li&gt;
&lt;li&gt;相邻色：该方案应用在色轮上彼此相邻的颜色。&lt;/li&gt;
&lt;li&gt;互补色：它是在色轮上彼此相对放置的颜色混合，旨在产生高对比度。&lt;/li&gt;
&lt;li&gt;拆分补充色：这个方案的工作原理类似于前一个，但是采用了更多的颜色。例如，如果您选择了蓝色，则需要取两个与其相反颜色（黄色和红色）相邻的其他颜色。&lt;/li&gt;
&lt;li&gt;三位一体色：它基于色轮上等距的三种不同的颜色。建议使用一种颜色作为主色，其他作为点缀色。&lt;/li&gt;
&lt;li&gt;四联/双互补色：四色配色方案采用了四种互补配对的车轮颜色。如果连接所选颜色的点，则它们将形成矩形。

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/5-324108ae86146f465eede87435e5da4e-5d1ec.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 600px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsSAAALEgHS3X78AAAD8ElEQVQ4y21TWWxUZRT+63QhU5aWxi0+kfhKDKUFhprGBA1GSOVBIyb1jWgkxgAm+qKID9SwlFQ7BQtYy7SOitNFYmmj3Ya2zO0s3LkzdKbT2ZxOZ2hnuQyz3f0//tPbhsR4Xu7985/vfN855/+QKIqCIIilECRJAgBRDUGQRVEufdWTgDGWZVlNFtYDCZtBLlKplN1u5wpcKRVglqatCwukHM/zpIrL7Y7H44qiCJtsG2ByTZIYp1Ov1/+zGiVI3u+/39bmaG8XggEFK6ls/saNm4MDAxuyVLC4GURzJBqhHPOeyzOht6nCq++DBgHSKG8egI6jqaHvrA6akBOep7JVGNEsiSIhT59ivKjP+cxgat9ZqEIKqsLH90CrBo4g+PEkUSSJkto8qVACm833TL+b2Gya/mjFvtviq/uVQcaIrh+2V+Et2/CnjfAOwq018pWXwXIiGlvrMximpqYIHnEcd3/WMj0/SXcuDSPXaI1v4TDt3trjet6g7H8N9r8CHzwHx7T4ejM27oAetDx9YXR8zmalNnoGogaAbgmPIeefyDlU7Xa8TiW63TF/IB2NSH/ocWcTdGuhqwy6Edw9AushSxJh5nPFzFqAN+gKgw3pCV30Tq3Lfz0pg+IPhFbisSLJ83Tha9V4pBHP7FGsjXl2MZvjstknKByK9P/WQ5mSn5XBmQr8hRY662UuJ0VXlhOJJMum0ylW5DLYVQ9MNXZVAqOh73X09pmsVgp5PYs//dxt6qA/18C5CvylFs7vVfJZgc2w0ejK6uoj9vFjUcji4F5gtmJbBbjKmbnv9Vd77bZ5VMgXi3wu5s1/oyt83JB+VxfZVee6pV8DgQ0shSLh8FoMZO4HkGtw8QBONijLusITXy7HFwp5JJXWXHrS7x2LVCK6vOzBs+Wut76yXgsspLJptpBiuKs+6RDI20BBgBFAC0kmq5ak9WlznOjx2tvOUZXIs2uL9+h5WjtkfNE03BxofiNcfxu/dBO0fuUwSDsBUDRy2WymGeZBac+EtlgsjozctTssZ07EG09bdv5lQv2DTbO3X/BV7Xi43cgfNALqxbUeaTfgk8FQdGDAtLjoLYHVhyoriqzIWJQ+tFHIcEvzy+hB+9k6Dyp3Vn7N7huGil6MbPAJeRFELclUvfXUkiX9xeL42Fg7ZWmZoQ95jtcGkNaraV1umoOWuUdXnI6HZDWbptg0hvpHiqVZVt/VZTWbCYM/t3Rhou3ixLe+jJdMKB5JXLx0aXp6SrX3f8HEWplMJhgMhsJhoi3L5v6+Mz45MpnP5BWMk6kERVE+n4/M6H+YiXB1Z2o/xDC8yAuiwAv8emlJ3ZDaoQr4F+Mmq25G+1J4AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;5&quot;
        title=&quot;&quot;
        src=&quot;/static/5-324108ae86146f465eede87435e5da4e-5d1ec.png&quot;
        srcset=&quot;/static/5-324108ae86146f465eede87435e5da4e-81040.png 300w,
/static/5-324108ae86146f465eede87435e5da4e-5d1ec.png 600w&quot;
        sizes=&quot;(max-width: 600px) 100vw, 600px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;从大自然中获得色彩&lt;/h2&gt;
&lt;p&gt;大自然是世界上最好的艺术家和设计师。我们在自然环境中看到的颜色组合总是接近完美的。人们喜欢看日落和黎明，秋天的森林和冬天的山脉，因为他们充满了自然的色彩组合。&lt;/p&gt;
&lt;p&gt;那么，你为什么不试图借用一些想法呢？去散步或者看看美丽的大自然的照片，你一定会找到灵感。

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/6-6d1c9f5138c6fc9f0608154e241088e2-89095.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsSAAALEgHS3X78AAADEUlEQVQoz01TS28bVRi9M56Z+5jXnfeMPZOJM/VjjMdNnDqxmyYtSQNRCVXLUziBNpMIN04lEBLtooCwQwWt2yZCQtlUBVEqtQtW7Fjw2xgnjUA6i+870rnn+46+C8CoB35IweAmGGwxw61xMUxBVuynrzHYylpmP2X309xwmxlsscOUvb8DHvYAONhT31+SA92bnqotTitnXKCLDJWATHiTqqEP8yZnaLLrqK4jmoY+GVBLhyutTAiyB+a//fS9W+szH7U61zqVdlJdSipztcnamfhSs72+VIiL7kQey4pMqeS4ykQBQsi/OQsOM/Hjvv352nz3ov/2Gx/e/ezO9/dGRwfP/nx+9OvTx8+Ofnn19LeXf+zc7X18o/v7ixfXb3R5WxN4yC4kx+JHu9WvrjfXW7RWWL62dufBN9tf7g6fPLyy88FPPz/68XD0/NXLzS+2v77/3V///N3tp0BGRJLQajZ2fzz27L1Pbj9Iz20slC/VW6ud6lyjmFSjztlyK/HLU0FULMZxfbFTX5yneUcMXMt1lLXOsfhJX7m6EM1E4VJFjawwmYrPJdaEp3uOapvUyWCojhGUQr1gI0PFrslxAtOpg8PbWdp9ebUtQgkZVKCSaFM78oxJW9RkxVD1gilZFGoSJ2NeFXmJAC7HAMCcP9n5YE++0vIj10tC/2zRjYN83fcavl1yiSZyBEFb0SPfrobYpayMGATH4nbtxHmPvNVUTAnaarEReaWA5nUjMK3QZQWegUQ0bSVvWyVf8nQjdBGVWcDkLpw6iyuzBENewUF5MpmdLseV+kyjFFdYjmM4jsdEphqWJYlIlmlgU+Yy67n41Hm5qUqEl7Cj0kA3VVM3PRuKmOH5HBQ4ImRXAbDQFcNUjgDhIMPkztdfO+OL0wqCWBWzvJDA5xAvECEHuYwRsMAJfDYCT5CGMc16gsUcL1xonAb2TpuaKtJkrCuSrWeRsgRyCqEFK2NYgkRDkS0NZbWIMiCM+OXm8W2PeszgJrN7FWxeBhsrYOPy/7BywjCbY/zH994df77RrX8BvrSbur0U4P4AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;6&quot;
        title=&quot;&quot;
        src=&quot;/static/6-6d1c9f5138c6fc9f0608154e241088e2-89095.png&quot;
        srcset=&quot;/static/6-6d1c9f5138c6fc9f0608154e241088e2-f17ae.png 300w,
/static/6-6d1c9f5138c6fc9f0608154e241088e2-8b9c0.png 600w,
/static/6-6d1c9f5138c6fc9f0608154e241088e2-89095.png 800w&quot;
        sizes=&quot;(max-width: 800px) 100vw, 800px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;</content:encoded></item><item><title><![CDATA[活用 git apply 合入 patch 补丁]]></title><description><![CDATA[前言 在还是 git 新手时，经常会遇到一个比较尴尬的处境，git 仓库经常会被自己给玩坏了，虽然没到山穷水尽的地步，但也恨不得反手给自己一巴掌 冲动是魔鬼，我们还是要解决问题是吧~ 当然重置方法有很多了，而本文也将为你提供一个新的解题思路。 使用方法 认识 GIT DIFF…]]></description><link>https://knownsec-fed.com/2018-02-03-huo-yong-git-apply-he-ru-patch-bu-ding/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-02-03-huo-yong-git-apply-he-ru-patch-bu-ding/</guid><pubDate>Sat, 03 Feb 2018 13:07:52 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-b95af72434ea8bb9dc3d5d86aa1f3ff9-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAIDBAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHWjugoOJ//xAAZEAEAAgMAAAAAAAAAAAAAAAACAQMQERL/2gAIAQEAAQUCsahK19jcnP8A/8QAFREBAQAAAAAAAAAAAAAAAAAAEBH/2gAIAQMBAT8Bp//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABkQAQADAQEAAAAAAAAAAAAAAAEAAjERIP/aAAgBAQAGPwIAjWpkO74//8QAGxAAAQQDAAAAAAAAAAAAAAAAAQARIVEgMUH/2gAIAQEAAT8hgwXZpblWFET5TDYf/9oADAMBAAIAAwAAABC3z//EABYRAQEBAAAAAAAAAAAAAAAAAAEQEf/aAAgBAwEBPxBCBk//xAAXEQADAQAAAAAAAAAAAAAAAAABEBEx/9oACAECAQE/EIbq/8QAHBABAQACAgMAAAAAAAAAAAAAAREh8AAQMUFh/9oACAEBAAE/EMzKUi7NxxAyUgVbL8hc7BKjKfA+8dQt6//Z&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;活用 git apply 合入 patch 补丁&quot;
        title=&quot;&quot;
        src=&quot;/static/header-b95af72434ea8bb9dc3d5d86aa1f3ff9-d6978.jpeg&quot;
        srcset=&quot;/static/header-b95af72434ea8bb9dc3d5d86aa1f3ff9-527f0.jpeg 300w,
/static/header-b95af72434ea8bb9dc3d5d86aa1f3ff9-9a7cd.jpeg 600w,
/static/header-b95af72434ea8bb9dc3d5d86aa1f3ff9-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h2&gt;前言&lt;/h2&gt;
&lt;p&gt;在还是 git 新手时，经常会遇到一个比较尴尬的处境，git 仓库经常会被自己给玩坏了，虽然没到山穷水尽的地步，但也恨不得反手给自己一巴掌&lt;/p&gt;
&lt;p&gt;冲动是魔鬼，我们还是要解决问题是吧~ 当然重置方法有很多了，而本文也将为你提供一个新的解题思路。&lt;/p&gt;
&lt;h2&gt;使用方法&lt;/h2&gt;
&lt;h3&gt;认识 GIT DIFF&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;git diff&lt;/code&gt; 命令我们用得太多了，默认返回工作区和暂存区的文件详细差异。&lt;/p&gt;
&lt;p&gt;什么叫详细差异?&lt;/p&gt;
&lt;p&gt;工作区与暂存区的每一行数据变更都能够在这个命令中看到，多用于提交代码前的再次审阅，避免出错。&lt;/p&gt;
&lt;p&gt;当然，&lt;code&gt;git diff&lt;/code&gt; 不仅能提供工作区和暂存区的文件对比，可以说能提供任意文件差异，如下:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;git diff  filepath 工作区与暂存区某文件对比&lt;/li&gt;
&lt;li&gt;git diff HEAD filepath 工作区与 HEAD(当前工作分支) 比较，HEAD 也可替换为任意一次 commitID&lt;/li&gt;
&lt;li&gt;git diff —staged 或 —cached  filepath 暂存区与 HEAD 比较&lt;/li&gt;
&lt;li&gt;git diff branchName filepath  当前分支的文件与 branchName 分支的文件进行比较&lt;/li&gt;
&lt;li&gt;git diff commitId filepath 与某一次提交进行比较&lt;/li&gt;
&lt;li&gt;git diff commitID1 commitID2 两次 commit 提交间文件对比&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;然后就在想，若能根据这些信息恢复文件，岂不妙哉? 当然，我肯定不是第一个这么聪明的人，git 早就提供了相应的命令，且向下看。&lt;/p&gt;
&lt;h3&gt;生成 PATCH 补丁&lt;/h3&gt;
&lt;p&gt;patch 补丁即为根据 &lt;code&gt;git diff&lt;/code&gt; 生成的文本内容文件，最简单的生成方法为 &lt;code&gt;git diff &gt; test.patch&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;其中 test。patch 文件记录了你本次的所有修改，若由于你忘记 &lt;code&gt;git stash&lt;/code&gt;，或者强行 &lt;code&gt;git reset --hard HEAD&lt;/code&gt;，这个文件将是最后的救命稻草。&lt;/p&gt;
&lt;h3&gt;GIT APPLY&lt;/h3&gt;
&lt;p&gt;基本使用方法为 &lt;code&gt;git apply patch&lt;/code&gt;，根据 patch 文件内的信息，在现有文件中添加或删除内容。&lt;/p&gt;
&lt;p&gt;这里添加或删除的操作，和手动修改并无多大区别，即修改内容还是在工作区，不会提交到暂存区。之后的操作，就任君发挥了。&lt;/p&gt;
&lt;h3&gt;示例&lt;/h3&gt;
&lt;p&gt;我们预先生成一个文本文件 text，其内容如下并提交 commit，工作区，暂存区皆无内容:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;origin context line1
origin context line2&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;将其修改为:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;origin context line1
origin context
add line&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;使用 &lt;code&gt;git diff &gt; test.patch&lt;/code&gt; 生成 patch 补丁，当然你可以把这个文件放至任何目录下，打开其内容如下:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-git&quot;&gt;&lt;code&gt;diff --git a/test b/test
index ce2f4b3..ae27ef5 100644
&lt;span class=&quot;token deleted&quot;&gt;--- a/test&lt;/span&gt;
&lt;span class=&quot;token inserted&quot;&gt;+++ b/test&lt;/span&gt;
&lt;span class=&quot;token coord&quot;&gt;@@ -1,2 +1,3 @@&lt;/span&gt;
 origin context line1
&lt;span class=&quot;token deleted&quot;&gt;-origin context line2&lt;/span&gt;
&lt;span class=&quot;token inserted&quot;&gt;+origin context&lt;/span&gt;
&lt;span class=&quot;token inserted&quot;&gt;+add line&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;然后我们使用 &lt;code&gt;git checkout .&lt;/code&gt; 将文件重置为最初状态，text 文件恢复为&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;origin context line1
origin context line2&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;使用 &lt;code&gt;git apply test.patch&lt;/code&gt;，将变更内容再次写入，查看 text 文件，又变回了&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;origin context line1
origin context
add line&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;示例为求简洁特别简单，也可以使用上文 &lt;code&gt;git diff&lt;/code&gt; 保存各种对比内容，从而恢复不同的文件内容。&lt;/p&gt;
&lt;p&gt;另外需要多说一句的是，git apply 是一个事务性操作的命令，若有冲突修改会被全部放弃，加参数 —reject 即可。&lt;/p&gt;
&lt;h2&gt;应用&lt;/h2&gt;
&lt;p&gt;前面说了那么多，会有人反驳了，这里我用其它命令诸如 &lt;code&gt;git stash&lt;/code&gt;，&lt;code&gt;git rebase&lt;/code&gt; 比你这个强大多了，这条命令很鸡肋没什么用啊~&lt;/p&gt;
&lt;p&gt;下面，用两个鲜明的实例，证明这一命令的方便之处&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/1-ba31e783d889c6df82fedde0b56e056d-6e2c4.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 832px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 83.89423076923076%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAAEpElEQVQ4y0WUeVDUZRzGt9GUYxcRD24sCTWvLFGZ0nRSuZbd5Vq5kkNABRXlXLnk0HABQRTkFFR0hAWVEY90VBS8IcWULGrCvEhTxtRJw+vTu0xTf3zn/ef3fn7P832eeSX0XeOn9sNUlhagCIxB8r4Lk5yCad5bxZPuUxyrK0dXXkxDRTEthw5w+eRhSktKmDE7ErX/WnzETJ8ZjptHHCMsVUj0wFudxynbugnv4DW8N8SVsVMC0O3cxtOfWzjRWCFgJeyrLOFS6wmuXzrD7tpdzBTAtWsLiU3IY+78aFTeGoabKwXwcScPf2ylcmseX0fGM8jADSt7X2rKN/Py9jkuHNnN/upSDu6oEGc5LfVV5GStH1AzfkIQFjZeWNqoMTVTYWQsF8BHV3nWc54aYTlyVRJDTNwZYetFeXEhPWf3U6vNoDw1kf35mTSLb07qtpOWnI7ZSCXDTOQMHrqAoUKEoZEcY6kHknd/XOXFnUtUlRayOikdYzM5pubeREasJEwRQIzKn9yIUHbFLuNQViytZVo08WkMlbkyykyJobH7gDL96KGStw+v8O7Bd2Tn5jA7MApDGxUOk9S4zgtg3ngFGicvav0DObgynDbNSrpzE2gvzEb9ZQgyqStSmV6duwALqNQdyRsB41EnTXvLSExOJjoukaVRscya7ssXDgriHL3QBQZxRrOC27VF9NYV8bI2jzt1ldhYeTLEwAVjvTqZB0YmA8AO6LtOW3MthRvWkaJJIjAoGtsPVZhbyHEbp6TUw4+m6Ah+KNdyJSeFHm0K96q2YG/jyaDBLhjpFYoxlgrLr34XwD+7OLC3EidFMNZTF2Fp78XIMeLvwtIYc3eiJirJn+NDjacf9SFB/JqdzI38jVhaKDEwdBuwLZXJkQ73+Bf4rIvG+hrMZ/lh5uCL0WgPFM5hTPvYh6EC+rmdgiWTPUmd680WZx/urkvnXOFGZKPlA2mbiiBNTOXI/gM+7eL00QasZi7CxN4bx88COZKqoSM3g+CvQrEb4cZ8sc/l07z4ZoKKm0tjedlcjdp9KYOMnTGzViETpZbqi/1aD3xynRvnD2PnqEb6gYr0kBjaEhN4WJzDg11bWTMngIjJvmiFg+0z1HQsjuLtvgq6myoZP06sx0KBha2SUWJNktf6lPu+525XC+af+LBwQSi6uATaRNr3N22gv66ECkUEy4XtLU5qDrmEcDUkmns5WdBeT35iMkamztgI2Ghr5f+1efzLWQL8IimLiaV+xWoupqaJS5m82FlE7tzFZMzypkkVSm9GBk/rS+nJSOZNcxnHi7XYiuCsrBXY2SiQ9N+/jP6B6Lt5itqUeOpWRHEsKY7OzHT6irTc2lbAsqnelCgDOBoUxp3sFF6d3k3vjk381VDAcVElCxGinY0cBztRm7/vXqC741v2aNezLWwJrZlJ3MxP51b+OvobK7korEV9qkLj6MPmhf50JSfypKaI/vYG6NhDdVYaJsNcmDhWIXYpgMHh8Uxx8ifeNwRdTBTXBKy3Ko/Hewp43lhGc/Qqir2C0Dr7EfyRAl1AOL9lp/P8aDXc0BGmjBB9XSjq446B1I1/AFUaI2lHjyqWAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;举个栗子&quot;
        title=&quot;&quot;
        src=&quot;/static/1-ba31e783d889c6df82fedde0b56e056d-6e2c4.png&quot;
        srcset=&quot;/static/1-ba31e783d889c6df82fedde0b56e056d-5e258.png 300w,
/static/1-ba31e783d889c6df82fedde0b56e056d-e6536.png 600w,
/static/1-ba31e783d889c6df82fedde0b56e056d-6e2c4.png 832w&quot;
        sizes=&quot;(max-width: 832px) 100vw, 832px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h3&gt;使用 patch 补丁下载 MR 内容&lt;/h3&gt;
&lt;p&gt;这个方法来源于部门同事，这是个有趣的人，经常会给我带来各种奇思妙想，这里我也就借花献佛了。(为了获取这个 idea 能够撰文，偷偷塞给他 10 块钱获取了授权)&lt;/p&gt;
&lt;p&gt;经常使用 gitlab 的同学大家都知道，当他人提交 MR 到主库时，你只能做代码审阅，无法在 MR 未合并前直接下载更改后的文件内容验证代码是否正确。&lt;/p&gt;
&lt;p&gt;当文件更改内容过多，或者是前端项目你特别想看看代码运行起来的页面效果时，备感无力。&lt;/p&gt;
&lt;p&gt;当然，若是仅凭代码就能脑补其在浏览器中的显示效果的人，当我没说……&lt;/p&gt;
&lt;p&gt;这里关键的地方在于，如何获取这个 MR 与主库现有文件的对比 patch 补丁，然而 gitlab 早已看透了你的一切小心思~&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/2-6919c9fb01d612b03a2806e33a391f76-dfbef.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 15.729166666666666%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAl0lEQVQI103OQQ/CIAwF4P3/3+VZr56Nxm2FAmUDhW3PjiXq4QuvSfNo54wFDQRDhIEnGHnBsEc/jDrPqHXBsvzUWr/mlGAtI4QAkYikc3furzjdLrBabLWIDCuLcaSWg/fwyjkHZkaMsRXs7/3xRK97+V1URdFPOp8jSI7FSYlIy4cJ5GY4SSilNP8X5pyxriu2bWv2/AG+Z+Y8tdmdoAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;生成 patch&quot;
        title=&quot;&quot;
        src=&quot;/static/2-6919c9fb01d612b03a2806e33a391f76-abe1c.png&quot;
        srcset=&quot;/static/2-6919c9fb01d612b03a2806e33a391f76-10046.png 300w,
/static/2-6919c9fb01d612b03a2806e33a391f76-3c4a3.png 600w,
/static/2-6919c9fb01d612b03a2806e33a391f76-abe1c.png 1200w,
/static/2-6919c9fb01d612b03a2806e33a391f76-1c9b7.png 1800w,
/static/2-6919c9fb01d612b03a2806e33a391f76-dfbef.png 1920w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;点击 Email Patches，就可以直接下载 patch 文件，然后通过上文的 &lt;code&gt;git apply&lt;/code&gt; 直接将修改内容下载至本地，然后愉快的 &lt;code&gt;yarn start&lt;/code&gt; 或者其它命令跑起你的项目查看效果啦，so good!&lt;/p&gt;
&lt;h3&gt;多人协作&lt;/h3&gt;
&lt;p&gt;程序员的工作大家都是知道的，周末也会偶尔加个班修个紧急 bug 啥的，若你正放假坐着火车上，吃着火锅唱着歌，一个电话打过来，紧急 bug，速度修复，真是要了个命呐~&lt;/p&gt;
&lt;p&gt;而这时候屋漏偏逢连阴雨，VPN 也连不上公司内网，啥倒霉事全让你占尽了，这可咋整?!&lt;/p&gt;
&lt;p&gt;要么打电话请同事帮你改，二十八个文件都需要改两三句代码，一个一个说吧…… 半天过去了&lt;/p&gt;
&lt;p&gt;或者整个修改的文件全发过去，信号差传得又慢，还不如打电话说，可急死我了……&lt;/p&gt;
&lt;p&gt;这时候，废什么话，git diff 打个 patch 补丁传过去呗，一个 bug 修改的内容通常极少，不到 1KB……&lt;/p&gt;
&lt;p&gt;到这里也看出来了，patch 补丁最大的优势在于内容小，能够只记录你的修改内容而非全文件，通过 &lt;code&gt;git apply&lt;/code&gt; 简直不能更好用~&lt;/p&gt;
&lt;h2&gt;补充&lt;/h2&gt;
&lt;p&gt;这里还有两个类似命令:&lt;code&gt;git format-patch commitA commitB&lt;/code&gt; 和 &lt;code&gt;git am&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;前者会将一次 commit 的所有信息也带上，如作者，时间，节点描述等，再配合后者将 patch 内容应用到当前分支。
与 &lt;code&gt;git apply&lt;/code&gt; 的不同点是，这里补丁不再只在工作区，你会发现当前分支多 commitA 和 commitB 之间的提交记录。具体细节，就还请大家自行去探索吧~&lt;/p&gt;</content:encoded></item><item><title><![CDATA[我的第一个 Node 命令行工具]]></title><description><![CDATA[作为一个开发者，我们在实际的工作和生活中可能都会遇到一些繁琐的重复的工作，这个时候也许你就需要一个脚本来帮你执行做这些无聊的事情。对于一个新手来说可能不知道怎么入手，我们总是在说的脚本编程貌似都是 bash…]]></description><link>https://knownsec-fed.com/2018-02-03-wo-de-di-yi-ge-node-ming-ling-hang-gong-ju/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-02-03-wo-de-di-yi-ge-node-ming-ling-hang-gong-ju/</guid><pubDate>Sat, 03 Feb 2018 07:01:00 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-9df7a29e7903ec88843628107a38d775-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAECAwT/xAAWAQEBAQAAAAAAAAAAAAAAAAAAAQL/2gAMAwEAAhADEAAAAcjphkCK/8QAGRABAAIDAAAAAAAAAAAAAAAAAgABEBES/9oACAEBAAEFAjqIjmXn/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGRAAAQUAAAAAAAAAAAAAAAAAIQABESAy/9oACAEBAAY/Ai8LZr//xAAaEAEAAgMBAAAAAAAAAAAAAAABABARITFh/9oACAEBAAE/IQ1k3APGI9o1/9oADAMBAAIAAwAAABDEH//EABURAQEAAAAAAAAAAAAAAAAAABBB/9oACAEDAQE/EKf/xAAWEQEBAQAAAAAAAAAAAAAAAAARECH/2gAIAQIBAT8QNZ//xAAcEAEAAQQDAAAAAAAAAAAAAAABEQAQIVExQbH/2gAIAQEAAT8QgbASSLLqhyczgs5APWgCBkO92crf/9k=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;我的第一个 Node 命令行工具&quot;
        title=&quot;&quot;
        src=&quot;/static/header-9df7a29e7903ec88843628107a38d775-d6978.jpeg&quot;
        srcset=&quot;/static/header-9df7a29e7903ec88843628107a38d775-527f0.jpeg 300w,
/static/header-9df7a29e7903ec88843628107a38d775-9a7cd.jpeg 600w,
/static/header-9df7a29e7903ec88843628107a38d775-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;作为一个开发者，我们在实际的工作和生活中可能都会遇到一些繁琐的重复的工作，这个时候也许你就需要一个脚本来帮你执行做这些无聊的事情。对于一个新手来说可能不知道怎么入手，我们总是在说的脚本编程貌似都是 bash 语言干的事情。其实不然，理论上只要一门语言提供了解释器都可以用来编写脚本。所以常见的解释型语言如 Perl，Tcl，Python，PHP，Ruby 和 Node 等都可以胜任脚本编程的工作。作为一个前端工程师我们当然可以选我们最熟悉的语言 Node 来编写我们的脚本程序，而且选择Node 还有一个好处就是有大量的 Npm 包可以来简化我们复杂的工作。&lt;/p&gt;
&lt;h2&gt;入门&lt;/h2&gt;
&lt;p&gt;新建一个文件 helloShell 写上如下命令&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;#&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;usr&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;bin&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;env node
cosole&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Hello Shell&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;保存后记得首先赋予文件执行权限然后再执行文件&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-bash&quot;&gt;&lt;code&gt; &lt;span class=&quot;token function&quot;&gt;chmod&lt;/span&gt; +x helloShell
 ./helloShell
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt; 不出意外的话，你的命令行应该会输出 &lt;code&gt;Hello Shell&lt;/code&gt;，其中第一行 &lt;code&gt;#!&lt;/code&gt; 后面跟的内容告诉系统需要什么解释器来执行这个脚本。&lt;/p&gt;
&lt;h2&gt;进阶&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;　使用参数&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt; 作为一个命令行脚本，有时候我们可能需要自己动手输入一些参数．修改刚才的 helloShell 文件为&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;#&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;usr&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;bin&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;env node
console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`Hello &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;argv&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Shell&apos;&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;再次执行 helloShell 文件&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-bash&quot;&gt;&lt;code&gt;./helloShell World
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;得到输出 &lt;code&gt;Hello World&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;但是如果需要开发一个命令行工具，或许我们还需要更多的参数和帮助信息等等，如果通过 node 的 process.argv 来获取和区分这些参数将是一件非常困难的事情。下面介绍一款 npm 包可以让我们更轻松的完成这个工作．下面来简单介绍一下 commander 功能&lt;/p&gt;
&lt;h3&gt;commander 包介绍&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;完整的 node.js 命令行接口解决方案．&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;参数解析&lt;/p&gt;
&lt;p&gt; option 命令用来定义参数。在第一个参数中，接受一个短名字和一个长名字使用＂,＂分隔，在命令行里使用时，这两个是等价的，但是后者可以在程序获取到，第二个参数为描述, 会在 help 信息里展示出来；&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;  &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; program &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;commander&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  program
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;version&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;0.1.0&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;option&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;-p, --peppers&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Add peppers&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;option&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;-P, --pineapple&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Add pineapple&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;option&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;-b, --bbq-sauce&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Add bbq sauce&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;option&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;-c, --cheese [type]&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Add the specified type of cheese [marble]&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;marble&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;parse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;argv&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;you ordered a pizza with:&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;program&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;peppers&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;  - peppers&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;program&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pineapple&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;  - pineapple&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;program&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;bbqSauce&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;  - bbq&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;  - %s cheese&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; program&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cheese&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;特定命令的参数验证&lt;/p&gt;
&lt;p&gt;  只有当 command 命令里的命令被使用时才会触发 option。任何未知的参数将被报告为错误。需要注意的是必须要有一个 action，这些参数才会被验证。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; program &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;commander&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

program
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;command&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;rm &amp;lt;dir&gt;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;option&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;-r, --recursive&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Remove recursively&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;action&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;dir&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; cmd&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;remove &apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; dir &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;cmd&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;recursive &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos; recursively&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

program&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;parse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;argv&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;可变参数&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;只有最后一个参数是可变的。而且你必须在可变参数名称后追加…，这里是一个例子&lt;/p&gt;
&lt;p&gt;有点类似于 ES6 的 rest 参数，多余的参数都会被加入一个参数数组，不过注意”…” 符号在后面。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; program &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;commander&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

program
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;version&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;0.1.0&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;command&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;rmdir &amp;lt;dir&gt; [otherDirs...]&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;action&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;dir&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; otherDirs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;rmdir %s&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; dir&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;otherDirs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      otherDirs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;oDir&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;rmdir %s&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; oDir&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

program&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;parse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;argv&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;指定参数语法&lt;/p&gt;
&lt;p&gt;尖括号（例如&lt;cmd&gt;）表示必须的输入。方括号（例如[env]）表示可选输入。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; program &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;commander&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

program
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;version&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;0.1.0&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;arguments&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;&amp;lt;cmd&gt; [env]&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;action&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;cmd&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; env&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    cmdValue &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; cmd&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    envValue &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; env&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

program&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;parse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;argv&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;typeof&lt;/span&gt; cmdValue &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;undefined&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;no command given!&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;exit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;command:&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; cmdValue&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;environment:&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; envValue &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;no environment given&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;自定义帮助&lt;/p&gt;
&lt;p&gt;commander 会基于你给的参数自动生成一份帮助信息，但是我们也可以自己来定义它。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; program &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;commander&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

program
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;version&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;0.1.0&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;option&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;-f, --foo&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;enable some foo&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;option&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;-b, --bar&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;enable some bar&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;option&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;-B, --baz&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;enable some baz&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// must be before .parse() since&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// node&apos;s emit() is immediate&lt;/span&gt;

program&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;--help&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;  Examples:&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;    $ custom-help --help&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;    $ custom-help -h&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

program&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;parse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;argv&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;stuff&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;加入环境变量 PATH&lt;/h2&gt;
&lt;p&gt;由于文件没有加入系统环境变量 PATH 我们每次执行它都需要指定文件的路径非常麻烦，我们可以选择将我们的文件放入系统环境变量 PATH 里，一般我们可以将我们的 &lt;code&gt;helloShell&lt;/code&gt; 文件放 &lt;code&gt;usr/bin&lt;/code&gt; 文件夹下，就可以在系统任何位置执行我们的程序了。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-bash&quot;&gt;&lt;code&gt;helloShell World
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;得到输出 &lt;code&gt;Hello World&lt;/code&gt;&lt;/p&gt;
&lt;h2&gt;发布&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;有时候，我们写了一个很棒的命令行工具，可能别人也想使用它来进行一些工作，这个时候怎么办呢？通过拷贝文件的方法？也许我们有更好的办法－－通过 npm 包进行发布。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;新建一个 npm 项目&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;执行 &lt;code&gt;npm init&lt;/code&gt;
按照提示完成新建后 package.json 大概是这个样子&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-json&quot;&gt;&lt;code&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;shelltest555&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;version&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;1.0.0&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;description&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;test npm publish&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;main&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;index.js&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;scripts&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;test&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;echo \&quot;Error: no test specified\&quot; &amp;amp;&amp;amp; exit 1&quot;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;author&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;license&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;ISC&quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;增加 &lt;code&gt;bin&lt;/code&gt; 命令&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;作为一个命令行工具，我们可能不需要 &lt;code&gt;main&lt;/code&gt; 命令（&lt;code&gt;main&lt;/code&gt; 命令是作为 require 一个 npm 包后，指定这个包的入口文件）修改 &lt;code&gt;main&lt;/code&gt; 命令为&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-json&quot;&gt;&lt;code&gt;&lt;span class=&quot;token property&quot;&gt;&quot;bin&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;helloShell&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;./helloShell&quot;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;记得将我们刚才的 helloShell 文件放入到这个位置，当用户运行时 &lt;code&gt;npm install --global shelltest555&lt;/code&gt;，它就会自动将 &lt;code&gt;bin&lt;/code&gt; 命令里的 &lt;code&gt;helloShell&lt;/code&gt; 命令添加到系统环境变量 PATH 里面．&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;发布&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;确保你已经注册了 npm 账号，然后在我们项目目录下将 npm 源设置为 npm 官方的源，&lt;code&gt;npm login&lt;/code&gt; 后，执行 &lt;code&gt;npm publish&lt;/code&gt;，这里要注意 package.json 的 name 属性不能和已有的 npm 包重复并且确保项目下有 README.md 文件。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;安装&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;执行　&lt;code&gt;npm install --global shelltest555&lt;/code&gt;, 如果一起顺利，现在你就可以在全局执行 &lt;code&gt;helloshell&lt;/code&gt; 命令了。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;结语&lt;/h2&gt;
&lt;p&gt;  本文只是列举了一非常简单的 Node 命令行程序创建，发布，安装流程．希望大家举一反三让 Node 脚本更好的服务与我们工作和生活之中。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[【译】React ⚛️  新的 Context API]]></title><description><![CDATA[原文地址： React’s ⚛️ new Context API 作者： kentcdodds 这不再是一个  实验性的 API ，并且它更符合  工程化  的理念，目前它已成为  React 一级棒的 API 。 ⚠️ ：大家可以通过  newsletter…]]></description><link>https://knownsec-fed.com/2018-02-01-fan-yi-react-xin-de-contextapi/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-02-01-fan-yi-react-xin-de-contextapi/</guid><pubDate>Thu, 01 Feb 2018 02:35:39 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-28193925cddf7d6452396c4238361a9b-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAexLA0P/xAAWEAADAAAAAAAAAAAAAAAAAAACIDH/2gAIAQEAAQUCUZ//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAWEAEBAQAAAAAAAAAAAAAAAAAQATH/2gAIAQEABj8CMIf/xAAaEAACAwEBAAAAAAAAAAAAAAAAAUFhgREx/9oACAEBAAE/IcM8s5R6Tggigf/aAAwDAQACAAMAAAAQVA//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAbEAEAAwADAQAAAAAAAAAAAAABABEhMUFRcf/aAAgBAQABPxDUuluBfEqnC8D1KGfZAHSQXk7iFjnyf//Z&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;React新的 Context API&quot;
        title=&quot;&quot;
        src=&quot;/static/header-28193925cddf7d6452396c4238361a9b-d6978.jpeg&quot;
        srcset=&quot;/static/header-28193925cddf7d6452396c4238361a9b-527f0.jpeg 300w,
/static/header-28193925cddf7d6452396c4238361a9b-9a7cd.jpeg 600w,
/static/header-28193925cddf7d6452396c4238361a9b-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;原文地址：&lt;a href=&quot;https://blog.kentcdodds.com/reacts-%EF%B8%8F-new-context-api-70c9fe01596b&quot;&gt;React’s ⚛️ new Context API&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;作者：&lt;a href=&quot;https://twitter.com/kentcdodds&quot;&gt;kentcdodds&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;这不再是一个 &lt;code&gt;实验性的 API&lt;/code&gt;，并且它更符合 &lt;code&gt;工程化&lt;/code&gt; 的理念，目前它已成为 &lt;code&gt;React 一级棒的 API&lt;/code&gt;。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;⚠️ ：大家可以通过 &lt;a href=&quot;https://tinyletter.com/kentcdodds&quot;&gt;newsletter&lt;/a&gt; 获取我最新的资讯，我一般每两周通过邮件发送一次，大家可以通过自己的收件箱获取更多的内容。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;code&gt;React&lt;/code&gt; 中的 &lt;code&gt;context API&lt;/code&gt; 相信大家都知道吧，可能跟大伙一样，当看到 &lt;code&gt;React&lt;/code&gt; 的官方文档是这样时，都不敢直接使用它。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/context-f28060c2ee8e3505bff6f5b584f4891f-7df05.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 748px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 80.6149732620321%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAADfElEQVQ4y6WSS2wbVRSGTQUbJIoAUYkWQSO7fjQZPzppTEBBUMECwQaB2RIDSfpQEWvYsGEDbBxKaUFIiAg2KBQatYQkxk2cpiGNEH7kYdeGxFE84xnbY4/Hju1rz8+dcWJHoqw40q8zd+bOd/97zjEYaMxemXg0cG3MeeXXcWbylylmfi7I3AjMMr/5A0wwGGQCgRvM9PQ0MzPjp5rRs9/vZ6amppiJqxPM5PXrzp9+vnrIsBfRxaWPZCGBlWS0GoqsEEHgSWorRTY2NwnHcYTnObJJn3me19d779LpbbIei1UTySSWl5c/aQN/GP/RF4slcDN4szG/sID5pVtYXF7CwtIi5oLzmJ0NIhSKIBpdxcqKpjVEaV5bW8et3283g4u3QZ1eagOPdFl95r7nYXKfqneZHeoxi0PtMvWopt1s7Wb1bLQ41WO2XpXtG1DZkwOq2eZULTYXofvx2OPGL9rAo6Zun83uhrnnJBkaOa++/8GHGDnzLt4eOovBt0bwpncYg97T8Hq98A6+gaHhMxg+fR7vDJ/D2XPvkRdfehWHnzB3HFInPhvjBuPqJ3+GwmqtVoUoisjn8xAEAbR+4HgR6a0IuL/GocgZVKt1KIoCGuTjz77EwUeOdIBGs70FdPYTWidV25XL5SBJEvJUgphDht9A+u9JlEuc9hmq2kSj0dCBvs8p8OHD+4CWXaDraRKL3dGBxWIR5XJZh/K8QIGb4DeuISes08OK+oFpToeTi5e+xgMP/QdQc9hsNkFHQ7/yzs4OBVdQVgpQpDAq1KGiVFAqleh36e5ArYbH7U/BfuIZQkeCOlRRKBRQqVRaDjMihMwWctt+FHIJiFkJUkGiOQt6OLlw8Ss8uL+GTxq7fSbbCVhpl9fW4/qVU6mU3hjtWtrMJZMJyFISSklEoSi3HEoth6MXLuP+g4c6QNY94Hv21Mt47oVX6vE7CQ2oZjIZldZJf26poWrRWbdFvvn2exw1dnfmMBQOj7YaITe1zlWrVdTrdWj/y7KM7XQGma055LkA9keD4mp1WnAa4Ujkchu4urr6qQagM1ehtatRSI12+V+S5b0s17LZbC2eEmt/RDcqZaWMeDw+use7x2q1HmdZ9jWXy+Wx2+0ehmHuIvuuWmuHw+HpY52efjfr6e1lX7dYLD0ayxCJRDToAap7qe77HzowNvad4R9vjA4Xe719BAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;context api&quot;
        title=&quot;&quot;
        src=&quot;/static/context-f28060c2ee8e3505bff6f5b584f4891f-7df05.png&quot;
        srcset=&quot;/static/context-f28060c2ee8e3505bff6f5b584f4891f-147c7.png 300w,
/static/context-f28060c2ee8e3505bff6f5b584f4891f-2f268.png 600w,
/static/context-f28060c2ee8e3505bff6f5b584f4891f-7df05.png 748w&quot;
        sizes=&quot;(max-width: 748px) 100vw, 748px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;第一条搜索结果显示的就是 &lt;a href=&quot;https://reactjs.org/docs/context.html#why-not-to-use-context&quot;&gt;为什么不建议使用 context&lt;/a&gt;，让大家瞬间产生忧虑，该章节是这么描述 &lt;code&gt;context&lt;/code&gt; 的：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;如果你想让你的应用更加稳定，就别使用 &lt;code&gt;context&lt;/code&gt;，因为这是一个实验性的 &lt;code&gt;API&lt;/code&gt;，在未来的 &lt;code&gt;React&lt;/code&gt; 版本中可能会发生改变。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;⚠️ 注意，这里的改变包括 &lt;code&gt;中断&lt;/code&gt;，&lt;code&gt;终止&lt;/code&gt;，&lt;code&gt;不再使用&lt;/code&gt; 的含义。&lt;/p&gt;
&lt;h2&gt;那么，为什么还要使用 context 呢&lt;/h2&gt;
&lt;p&gt;你曾经历过尝试在一个 &lt;code&gt;层级很深的组件&lt;/code&gt; 中获取 &lt;code&gt;最外层组件&lt;/code&gt; 的 &lt;code&gt;state&lt;/code&gt; 的痛苦么，这种痛苦叫 &lt;code&gt;prop drilling&lt;/code&gt;，可谓让人接近崩溃的。当遇到这种情形时，你肯定不会喜欢用 &lt;code&gt;props&lt;/code&gt; 来传递数据，因为如果中间有个组件发生改变，这个代价将是几何 😂。&lt;/p&gt;
&lt;p&gt;实际上，你可以通过使用常规的 &lt;code&gt;JavaScript module&lt;/code&gt; 来规避以上的问题，将数据存放在某个 &lt;code&gt;module&lt;/code&gt; 中，就可以实现在任何地方 &lt;code&gt;访问/导入&lt;/code&gt;，但这么做想要 &lt;code&gt;更新&lt;/code&gt; 却很麻烦（你必须实现一个 &lt;code&gt;event&lt;/code&gt; 在数据更新时触发，通知用户数据发生改变），并且，&lt;code&gt;服务端渲染&lt;/code&gt; 对 &lt;code&gt;module&lt;/code&gt; 也会有 &lt;a href=&quot;https://stackoverflow.com/questions/40935571/why-singleton-store-in-flux-can-cause-issue-for-server-side-rendering/40974748#40974748&quot;&gt;影响&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;因此，像 &lt;a href=&quot;https://redux.js.org/&quot;&gt;redux&lt;/a&gt; 这样的负责 &lt;code&gt;状态管理&lt;/code&gt; 的第三方库进入了大家的视野。它允许你在任何地方从 &lt;code&gt;store&lt;/code&gt; 获取数据，你需要做的只是使用 &lt;code&gt;&amp;#x3C;Provider /&gt;&lt;/code&gt; 包装一下，然后就可以神奇地在 &lt;code&gt;connected&lt;/code&gt; 的组件中轻松地获取想要的数据了。&lt;/p&gt;
&lt;p&gt;然而，如果我告诉你 &lt;code&gt;&amp;#x3C;Provider /&gt;&lt;/code&gt; 就是在使用 &lt;code&gt;context&lt;/code&gt; 这个 &lt;code&gt;实验性 API&lt;/code&gt; 呢？😱 事实上也是这样的！&lt;code&gt;provider&lt;/code&gt; 组件将数据存进 &lt;code&gt;context&lt;/code&gt; 中，&lt;code&gt;connect&lt;/code&gt; 高阶组件从 &lt;code&gt;context&lt;/code&gt; 获取数据，所以，&lt;code&gt;redux&lt;/code&gt; 并不允许你的数据可以在任何地方访问，&lt;code&gt;context&lt;/code&gt; 就是这样。&lt;/p&gt;
&lt;p&gt;所以，为什么还要使用 &lt;code&gt;context&lt;/code&gt; 呢？可能是大家已经深深地爱上它了吧！即使你没有直接使用 &lt;code&gt;context&lt;/code&gt;，你的应用程序也会通过引用像 &lt;a href=&quot;https://github.com/reactjs/react-redux/blob/76dd7faa90981dd2f9efa76f3e2f26ecf2c12cf7/src/components/connectAdvanced.js#L136-L143&quot;&gt;react-redux&lt;/a&gt;， &lt;a href=&quot;https://github.com/mobxjs/mobx-react/blob/dc249910c74c1b2e988a879be07f10aeaea90936/src/Provider.js#L19-L34&quot;&gt;MobX-react&lt;/a&gt;， &lt;a href=&quot;https://github.com/ReactTraining/react-router/blob/e6f9017c947b3ae49affa24cc320d0a86f765b55/packages/react-router/modules/Router.js#L23-L34&quot;&gt;react-router&lt;/a&gt;， &lt;a href=&quot;https://github.com/paypal/glamorous/blob/7468bfc76f46783cac841e20973ed119c771f3b7/src/theme-provider.js#L33-L37&quot;&gt;glamorous&lt;/a&gt; 这样的第三方库间接用到它。&lt;/p&gt;
&lt;h2&gt;Context 重生啦&lt;/h2&gt;
&lt;p&gt;现在清楚了，我们是如此地热爱 &lt;code&gt;context&lt;/code&gt;，但官方文档的警告依然还在：&lt;code&gt;在 React 的未来版本中，可能不再使用它&lt;/code&gt;，好消息是，&lt;code&gt;context&lt;/code&gt; 要正式跟大家打招呼了，大家极有可能比之前更爱它。&lt;/p&gt;
&lt;p&gt;一个月前，&lt;code&gt;React 团队&lt;/code&gt; 从 &lt;a href=&quot;https://github.com/yarnpkg/rfcs&quot;&gt;yarn&lt;/a&gt;，&lt;a href=&quot;https://github.com/rust-lang/rfcs&quot;&gt;rust&lt;/a&gt; 和 &lt;a href=&quot;https://github.com/emberjs/rfcs&quot;&gt;Ember&lt;/a&gt; 的 &lt;code&gt;rfcs 仓库&lt;/code&gt; 受到启发，建立了一个自己的 &lt;a href=&quot;https://github.com/reactjs/rfcs&quot;&gt;rfcs&lt;/a&gt; 仓库。仓库第一个 &lt;code&gt;PR&lt;/code&gt; 来自 &lt;a href=&quot;https://twitter.com/acdlite&quot;&gt;Andrew Clark&lt;/a&gt;（React 团队核心成员），&lt;code&gt;PR&lt;/code&gt; 标题为 &lt;a href=&quot;https://github.com/reactjs/rfcs/pull/2&quot;&gt;New version of context&lt;/a&gt;，其中 &lt;code&gt;Andrew Clark&lt;/code&gt; 概述了未来新版本的 &lt;code&gt;context&lt;/code&gt; 是怎样的，之后还存在一些有趣的讨论，几天后，&lt;code&gt;Andrew Clark&lt;/code&gt; 就向 &lt;code&gt;React&lt;/code&gt; 仓库提了一个 &lt;a href=&quot;https://github.com/facebook/react/pull/11818&quot;&gt;New context API&lt;/a&gt; 的 &lt;code&gt;PR&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;那么，到底有什么改变呢？肉眼估计新的 &lt;code&gt;API&lt;/code&gt; 与之前的 &lt;code&gt;API&lt;/code&gt; 存在百万级别的差异。这是我做的一个简单的 &lt;a href=&quot;https://codesandbox.io/s/n4r0qq898j?from-embed&quot;&gt;示例&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; ThemeContext &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createContext&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;light&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ThemeProvider&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  state &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;theme&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;light&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; ThemeContext&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;provide&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;theme&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;children&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;ThemeConsumer&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;children&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; ThemeContext&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;consume&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;children&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;App&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;ThemeProvider&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;ThemeConsumer&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;val &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;val&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;ThemeConsumer&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;ThemeProvider&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;你可能注意到示例中使用到一个 &lt;code&gt;render prop&lt;/code&gt;，但实际上并没有任何关于需要使用 &lt;code&gt;render prop&lt;/code&gt; 的 &lt;code&gt;context API&lt;/code&gt;，你可以使用 &lt;code&gt;context API&lt;/code&gt; 轻松实现 &lt;code&gt;高阶组件&lt;/code&gt; 或其他功能。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;新的 &lt;code&gt;context API&lt;/code&gt; 主要由以下三部分组成&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;React.createContext&lt;/code&gt; 用于传递 &lt;code&gt;初始值&lt;/code&gt;（可选择 &lt;a href=&quot;https://twitter.com/acdlite/status/957446433656864768&quot;&gt;使用 bitmask 的一个奇妙的选择性退出函数&lt;/a&gt;），返回一个包含 &lt;code&gt;provider&lt;/code&gt; 和 &lt;code&gt;consumer&lt;/code&gt; 的对象&lt;/li&gt;
&lt;li&gt;&lt;code&gt;provide&lt;/code&gt; 函数使用 &lt;code&gt;higher&lt;/code&gt;，并可以接收任何值&lt;/li&gt;
&lt;li&gt;&lt;code&gt;consume&lt;/code&gt; 函数在 &lt;code&gt;provider&lt;/code&gt; 之后任何地方使用，并传递一个返回 &lt;code&gt;JSX&lt;/code&gt; 的函数（这有点像 &lt;code&gt;render prop&lt;/code&gt; 组件，但 &lt;code&gt;consume&lt;/code&gt; 不是组件）。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;我对这个 &lt;code&gt;API&lt;/code&gt; 充满了期待，&lt;code&gt;React 团队&lt;/code&gt; 也将会移除 &lt;code&gt;context 是实验性 API&lt;/code&gt; 的警告，因为它现在是框架 &lt;a href=&quot;https://twitter.com/acdlite/status/957445801302618112&quot;&gt;一级棒的特性&lt;/a&gt;。这也意味着大家将不再那么担心使用 &lt;code&gt;context&lt;/code&gt; 来解决应用中 &lt;code&gt;prop-drilling&lt;/code&gt; 的问题了，对 &lt;code&gt;Redux&lt;/code&gt; 也将不再那么依赖，对 &lt;code&gt;React&lt;/code&gt; 将更加喜欢。&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://twitter.com/kentcdodds/status/911276059051438082&quot;&gt;我最近看到的&lt;/a&gt;，大概意思是：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;大家不是很愿意保持使用提倡的 &lt;code&gt;render&lt;/code&gt; 方法，加重了 &lt;code&gt;prop drilling&lt;/code&gt; 问题，所以，最终想通过 &lt;code&gt;redux&lt;/code&gt; 来缓解&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;所以，我认为如果我们不过早或武断地去破坏 &lt;code&gt;render&lt;/code&gt; 方法，我们可能就不会那么痛苦，即便最终我们实在没有办法避免，我们也可以通过核心的 &lt;code&gt;React API&lt;/code&gt; 来解决。&lt;/p&gt;
&lt;h2&gt;Context 实践&lt;/h2&gt;
&lt;p&gt;我看到了一个关于 &lt;code&gt;context API&lt;/code&gt;（或普通的 &lt;code&gt;render prop pattern&lt;/code&gt;）的问题很多次，就是如何组合 &lt;code&gt;providers&lt;/code&gt; 和 &lt;code&gt;consumers&lt;/code&gt;，当在一个 &lt;code&gt;render&lt;/code&gt; 方法中把一堆 &lt;code&gt;render prop&lt;/code&gt; 组件放在一起时，就会像这样 &lt;a href=&quot;https://twitter.com/acdlite/status/955955121979969537&quot;&gt;嵌套&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/practical-c97d794ba40352616a4d5c66667801a0-94d94.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 499px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 198.19639278557116%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAoCAYAAAD+MdrbAAAACXBIWXMAAAsSAAALEgHS3X78AAAEcUlEQVRIx51W2XIjNwzUj+c9j/mhVPINju1kLWk0933fpzoNrkeWtLZWWlah5uI0QTTYwKZpB9S0vp8QBjH+ff2GNMnR8V3b9OjbEUNH6zmn47u2R9f1as72bY//OF/+bTjHC1NsVsCWL8qihu8FqKtWAXbNgLQo4RURgiJGXpVo6l5ZnpaIoxSBH0EwBLDk+43cCGDXjxiHCWXcoYhblFWtPOroWd23tIb39JjzhmHENM6Yp0WZmvOOcwLsxwkyyiBHsreQRxGGccQ9Y5oXhXEJOEynCVkcQ9N06LpJM7h98W7iHHrcdSqeTdN8t7pWu2t+8FAAj0cFKD/qugXbsqHx6rohDDuCx/iapgnH8ZAkCdI0RczF66b7CSBj9fa2hW87ML0Stp/gcNBgWj6+7W3keXHvlj883O0IYIqHBmzTQuz7cDwfrh/A532eFgizBjmzIEky5WH1VQyXZYHvetgTdL8/EJiAQUjWO/X9yJ2sJmOc5q9JWSct8wzbtunpnts1FLBjOcizHEPbYpqmE+gw3gQ8A+VPBsF2AkYiDHpqkfmIWxevI6aWbD8I4y9IOfNwvYonB+1ADzUcCCYLVHmO5f379znL7S1fgzY8NbJtgwSFjOVA0s6//zSG1yajyDLoB5PAOhnOcFzWb0eM452A1x57QYa37R5hGF7k4Uzwh7Z82npdKw9dEiQey3NfN4jTG3l4C1DOsM5YHnjOC56WeRLFoRa23W2Wj2cMfqTQjEiSnWybJGcc+vvU5jMPZyb5TClrmxYJBaGuKpKyfJByD8sXacE0cemdHEcBW44Lj+f8ax5e5qIOiydEN3i2KQ4iwF3Xsnz09wFeP1uUs/12R/E1sNUcqpCJvWazOD3A8omUUapfp6StpTg0Tc26MjF+C9p+JuADMZSjludSWjtFzo81ZX48saMwgmGYLAuMH+U/SdKTPg7j/FgMV13zqdYRLSF4Ro/Hd5F4OA9PV+ZeQEDx1CLTqyZK1bvPw0/AMyq2xtLgCePUSUklzw9JzISquVO+zhfJi0KdZ/FO1yQvXQRJQcDxNuB6LwVrNXluePykIm5pUm8c1u6ybi/zsJIu6ws9/GzUlC3ZesXTI+QUZUXA6R2Q7Vo/HlWCXg/P8/D09ISXlxdlz8/PeHl9hc8yIIAxU8cPyHycqi1LF7YRpXBcl+1Eo/qWlsm73kvvIq1GovIuUfcZhbVXXdigTOZL4re9pM6MTUKX//j9N/z915/45/mV9szY7FjhdDwynOQIL12wmehhkZf0ij0h5bxigM87CPl+/zhiIxLkB5GyMIphOS5s1gzH9VmUQpjMt4L9ixAhJMh1beUqauN6FRKlWG0kHpqm0Q7sDMxTzAIGWwIuVzkNIrAuY+2xU5CqJ+9lvryzuahKLYJuJPgmD7xNz0Te5aVsUyY8OuSfjbQa0k9LDIuyJmiGkGmQMC1EiaWvlq6/5cJyXRP83NbFF9myIoWJWZGQNCtUGshzzeeMZMli8iwmveC1+F6IMAH/B9MyGDLREyaGAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;practical&quot;
        title=&quot;&quot;
        src=&quot;/static/practical-c97d794ba40352616a4d5c66667801a0-94d94.png&quot;
        srcset=&quot;/static/practical-c97d794ba40352616a4d5c66667801a0-122d6.png 300w,
/static/practical-c97d794ba40352616a4d5c66667801a0-94d94.png 499w&quot;
        sizes=&quot;(max-width: 499px) 100vw, 499px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;那么，我们可以做点什么来避免呢？其实，个人觉得没有那么糟糕，如果你觉得这样并不好，那么可以使用常规的方法来解决它：&lt;code&gt;utility&lt;/code&gt; 函数/组件，下面是一个示例：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; ThemeContext &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createContext&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;light&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ThemeProvider&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;/* code */&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;ThemeConsumer&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;children&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; ThemeContext&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;consume&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;children&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; LanguageContext &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createContext&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;en&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;LanguageProvider&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;/* code */&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;LanguageConsumer&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;children&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; LanguageContext&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;consume&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;children&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;AppProviders&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;children&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;LanguageProvider&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;ThemeProvider&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;children&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;ThemeProvider&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;LanguageProvider&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ThemeAndLanguageConsumer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;children&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;LanguageConsumer&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;language &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;ThemeConsumer&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
          &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;theme &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;children&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;language&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; theme&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;ThemeConsumer&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;LanguageConsumer&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;App&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;AppProviders&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;ThemeAndLanguageConsumer&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;theme&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; language&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;theme&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; and &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;language&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;ThemeAndLanguageConsumer&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;AppProviders&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;这里的目标是使用常见的案例，结合特殊功能的函数/组件，使案例更加 &lt;code&gt;工程化&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;除此之外，大家还可以参考 &lt;a href=&quot;https://medium.com/@jmeas&quot;&gt;jmeas&lt;/a&gt; 的 &lt;a href=&quot;https://codesandbox.io/s/92pj14134y?from-embed&quot;&gt;react-composer&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;但需要提及的是，在实践中，我并不建议大家嵌套渲染 &lt;code&gt;props components&lt;/code&gt;，无论什么时候，都可以选择创建多个简单易用的组件，然后组合使用。&lt;/p&gt;
&lt;h2&gt;总结&lt;/h2&gt;
&lt;p&gt;正如上面所说的，我对这个 &lt;code&gt;API&lt;/code&gt; 充满了期待。目前暂未发布，但应该会包含在下一个 &lt;code&gt;minor&lt;/code&gt; 版本中。不同担心，之前的 &lt;code&gt;API&lt;/code&gt; 会继续正常工作，直到下一个 &lt;code&gt;major&lt;/code&gt; 版本发布，所以，每个人都有时间迁移。还有不要忘了，&lt;code&gt;React&lt;/code&gt; 团队在 &lt;code&gt;Facebook&lt;/code&gt; 有超过 &lt;code&gt;50,000&lt;/code&gt; 个 &lt;code&gt;React components&lt;/code&gt; 需要维护，所以，将来很有可能会发布一个 &lt;code&gt;codemod&lt;/code&gt; 去自动更新大多数人的代码（就像以往一样）。&lt;/p&gt;
&lt;p&gt;我很高兴这个 &lt;code&gt;新 API&lt;/code&gt; 能够提供，正如我在 &lt;a href=&quot;https://twitter.com/kentcdodds/status/956675313966239745&quot;&gt;twitter&lt;/a&gt; 中提及的。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/twitter-66f2545a9ddcb12793aad2c2a221a4d8-94d94.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 499px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 48.496993987975955%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABgElEQVQoz5VSCU7DQAzMSxGP4FMI8RYKJTRn27SEXklz7GZztMlgu1SiUouEpZE3XnvWGdtaTKfIswymrmGMQVVVyPMcXdeBbRgGwTU7x/t+QKZPedbD3T2eH5/geD4c18Pr+B0voxG01heEt0AZaA8D/K8e/GlNbA9pmqHtDtBVjcrUcnGrq79MOtzsEmy2Cbbkl/FK/Gf8RbGddMm/zlIwapKFYyxL0zQCjjE6aojNchwHU9JxNpshCAIEYSgICRyfz+dwPY/uQsqZU2yGKFrA831MqJbvGJoeORG6LjzSb7VeEwkRRBGmRP42HgupT4+4pO1isRQSl/IjyvH9ALb9IXV7GupZIotftW1bCrmAE+M4hlIKSZKgKApBkqbIqPAc403g8+F4vBietd5sEa/W2CUp+Mza7bP8X8Pofw3QyvISSlcoSo1SafFFqUj8inQxMnVD4HPTtjdWB6ib051l6kaWulQVTc8Iadt24hnqhzgvFE2zubqbbJzb9z2+Aewl+vZT8zHkAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;twitter&quot;
        title=&quot;&quot;
        src=&quot;/static/twitter-66f2545a9ddcb12793aad2c2a221a4d8-94d94.png&quot;
        srcset=&quot;/static/twitter-66f2545a9ddcb12793aad2c2a221a4d8-122d6.png 300w,
/static/twitter-66f2545a9ddcb12793aad2c2a221a4d8-94d94.png 499w&quot;
        sizes=&quot;(max-width: 499px) 100vw, 499px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;</content:encoded></item><item><title><![CDATA[快速搭建你的 github pages 个人博客 —— 基于 Create-React-App 的单页面应用实践]]></title><description><![CDATA[相信各位github资深玩家们都有自己基于  github pages  搭建的个人站点。官方推荐的静态站点生成器是  Jekyll ，关于  Jekyll  的使用感兴趣的各位请自行 google，这里就不赘述了。本文主要介绍下基于  Create-React-App…]]></description><link>https://knownsec-fed.com/2018-01-29-kuai-su-da-jian-ni-de-github-page-ge-ren-bo-ke-ji-yu-createreactapp-de-dan-ye-mian-ying-yong-shi-jian/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-01-29-kuai-su-da-jian-ni-de-github-page-ge-ren-bo-ke-ji-yu-createreactapp-de-dan-ye-mian-ying-yong-shi-jian/</guid><pubDate>Mon, 29 Jan 2018 02:58:17 GMT</pubDate><content:encoded>&lt;p&gt;相信各位github资深玩家们都有自己基于 &lt;code&gt;github pages&lt;/code&gt; 搭建的个人站点。官方推荐的静态站点生成器是 &lt;code&gt;Jekyll&lt;/code&gt;，关于 &lt;code&gt;Jekyll&lt;/code&gt; 的使用感兴趣的各位请自行 google，这里就不赘述了。本文主要介绍下基于 &lt;code&gt;Create-React-App&lt;/code&gt; 搭建个人博客的相关实践，可能更适合做前端开发的伙伴。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-cadb125d682b194a96a5f9e975616d7b-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAME/8QAFgEBAQEAAAAAAAAAAAAAAAAAAAME/9oADAMBAAIQAxAAAAHHWLTAD//EABgQAAIDAAAAAAAAAAAAAAAAAAABAhEg/9oACAEBAAEFAkTrP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABYQAAMAAAAAAAAAAAAAAAAAAAAgIf/aAAgBAQAGPwIi/wD/xAAWEAEBAQAAAAAAAAAAAAAAAAAxACD/2gAIAQEAAT8hUOf/2gAMAwEAAgADAAAAEAAv/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGhABAQACAwAAAAAAAAAAAAAAAREAISAxQf/aAAgBAQABPxACRQvr1hJo0Rjbx//Z&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;github pages&quot;
        title=&quot;&quot;
        src=&quot;/static/header-cadb125d682b194a96a5f9e975616d7b-d6978.jpeg&quot;
        srcset=&quot;/static/header-cadb125d682b194a96a5f9e975616d7b-527f0.jpeg 300w,
/static/header-cadb125d682b194a96a5f9e975616d7b-9a7cd.jpeg 600w,
/static/header-cadb125d682b194a96a5f9e975616d7b-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;&lt;code&gt;github pages&lt;/code&gt; 是 &lt;code&gt;github&lt;/code&gt; 推出的静态站点服务，主要的用途在于使用你在 &lt;code&gt;github&lt;/code&gt; 仓库中的代码构建你自己的静态站点，为用户提供 &lt;code&gt;github.io&lt;/code&gt; 二级域名，您也可以通过添加DNS的 &lt;code&gt;CNAME&lt;/code&gt; 记录来绑定自己的域名。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;github pages&lt;/code&gt; 最简单粗暴的方法就是直接往 github 上方静态页面了，创建一个名为 &lt;code&gt;[您的github账号名].github.io&lt;/code&gt; 的github仓库，将您的index.html页面代码扔进master分支，就可以直接通过 &lt;code&gt;https://[您的github账号名].github.io&lt;/code&gt; 访问到您的站点了。&lt;/p&gt;
&lt;p&gt;对于一个简单的个人博客站点来说，存在以下基本功能特性：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;文章的新增、编辑、一键发布&lt;/li&gt;
&lt;li&gt;文章的分类、归档yarn&lt;/li&gt;
&lt;li&gt;风格良好的博客样式&lt;/li&gt;
&lt;li&gt;评论、SEO等功能&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;下面介绍基于React如何实现一个简单的静态博客。&lt;/p&gt;
&lt;h2&gt;1. 创建一个 React 项目&lt;/h2&gt;
&lt;p&gt;使用 Create-React-App（以下简称CRA） 的generator创建一个React前端项目骨架。对此项目进行一定改造以方便我们日常的开发和使用习惯：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;使用&lt;code&gt;react-app-rewired&lt;/code&gt;来调整CRA中webpack的配置&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;对CRA的webpack配置感兴趣的童鞋可以看看&lt;a href=&quot;https://zhaozhiming.github.io/blog/2018/01/08/create-react-app-override-webpack-config/&quot;&gt;这篇文章&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;使用&lt;code&gt;core-js&lt;/code&gt;对浏览器版本进行向下兼容&lt;/li&gt;
&lt;li&gt;通过编写不同的React容器组件（container）来实现不同的页面，通过统一的json结构来配置应用的页面路由&lt;/li&gt;
&lt;li&gt;使用蚂蚁金服的&lt;code&gt;antd&lt;/code&gt;设计语言（React组件）快速实现业务UI&lt;/li&gt;
&lt;li&gt;使用&lt;code&gt;axios&lt;/code&gt;实现前后端的数据请求&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;个人改造后的项目代码在&lt;a href=&quot;https://github.com/parksben/react-spa-app&quot;&gt;这里&lt;/a&gt;，您可以直接fork或者down下来使用。&lt;/p&gt;
&lt;h2&gt;2. 使用 markdown 搞定你的文章&lt;/h2&gt;
&lt;h3&gt;2.1 用于新建文章的交互式命令行（基于 inquirer）&lt;/h3&gt;
&lt;p&gt;一般的静态博客系统（如gatsby），会给用户提供一个用于创建新文章的交互式命令行，效果大致如下：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/readline-d9a1d68e9e0a5b7defa6bee91d5afb07.gif&quot; alt=&quot;交互式命令行&quot;&gt;&lt;/p&gt;
&lt;p&gt;类似功能可以使用nodejs中&lt;a href=&quot;https://nodejs.org/dist/latest-v8.x/docs/api/readline.html&quot;&gt;readline模块&lt;/a&gt;的原生方法来实现。这里推荐一个第三方工具：&lt;a href=&quot;https://github.com/SBoudrias/Inquirer.js&quot;&gt;inquirer&lt;/a&gt;，本质上是对readline模块进行了增强，提供了很多实用的方法用于交互式命令行开发，实现的用户界面（命令行）也比较友好。&lt;/p&gt;
&lt;p&gt;对于上面GIF示例的功能，其代码实现如下：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token comment&quot;&gt;// newPost.js&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; inquirer &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;inquirer&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; moment &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;moment&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; questions &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    type&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;input&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    name&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;post_name&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    message&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;请输入您的文章别名（用于创建文章目录，仅限英文，单词间用短横杠‘-’连接）：&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    validate&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; value &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token regex&quot;&gt;/(\.|\*|\?|\\|\/)/gi&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;文章别名不得包含特殊符号（.*?\\/），请重新输入↑↑&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

      &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token regex&quot;&gt;/(([A-z]+-)+)?[A-z]+/gi&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;文章别名不合法，请重新输入↑↑&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    filter&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; value &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token regex&quot;&gt;/\s+/gi&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;-&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    type&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;input&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    name&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;create_at&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    message&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;请输入文章的发布时间（或者按回车键使用默认值）：&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;moment&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;YYYY-MM-DDThh:mm:ss&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    validate&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; value &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token regex&quot;&gt;/\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d/gi&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;时间格式不合法，请重新输入↑↑&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

inquirer
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;prompt&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;questions&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;answers &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 获取用户输入&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; post_name&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; create_at &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; answers&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;/* 此处做一些命令行反馈和过程性的工作 */&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;/* （如：提示用户输入是否合法、创建文章对应的目录和文件等等） */&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;err &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;/* 异常处理 */&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;如是，将此node脚本添加到项目&lt;code&gt;package.json&lt;/code&gt;的&lt;code&gt;scripts&lt;/code&gt;中（如：&lt;code&gt;new-post: &quot;node newPost.js&quot;&lt;/code&gt;），即可通过&lt;code&gt;yarn new-post&lt;/code&gt;命令运行。&lt;/p&gt;
&lt;h3&gt;2.2 md 转 html（基于 react-markdown）&lt;/h3&gt;
&lt;p&gt;为使用markdown文档来编辑、存储博客的文章内容，需要将md文档内容转换为react的JSX对象以渲染到网页中。在此推荐使用&lt;a href=&quot;https://github.com/rexxars/react-markdown&quot;&gt;react-markdown&lt;/a&gt;，功能很6，作者维护得也比较勤。&lt;/p&gt;
&lt;p&gt;使用方式如下：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; ReactMarkdown &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react-markdown&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;ReactMarkdown source&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;# 这是文章标题\n\n&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// &amp;lt;h1&gt;这是文章标题&amp;lt;/h1&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h3&gt;2.3 代码块的语法高亮&lt;/h3&gt;
&lt;p&gt;react-markdown提供了一个renderers属性，用户可以传入一系列renderer组件来自定义文章中一些内容的渲染方式（有兴趣的童鞋可以看下包作者对&lt;a href=&quot;https://github.com/rexxars/react-markdown/blob/master/src/renderers.js&quot;&gt;默认renderer的实现&lt;/a&gt;）。&lt;/p&gt;
&lt;p&gt;如：自定义md中图片的渲染方式（用法如下）。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token comment&quot;&gt;// 传入renderer的方式&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;ReactMarkdown
  source&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;[md文本内容]&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  renderers&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    image&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; ImageRenderer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token comment&quot;&gt;// ImageRenderer的实现&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Component &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; PropTypes &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;prop-types&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ImageRenderer&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; propTypes &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    src&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; PropTypes&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;string&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;isRequired&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;img
        className&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;post-content-image&quot;&lt;/span&gt;
        src&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;src&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        alt&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;src&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; ImageRenderer&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;与此类似，我们可以通过传入一个自定义的renderer来实现文章中代码块的语法高亮。名为&lt;code&gt;CodeBlock&lt;/code&gt;的renderer实现如下：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Component &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; PropTypes &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;prop-types&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; highlight&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; languages &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;prismjs&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; ReactHtmlParser &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react-html-parser&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;prismjs/themes/prism.css&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;HtmlComponent&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; propTypes &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    html&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; PropTypes&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;string&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;isRequired&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;ReactHtmlParser&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;html&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;CodeBlock&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; propTypes &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    literal&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; PropTypes&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;string&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;isRequired&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    language&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; PropTypes&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;string&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;isRequired&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; html &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;highlight&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;literal&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; languages&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;language&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; cls &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`language-&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;language&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;pre className&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;cls&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;code className&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;cls&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;HtmlComponent html&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;html&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;code&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;pre&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; CodeBlock&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;此处用到了&lt;a href=&quot;http://prismjs.com/&quot;&gt;prismjs&lt;/a&gt;和&lt;a href=&quot;https://github.com/wrakky/react-html-parser&quot;&gt;react-html-parser&lt;/a&gt;两个npm包，前者用于将代码文本转化为html文本，后者用于将html文本转化为React的JSX对象以传入React组件（这样做比直接使用&lt;a href=&quot;https://reactjs.org/docs/dom-elements.html#dangerouslysetinnerhtml&quot;&gt;dangerouslySetInnerHTML&lt;/a&gt;属性更安全些）。&lt;/p&gt;
&lt;h2&gt;3. 文章分类&lt;/h2&gt;
&lt;p&gt;一个友好的站点肯定少不了导航菜单（或文章的分类菜单），本人的实现方式是直接使用文章的“标签”来进行分类统计，并生成站点的顶部导航，效果如下：&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/nav-top-07c55d919e367b9db240d1c01a1bfbe3-6445f.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 984px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 29.573170731707314%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAABoElEQVQY0z2OS2gTYRSFBzeWboRSqGBBtEsLrgXpUly5lLoUF27EgtiFpQgKfaDdNIioUKSLioJdTB+Gtmn715mAGtJHRicRDdY0Y2JsQiaT1skkM1+n08eFy7n3HvjukSoVC9M0yWazWJZF1e9MJkOxWDy4b21R2i5SLpUxjD+UymUK2wXS6Z/kczkss4KRNXzPoFqtIv23bfbL8zyOynGc471m12hw5PnqucHUcMA9vNo1m92dXer1OlLDddnc/IX2VSOZTKLrOqlUKlAtkcD4l+fvos7YvUkehZZ5ID7xTAyyrPXx+eUw3/peYOYrh/88JMenqqqCPC0jT/kty8zOzhAOh5mWp/iia2wMPOeW1EvLhXGaQ0Ocf3edqw9PELpzivdtV8itZgKe23B9oFMnHo+jKAoL8wtEIhGEEESjURTxES39ncTIWx43dXO54w3td0fomLxNz+gZxm628vrsNfIbvw8CBkA/YSwWQ6wIPszNBMB9uKqqiKUlEj/SrI0+of/kDS6dW6R14Cmd4Yt0v2pn+H4LE6e7KKynjoF7T8mNq9TQUvUAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;navigator&quot;
        title=&quot;&quot;
        src=&quot;/static/nav-top-07c55d919e367b9db240d1c01a1bfbe3-6445f.png&quot;
        srcset=&quot;/static/nav-top-07c55d919e367b9db240d1c01a1bfbe3-b5b19.png 300w,
/static/nav-top-07c55d919e367b9db240d1c01a1bfbe3-6301a.png 600w,
/static/nav-top-07c55d919e367b9db240d1c01a1bfbe3-6445f.png 984w&quot;
        sizes=&quot;(max-width: 984px) 100vw, 984px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;为此，需要撰写一定的脚本实现文章的分类统计和打包，个人的实现方式是将统计结果和文章内容各自打包为json文件，通过前端组件请求数据并加载。&lt;/p&gt;
&lt;p&gt;导航栏组件的具体实现如下：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Component &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; PropTypes &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;prop-types&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Link &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react-router-dom&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Dropdown&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Menu&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; Icon &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;antd&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; randomId &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;utils&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;./style.css&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Header&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; propTypes &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    data&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; PropTypes&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;array&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    activeTag&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; PropTypes&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;string&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;static&lt;/span&gt; defaultProps &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    data&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; tag&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;前端&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; count&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    activeTag&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;navTotal &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;renderMore&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;length &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;navTotal&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; subNavItems &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;slice&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;navTotal&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Menu&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Item key&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`sub_nav_&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;randomId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Link
          to&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;linkTo &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`/tag/&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;tag&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
          className&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`ant-dropdown-link &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;activeTag &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; t&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;tag
            &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;active&apos;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
          key&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`nav_top_&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;randomId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
          &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;tag&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;（&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;count&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;）
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Link&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Menu&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Item&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; SubNav &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Menu&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;subNavItems&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Menu&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; DropDownBtn &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Dropdown overlay&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;SubNav&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; key&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`nav_top_&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;randomId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div className&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;header-nav-item&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
          更多分类 &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Icon type&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;down&quot;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Dropdown&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; DropDownBtn&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;renderTop5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; items &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;slice&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;navTotal &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;t &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Link
        className&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`header-nav-item &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;activeTag &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; t&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;tag
          &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;active&apos;&lt;/span&gt;
          &lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        to&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;linkTo &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`/tag/&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;tag&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        key&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`nav_top_&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;randomId&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;linkTo &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;tag&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;（&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;t&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;count&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;）`&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; t&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;tag&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Link&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div className&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;header-nav&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;items&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;renderMore&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function-variable function&quot;&gt;render&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;renderTop5&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; Header&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;大家可以根据实际需要实现自己的文章打包方式（这里就不奉上我的脚本了😝）。&lt;/p&gt;
&lt;h2&gt;4. 更多功能&lt;/h2&gt;
&lt;p&gt;对于个人博客来说，到这里为止还有很多功能没有实现，这里偷个懒，奉上一些相关的链接吧：&lt;/p&gt;
&lt;h3&gt;4.1 关于文章评论&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.forestofhorizon.com/notesofstudy/2015/12/01/adding-disqus-to-github-pages/&quot;&gt;在github pagess中加入Disqus评论系统&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://imsun.net/posts/gitment-introduction/&quot;&gt;使用 GitHub Issues 搭建评论系统&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;4.2 关于文章结构树&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/hollodotme/TreeMDown&quot;&gt;TreeMDown&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/hughsk/markdown-tree&quot;&gt;markdown-tree&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;我最近应该会实现一个React用途的markdown树组件，大家不妨期待下☺️&lt;/p&gt;
&lt;h2&gt;5. 发布你的个人静态站点&lt;/h2&gt;
&lt;h3&gt;5.1 部署到 github pages（基于 gh-pages）&lt;/h3&gt;
&lt;p&gt;CRA针对github pages用途专门推荐了一个包：&lt;a href=&quot;https://github.com/tschaub/gh-pages&quot;&gt;gh-pages&lt;/a&gt;，使用方法如下：&lt;/p&gt;
&lt;p&gt;（1）修改项目的&lt;code&gt;package.json&lt;/code&gt;文件，添加homepage属性：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;&quot;homepage&quot;: &quot;https://parksben.github.io&quot;,&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;（2）项目安装&lt;code&gt;gh-pages&lt;/code&gt;依赖后，在&lt;code&gt;package.json&lt;/code&gt;中添加如下配置：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;  &quot;scripts&quot;: {
+   &quot;predeploy&quot;: &quot;npm run build&quot;,
+   &quot;deploy&quot;: &quot;gh-pages -d build&quot;,
    &quot;start&quot;: &quot;react-scripts start&quot;,
    &quot;build&quot;: &quot;react-scripts build&quot;,&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;（3）将本地代码上传到github博客仓库的某个分支（只要不是master分支就行），然后执行：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;yarn deploy&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;gh-pages会将CRA项目build到仓库的master分支，然后，你就可以访问你的站点了（有关 CRA 项目部署到 github pages 的详细描述可以看&lt;a href=&quot;https://github.com/facebook/create-react-app/blob/master/packages/react-scripts/template/README.md#github-pages&quot;&gt;这里&lt;/a&gt;）。&lt;/p&gt;
&lt;h3&gt;5.2 如何兼容 React 的客户端路由（一种比较 hack 的方法）&lt;/h3&gt;
&lt;p&gt;单页面应用一般需要设置服务端路由，将应用的所有页面路径都重定向到index.html，而github pages并没有这样的默认设置。&lt;/p&gt;
&lt;p&gt;因而，当你使用React的客户端路由（React的createBrowserHistory方法创建前端路由）时，除根路径以外的页面，github都会返回自己的404页面。&lt;/p&gt;
&lt;p&gt;为此，CRA项目提供了一种比较hack的方法来支持React的客户端路由（通过操作window.history来强行匹配url）。也算是一种奇技淫巧吧☺️。&lt;/p&gt;
&lt;p&gt;（1）在CRA项目的public目录下添加一个&lt;code&gt;404.html&lt;/code&gt;，其内容如下：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-html&quot;&gt;&lt;code&gt;&lt;span class=&quot;token doctype&quot;&gt;&amp;lt;!DOCTYPE html&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;html&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;head&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;meta&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;charset&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;utf-8&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;title&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;矮大紧的日常 | parksben&apos;s blog&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;title&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;script&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;text/javascript&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;
      &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; segmentCount &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; l &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; window&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;location&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      l&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        l&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;protocol &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;//&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; l&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;hostname &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;l&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;port &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;:&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; l&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;port &lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;
        l&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pathname&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;/&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;slice&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; segmentCount&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;/&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;/?p=/&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;
        l&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pathname&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;slice&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;/&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;slice&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;segmentCount&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;/&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token regex&quot;&gt;/&amp;amp;/g&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;~and~&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;l&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;search &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&amp;amp;q=&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; l&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;search&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;slice&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token regex&quot;&gt;/&amp;amp;/g&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;~and~&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;
        l&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;hash
      &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;head&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;body&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;body&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;html&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;（2）在&lt;code&gt;index.html&lt;/code&gt;的head中添加如下代码：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-html&quot;&gt;&lt;code&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;script&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;text/javascript&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;l&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;l&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;search&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; q &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      l&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;search&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;slice&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;&amp;amp;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;v&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; a &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; v&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;=&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        q&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;a&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; a&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;slice&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;=&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token regex&quot;&gt;/~and~/g&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&amp;amp;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;q&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;p &lt;span class=&quot;token operator&quot;&gt;!==&lt;/span&gt; undefined&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        window&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;history&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;replaceState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
          l&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;pathname&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;slice&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;q&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;p &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;
          &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;q&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;q &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;?&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; q&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;q&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt;
          l&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;hash
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;window&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;location&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;大功告成，你的github站点支持React的客户端路由了。&lt;/p&gt;
&lt;p&gt;除此之外，也可以改为使用&lt;code&gt;createHashHistory&lt;/code&gt;方法来创建客户端路由，这样前端路由就与服务端路由没多大关系了，不过url里面一串hash毕竟不够优雅。&lt;/p&gt;
&lt;p&gt;有兴趣了解奇技淫巧的童鞋，可以点&lt;a href=&quot;https://github.com/facebook/create-react-app/blob/master/packages/react-scripts/template/README.md#notes-on-client-side-routing&quot;&gt;这里&lt;/a&gt;。&lt;/p&gt;
&lt;h3&gt;5.3 部署到自己的服务&lt;/h3&gt;
&lt;p&gt;与CRA项目的生产环境部署方式一样：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;线上执行 yarn build 命令，站点的所有静态资源将打包到 build 目录下&lt;/li&gt;
&lt;li&gt;将你的站点入口配置到 build 目录下&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;6. 项目参考（源码奉上）&lt;/h2&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/my-blog-56c09e4679708b398fd7bf391491e601-af69d.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50.28932140978433%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAACh0lEQVQoz12RXUjTYRTG/93WVdfRTdGHoIUphSJdVJIX0neECVHSRRkhVEpoHwoqaSqrLI3pNFEXqVOcc36EOVo6p86PastqLhNJV6HbdJ/OX//9TZIOPJzzvu85h+d9HiH+YhrHU7NITs8nOaOQ9CIFDqcLj9uNz+fH6XTidntwLblxOhbwe8Xa4cLr9bIovoXg9/lwOBxinxvhzPUsLqTnci3vKY+LS5BXK7FNz2AcGMBoNGIcNWHTD3M/ScmJJgVP5ImMFygwjY2j7dXR0qOjf8BAcHmZUAhX7jzgRp6MnNJqamuVqNRdWCY+09yiQt2qRvO6m5FGFWeF2wiZaSSlC2hOJlHT2kHGozKuyhTIlCpEmqyEFmYXySgsLUdeU0d9k5r27l7sdjsWixmr1cpX2yRzVhvNskFKel+j0Rdj7dDwZfIbo+8/MGb+xBfr5D+G5c9KqKkqo+llNW2qevQ9WlwuF/PzC5ImIfil5oA0INEQwydqGPD7JawEg6tPKysIVY/uUVeWS0NFIa/kD+nvbOCFyDYiKoaj8Qns3XeA53IFH80WdIY+DMZ+JiwWzGazpLG+r583b9+JBvpWGebeukTerRRyb6aQmZpMZXE2+QVFCMIGNm7aLGaBrLs5GEaGaNS2oe3swDRsQqfTo2nX0hZCRxfetYXnEg9xOuEgxw7HkhAXzeXzpzAODlGpqKamTkmF4gWmkVHsc3P8mJlhdnaWX79+MzU1zaRtiu/T0/wUNV/7trA/Mpyo8N1Eh4dJOBIXg3tpkf/D4/Gw/HdI0lBk5BedDa67kzSMCNtBxK7t7Nm5jZ1btxAbuVc0ZJ4l0YxAIMCyaEhwneihOpRDWL9o7fwHbix+K2RJCD4AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;parksben.github.io&quot;
        title=&quot;&quot;
        src=&quot;/static/my-blog-56c09e4679708b398fd7bf391491e601-abe1c.png&quot;
        srcset=&quot;/static/my-blog-56c09e4679708b398fd7bf391491e601-10046.png 300w,
/static/my-blog-56c09e4679708b398fd7bf391491e601-3c4a3.png 600w,
/static/my-blog-56c09e4679708b398fd7bf391491e601-abe1c.png 1200w,
/static/my-blog-56c09e4679708b398fd7bf391491e601-1c9b7.png 1800w,
/static/my-blog-56c09e4679708b398fd7bf391491e601-af69d.png 1901w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;这是&lt;a href=&quot;https://parksben.github.io/&quot;&gt;我的github博客&lt;/a&gt;（基于上述过程实现的静态站点），感兴趣的伙伴可以&lt;a href=&quot;https://github.com/parksben/parksben.github.io&quot;&gt;点击这里&lt;/a&gt;查看项目源码，觉得有用也可以fork或star一下下。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[一个插件让你在 Redux 中写 promise 事半功倍]]></title><description><![CDATA[Redux 的应用给我们开发带来了很多便利，让组件间交互不再那么复杂，但 Redux 也有它的短板，我们知道要通过 Redux 改变一个 state 需要定义 actionType→action→reducer…]]></description><link>https://knownsec-fed.com/2018-01-28-redux-promise-middleware/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-01-28-redux-promise-middleware/</guid><pubDate>Sun, 28 Jan 2018 15:54:17 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-16ee6c4ac303c3c120dd336840e57ab8-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAIDBAX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHbhtAowf/EABoQAQABBQAAAAAAAAAAAAAAAAECABAREyL/2gAIAQEAAQUCHrZOouS//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGRAAAgMBAAAAAAAAAAAAAAAAAAERICEz/9oACAEBAAY/AjmzVFP/xAAaEAEBAAIDAAAAAAAAAAAAAAABEQBBICFR/9oACAEBAAE/IVYnWG21049lfjw//9oADAMBAAIAAwAAABD4z//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAECAQE/EGf/xAAcEAEAAQQDAAAAAAAAAAAAAAABEQAgIUExYXH/2gAIAQEAAT8QWNaGOKCBvCER1WSwJJn2z//Z&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;header&quot;
        title=&quot;&quot;
        src=&quot;/static/header-16ee6c4ac303c3c120dd336840e57ab8-d6978.jpeg&quot;
        srcset=&quot;/static/header-16ee6c4ac303c3c120dd336840e57ab8-527f0.jpeg 300w,
/static/header-16ee6c4ac303c3c120dd336840e57ab8-9a7cd.jpeg 600w,
/static/header-16ee6c4ac303c3c120dd336840e57ab8-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;Redux 的应用给我们开发带来了很多便利，让组件间交互不再那么复杂，但 Redux 也有它的短板，我们知道要通过 Redux 改变一个 state 需要定义 actionType→action→reducer，这使得有时候一个很简单的交互都需要写一堆代码，我们今天要介绍的这个小插件可以让这个工作变得更加简洁、优雅。&lt;/p&gt;
&lt;p&gt;它就是：&lt;a href=&quot;https://github.com/pburtchaell/redux-promise-middleware&quot;&gt;redux-promise-middleware&lt;/a&gt;，这是一个 Redux 的 middleware，引入项目的方式和其他的 redux middleware 一样，具体可以查看它的官方文档，这里就不再赘述。&lt;/p&gt;
&lt;p&gt;举个典型的例子，通过 Redux 中发起一次登录请求，这个请求的 promise 会有3种状态需要我们处理，分别是 pending、resolve、reject，在 pending 的时候页面要显示等待状态，resolve 的时候要显示请求成功，reject 的时候要提示用户请求失败，我们先通过对比来看一下用了这个组件之后代码是什么样子：&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;actionType.js&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;使用前：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; LOGIN_PENDING &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;LOGIN_PENDING&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; LOGIN_RESOLVE &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;LOGIN_RESOLVE&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; LOGIN_REJECT &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;LOGIN_REJECT&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;使用后：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; LOGIN &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;LOGIN&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;只需要写一个？是的，让我们往下看。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;action.js&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;使用前：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; at &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;actionType&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;login&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;username&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; password&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; dispatch &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; type&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; at&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;LOGIN_PENDING &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; resp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;await&lt;/span&gt; axios&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;URL_LOGIN&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; username&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; password &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      type&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; at&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;LOGIN_RESOLVE&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      result&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; resp
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      type&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; at&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;LOGIN_REJECT&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      message&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;message
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;使用后：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; at &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;actionType&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;login&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;username&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; password&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  type&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; at&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;LOGIN&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  payload&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; axios&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;URL_LOGIN&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; username&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; password &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;写完了？没错，就是这么简单。那等待和失败的处理在哪里呢？别急，咱们继续往下看。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;reducer.js&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;使用前：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; at &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;actionType&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; action&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;action&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;type&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; at&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;LOGIN_PENDING&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// 显示等待图标&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; at&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;LOGIN_RESOLVE&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// 显示登录成功&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; at&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;LOGIN_REJECT&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// 显示登录失败&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;使用后：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; PENDING&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; FULFILLED&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; REJECTED &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;redux-promise-middleware&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; at &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;actionType&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; action&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;switch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;action&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;type&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;at&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;LOGIN&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;PENDING&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// 显示等待图标&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;at&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;LOGIN&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;FULFILLED&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// 显示登录成功&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;at&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;LOGIN&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;REJECTED&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
      &lt;span class=&quot;token comment&quot;&gt;// 显示登录失败&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;正如你所看到的，用了这个 middleware 后，一个带有 promise 的 action 会被包装成三个状态为后缀的 action 发给 reducer，并且&lt;strong&gt;此时 action.payload 中的值已经是 promise 执行后返回的结果&lt;/strong&gt;，然后我们只需要拿 payload 的值分别操作 state 就行了。看到这里你应该觉得，嗯，这个插件确实能让人少写不少代码，但是反应快的朋友看了之后可能又有疑问了——在 action 里面只返回一个 type 和 payload 的对象，这在处理一个请求的时候确实没问题，那假如我在 login 之后紧接着又要 dispatch 另外一个 action 怎么办呢？&lt;/p&gt;
&lt;p&gt;这个时候我们可以这样写：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;as&lt;/span&gt; at &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;actionType&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;login&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;username&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; password&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; dispatch &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    type&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; at&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;LOGIN&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    payload&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; axios&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;post&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;URL_LOGIN&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; username&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; password &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;afterLogin&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;从笔者的使用经历来看，以上的写法基本能满足绝大多数的场景，此时有的同学可能依然有疑问——这个 middleware 这么擅自主张的就对 action 进行了改装，会不会对项目的入侵太大？如果我的项目已经进行到一半，再引入它会不会让我以前写的 action 无法正常被 reducer 接收到？这个答案让我们到它的源码中去寻找：&lt;/p&gt;
&lt;p&gt;打开它的仓库地址，我们会发现它的代码很少，只有两个文件：&lt;code&gt;index.js&lt;/code&gt;和&lt;code&gt;isPromise.js&lt;/code&gt;，&lt;code&gt;isPromise.js&lt;/code&gt; 定义了一个工具方法用来判断一个对象是否是一个 promise，这里就不再多讲。主要的逻辑在 &lt;code&gt;index.js&lt;/code&gt; 中，为了节约你的时间，我们用一个流程图去大概描述它的逻辑：&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/source-5180bf44198e201f4c8c7936762a86c9-95911.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 740px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 87.70270270270271%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsSAAALEgHS3X78AAACQ0lEQVQ4y31UaZOqMBD0//80P1hvPVcFRNYLUI4Q7qPfTFYRWTRVqQnJ0JnumckIH0bTNK19rJMkge/7CIJATV7ned76jYZA+kDdvcvlgsVijvlsTnZBdoaQgN8C9qNrv2nWNPOiQJKmuEYJojhRERdV1fp9jJCp8A8yjnHxBVwh4d48CElgZYM4LyEiCSeU8OisqsrPgExvRpSm0ynW6zV0bYvVaoUoilp/vlDbbrGlefbCIcpPwCzLIMIQYShwC0LEUqrvkmg/ZOA1n7l+AE+mwxGya1kTpSRFWtaIigZeXiMjCbKqgSz50uc/5Er7NRLyHb0rD1lUSLIcJQnO4GlewHYcXGwH1tlWWt6uV1U6KjlphrgL2AXlCCMSvLqvH/RZp8V8juVyCXO3U3ruLQthmiuvmAIYvSuVmKjVPTnq+neHI4opGTyqTsm0gN0IHaLFWfve6jDNPY7HI1KKjvW7EkWmeTid4ZLlb9UpZUU6Ngiy6lVD3jwcDthsNphRqTCwaZoIKLM+ZZIpcpd8/fuCYehqbRg7CKLMmkc5AQ61mqKV/ybjoeGnPu+O0bNX+bDGkSK09nsYOxN7shaJHlOn9Hv7vvFn/yUpFUVk/fxA03Ws9R0MoqtpGrVaPPj69C9QgJw5nllRwksKpZWg1hJUvBFp491uCMiKtEDNNUnzHV1F+XQ6YTweq9rifuU648zy4DabTCbqiVquvtVzxTL09X4BlNSf/Ahc72XAZSPuzc/FbNs2HNdVZy7ZoPP2DQH+B0f0cwlpztLMAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;source&quot;
        title=&quot;&quot;
        src=&quot;/static/source-5180bf44198e201f4c8c7936762a86c9-95911.png&quot;
        srcset=&quot;/static/source-5180bf44198e201f4c8c7936762a86c9-f6f30.png 300w,
/static/source-5180bf44198e201f4c8c7936762a86c9-2ca80.png 600w,
/static/source-5180bf44198e201f4c8c7936762a86c9-95911.png 740w&quot;
        sizes=&quot;(max-width: 740px) 100vw, 740px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;值得一提的是，因为它是一个 Redux 的 middleware，&lt;code&gt;返回&lt;/code&gt; 意味着将 action 传递给下一个 middleware，直到传递到 reducer 中。从图中可以看出，如果你不是按照它规定的格式书写 action，它会直接透传出去，因此它并不会对项目造成什么副作用（除非你以前的 action 中的对象就是有叫 payload 的属性，并通过 payload 直接把一个 promise 对象发给了 reducer，这种本身也是不规范的写法）。&lt;/p&gt;
&lt;p&gt;除了文章中讲到的这些，redux-promise-middleware 还有许多其他的使用技巧帮助我们提高编码效率，同时很多属性也支持自定义，比如代表三种状态的 action 的后缀等等，感兴趣的同学可以下来自行阅读官方文档。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[【译】React 组件设计模式基础]]></title><description><![CDATA[原文链接： React Component Patterns 作者： Gustavo Matheus 随着 React 在前端开发中越来越流行，各种各样的设计模式及新概念亦层出不穷。本文旨在总结 React 开发中一些常见的设计模式。 有状态 (Stateful) vs…]]></description><link>https://knownsec-fed.com/2018-01-28-fan-yi-react-zu-jian-mo-shi/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-01-28-fan-yi-react-zu-jian-mo-shi/</guid><pubDate>Sun, 28 Jan 2018 03:54:17 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-41dac6053e9c1076378266f209aa4fc4-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIDBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHm5KSAv//EABgQAAIDAAAAAAAAAAAAAAAAAAECACAx/9oACAEBAAEFAkIouz//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAVEAEBAAAAAAAAAAAAAAAAAAAgIf/aAAgBAQAGPwKr/8QAGBABAQADAAAAAAAAAAAAAAAAAREAICH/2gAIAQEAAT8hCOGXmv8A/9oADAMBAAIAAwAAABBbz//EABYRAQEBAAAAAAAAAAAAAAAAABEBEP/aAAgBAwEBPxAG5//EABYRAQEBAAAAAAAAAAAAAAAAABEQIf/aAAgBAgEBPxBcn//EABwQAAICAgMAAAAAAAAAAAAAAAABESEQQTFxsf/aAAgBAQABPxBHLbe7GkhCmlhHD0/DR//Z&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;【翻译】React 组件设计模式&quot;
        title=&quot;&quot;
        src=&quot;/static/header-41dac6053e9c1076378266f209aa4fc4-d6978.jpeg&quot;
        srcset=&quot;/static/header-41dac6053e9c1076378266f209aa4fc4-527f0.jpeg 300w,
/static/header-41dac6053e9c1076378266f209aa4fc4-9a7cd.jpeg 600w,
/static/header-41dac6053e9c1076378266f209aa4fc4-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;原文链接：&lt;a href=&quot;https://levelup.gitconnected.com/react-component-patterns-ab1f09be2c82&quot;&gt;React Component Patterns&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;作者：&lt;a href=&quot;https://levelup.gitconnected.com/@gmatheus&quot;&gt;Gustavo Matheus&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;随着 React 在前端开发中越来越流行，各种各样的设计模式及新概念亦层出不穷。本文旨在总结 React 开发中一些常见的设计模式。&lt;/p&gt;
&lt;h2&gt;有状态 (Stateful) vs 无状态 (stateless)&lt;/h2&gt;
&lt;p&gt;React 组件可以是有状态的，在其生命周期内可以操纵并改变其内部状态；React 组件也可以是无状态的，它仅接受来自父组件传入的 props，并进行展示。&lt;/p&gt;
&lt;p&gt;下面是一个&lt;strong&gt;无状态&lt;/strong&gt;的 &lt;code&gt;Button&lt;/code&gt; 组件，它的行为完全由传入的 props 决定：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;Button&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; props &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; 
  &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;button onClick&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;onClick&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;text&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;button&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;下面是一个&lt;strong&gt;有状态&lt;/strong&gt;组件(使用了上述的&lt;strong&gt;无状态&lt;/strong&gt;组件):&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ButtonCounter&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; clicks&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;handleClick &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;handleClick&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;bind&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;handleClick&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; clicks&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;clicks &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Button
        onClick&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;handleClick&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        text&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`You&apos;ve clicked me &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;clicks&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; times !`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;正如你所看到的，上述 &lt;code&gt;ButtonCounter&lt;/code&gt; 组件在 &lt;code&gt;state&lt;/code&gt; 中维护了自己的状态，而之前的 &lt;code&gt;Button&lt;/code&gt; 组件仅根据 props 来进行渲染展示。这个区别看似很小，但是无状态的 &lt;code&gt;Button&lt;/code&gt; 组件却高度可复用。&lt;/p&gt;
&lt;h2&gt;容器(Container) vs 展示(Presentational) 组件&lt;/h2&gt;
&lt;p&gt;当与外部数据进行交互时，我们可以把组件分为两类:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;容器组件&lt;/strong&gt;：主要负责同外部数据进行交互（通信），譬如与 &lt;strong&gt;Redux&lt;/strong&gt; 等进行数据绑定等。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;展示组件&lt;/strong&gt;：根据自身 state 及接收自父组件的 props 做渲染，并不直接与外部数据源进行沟通。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;我们来看一个&lt;strong&gt;展示&lt;/strong&gt;组件：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;UserList&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; props &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;ul&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;users&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;u &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;li&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;u&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;u&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;age&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; years old&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;li&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;ul&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;而这个&lt;strong&gt;展示&lt;/strong&gt;组件可以被一个&lt;strong&gt;容器&lt;/strong&gt;组件更新：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;UserListContainer&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; users&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;componentDidMount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;fetchUsers&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;users &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; users &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;UserList users&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;users&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;通过将组件区分为&lt;strong&gt;容器&lt;/strong&gt;组件与&lt;strong&gt;展示&lt;/strong&gt;组件，将数据获取与渲染进行分离。这也使 &lt;code&gt;UserList&lt;/code&gt; 可复用。如果你想了解更多，这里有一些&lt;a href=&quot;https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0&quot;&gt;非常好的文章&lt;/a&gt;，解释地非常清楚。&lt;/p&gt;
&lt;h2&gt;高阶(Higher-Order)组件&lt;/h2&gt;
&lt;p&gt;当你想复用一个组件的逻辑时，高阶组件(HOC)就派上用场了。高阶组件就是 JavaScript 函数，接收 React 组件作为参数，并返回一个新组件。&lt;/p&gt;
&lt;p&gt;举个例子：编写一个菜单组件，当点击一个菜单项时，展开当前菜单项，显示子菜单。当然我们可以在父组件里来控制此菜单组件的状态，但是更优雅的方式，是使用高阶组件：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;makeToggleable&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Clickable&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;extends&lt;/span&gt; React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Component &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;toggle &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;toggle&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;bind&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; show&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token function&quot;&gt;toggle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; show&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;show &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Clickable
            &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            onClick&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;toggle&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
          &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;show &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;children&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;通过这种方式，我们可以使用 JavaScript 的装饰器语法，将我们的逻辑应用于 &lt;code&gt;ToggleableMenu&lt;/code&gt; 组件:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;@makeToggleable
&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;ToggleableMenu&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div onClick&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;onClick&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;h1&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;title&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;h1&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;现在，我们可以将任何子菜单内容放入 &lt;code&gt;ToggleableMenu&lt;/code&gt; 组件中：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Menu&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;ToggleableMenu title&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;First Menu&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;Some content&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;ToggleableMenu&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;ToggleableMenu title&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Second Menu&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;Another content&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;ToggleableMenu&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;ToggleableMenu title&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Third Menu&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;More content&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;ToggleableMenu&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;当你在使用 &lt;strong&gt;Redux&lt;/strong&gt; 的 &lt;code&gt;connect&lt;/code&gt;，或者 &lt;strong&gt;React Router&lt;/strong&gt; 的 &lt;code&gt;withRouter&lt;/code&gt; 函数时，你就是在使用高阶组件！&lt;/p&gt;
&lt;h2&gt;渲染回调（Render Callbacks）&lt;/h2&gt;
&lt;p&gt;除了上述的高阶组件外，&lt;strong&gt;渲染回调&lt;/strong&gt;是另一种使组件可复用的设计模式。&lt;strong&gt;渲染回调&lt;/strong&gt;的核心是组件接收的子组件(或子结点，亦即 &lt;code&gt;props.children&lt;/code&gt;)，不以 &lt;code&gt;React Component&lt;/code&gt; 提供，而是以回调函数的形式提供。以上述 &lt;strong&gt;HOC&lt;/strong&gt; 组件为例，我们通过&lt;strong&gt;渲染&lt;/strong&gt;回调的方式重写如下：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Toggleable&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;toggle &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;toggle&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;bind&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; show&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;toggle&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; show&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;show &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;children&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;show&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;toggle&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;现在，我们可以传入回调函数给 &lt;code&gt;Toggleable&lt;/code&gt; 组件作为子结点。 我们用新方式实现之前的 &lt;strong&gt;HOC&lt;/strong&gt; 组件 &lt;code&gt;ToggleableMenu&lt;/code&gt;：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;ToggleableMenu&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; props &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Toggleable&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;show&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; onClick&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div onClick&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;onClick&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;h1&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;title&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;h1&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; show &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;children &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Toggleable&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;而我们全新的 &lt;code&gt;Menu&lt;/code&gt; 组件实现如下：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Menu&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;React&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;ToggleableMenu title&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;First Menu&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;Some content&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;ToggleableMenu&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;ToggleableMenu title&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Second Menu&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;Another content&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;ToggleableMenu&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;ToggleableMenu title&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;Third Menu&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;More content&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;ToggleableMenu&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;是的，你没有看错，新的 &lt;code&gt;Menu&lt;/code&gt; 组件同之前以&lt;strong&gt;HOC&lt;/strong&gt;模式实现出来的一模一样！&lt;/p&gt;
&lt;p&gt;在这种实现方式下，我们将组件内部的状态(&lt;code&gt;state&lt;/code&gt;)与组件的渲染逻辑进行剥离。在上面的例子中，我们将渲染逻辑放在了 &lt;code&gt;ToggleableMenu&lt;/code&gt; 的&lt;strong&gt;渲染回调&lt;/strong&gt;中，而展示组件的状态(&lt;code&gt;state&lt;/code&gt;)依然在 &lt;code&gt;Toggleable&lt;/code&gt; 组件内进行维护。&lt;/p&gt;
&lt;h2&gt;了解更多&lt;/h2&gt;
&lt;p&gt;以上的一些例子仅仅是 React 设计模式的基础知识。如果你想更加深入地了解关于 React 设计模式的话题，以下是一些非常好的学习资料，值得一看：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=YaZg8wg39QQ&quot;&gt;React Component Patterns by Michael Chan&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/chantastic/reactpatterns.com&quot;&gt;React Patterns&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://medium.com/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0&quot;&gt;Presentational and Container Components&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://medium.com/@franleplant/react-higher-order-components-in-depth-cf9032ee6c3e&quot;&gt;React Higher Order Components in depth&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://medium.com/merrickchristensen/function-as-child-components-5f3920a9ace9&quot;&gt;Function as Child Components&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/acdlite/recompose&quot;&gt;Recompose&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/paypal/downshift&quot;&gt;Downshift&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[【译】不要让用户在产品体验上受到挫折]]></title><description><![CDATA[原文地址： Don’t Frustrate Users With Gaps in Your Product Experience 作者：Shiren Vijiasingam…]]></description><link>https://knownsec-fed.com/2018-01-28-fan-yi-bu-yao-rang-yong-hu-zai-chan-pin-ti-yan-shang-shou-dao-cuo-zhe/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-01-28-fan-yi-bu-yao-rang-yong-hu-zai-chan-pin-ti-yan-shang-shou-dao-cuo-zhe/</guid><pubDate>Sun, 28 Jan 2018 02:19:42 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-e029b1604d58f824810393a2a303b791-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIEAwX/xAAWAQEBAQAAAAAAAAAAAAAAAAADAAL/2gAMAwEAAhADEAAAAe+qanRlhsv/xAAYEAEAAwEAAAAAAAAAAAAAAAABAAMRIP/aAAgBAQABBQKJo1cf/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAECE//aAAgBAwEBPwFoxg//xAAXEQEAAwAAAAAAAAAAAAAAAAACARAS/9oACAECAQE/AQ9RX//EABgQAAIDAAAAAAAAAAAAAAAAAAABESAx/9oACAEBAAY/AiGbT//EABoQAAICAwAAAAAAAAAAAAAAAAABIaEQETH/2gAIAQEAAT8hsU5EGlxQXVn/2gAMAwEAAgADAAAAEHjv/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAExYf/aAAgBAwEBPxBEZgf/xAAWEQEBAQAAAAAAAAAAAAAAAAABABH/2gAIAQIBAT8Q2lLL/8QAHBAAAgEFAQAAAAAAAAAAAAAAAAEhEBFRYXGR/9oACAEBAAE/EE8P0X2DbIBrQh2r/9k=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;【翻译】不要让用户在产品体验上受到挫折&quot;
        title=&quot;&quot;
        src=&quot;/static/header-e029b1604d58f824810393a2a303b791-d6978.jpeg&quot;
        srcset=&quot;/static/header-e029b1604d58f824810393a2a303b791-527f0.jpeg 300w,
/static/header-e029b1604d58f824810393a2a303b791-9a7cd.jpeg 600w,
/static/header-e029b1604d58f824810393a2a303b791-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;原文地址：&lt;a href=&quot;https://theindex.generalassemb.ly/dont-frustrate-users-with-gaps-in-your-product-experience-d4f40870cbc4&quot;&gt;Don’t Frustrate Users With Gaps in Your Product Experience&lt;/a&gt;&lt;br&gt;
作者：Shiren Vijiasingam&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;通过使用这些简单的设计，数据和管理技巧来避免模式转换摩擦。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/2-aa140fc9d4085d0ef265bc5bb1004146-26c5f.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 865px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 71.32947976878611%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABcSAAAXEgFnn9JSAAACI0lEQVQ4y3VTSXLbQBDT25K3JS/zwdck3iRr5zIc7hyuUrkKAShSVmzn0NXDYg8aQPcsat9H9fAH1eMj3PMzqt+/+P0A9/KC6ukJtTFoug5NXaNtW3Q8z/mrWOTWwn99RbTbwTCC5RJmu4U9HBApex5CgkZRRNAGHcHa/8QI2PU92mFAx2h5HjOjIiPXNNd/Y/BCfzph4Plj9MIh6EIdu5sONYEsWR/IcLvZIqHskgzzMIRzDgWzHwQImQNmn5bpXJblheEn6mLF0OU4SWA8H5Y2xGvaQuCQXkdsmKYpUv5Ppsiy7MJwZibKioGSHFmqSEw9MrA6M5YEXtPnsigutTdy3yVrgmSUxAmOor/ZIOGQDME0CMtIqwpJniOixJxZtjhK1OR193bqI6DkibKKM0qx9ERgR/o4yrq/R8qV0mVHdj6ll2TqsfFGm8FGuq9GnyTrkrxL4hiWkfCy+fYd+Y+f6AHUYsaaRhInVsKYmS5uF/V04mqwMCJgFFkYMs14ru7uUJPhaA/lF4yG/7XDORlL2VXyDKaxS2bMophSAvpp9Eooo3t7Q3c+k12BimAlLapZu1utsNvtEU7eXj1UkXZpxYI1wbRrWouGzeSNzlroLMtRTBPWdztZdWazWek/kofpNejtVmThNFECODJoGK1Yjpuwhc+mYXBZbhOa96fXfnglHt/unpPbH4/wybixMWpNkAOqVauNoK+xBjZlKZgx/gLLLCItH2fHkwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;2&quot;
        title=&quot;&quot;
        src=&quot;/static/2-aa140fc9d4085d0ef265bc5bb1004146-26c5f.png&quot;
        srcset=&quot;/static/2-aa140fc9d4085d0ef265bc5bb1004146-23cc1.png 300w,
/static/2-aa140fc9d4085d0ef265bc5bb1004146-ad2e0.png 600w,
/static/2-aa140fc9d4085d0ef265bc5bb1004146-26c5f.png 865w&quot;
        sizes=&quot;(max-width: 865px) 100vw, 865px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;当产品团队缺乏对用户体验的分析时，他们可能会失去客户。&lt;/p&gt;
&lt;p&gt;有无数的步骤可以让产品体验崩溃。你是否曾在街边等待出租车，而当应用程序明确显示司机就在那里时，却看不到车?或者，在一个应用程序中订购水果，你在等待送货时，结果才发现没有你想要的牛油果。只能尝试着给客服打电话，通过与客服沟通你和卖家的聊天记录来解决问题。&lt;/p&gt;
&lt;p&gt;随着通过技术来帮助越来越多的消费者解决各种各样的商品和服务需求，但是往往事与愿违，真正好的软件并不意味着真正的好体验。通常情况下，当产品或流程触及实际经验或用户操作失败时，往往会让用户觉得在产品体验上受到挫折。&lt;/p&gt;
&lt;p&gt;看一下上面的图表，这个图表显示了品牌在产品体验循环中可能出现的各种用户触点。用户通过多种不同的沟通渠道和交流方式与产品进行交互，弥补这些差距是产品成功的关键。在社交媒体广告中。如果您向用户展示带有特定的号召性用语，则您的客户服务团队必须随时做出回应。比如，如果你制作可在实体零售店兑换的优惠电子券，则收银员将需要工具来兑换。&lt;/p&gt;
&lt;p&gt;遇到产品体验循环中的任何缺陷都会让用户感到沮丧，这些摩擦点会危及您的业务。我把这些差距称为模式转换摩擦。风险包括收入减少的可能性，或者增加对提供无摩擦体验的竞争对手的脆弱性。&lt;/p&gt;
&lt;h1&gt;什么是模式转换摩擦？&lt;/h1&gt;
&lt;p&gt;模式转换摩擦包含了用户在相同品牌或产品体验中的模式之间移动时遇到的任何痛点。这些模式转变包括从物理通道转向数字通道，切换通信方式，改变产品使用环境，不同设备功能的不一致等等。&lt;/p&gt;
&lt;p&gt;产品团队的任务是创造无缝的数字体验，但是他们经常缺乏从一种模式到另一种模式的转变。这通常是因为内部的组织结构和流程使的团队负责各自独立的部分，他们在工作时彼此隔离。结果每个团队都会最好的服务他们的需求，但是往往会做出与其他团队不相容的决策，最终导致产品模式转换中断。&lt;/p&gt;
&lt;p&gt;用户不知道，也不在意团队之间的责任划分； 他们会通过放弃一个更友善的产品来表达自己的挫败感。&lt;/p&gt;
&lt;p&gt;出于这个原因，尽可能地解决模式转换摩擦是至关重要的。 产品和业务的成功往往都是取决于它。&lt;/p&gt;
&lt;h1&gt;体验映射的历史&lt;/h1&gt;
&lt;p&gt;全面了解用户体验的工作并不是什么新鲜事，在过去的几十年中，出现了几种工具和方法，好多已经成为产品和设计团队的主要工具。服务设计的概念可以追溯到银行执行官G. Lynn Shostack 1984年的“哈佛商业评论”（Harvard Business Review）关于衡量和改进银行交付的流程和服务的文章。&lt;/p&gt;
&lt;p&gt;在20世纪90年代后期，Amtrak要求设计公司IDEO帮助扶手椅设计一个新的高速铁路服务计划。作为他们观察的一部分，IDEO的团队绘制了用户考虑的旅程步骤，并最终在火车上购买座位。而旅程地图诞生了。最近（尽管还在十年前），当设计咨询公司nForms引入体验地图作为深化康卡斯特与电子游戏玩家之间关系的一部分时，出现了一种新的映射形式。&lt;/p&gt;
&lt;p&gt;所有这些方法都处理宏观焦点 - 过程改进，详细描述用户的情绪状态，了解推动行动的旅程。但是，随着团队专注于旅程的某个特定部分，在这些流程文档中描述的线性过程块之间开始出现裂痕。例如，针对转化渠道进行优化的团队可能没有与优化入职流程的团队建立联系。因此，用户可能不得不中断或留下更自然的流程来检查他们的电子邮件中的确认代码，而不是平稳过渡。&lt;/p&gt;
&lt;p&gt;随着线路的拉动，模式（任务/目标，系统，过程之间）的转换可能会被忽略，造成模式转换摩擦，智能产品团队需要深入研究这些经验之间的缝隙，创造真正的人性化体验。&lt;/p&gt;
&lt;h1&gt;5步缓和模式转变摩擦&lt;/h1&gt;
&lt;p&gt;在一夜之间创造一个无缝的体验是不现实的，因为重新思考不同的团队如何运作和连接不同的软件系统是一项复杂和耗时的工作。但是，如果采取迭代方法，改进是绝对有可能的。 我主张一点一点地削减问题。不要使用新的庞大的数据仓库项目来解决这个解决方案，或者推出整个公司范围内的流程变更。相反，尝试这五个有意义的步骤来识别，量化和开始消除模式转换摩擦。他们很容易开始工作到你的下一个目标。&lt;/p&gt;
&lt;h2&gt;1.找到你的差距。&lt;/h2&gt;
&lt;p&gt;要找出你的经验差距，从你已有的经验或旅程地图开始。 如果您还没有，请保持简单，并粗略勾画产品体验的主要用户流程。 与面向客户的团队一起审查这些关键流程，并开始在发生模式转换的地区进行复盘。也许是当一个用户从一个应用程序切换到一个电子邮件或通话，或从购买到使用一个产品。把重点放在你们都同意的差距上，但是优先考虑和优化那些一线客户团队认为是最大的问题。为每个圈子命名一个产品和操作团队管家，以确保你有人负责缩小这个差距。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/3-67d3354004fd33cc13437d7d1a848063-20e8a.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 864px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 33.68055555555555%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABcSAAAXEgFnn9JSAAABKklEQVQoz11R2W7CQAzM//8XEkUloRJJqgQJCJD73lw8TT1ukVIeRrv2esaztjVNE9ZYlgXzPOu9aRrkeY62bTFJLkkSpGkGYwy6rtOYiONYa8mxxnEEwYBECpRlqaT7/Y7P/R7p44E+y+C5HoIgRC3koijgeb7Ag+u60ihVI9b5fIbjOJpgp81mg+PxqOJVVaEQ8URq/O0WVV6oWE+Iw2EY1Gld1+j7/tchiexGR7RNYbpkHEURbNtGLKeR/Jc03u92KMMQURAglbrL5YIPyZGjgrTJuTF43V9IRMQ5HLThzPh0Qux/w4jzXowYcUh3/Bmd/pvhO7iETog3mZuR4uX5RC0uHtervk1/i6OJp7zxTp71vuW14CBCbXTDKN/XN0FZ1TqOde16sT8IKA9xAo25XQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;3&quot;
        title=&quot;&quot;
        src=&quot;/static/3-67d3354004fd33cc13437d7d1a848063-20e8a.png&quot;
        srcset=&quot;/static/3-67d3354004fd33cc13437d7d1a848063-2f6e1.png 300w,
/static/3-67d3354004fd33cc13437d7d1a848063-d5612.png 600w,
/static/3-67d3354004fd33cc13437d7d1a848063-20e8a.png 864w&quot;
        sizes=&quot;(max-width: 864px) 100vw, 864px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;一个流程图，也可以体现出工作经验的差距。&lt;/p&gt;
&lt;p&gt;在你的下一个目标：收集现有的流量或第一遍草图。识别来自整个组织的关键利益相关者，特别是来自每个面向客户的团队。开始盘点你的差距。&lt;/p&gt;
&lt;h2&gt;2.捕获差距数据。&lt;/h2&gt;
&lt;p&gt;接下来，您需要将数字放到这些差距区域，开始理解你可以开始优化的可能路线。一些组织有一个专门负责这个任务的角色，一个与用户交谈的用户研究人员，有助于收集用户的见解，进行综合调查，并与团队分享。如果您没有用户研究人员，你仍然可以轻松获取所需的信息来帮助你做出决定。保持简单，通过让你的团队和用户交流，找出定性的数据。一个团队实际使用他们建立的产品的过程，可能并不总是实际的。因此需要部署研究工具，开始收集差距数据。&lt;/p&gt;
&lt;p&gt;在你拥有的软件和硬件系统上实施测量工具，理想情况下使用一些通用的标识符，并请记住，其中一些系统可能存在于您的产品之外，就像第三方CRM解决方案或电话提供商一样。&lt;/p&gt;
&lt;p&gt;在下一个目标中:收集所有系统的现有数据，并确保每个人都能访问它。花点时间与每个面向客户的团队交流，问他们想要什么数据——这很可能会说明你的数据差距。最好的情况:您可以获得团队所需的数据，并且您已经开始解决一些问题。&lt;/p&gt;
&lt;h2&gt;3.跟踪模式转换触发器。&lt;/h2&gt;
&lt;p&gt;一旦有了良好的数据基础，就该开始寻找模式，主要是寻找发生变化的事件的模式。要清楚是什么导致用户改变了模式?触发为零时，它与预期不匹配吗?渠道偏好?一种模式比另一种模式更方便吗?时间间隔或重复模式是否预示着模式的转变?&lt;/p&gt;
&lt;p&gt;让你的团队的数据专家或分析师帮助你从数据中获得见解。如果你没有这个职位的人，你可能会在一个不太可能的地方找到一个分析师，比如你的财务部门，善待他们，争取他们的帮助。然后通过观察来确定差距的优先级:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;用户解决差距的价值。&lt;/li&gt;
&lt;li&gt;您的企业在降低成本或创造新收入方面的价值。&lt;/li&gt;
&lt;li&gt;缩小差距的努力程度。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;查看定性和定量数据是有帮助的，因此产品经理可以优先考虑并做出最佳决策。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/4-a0a2e26d16287e82cc91421ddc410861-20e8a.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 864px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 33.68055555555555%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABcSAAAXEgFnn9JSAAABKUlEQVQoz12R23KCQBBE+f//8iEaQVNeUrFURIpFQeQuPnW6J0kV8WGKmd3t7sOu1/c9xjUMAx6Ph/X3+x3X6xVlWdrsnEOaXtA0DaqqslmVJImd1Rmv6zqoNEgogzzPTRTHMd7nc6QU1UWBzWaDr90OBfssyzhvbW29XjMoNRDveDwiCAJbUNJkMsFqtTJzEzLA7ff4XH7gxqCCJDXpmrpG27ZGqnM1ZyOUUGkiEraMRak5iiL4vo/kfEZL0XKxwHw2Q36KcGJIerkgDEO8TaemMUNh6t40/PXD8PN1NPdJn5FMe+5wgAtPaCiuGd6QUHT6M5H+u8PX6mlQkTymiX5PAQWNRau9/vfhFPR8Pq2Xznt95fEjtbcbKtJ0JLE9Vs41Xcf47FjzDXlSD+KF62nfAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;4&quot;
        title=&quot;&quot;
        src=&quot;/static/4-a0a2e26d16287e82cc91421ddc410861-20e8a.png&quot;
        srcset=&quot;/static/4-a0a2e26d16287e82cc91421ddc410861-2f6e1.png 300w,
/static/4-a0a2e26d16287e82cc91421ddc410861-d5612.png 600w,
/static/4-a0a2e26d16287e82cc91421ddc410861-20e8a.png 864w&quot;
        sizes=&quot;(max-width: 864px) 100vw, 864px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;同一个流程图，可以看出经验差距并确定优先顺序。&lt;/p&gt;
&lt;p&gt;在下次目标中：列出每个渠道的入站和出站量的顶级驱动程序。看看你的应用程序中的“联系我们”搜索或操作之前立即进行的用户活动。这两者都可能是模式转换摩擦的良好指标。&lt;/p&gt;
&lt;h2&gt;4.修复摩擦。&lt;/h2&gt;
&lt;p&gt;既然你已经优先考虑了最恶劣的诱因，现在是时候开始解决摩擦了。谁应该解决这些问题?视情况而定。如果差距的范围是离散的和小的，那么扩展一个管理经验的团队的责任是有意义的。有时，您可能会发现差距足够大，以至于需要创建一个新的团队来致力于解决方案，可能包括来自不同部门的人员作为团队的一部分。&lt;/p&gt;
&lt;p&gt;请记住，该解决方案可能不完全在产品团队内部(或根本不存在)，因为它可能是组织结构或流程问题。如果是这样的话，你就不能呆在你的产品舒适区，而是需要与你的整体组织进行修复。即使你没有对组织之外的某个团队负责，也并不意味着你不能拥有该决议的所有权。为了缩小差距，制定计划并执行。&lt;/p&gt;
&lt;p&gt;在你的下一个目标中:找出一个你可以在30天内关闭的空白。它不需要是软件。小的变化可以产生影响，比如改进一个有更多相关数据的事务性电子邮件，或者记录一个交互式的语音响应(IVR)菜单选项来处理一个顶部的痛点。&lt;/p&gt;
&lt;h2&gt;5.关闭循环。&lt;/h2&gt;
&lt;p&gt;这个过程的最后一步是通过将每个用户交互的数据集与您的生态系统的相应部分相链接来解决问题。这样可以确保您不仅可以提供令人惊叹的产品体验，还可以一路准备预测和检测由数据波动捕获的新触发器。&lt;/p&gt;
&lt;p&gt;模式转换摩擦通常是由于不同的系统没有连接而产生的，而当你想努力把所有的系统和数据联系起来时，现实就是你可能不得不与多个系统和数据源共存。&lt;/p&gt;
&lt;p&gt;不过，您可以采取一些简单的步骤来让每个团队访问不同的系统。它可能非常简单，比如为必要的团队成员提供分析账户，并提供培训，让每个人知道如何使用它。这样，即使他们无法在重大问题上取得进展，他们至少也有能力解决你的问题。在等待主存储库容纳不同的数据集时，避免关闭循环的诱惑。相反，通过简单地共享静态数据和跨组织的报告来启动低技术。部门间的对话对于消除模式转换摩擦是至关重要的。&lt;/p&gt;
&lt;p&gt;接下来：选择一个面向客户的部门，并授予该团队试点访问一个产品系统的子集，解决关键的用户痛点。评估与解决方案度量（例如问题解决，处理时间）相关的努力（培训，供应等），以确定系统是否有帮助，如果是，则制定完整的推出计划。&lt;/p&gt;
&lt;p&gt;看，那并不难。&lt;/p&gt;
&lt;p&gt;模式转换摩擦的良方并不复杂，它的核心是需要对你的用户所发生的事情进行全面的描述，并故意和有意地设计产品生命周期的每一步的间隙。完成这个产品体验循环将帮助你提高人们在实际使用你的产品时有更好的产品体验。它将会使你的用户更快乐，更有品牌忠诚度，增加收入，让你的产品更长寿。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[JavaScript 魔幻代理]]></title><description><![CDATA[前言 什么是代理？ 让我们看三个案例： A: 上小学的时候，李小红来你家叫你出去玩，第一个回应的不是你自己，是你妈：“王小明在家写作业，今天不出去！” B…]]></description><link>https://knownsec-fed.com/2018-01-27-javascript-mo-huan-dai-li/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-01-27-javascript-mo-huan-dai-li/</guid><pubDate>Sat, 27 Jan 2018 03:23:02 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-64b1abe2f7b3ae19fe2e743acfefe4e7-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMEBf/EABYBAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAAB5NMiZskP/8QAGRAAAgMBAAAAAAAAAAAAAAAAAREAECEi/9oACAEBAAEFAuUchTv/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAXEAEBAQEAAAAAAAAAAAAAAAABACEg/9oACAEBAAY/AgjCzj//xAAaEAADAQADAAAAAAAAAAAAAAAAAREhMUGR/9oACAEBAAE/IcKK9tsdeALxMKUrP//aAAwDAQACAAMAAAAQjB//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAcEAACAgMBAQAAAAAAAAAAAAABEQAhMVFxQZH/2gAIAQEAAT8QKQk0FvXJcbQCgBcPMr69hK7MZ5ONwoFn7P/Z&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;JavsScript 魔幻代理&quot;
        title=&quot;&quot;
        src=&quot;/static/header-64b1abe2f7b3ae19fe2e743acfefe4e7-d6978.jpeg&quot;
        srcset=&quot;/static/header-64b1abe2f7b3ae19fe2e743acfefe4e7-527f0.jpeg 300w,
/static/header-64b1abe2f7b3ae19fe2e743acfefe4e7-9a7cd.jpeg 600w,
/static/header-64b1abe2f7b3ae19fe2e743acfefe4e7-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h2&gt;前言&lt;/h2&gt;
&lt;h3&gt;什么是代理？&lt;/h3&gt;
&lt;p&gt;让我们看三个案例：&lt;/p&gt;
&lt;p&gt;A: 上小学的时候，李小红来你家叫你出去玩，第一个回应的不是你自己，是你妈：“王小明在家写作业，今天不出去！”&lt;/p&gt;
&lt;p&gt;B: 上中学的时候，赵二虎带着小弟们放学在校门口等着揍你，走在前面的不是你自己，是二虎他爸：“考试没及格还学会装黑社会了！”拎起二虎就是一顿胖揍。&lt;/p&gt;
&lt;p&gt;C: 上了大学，躺在宿舍里的床上，好饿。出门买饭并交代好不要葱蒜多放辣最后还直接端到床上的不是你自己，是快递小哥。&lt;/p&gt;
&lt;p&gt;这些都是代理。&lt;/p&gt;
&lt;h3&gt;什么是 JavaScript 代理？&lt;/h3&gt;
&lt;p&gt;用官方的洋文来说，是 &lt;a href=&quot;https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy&quot;&gt;Proxy&lt;/a&gt;：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The Proxy object is used to define custom behavior for fundamental operations (e.g. property lookup, assignment, enumeration, function invocation, etc).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;通过 Proxy 我们可以拦截并改变一个对象的几乎所有的根本操作，包括但不限于属性查找、赋值、枚举、函数调用等等。&lt;/p&gt;
&lt;p&gt;在生活中，通过代理我们可以自动屏蔽小红的邀请、自动赶走二虎的威胁、自动买好干净的饭端到床上。在 JavaScript 世界里，代理也可以帮你做类似的事情，接下来让我们一起琢磨一番。&lt;/p&gt;
&lt;h2&gt;初识代理：Hello World&lt;/h2&gt;
&lt;p&gt;以小学经历为例子，心里是喜欢小红的，于是我们定义：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; me &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;小明&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; like&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;小红&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;这个时候如果调用 &lt;code&gt;console.log(me.like)&lt;/code&gt;，结果必然是 &lt;code&gt;小红&lt;/code&gt;。然而生活并不是这样，作为一个未成年人，总是有各种的代理人围绕在你身边，比如这样：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; meWithProxy &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Proxy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;me&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;target&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; prop&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;prop &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;like&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;学习&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; target&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;prop&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;这个时候如果调用 &lt;code&gt;console.log(me.like)&lt;/code&gt; 依然是 &lt;code&gt;小红&lt;/code&gt; ，因为真心不会说谎。但当我们调用 &lt;code&gt;console.log(meWithProxy.like)&lt;/code&gt; 的时候，就会可耻的输出 &lt;code&gt;学习&lt;/code&gt; ，告诉大家说我们喜欢的是 &lt;code&gt;学习&lt;/code&gt; 。&lt;/p&gt;
&lt;h2&gt;小试牛刀：不要停止我的音乐&lt;/h2&gt;
&lt;p&gt;刚才我们简单了解了代理能够拦截对象属性的获取，可以隐藏真实的属性值而返回代理想要返回的结果，那么对于对象属性的赋值呢？让我们一起来看看。&lt;/p&gt;
&lt;p&gt;假设你正在听音乐：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; me &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;小明&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; musicPlaying&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;此时如果我们执行 &lt;code&gt;me.musicPlaying = false&lt;/code&gt; 这样就轻而易举地停止了你的音乐，那么如果我们挂上代理人：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; meWithProxy &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Proxy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;me&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;target&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; prop&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;prop &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;musicPlaying&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; value &lt;span class=&quot;token operator&quot;&gt;!==&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;任何妄图停止音乐的行为都是耍流氓！&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    target&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;prop&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;这时候如果我们执行 &lt;code&gt;me.musicPlaying = false&lt;/code&gt;，就会被毫不留情地掀了桌子：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; meWithProxy&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;musicPlaying &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;
Error&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 任何妄图停止音乐的行为都是耍流氓！
    at Object&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;set&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;repl&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;13&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h2&gt;释放魔法：封装全宇宙所有 RESTful API&lt;/h2&gt;
&lt;p&gt;现在我们已经知道通过 Proxy 可以拦截属性的读写操作，那然后呢？没什么用？&lt;/p&gt;
&lt;p&gt;仅仅是拦截属性的读写操作，的确没有太大的发挥空间，或许可以方便的做一些属性赋值校验工作等等。但是，或许你还没有意识到一个惊人的秘密：&lt;strong&gt;Proxy 在拦截属性读写操作时，并不在乎属性是否真的存在！&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;那么，也就是说：利用 Proxy，我们可以拦截并不存在的属性的读取。&lt;/p&gt;
&lt;p&gt;再进一步思考：利用 Proxy，我们可以在属性读取的那一瞬间，动态构造返回结果。&lt;/p&gt;
&lt;p&gt;然而，属性并不局限于字符串、布尔值，属性可以是对象、函数、任何东西。&lt;/p&gt;
&lt;p&gt;至此，你想到了什么？&lt;/p&gt;
&lt;p&gt;没想到？不要紧！根据刚才的分析，让我们一起通过下面 17 行代码，来封装全宇宙所有的 RESTful API ！&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; axios &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;axios&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; api &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Proxy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;target&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; prop&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; method &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token regex&quot;&gt;/^[a-z]+/&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;exec&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;prop&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; path &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;/&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; prop
          &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;substring&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;method&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;length&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
          &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token regex&quot;&gt;/([a-z])([A-Z])/g&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;$1/$2&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
          &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token regex&quot;&gt;/\$/g&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;/$/&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
          &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;toLowerCase&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;args&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// &amp;lt;------ 返回动态构造的函数！&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; url &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; path&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token regex&quot;&gt;/\$/g&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; args&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;shift&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; options &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; args&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;shift&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Requesting: &apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; method&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; url&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; options&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;axios&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; method&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; url&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;options &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;定义了 api 这个代理之后，我们就可以像下面这样调用：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;api&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// GET /&lt;/span&gt;

api&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getUsers&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 获取所有用户&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// GET /users&lt;/span&gt;

api&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getUsers$Books&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;42&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 获取 ID 为 42 的用户的所有书籍&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// GET /users/42/books&lt;/span&gt;

api&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getUsers$Books&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;42&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; params&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; page&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 获取 ID 为 42 的用户的所有书籍的第二页&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// GET /users/42/books?page=2&lt;/span&gt;

api&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;postUsers&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; data&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;小明&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 创建名字为 小明 的用户&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// POST /users Payload { name: &apos;小明&apos; }&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;以上所有的函数都在你调用的那一瞬间，通过代理人的魔法之手动态生成，供我们随意取用。&lt;/p&gt;
&lt;p&gt;简洁、优雅，哇~ 真是太棒啦！&lt;/p&gt;
&lt;h2&gt;终极魔幻：通读代理人的魔法秘笈&lt;/h2&gt;
&lt;p&gt;到此，我们仅仅使用 Proxy 改造了对象的属性获取、赋值操作，而对于 Proxy 来说，只是冰山一角。&lt;/p&gt;
&lt;p&gt;Proxy 的基本语法如下：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Proxy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;target&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; handler&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;其中 &lt;code&gt;target&lt;/code&gt; 是即将被代理的对象（比如：想要出门找小红玩耍的 &lt;code&gt;me&lt;/code&gt;），&lt;code&gt;handler&lt;/code&gt; 就是代理的魔法之手，用来拦截、改造 &lt;code&gt;target&lt;/code&gt; 的行为。&lt;/p&gt;
&lt;p&gt;对于 &lt;code&gt;handler&lt;/code&gt; 对象，我们刚才仅仅用到了 &lt;code&gt;get&lt;/code&gt;、&lt;code&gt;set&lt;/code&gt; 函数，而实际上一共有 13 种可代理的操作：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;handler.getPrototypeOf()&lt;/p&gt;
&lt;p&gt;在读取代理对象的原型时触发该操作，比如在执行 Object.getPrototypeOf(proxy) 时。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;handler.setPrototypeOf()&lt;/p&gt;
&lt;p&gt;在设置代理对象的原型时触发该操作，比如在执行 Object.setPrototypeOf(proxy, null) 时。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;handler.isExtensible()&lt;/p&gt;
&lt;p&gt;在判断一个代理对象是否是可扩展时触发该操作，比如在执行 Object.isExtensible(proxy) 时。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;handler.preventExtensions()&lt;/p&gt;
&lt;p&gt;在让一个代理对象不可扩展时触发该操作，比如在执行 Object.preventExtensions(proxy) 时。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;handler.getOwnPropertyDescriptor()&lt;/p&gt;
&lt;p&gt;在获取代理对象某个属性的属性描述时触发该操作，比如在执行 Object.getOwnPropertyDescriptor(proxy, “foo”) 时。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;handler.defineProperty()&lt;/p&gt;
&lt;p&gt;在定义代理对象某个属性时的属性描述时触发该操作，比如在执行 Object.defineProperty(proxy, “foo”, {}) 时。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;handler.has()&lt;/p&gt;
&lt;p&gt;在判断代理对象是否拥有某个属性时触发该操作，比如在执行 “foo” in proxy 时。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;handler.get()&lt;/p&gt;
&lt;p&gt;在读取代理对象的某个属性时触发该操作，比如在执行 proxy.foo 时。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;handler.set()&lt;/p&gt;
&lt;p&gt;在给代理对象的某个属性赋值时触发该操作，比如在执行 proxy.foo = 1 时。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;handler.deleteProperty()&lt;/p&gt;
&lt;p&gt;在删除代理对象的某个属性时触发该操作，比如在执行 delete proxy.foo 时。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;handler.ownKeys()&lt;/p&gt;
&lt;p&gt;在获取代理对象的所有属性键时触发该操作，比如在执行 Object.getOwnPropertyNames(proxy) 时。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;handler.apply()&lt;/p&gt;
&lt;p&gt;在调用一个目标对象为函数的代理对象时触发该操作，比如在执行 proxy() 时。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;handler.construct()&lt;/p&gt;
&lt;p&gt;在给一个目标对象为构造函数的代理对象构造实例时触发该操作，比如在执行new proxy() 时。&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;对于以上 13 种可代理的操作，还需要读者自行研究并实践方可踏上终极魔幻之旅。&lt;/p&gt;
&lt;p&gt;同学，我看好你。&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;参考链接：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy&quot;&gt;Proxy - JavaScript | MDN&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https://medium.com/dailyjs/how-to-use-javascript-proxies-for-fun-and-profit-365579d4a9f8&quot;&gt;How to use JavaScript Proxies for Fun and Profit – DailyJS – Medium&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[Web前端简单订阅的实现]]></title><description><![CDATA[理解队列 队列是一种特殊的线性表，特殊之处在于它只允许在表的前端(front）进行删除操作，而在表的后端（rear…]]></description><link>https://knownsec-fed.com/2018-01-22-web-qian-duan-jian-dan-ding-yue-de-shi-xian/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-01-22-web-qian-duan-jian-dan-ding-yue-de-shi-xian/</guid><pubDate>Mon, 22 Jan 2018 02:55:59 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-9c6194cbb37b426d029505dd82111151-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBAgX/xAAVAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAAB10vGYLA//8QAGhAAAgIDAAAAAAAAAAAAAAAAAAECEBESIf/aAAgBAQABBQKTwbEXy//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABcQAAMBAAAAAAAAAAAAAAAAAAABISD/2gAIAQEABj8CIVXH/8QAHBABAAICAwEAAAAAAAAAAAAAAREhABAxQVGB/9oACAEBAAE/ISEs/Mb818nEjR20hBWv/9oADAMBAAIAAwAAABB03//EABYRAQEBAAAAAAAAAAAAAAAAAAEAMf/aAAgBAwEBPxBFdi//xAAWEQEBAQAAAAAAAAAAAAAAAAABEBH/2gAIAQIBAT8QEyf/xAAaEAEBAQADAQAAAAAAAAAAAAABEQAhMUFh/9oACAEBAAE/ECaRZ4y0CeiEX7nvYKL1kEaXlxoA5PMhet//2Q==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;【Web前端简单订阅的实现】&quot;
        title=&quot;&quot;
        src=&quot;/static/header-9c6194cbb37b426d029505dd82111151-d6978.jpeg&quot;
        srcset=&quot;/static/header-9c6194cbb37b426d029505dd82111151-527f0.jpeg 300w,
/static/header-9c6194cbb37b426d029505dd82111151-9a7cd.jpeg 600w,
/static/header-9c6194cbb37b426d029505dd82111151-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h2&gt;理解队列&lt;/h2&gt;
&lt;p&gt;队列是一种特殊的线性表，特殊之处在于它只允许在表的前端(front）进行删除操作，而在表的后端（rear）进行插入操作，和栈一样，队列是一种操作受限制的线性表。进行插入操作的端称为队尾，进行删除操作的端称为队头。通俗了讲队列的概念就是我们平时排队，按次序来，你排在第一个，那你就第一个轮到，就是先进先出，先到先来。

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/queue-f0706f5dca8ef90c91af104298fef78e-0d4ac.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 555px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 36.57657657657658%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAd2AsD//xAAWEAADAAAAAAAAAAAAAAAAAAAAARD/2gAIAQEAAQUCiP/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAABD/2gAIAQEABj8Cf//EABcQAAMBAAAAAAAAAAAAAAAAAAARMSH/2gAIAQEAAT8hewcIP//aAAwDAQACAAMAAAAQ88//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAZEAADAQEBAAAAAAAAAAAAAAAAAREhUYH/2gAIAQEAAT8Qb3qwT96h77Z//9k=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;队列&quot;
        title=&quot;&quot;
        src=&quot;/static/queue-f0706f5dca8ef90c91af104298fef78e-0d4ac.jpg&quot;
        srcset=&quot;/static/queue-f0706f5dca8ef90c91af104298fef78e-d53e6.jpg 300w,
/static/queue-f0706f5dca8ef90c91af104298fef78e-0d4ac.jpg 555w&quot;
        sizes=&quot;(max-width: 555px) 100vw, 555px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h2&gt;实现订阅&lt;/h2&gt;
&lt;p&gt;订阅的实现很简单也有很多方式实现，现在我们就用队列的方式实现。&lt;br&gt;
首先我们来创建订阅函数：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;  &lt;span class=&quot;token function-variable function&quot;&gt;createSubscript&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;

  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;  
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;创建订阅函数功能基本的需要三点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;订阅。&lt;/li&gt;
&lt;li&gt;推送订阅。&lt;/li&gt;
&lt;li&gt;取消订阅。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;下面我们就来依次实现他们，先创建一个数组用来存放需要执行的任务，我这里的名称叫做taskStack：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;  &lt;span class=&quot;token function-variable function&quot;&gt;createSubscript&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; taskStack&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;接下来我们来实现一下订阅功能&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;  &lt;span class=&quot;token function-variable function&quot;&gt;subscript&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; task &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    taskStack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;task&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;是不是非常简单，这就是加入队列，当然订阅方法是要被createSubscript()方法返回的，不然创建了订阅没有方法订阅了。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;  &lt;span class=&quot;token function-variable function&quot;&gt;createSubscript&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; taskStack&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    
    &lt;span class=&quot;token comment&quot;&gt;//订阅方法&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;subscript&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; task &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        taskStack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;task&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; subscript &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;我们接下来编写一个触发推送队列的方法&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;  &lt;span class=&quot;token function-variable function&quot;&gt;trigger&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    taskStack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; task &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;task&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;同样我们也需要在创建订阅函数中返回出去，让订阅可以在你想需要推动的时候推送，下面是完整代码：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;  &lt;span class=&quot;token function-variable function&quot;&gt;createSubscript&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; taskStack&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    
    &lt;span class=&quot;token comment&quot;&gt;// 发出推送&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;trigger&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        taskStack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; task &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;task&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    
    &lt;span class=&quot;token comment&quot;&gt;// 订阅方法&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;subscript&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;task&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        taskStack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;task&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; trigger&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; subscript &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;这样订阅就基本实现了，就剩下一个功能：取消订阅，取消订阅是必须在你订阅的时候才提供，所以我们就在订阅方法里做做手脚，如下：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;  &lt;span class=&quot;token function-variable function&quot;&gt;subscript&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; task &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    taskStack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;task&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    
    &lt;span class=&quot;token comment&quot;&gt;// 提供取消订阅功能&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        taskStack &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; taskStack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; t &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; t &lt;span class=&quot;token operator&quot;&gt;!==&lt;/span&gt; task &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;这样我们的订阅就取消了，也是在订阅的前提下提供取消订阅的方法。&lt;br&gt;
下面是完整代码：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;  &lt;span class=&quot;token function-variable function&quot;&gt;createSubscript&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; taskStack&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
 
    &lt;span class=&quot;token comment&quot;&gt;// 发出推送&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;trigger&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      taskStack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; task &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;task&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
 
    &lt;span class=&quot;token comment&quot;&gt;// 订阅方法&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;subscript&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;task&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      taskStack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;task&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
     
      &lt;span class=&quot;token comment&quot;&gt;// 提供取消订阅功能&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        taskStack &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; taskStack&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt; t &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; t &lt;span class=&quot;token operator&quot;&gt;!==&lt;/span&gt; task &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
 
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; trigger&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; subscript &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;好了简单的订阅就实现了，在我们平时用的Redux中creatStore也是运用到这种订阅方式。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[从请求到响应 django 都做了哪些处理]]></title><description><![CDATA[最近面试的时候，被面试官问道一个问题，就是 request.user 里面的 user 是怎样得到的，这个问题当时没有回答上来，可以说是非常的尴尬，所以赶快查了一些资料，看了一些源码，特地来总结一下这个问题。 要想回答为什么可以直接通过 request.user…]]></description><link>https://knownsec-fed.com/2018-01-21-how-django-works/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-01-21-how-django-works/</guid><pubDate>Sun, 21 Jan 2018 10:10:00 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-63b7fa87b39277540d34e41be34ff4fb-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEAf/EABYBAQEBAAAAAAAAAAAAAAAAAAABA//aAAwDAQACEAMQAAABnyAZsFkf/8QAGBAAAwEBAAAAAAAAAAAAAAAAAQIDABD/2gAIAQEAAQUCWUzMQQ6gCt3/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAeEAAABAcAAAAAAAAAAAAAAAAAAQIhAxESIDEyQf/aAAgBAQAGPwLZ+mGiYEknVZ//xAAaEAACAwEBAAAAAAAAAAAAAAABIQARMRDw/9oACAEBAAE/IRskQjM85Zto6EXireWQgd3n/9oADAMBAAIAAwAAABBHL//EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAEDAQE/EKf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAeEAEAAwACAgMAAAAAAAAAAAABESExABBRYXGBof/aAAgBAQABPxBtsUgLxUTuL3jVWiwYgmdz94LHCURT4qvf31sAUA789f/Z&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;Header&quot;
        title=&quot;&quot;
        src=&quot;/static/header-63b7fa87b39277540d34e41be34ff4fb-d6978.jpeg&quot;
        srcset=&quot;/static/header-63b7fa87b39277540d34e41be34ff4fb-527f0.jpeg 300w,
/static/header-63b7fa87b39277540d34e41be34ff4fb-9a7cd.jpeg 600w,
/static/header-63b7fa87b39277540d34e41be34ff4fb-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;最近面试的时候，被面试官问道一个问题，就是 request.user 里面的 user 是怎样得到的，这个问题当时没有回答上来，可以说是非常的尴尬，所以赶快查了一些资料，看了一些源码，特地来总结一下这个问题。&lt;/p&gt;
&lt;p&gt;要想回答为什么可以直接通过 request.user 得到请求的用户，应该先来看看请求被处理以及如何返回响应的流程。今天先总结一下 django 从请求到响应都进行了哪些过程。&lt;/p&gt;
&lt;h2&gt;WSGI&lt;/h2&gt;
&lt;p&gt;当客户端发送一次请求后，最先处理请求的实际上是 web 服务器就是我们经常说的 nginx、Apache 这类的 web 服务器，而 WSGI 的作用就是把 web 服务器和 web 框架 (Django) 连接起来。WSGI 被分为了两个部分：服务端和应用端。为了处理一个 WSGI 的响应，服务端执行应用程序并向应用端提供一个回调函数，应用端处理请求并使用提供的回调将响应返回给服务端。本质上来讲，我觉得 WSGI 就是 web 服务器和 django 应用之间的一个联系人。&lt;/p&gt;
&lt;h2&gt;数据流&lt;/h2&gt;
&lt;p&gt;当用户向你的应用发送一个请求的时候，一个 WSGI handler 将会被初始化，它会完成以下工作：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;导入 settings.py 和 django 的异常类&lt;/li&gt;
&lt;li&gt;使用 load&lt;em&gt;middleware 方法加载 settings.py 中 MIDDLEWARE&lt;/em&gt;CLASSES 或者 MIDDLEWARES 元组中所用的 middleware classes.&lt;/li&gt;
&lt;li&gt;创建四个列表 (&lt;em&gt;request&lt;/em&gt;middleware,&lt;em&gt;view&lt;/em&gt;middleware, &lt;em&gt;response&lt;/em&gt;middleware, &lt;em&gt;exception&lt;/em&gt;middleware)，里面分别包含处理 request,view,response 和 exception 的方法。&lt;/li&gt;
&lt;li&gt;WSGI Handler 将实例化一个 django.http.HTTPRequest 对象的子类，django.core.handlers.wsgi.WSGIRequest.&lt;/li&gt;
&lt;li&gt;循环遍历处理 request 的方法 (&lt;em&gt;request&lt;/em&gt;middleware 列表），并按照顺序调用他们&lt;/li&gt;
&lt;li&gt;解析请求的 url&lt;/li&gt;
&lt;li&gt;循环遍历每个处理 view 的方法 (&lt;em&gt;view&lt;/em&gt;middleware 列表）&lt;/li&gt;
&lt;li&gt;如果找的到的话，就调用视图函数&lt;/li&gt;
&lt;li&gt;处理任何异常的方法 (&lt;em&gt;exception&lt;/em&gt;middleware 列表）&lt;/li&gt;
&lt;li&gt;循环遍历每个处理响应的方法 (&lt;em&gt;response&lt;/em&gt;middleware 列表），（从内向外，与请求中间件的顺序相反）&lt;/li&gt;
&lt;li&gt;最后得到一个响应，并调用 web server 提供的回调函数&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;中间件&lt;/h2&gt;
&lt;p&gt;中间件被用在了 django 的许多关键功能中：例如，使用 CSRF 中间键来防止跨站请求伪造攻击。它们也被用来处理会话数据，身份认证和授权同样是由中间件来完成的。我们也可以自己编写中间件来调整或者（短路）通过应用程序的数据流。&lt;/p&gt;
&lt;p&gt;django 的中间件至少含有以下四个方法中的一个：process&lt;em&gt;request, process&lt;/em&gt;response, process&lt;em&gt;view, process&lt;/em&gt;exception。这些方法会被 WSGI handler 收集并按照顺序调用。&lt;/p&gt;
&lt;h3&gt;process_request&lt;/h3&gt;
&lt;p&gt;我们可以先来看看 django.contrib.auth.middleware.AuthenticationMiddleware:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-python&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;get_user&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;hasattr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;_cached_user&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;_cached_user &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; auth&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;get_user&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;_cached_user

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AuthenticationMiddleware&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;MiddlewareMixin&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;process_request&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;self&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;assert&lt;/span&gt; &lt;span class=&quot;token builtin&quot;&gt;hasattr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;session&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
              &lt;span class=&quot;token string&quot;&gt;&quot;The Django authentication middleware requires session middleware &quot;&lt;/span&gt;
              &lt;span class=&quot;token string&quot;&gt;&quot;to be installed. Edit your MIDDLEWARE%s setting to insert &quot;&lt;/span&gt;
              &lt;span class=&quot;token string&quot;&gt;&quot;&apos;django.contrib.sessions.middleware.SessionMiddleware&apos; before &quot;&lt;/span&gt;
              &lt;span class=&quot;token string&quot;&gt;&quot;&apos;django.contrib.auth.middleware.AuthenticationMiddleware&apos;.&quot;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;_CLASSES&quot;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; settings&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;MIDDLEWARE &lt;span class=&quot;token keyword&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;None&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;user &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; SimpleLazyObject&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;lambda&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; get_user&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;这里我们可以发现 request.user 这个属性是在 AuthenticationMiddleware 中产生的。这个我们稍后再说。&lt;/p&gt;
&lt;p&gt;这里我们可以发现，这个中间件只有 process&lt;em&gt;request，说明它只在 request 这一步处理流入和流出 django 应用的数据流。这个中间件会首先验证会话中间件是否被使用，然后通过调用 get&lt;/em&gt;user 函数来设置用户。当 WSGI 处理程序迭代 process&lt;em&gt;request 方法列表的时候，它将会构建这个最终会被传递给视图函数的请求对象，并能够使你引用 request.user。一些中间件没有 process&lt;/em&gt;request 方法，在这个阶段，会被跳过。&lt;/p&gt;
&lt;p&gt;process&lt;em&gt;request 应该返回 None 或者 HTTPResponse 对象。当返回 None 时，WSGI handler 会继续加载 process&lt;/em&gt;request 里面的方法，但是后一种情况会短路处理过程并进入 process_response 循环。&lt;/p&gt;
&lt;h3&gt;解析 url&lt;/h3&gt;
&lt;p&gt;当所有的 process&lt;em&gt;request 被调用完之后，我们就会得到一个将被传递给视图函数的 request 对象。当这个事件发生之前，django 必须解析 url 并决定调用哪一个视图函数。这个过程非常简单，只需要使用正则匹配即可。settings.py 中有一个 ROOT&lt;/em&gt;URLCONF 键来指定根 url.py，在这里会包含你所有 app 的 urls.py 文件。如果没有匹配成功，将会抛出一个异常 django.core.urlresolvers.Resolver404, 这是 django.http.HTTP404 的子类。&lt;/p&gt;
&lt;h3&gt;process_view&lt;/h3&gt;
&lt;p&gt;到这一步之后 WSGI handler 知道了调用哪一个视图函数，以及传递哪些参数。它会再一次调用中间件列表里面的方法，这次是&lt;em&gt;view&lt;/em&gt;middleware 列表。所有 Django 中间件的 process_view 方法将会被这样声明：&lt;/p&gt;
&lt;p&gt;&lt;code&gt;process_view(request, view_function, view_args, view_kwargs)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;和 process&lt;em&gt;request 一样，process&lt;/em&gt;view 函数必须返回 None 或者 HTTPResponse 对象，使得 WSGI handler 继续处理视图或者’短路’处理流程并返回一个响应。在 CSRF middleware 中存在一个 process&lt;em&gt;view 的方法。作用是当 CSRF cookies 出现时，process&lt;/em&gt;view 方法将会返回 None, 视图函数将会继续的执行。如果不是这样，请求将会被拒绝，处理流程将会被’短路’，会生成一个错误的信息。&lt;/p&gt;
&lt;h3&gt;进入视图函数&lt;/h3&gt;
&lt;p&gt;一个视图函数需要满足三个条件：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;必须是可以调用的。这可以是基于函数的视图或者是 class-based 的视图（继承自 View 并且使用 as_view() 方法来使它成为可调用的。这些方法的调用依赖 HTTP verb(GET, POST, etc))&lt;/li&gt;
&lt;li&gt;必须接受一个 HTTPRequest 对象作为第一个位置参数。这个 HTTPRequest 对象是被所有 process&lt;em&gt;request 和 process&lt;/em&gt;view 中间件方法处理的结果。&lt;/li&gt;
&lt;li&gt;必须返回一个 HTTPResponse 对象，或者抛出一个异常。就是用这个 response 对象来开启 WSGI handler 的 process_view 循环。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;process_exception&lt;/h3&gt;
&lt;p&gt;如果视图函数抛出一个异常，Handler 将会循环遍历&lt;em&gt;exception&lt;/em&gt;middleware 列表，这些方法按照相反的顺序执行，从 settings.py 里面列出来的最后一个中间件到第一个。如果一个异常被抛出，处理过程将会被短路，其他的 process_exception 将不会被执行。通常我们依赖 Djnago’s BaseHandler 提供的异常处理程序，但是我们也可以使用自定义的异常处理中间件。&lt;/p&gt;
&lt;h3&gt;process_response&lt;/h3&gt;
&lt;p&gt;在这个阶段，我们得到了一个 HTTPResponse 对象，这个对象可能是 process&lt;em&gt;view 返回的，也可能是视图函数返回的。现在我们将循环访问响应中间件。这是中间件调整数据的最后的机会。执行的顺序是从内向外执行。
以 cache middleware 的 process&lt;/em&gt;response 为例：它依赖于你的 app 里面的不同的状态（缓存是否打开或者关闭，是否在处理一个数据流），来决定是否缓存你的响应。&lt;/p&gt;
&lt;h3&gt;注意&lt;/h3&gt;
&lt;p&gt;django 1.10 和之前版本的区别：
在旧版本的 MIDDLEWARE&lt;em&gt;CLASSES 中，就算一个中间件”短路”了执行过程，所有的中间件都会调用它们的 process&lt;/em&gt;response 方法。而在新的 MIDDLEWARES 版本中，只有这个中间件和在它之前执行的中间件才会调用 process_response 方法。&lt;/p&gt;
&lt;h2&gt;总结&lt;/h2&gt;
&lt;p&gt;以上就是 django 在处理一个请求的基本的过程，最后 django 的 WSGI Handler 会创建一个来自 HTTPResponse 的返回值，而且会调用回调函数把数据传递给 web server, 最后返回给用户。&lt;/p&gt;
&lt;p&gt;以下是两个关键点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;我们现在知道了视图函数是如何和 url 解析器匹配以及什么在调用它 (WSGI Handler)&lt;/li&gt;
&lt;li&gt;有四个关键的地方可以让你挂钩到请求 / 响应周期：process&lt;em&gt;request, process&lt;/em&gt;response, process&lt;em&gt;view, process&lt;/em&gt;exception。请求中间件是从外部向内执行，最后抵达到视图函数，然后通过响应中间件从内向外返回。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;参考资料&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://medium.com/zeitcode/django-middlewares-and-the-request-response-cycle-fcbf8efb903f&quot;&gt;Django Middlewares and the Request/Response Cycle&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.b-list.org/weblog/2006/jun/13/how-django-processes-request/&quot;&gt;How Django processes a request&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[React+Electron搭建一个桌面应用]]></title><description><![CDATA[​当你冲这个标题点进来的时候，我猜你一定知道 React 是什么，更多详情请 戳这里 ，就不介绍React了，一个神般存在的前端框架。另外，浏览器和移动端横行的时代，为什么还需要桌面应用？我就不解释了，反正优点很多，做为技术多学一点总没错。 Electron…]]></description><link>https://knownsec-fed.com/2018-01-21-electron-with-react/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-01-21-electron-with-react/</guid><pubDate>Sun, 21 Jan 2018 00:00:00 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-262428f3d8338fc8e5f1713081dab50b-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABVklEQVQoz6VR23KCMBDlg0QCAYSQCKgo6oxadTq2dqYv/v8vbHc3JOK0b304sJeTk92TYBoriJLqF8b1MCr+rL/G9h+4hmtORfkaI1K1YlFfH/NHcZQoCGyifVNWa4ikxriEOKuhaPfQ3R6g+zPziCPSOYi85jjO26ewnVDbcaUBgUjKJR+YTGcocoHm9AV6e4HF9RtUd4QQ6yQgsjlfQGfsdMatrIcJjSUgMZtvWbA53aE5fkK5PKDoFTK9sVPNWrzU4HQNRDiMSGvvY0B7u1tiauC6DMzN/h3qww2atzt0Hw+oNmf0VMEMbXBrki103vnIHoai8A9A5rt8EuY8BU2XFO2zP+K43AvSJzMbRlp1kNdbXo3yvN6BVB2KLSDDx0r1Gu3o+Z+bnvmp7pDbDw+prCAdsGhRYAUJekS5LFcWWJMDR+KjEZjjeUtvAa/s1v0XhpV/AIEYSO1ZRLYcAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;Header&quot;
        title=&quot;&quot;
        src=&quot;/static/header-262428f3d8338fc8e5f1713081dab50b-d6978.jpeg&quot;
        srcset=&quot;/static/header-262428f3d8338fc8e5f1713081dab50b-527f0.jpeg 300w,
/static/header-262428f3d8338fc8e5f1713081dab50b-9a7cd.jpeg 600w,
/static/header-262428f3d8338fc8e5f1713081dab50b-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;​当你冲这个标题点进来的时候，我猜你一定知道 React 是什么，更多详情请&lt;a href=&quot;https://reactjs.org/&quot;&gt;戳这里&lt;/a&gt;，就不介绍React了，一个神般存在的前端框架。另外，浏览器和移动端横行的时代，为什么还需要桌面应用？我就不解释了，反正优点很多，做为技术多学一点总没错。&lt;/p&gt;
&lt;h2&gt;Electron 简单介绍&lt;/h2&gt;
&lt;h3&gt;是什么?&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;&lt;a href=&quot;https://electronjs.org/docs/tutorial/about&quot;&gt;官网&lt;/a&gt;是这么介绍的：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;  &lt;a href=&quot;https://electronjs.org/&quot;&gt;Electron&lt;/a&gt; is an open source library developed by GitHub for building cross-platform desktop applications with HTML, CSS, and JavaScript. Electron accomplishes this by combining &lt;a href=&quot;https://www.chromium.org/Home&quot;&gt;Chromium&lt;/a&gt; and &lt;a href=&quot;https://nodejs.org/&quot;&gt;Node.js&lt;/a&gt; into a single runtime and apps can be packaged for Mac, Windows, and Linux.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;简单翻译一下就是：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;  ​&lt;a href=&quot;https://electron.atom.io/&quot;&gt;Electron&lt;/a&gt; 是一个由 GitHub 开发的开源库，通过将 &lt;a href=&quot;https://www.chromium.org/Home&quot;&gt;Chromium&lt;/a&gt;) 和&lt;a href=&quot;https://nodejs.org/&quot;&gt;Node.js&lt;/a&gt; 组合并使用 HTML，CSS 和 JavaScript 进行构建 Mac，Windows，和 Linux 跨平台桌面应用程序。    &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;隐藏意思：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;  让前端开发者快乐简单拥抱桌面应用！&lt;/p&gt;
&lt;h3&gt;&lt;strong&gt;原理是?&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;   上面已将说了，&lt;a href=&quot;https://electron.atom.io/&quot;&gt;Electron&lt;/a&gt; 通过将 &lt;a href=&quot;https://www.chromium.org/Home&quot;&gt;Chromium&lt;/a&gt; 和 &lt;a href=&quot;https://nodejs.org/&quot;&gt;Node.js&lt;/a&gt; 组合到单个 runtime 中来实现的。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;node.js:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;  如果你不知道 node.js，那还等什么快&lt;a href=&quot;https://nodejs.org/en/&quot;&gt;戳这里&lt;/a&gt;，看一看世界上最温柔可爱的语言。它借助于 Google 的 V8 引擎，&lt;strong&gt;Node.js&lt;/strong&gt; 是一个能够在服务器端运行 JavaScript 的开放源代码、跨平台 JavaScript 运行环境，更多解释请&lt;a href=&quot;https://zh.wikipedia.org/wiki/Node.js&quot;&gt;戳维基百科&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Chromium:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;   Chromium 或许你没听说过，但是你一定听说过 chrome 吧！Chromium 是 Google 的开源浏览器，是 chrome 背后的那个不太稳定更新快的兄弟版，详情&lt;a href=&quot;https://www.chromium.org/Home&quot;&gt;戳这里&lt;/a&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;组合:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;  Electron 创建的应用使用网页作为其 GUI ,因此你可以将其当成由 JavaScript 控制的迷你精简版Chromium 浏览器。也可以将 Electron 当成 node.js 变体，只不过它更专注于桌面应用而非 Web 服务器。在 Electron 中, 把 &lt;code&gt;package.json&lt;/code&gt; 中设定的 &lt;code&gt;main&lt;/code&gt; 脚本的所在进程称为 &lt;strong&gt;主进程&lt;/strong&gt;。这个进程中运行的脚本也可通过创建网页这种方式来展现其 GUI。 因为 Electron 是通过 Chromium 来显示页面,所以 Chromium 自带的多进程架构也一同被利用。这样每个页面都运行着一个独立的进程,它们被统称为 &lt;strong&gt;渲染进程&lt;/strong&gt;。通常来说,浏览器中的网页会被限制在沙盒环境中运行并且不允许访问系统原生资源。但是由于 Eelectron 用户可在页面中调用 Node.js API，所以可以和底层操作系统直接交互。&lt;/p&gt;
&lt;h3&gt;&lt;strong&gt;优缺点？&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;  总之，优点肯定大于缺点。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;优点:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;  方便快捷的开发桌面应用，跨平台，对前端开发者友好，活跃的社区，丰富的api…&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;缺点:&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;  性能肯定比不上原生的桌面应用，发布的包貌似有一点点大。&lt;/p&gt;
&lt;h3&gt;&lt;strong&gt;怎么开始?&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;  如果不是假前端，那么你电脑肯定安装好了 git 和 node。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-bash&quot;&gt;&lt;code&gt;&lt;span class=&quot;token comment&quot;&gt;# github上有一个 electron-quick-start 仓库克隆下来&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;git&lt;/span&gt; clone https://github.com/electron/electron-quick-start
&lt;span class=&quot;token comment&quot;&gt;# 进入文件夹&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;cd&lt;/span&gt; electron-quick-start
&lt;span class=&quot;token comment&quot;&gt;# 安装依赖包并运行&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; start
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;  然后，你桌面应用就创建成功了如下图所示！&lt;/p&gt;
&lt;p&gt;  
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/hello-world-57bd3a4ef1121c6f3f53492603c91b24-f8e32.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 802px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 77.80548628428927%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAAsSAAALEgHS3X78AAAAmUlEQVQoz+2TTQvCMAyG+/Md3dDJiv6xMscOu7U91H5Q6MeKzrhdB2Kv+hCSkOQllwS1bUO6lnTn64Wcjg3Gh7qualy9/SdDlNK+v03TNAzDOI7LNyDGmBCCM8Y5l1JqrY0x4K21W+Kc894/9kAh+JxzjDGvwFxYgcqWpJSgvr8Zekspf/GPiOGSIDyLQPOcyzfDUyil7kW8AGnull6EHG7WAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;hello world&quot;
        title=&quot;&quot;
        src=&quot;/static/hello-world-57bd3a4ef1121c6f3f53492603c91b24-f8e32.png&quot;
        srcset=&quot;/static/hello-world-57bd3a4ef1121c6f3f53492603c91b24-11091.png 300w,
/static/hello-world-57bd3a4ef1121c6f3f53492603c91b24-de789.png 600w,
/static/hello-world-57bd3a4ef1121c6f3f53492603c91b24-f8e32.png 802w&quot;
        sizes=&quot;(max-width: 802px) 100vw, 802px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;  打开你的 electron-quick-start 文件夹，你的项目结构如下图：&lt;/p&gt;
&lt;p&gt;  
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/electron-quick-start-c3d917e2a785aed1b5f5e5c20e0fddbe-4debb.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 281px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 71.88612099644128%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsSAAALEgHS3X78AAABdklEQVQoz4WS226CQBRF+X+/QqPRJipqoz6UaOU+NxgUUDHGykXA+BE9Q3ksuJLhYYY9s88+RwqCQFEUyzItyzAthDFBAhsjvNtuw/BYlmWWZY//kJIkCcMQrth7nqFrfhA4jOm6rmpaFJ1blEIMZ7fbDV70DwfbtgilnsePx9P1eo3jOM/zRzNSXgGaw97bVSCCj6dzXuTtSiGGBT9tNhvmOIQQ0zDg63I3ENUWLZ5rMWBBYoaoc/u91TQdjPi+315wbbsoCnDLKIWUKWMYY5dzCAL281ZE2mmagphSCq8z5iDboo6TplnyDqnb7fZ6vU6n0x8MvhRlvVrPZ7PR6GNQ0e/3u81IZsVwOJTl2XzxKU8n48lkJk/n88V4PF4uVyKOBqRXBXh2He5wTgmhhPnQN28fXaI4Tl7NiCEB4BokRlOUbRgmspHr8vL5hFSyZupWqarqcZdgZJimDUrOi7J8vKMWXy4X6M39/gPcf+4wmO0d/uMX3ATAMTQpK1kAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;electron-quick-start&quot;
        title=&quot;&quot;
        src=&quot;/static/electron-quick-start-c3d917e2a785aed1b5f5e5c20e0fddbe-4debb.png&quot;
        srcset=&quot;/static/electron-quick-start-c3d917e2a785aed1b5f5e5c20e0fddbe-4debb.png 281w&quot;
        sizes=&quot;(max-width: 281px) 100vw, 281px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;  其中，main.js 是你的启动文件，index.html 是你的入口文件。&lt;/p&gt;
&lt;h2&gt;React 结合 Electron&lt;/h2&gt;
&lt;p&gt;上面简单的介绍了一下 Electron，下面介绍一下如何将 React 和 Electron 结合起来。&lt;/p&gt;
&lt;h3&gt;&lt;strong&gt;创建一个React项目&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;  首先你得有一个 React 项目，由于太多繁琐的配置和懒惰的自己，我们这里就用 Facebook 提供的 create-react-app 来快速创建一个 knownsec-fed 项目。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-bash&quot;&gt;&lt;code&gt;&lt;span class=&quot;token comment&quot;&gt;# 安装 create-react-app 命令,如果已将安装请忽略&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; -g create-react-app
&lt;span class=&quot;token comment&quot;&gt;# 创建 knownsec-fed 项目&lt;/span&gt;
create-react-app knownsec-fed
&lt;span class=&quot;token comment&quot;&gt;# 启动项目( create-react-app 真的超级方便啊)&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;cd&lt;/span&gt; knownsec-fed &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; start
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;  于是，浏览器 &lt;a href=&quot;http://localhost:3000/&quot;&gt;http://localhost:3000/&lt;/a&gt; 就会出现着如下图界面，一个 react 项目创建成功：&lt;/p&gt;
&lt;p&gt;  
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/create-react-app-b8c790cff10bbe847d9ea60b84aeee11-133bb.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 47.25274725274725%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsSAAALEgHS3X78AAAAeklEQVQoz2MwxAqMjPR1dIwdXYwdXYEMIBerKgY5HEBVRVnX0kbHwlpFSVFOXh6rGoYQbCAgICAyMjIhLi4+JiYiMjIgwB+rMoZ/GODv37+fP3/+8OHDp0+fPn/6/PHjx88fP/398xtTJcN/CgBxmv/9o0AzRTbTQjMASOqM3Sy2y7MAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;create-react-app&quot;
        title=&quot;&quot;
        src=&quot;/static/create-react-app-b8c790cff10bbe847d9ea60b84aeee11-abe1c.png&quot;
        srcset=&quot;/static/create-react-app-b8c790cff10bbe847d9ea60b84aeee11-10046.png 300w,
/static/create-react-app-b8c790cff10bbe847d9ea60b84aeee11-3c4a3.png 600w,
/static/create-react-app-b8c790cff10bbe847d9ea60b84aeee11-abe1c.png 1200w,
/static/create-react-app-b8c790cff10bbe847d9ea60b84aeee11-133bb.png 1365w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h3&gt;添加 Electron 包&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-bash&quot;&gt;&lt;code&gt;&lt;span class=&quot;token comment&quot;&gt;# 在knownsec-fed 目录下安装 Electron 包&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; -save electron
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h3&gt;相关配置&lt;/h3&gt;
&lt;h4&gt;&lt;strong&gt;配置 main.js&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;  knownsec-fed 根目录(不是 src 目录)下面新建 main.js 文件,这个文件和 electron-quick-start 中的官方默认 main.js 几乎一模一样，只修改了加载应用这入口这一个地方：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token comment&quot;&gt;// 引入electron并创建一个Browserwindow&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;app&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; BrowserWindow&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;electron&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; path &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;path&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; url &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;url&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 保持window对象的全局引用,避免JavaScript对象被垃圾回收时,窗口被自动关闭.&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; mainWindow

&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createWindow&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;//创建浏览器窗口,宽高自定义具体大小你开心就好&lt;/span&gt;
mainWindow &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;BrowserWindow&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;width&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;800&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; height&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;600&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;/* 
   * 加载应用-----  electron-quick-start中默认的加载入口
    mainWindow.loadURL(url.format({
      pathname: path.join(__dirname, &apos;index.html&apos;),
      protocol: &apos;file:&apos;,
      slashes: true
    }))
  */&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// 加载应用----适用于 react 项目&lt;/span&gt;
  mainWindow&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;loadURL&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;http://localhost:3000/&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  
  &lt;span class=&quot;token comment&quot;&gt;// 打开开发者工具，默认不打开&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// mainWindow.webContents.openDevTools()&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// 关闭window时触发下列事件.&lt;/span&gt;
  mainWindow&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;closed&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    mainWindow &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 当 Electron 完成初始化并准备创建浏览器窗口时调用此方法&lt;/span&gt;
app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;ready&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; createWindow&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 所有窗口关闭时退出应用.&lt;/span&gt;
app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;window-all-closed&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// macOS中除非用户按下 `Cmd + Q` 显式退出,否则应用与菜单栏始终处于活动状态.&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;platform &lt;span class=&quot;token operator&quot;&gt;!==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;darwin&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;quit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;activate&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
   &lt;span class=&quot;token comment&quot;&gt;// macOS中点击Dock图标时没有已打开的其余应用窗口时,则通常在应用中重建一个窗口&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;mainWindow &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;createWindow&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 你可以在这个脚本中续写或者使用require引入独立的js文件.   &lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h4&gt;配置 package.json&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-json&quot;&gt;&lt;code&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;name&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;knownsec-fed&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;version&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;0.1.0&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;private&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;main&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;main.js&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; // 配置启动文件
  &lt;span class=&quot;token property&quot;&gt;&quot;homepage&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;.&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; // 
  &lt;span class=&quot;token property&quot;&gt;&quot;dependencies&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;electron&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;^1.7.10&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;react&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;^16.2.0&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;react-dom&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;^16.2.0&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;react-scripts&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;1.1.0&quot;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;&quot;scripts&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;start&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;react-scripts start&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;build&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;react-scripts build&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;test&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;react-scripts test --env=jsdom&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;eject&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;react-scripts eject&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;electron-start&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;electron .&quot;&lt;/span&gt; // 配置electron的start，区别于web端的start
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;   
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h4&gt;启动 Electron&lt;/h4&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-bash&quot;&gt;&lt;code&gt;&lt;span class=&quot;token comment&quot;&gt;# 启动react项目&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; start
&lt;span class=&quot;token comment&quot;&gt;# 启动electron&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; run electron-start
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;  支持热调试，当你修改代码后，桌面应用也将会重新更新。&lt;/p&gt;
&lt;p&gt;  
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/react-electron-47804622929a3da10f18c3a58468a332-cac28.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 803px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 78.33125778331258%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAAsSAAALEgHS3X78AAABDUlEQVQoz+3N20qEQBgH8HkHTSlwxvV0ZeCp2VJaoiVhYyl6h16ge008oO4Ti3ioQTFmtiW66qofwxz+M9834GUbhOH989Nu/xjebXxqBJsA3167bMgMAJGMEJIkCBGSKQhKhru+fNjLbE4DqrpSVUWdKAtZXkkX5+Z2h1/fSFMEoXIK0HVNZ2maZtv2GuMrjG98n6ye5xmGoX8DeJ7jKYIgcBxnmiaptCwLY+y6ruM4oiieTejHoCzLw6Ku66IosiyL4ziKoiRJ3idkn+d5mqZVVR0o4IPV933btl3XDcMwH8dxJEcyk5zM9GPQNA2JhsU4IRfz5iuZw4EFSL+jz4/a/5CfKP69/+K/LP4Ew6OjjDTnq04AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;react-electron&quot;
        title=&quot;&quot;
        src=&quot;/static/react-electron-47804622929a3da10f18c3a58468a332-cac28.png&quot;
        srcset=&quot;/static/react-electron-47804622929a3da10f18c3a58468a332-ca07b.png 300w,
/static/react-electron-47804622929a3da10f18c3a58468a332-85be9.png 600w,
/static/react-electron-47804622929a3da10f18c3a58468a332-cac28.png 803w&quot;
        sizes=&quot;(max-width: 803px) 100vw, 803px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h3&gt;&lt;strong&gt;打包&lt;/strong&gt;&lt;/h3&gt;
&lt;h4&gt;打包 react 项目&lt;/h4&gt;
&lt;p&gt;  首先修改 &lt;code&gt;main.js&lt;/code&gt;, 因为现在你要将 react 项目打包在 build 文件夹下面，所以加载应用处改成如下！当然也可在某个配置文件里面配置是否属于开发，此处用if判断一下从未进行选择执行哪段加载应用代码。但是这里为了简便，暂且使用直接修改的方式：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token comment&quot;&gt;// 加载应用----react 打包&lt;/span&gt;
mainWindow&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;loadURL&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;url&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  pathname&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; path&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;__dirname&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;./build/index.html&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  protocol&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;file:&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  slashes&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 加载应用----适用于 react 开发时项目&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// mainWindow.loadURL(&apos;http://localhost:3000/&apos;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;  默认情况下，homepage 是 &lt;a href=&quot;http://localhost:3000%EF%BC%8Cbuild&quot;&gt;http://localhost:3000，build&lt;/a&gt; 后，所有资源文件路径都是 /static，而 Electron 调用的入口是 file :协议，/static 就会定位到根目录去，所以找不到静态文件。在 &lt;code&gt;package.json&lt;/code&gt; 文件中添加 homepage 字段并设置为”.”后，静态文件的路径就变成了相对路径，就能正确地找到了添加如下配置：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-bash&quot;&gt;&lt;code&gt;&lt;span class=&quot;token string&quot;&gt;&quot;homepage&quot;&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;.&quot;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;  然后就开始打包 react：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-bash&quot;&gt;&lt;code&gt;&lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; run-script build
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;  此时，根目录下面将多出一个build文件夹。&lt;/p&gt;
&lt;h3&gt;打包 electron&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;常用打包插件&lt;/strong&gt;
&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://github.com/electron-userland/electron-builder&quot;&gt;electron-builder&lt;/a&gt;&lt;/strong&gt;    &lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href=&quot;https://github.com/electron-userland/electron-packager&quot;&gt;electron-packager&lt;/a&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;安装electron-packager&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-bash&quot;&gt;&lt;code&gt;&lt;span class=&quot;token comment&quot;&gt;# knownsec-fed目录下安装electron-packager包&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; electron-packager --save-dev
&lt;span class=&quot;token comment&quot;&gt;# 安装electron-packager命令&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;install&lt;/span&gt; electron-packager -g
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;&lt;strong&gt;electron-packager命令介绍&lt;/strong&gt;
&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-json&quot;&gt;&lt;code&gt;  electron-packager &amp;lt;location of project&gt; &amp;lt;name of project&gt; &amp;lt;platform&gt; &amp;lt;architecture&gt; &amp;lt;electron version&gt; &amp;lt;optional options&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;location of project: 项目的本地地址，此处我这边是 ~/knownsec-fed   &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;location of project: 项目名称，此处是 knownsec-fed   &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;platform: 打包成的平台   &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;architecture: 使用 x86 还是 x64 还是两个架构都用   &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;electron version: electron 的版本&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;于是，根据我这边的情况在 &lt;code&gt;package.json&lt;/code&gt; 文件的在 scripts 中加上如下代码：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-json&quot;&gt;&lt;code&gt;&lt;span class=&quot;token property&quot;&gt;&quot;package&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &quot;electron-packager ~/knownsec-fed/build knownsec-fed --all --out ~/ --version &lt;span class=&quot;token number&quot;&gt;1.7&lt;/span&gt;.&lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;   
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;&lt;strong&gt;开始打包&lt;/strong&gt;
&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-bash&quot;&gt;&lt;code&gt;&lt;span class=&quot;token function&quot;&gt;npm&lt;/span&gt; run-script package
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;&lt;strong&gt;提醒&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;  由于打包的时候会把浏览器内核完整打包进去，所以就算你的项目开发就几百k的资源，但最终的打包文件估计也会比较大。&lt;/p&gt;
&lt;h2&gt;其它&lt;/h2&gt;
&lt;p&gt;此文章未涉及 Electron 具体的技术，只是简单的介绍了一下 react + electron 的一个配置及打包的流程。或许以后会写关于 Electron 的技术细节。Electron 有着非常强大的 api，其背后涉及的技术也非常多。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;友情链接&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/electron/electron&quot;&gt;Electron github&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https://electronjs.org/docs&quot;&gt;Electron 英文文档&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https://www.gitbook.com/book/yuzhigang/electron/details&quot;&gt;Electron 中文手册&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/electron-userland/electron-packager&quot;&gt;electron-packager github&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https://electronjs.org/apps&quot;&gt;基于Electron构建的app&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/chentsulin/electron-react-boilerplate&quot;&gt;electron-react-boilerplate github&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[【译】UI 设计中的格式塔原则]]></title><description><![CDATA[原文链接:  Gestalt principles in UI design 作者：Eleana Gkogka…]]></description><link>https://knownsec-fed.com/2018-01-20-fan-yi-ui-she-ji-zhong-de-ge-shi-ta-yuan-ze/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-01-20-fan-yi-ui-she-ji-zhong-de-ge-shi-ta-yuan-ze/</guid><pubDate>Sat, 20 Jan 2018 17:41:53 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-31f16200f4d7cfa584604d101cc45c96-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAEDBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHrzQhR/8QAFxABAAMAAAAAAAAAAAAAAAAAEQECIP/aAAgBAQABBQJlbZ//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAXEAADAQAAAAAAAAAAAAAAAAAAIDEy/9oACAEBAAY/AoZX/8QAHBAAAQMFAAAAAAAAAAAAAAAAAQARISAxQVGh/9oACAEBAAE/IS6AjtHF0haaP//aAAwDAQACAAMAAAAQ/wA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGhABAQACAwAAAAAAAAAAAAAAAREAYSAhQf/aAAgBAQABPxAlB4rWBCCq6GJQiM7OH//Z&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;【翻译】UI 设计中的格式塔原则&quot;
        title=&quot;&quot;
        src=&quot;/static/header-31f16200f4d7cfa584604d101cc45c96-d6978.jpeg&quot;
        srcset=&quot;/static/header-31f16200f4d7cfa584604d101cc45c96-527f0.jpeg 300w,
/static/header-31f16200f4d7cfa584604d101cc45c96-9a7cd.jpeg 600w,
/static/header-31f16200f4d7cfa584604d101cc45c96-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;原文链接: &lt;a href=&quot;https://medium.muz.li/gestalt-principles-in-ui-design-6b75a41e9965&quot;&gt;Gestalt principles in UI design&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;作者：Eleana Gkogka&lt;/p&gt;
&lt;h2&gt;如何成为视觉交流的主要操纵者&lt;/h2&gt;
&lt;p&gt;当你看着天空的时候有没有注意到那些奇形怪状的云，有些像一个熟悉的动物或某个物体？你有没有想过，这是由于什么原因或是怎样的方式，让我们通过观看一个蓬松的气体，去做的这些联想？其实这完全是因为你的大脑在工作！&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/01-4963060bc7b799b46757ccd422237deb-7e266.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 36.375%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAABtklEQVQY0wGrAVT+AD5fem2Gm3yTqG2FnY6gsJmquYGUpmV7k1x1j2B8ln+UomR4hXJ6g4GIjY6bomyDkmeAj2R9jGeAjmmCjwBIaoNMbIdCYnxbb3+eq7O3wsprfYpheI1ke5JngJqGmKRgdYJ7gYZ6fYCOk5Z6ho51g41qfotnfotmfYsARGiFQGSBSmqEbHuCXmxwWGdtTV9od4udbYWbcoqijZukeoiNpaGah4OAeXt+YW12Xm56c32DbnuCWXF/AFd4k1t7lVx8lnWMnXuJi2Bvc4WWoYOYq3uTqXyWr5KfpouSksW/tLy0p7ywonp7fGBrdFRjbnx+fXWBgwBggZlph59wjaN1kqeAl6aRpbGRpraVprOTprOYrr2/vLKkn5CrqqCwrqLRyb2Ggn1faG9WZG1eanBocXQAaImecI+leJWqfpisf5irip6ro7G3oq+1kqOpnK644NbB5c2mwrOYp6CPvrSgsKONXmZrVWNrRVllRVhlAHaTpH6aq4GcrIagsI6ls42hrKCxuqCwuIqdp46irOnl1ffny+3bwdPHtcG6rM3Dso+VmYqTmYWQmIKOlYOB5wQM/QnLAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;01&quot;
        title=&quot;&quot;
        src=&quot;/static/01-4963060bc7b799b46757ccd422237deb-abe1c.png&quot;
        srcset=&quot;/static/01-4963060bc7b799b46757ccd422237deb-10046.png 300w,
/static/01-4963060bc7b799b46757ccd422237deb-3c4a3.png 600w,
/static/01-4963060bc7b799b46757ccd422237deb-abe1c.png 1200w,
/static/01-4963060bc7b799b46757ccd422237deb-7e266.png 1600w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;你的大脑总是试图通过对比以前的经验或视觉模式和连接点来理解世界。它有自己的“奇怪”的形式和形式感知方式，通过分组信息，填补空白，在大脑中画出大局。&lt;/p&gt;
&lt;p&gt;了解你的大脑如何工作将有助于你成为一个更聪明的设计师，和视觉传达的主要操纵者。它可以帮助你确定哪些视觉元素在任何特定的情况下都是最有效的，因此你可以使用它们来影响知觉，引导注意力并引起行为改变。对于以目标为导向方式去解决问题的这类直观的设计方式来说，是非常特别且有用的用户界面设计。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;“伟大的设计师理解心理学在视觉感知中的强大作用。当别人的眼睛看到你的设计作品时会发生什么，他们对你的作品分享的信息有什么反应？”&lt;/p&gt;
&lt;p&gt;—— Autodesk 品牌内容策划师 Laura Busche&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;现在很清楚，视觉设计和心理是相互联系的，可以相互影响。格式塔原则可以帮助我们理解和控制这些联系。&lt;/p&gt;
&lt;h2&gt;什么是完形？&lt;/h2&gt;
&lt;p&gt;格式塔（在德语中是“形状”的意思）是德国心理学家在 20 世纪 20 年代发展起来的一组视觉感知原理。它是建立在“有组织的整体，被认为超过其各部分之和”的理论之上的。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;“整体不是部分的总和。”&lt;/p&gt;
&lt;p&gt;—— Kurt Koffka&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;格式塔原则试图描述当某些条件适用时，人们如何看待视觉元素。它们建立在四个关键思想上：&lt;/p&gt;
&lt;h3&gt;紧急情况&lt;/h3&gt;
&lt;p&gt;人们倾向于首先在他们概括的形式中识别元素。我们的大脑识别一个简单的、定义良好的物体比一个详细的物体要快。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/02-25f3f0363521904a6b3d11f10dbf9c09-afed5.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 63.22368421052631%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAIBAwQF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAe3TqRHJF//EABkQAQACAwAAAAAAAAAAAAAAAAIBEQAQEv/aAAgBAQABBQJKpldrUGln/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGhAAAQUBAAAAAAAAAAAAAAAAEAABAhESIf/aAAgBAQAGPwJRw/DY/8QAGxABAAEFAQAAAAAAAAAAAAAAAREAECExoUH/2gAIAQEAAT8hEiN8pQbUqPKMFgQYnwt//9oADAMBAAIAAwAAABD8D//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABwQAQEAAwEAAwAAAAAAAAAAAAERACFBMRBx8P/aAAgBAQABPxDadCrdRPf3MNYdXaLRPG4EBVTr3IW4EJDYALffv4//2Q==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;02&quot;
        title=&quot;&quot;
        src=&quot;/static/02-25f3f0363521904a6b3d11f10dbf9c09-d6978.jpeg&quot;
        srcset=&quot;/static/02-25f3f0363521904a6b3d11f10dbf9c09-527f0.jpeg 300w,
/static/02-25f3f0363521904a6b3d11f10dbf9c09-9a7cd.jpeg 600w,
/static/02-25f3f0363521904a6b3d11f10dbf9c09-d6978.jpeg 1200w,
/static/02-25f3f0363521904a6b3d11f10dbf9c09-afed5.jpeg 1520w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h3&gt;物化&lt;/h3&gt;
&lt;p&gt;人们可以识别物体，即使它们是缺失的部分。我们的大脑与记忆中的熟悉模式相匹配，并填补了空白。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/03-e1e00f9ee779c3b8317823de42dfb4df-a08df.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 63.18211702827088%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMEBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHsTtBNoX//xAAaEAACAgMAAAAAAAAAAAAAAAACAwABBBET/9oACAEBAAEFAms5iB7uMWLKTjCq5//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EAB0QAAICAQUAAAAAAAAAAAAAAAERAAIQEiExQYH/2gAIAQEABj8CcoNZ97wrhxjc8Y//xAAcEAEAAQQDAAAAAAAAAAAAAAABEQAQITFBUWH/2gAIAQEAAT8hOZ7uikTDwbcHgZoOyBBept//2gAMAwEAAgADAAAAECwP/8QAFhEAAwAAAAAAAAAAAAAAAAAAEBEh/9oACAEDAQE/EKx//8QAFhEAAwAAAAAAAAAAAAAAAAAAEBEh/9oACAECAQE/EIh//8QAHBABAAICAwEAAAAAAAAAAAAAAREhMUEAEIHw/9oACAEBAAE/EKokkHCj58eGRUzayuTCRNaTo3AQXEJxKMYClLW9T1//2Q==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;03&quot;
        title=&quot;&quot;
        src=&quot;/static/03-e1e00f9ee779c3b8317823de42dfb4df-d6978.jpeg&quot;
        srcset=&quot;/static/03-e1e00f9ee779c3b8317823de42dfb4df-527f0.jpeg 300w,
/static/03-e1e00f9ee779c3b8317823de42dfb4df-9a7cd.jpeg 600w,
/static/03-e1e00f9ee779c3b8317823de42dfb4df-d6978.jpeg 1200w,
/static/03-e1e00f9ee779c3b8317823de42dfb4df-a08df.jpeg 1521w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h3&gt;多稳定性&lt;/h3&gt;
&lt;p&gt;人们往往会以多种方式来解释模棱两可的对象，我们的大脑将在寻求确定性的选择之间来回反弹。结果，一种观点会变得更加占优势，而另一种则更难看。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/04-da0f048c489750258141cc9663dda033-a08df.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 63.18211702827088%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAIDBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHq7KQov//EABsQAAEEAwAAAAAAAAAAAAAAAAEAAhESEBQx/9oACAEBAAEFAiX7BdCHKC8Y/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGxAAAgEFAAAAAAAAAAAAAAAAEBEBAhIhMUL/2gAIAQEABj8CinlPRuyz/8QAGxABAAMAAwEAAAAAAAAAAAAAAQARITFBYYH/2gAIAQEAAT8hrpLpdoy8jXVfIob0Fc5Equ7Aoon/2gAMAwEAAgADAAAAEI8P/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHBABAQACAgMAAAAAAAAAAAAAAREAITFBUWGB/9oACAEBAAE/EA0/p0IhLfZ1kiEFrrer5y6SRS8McOsA4mUnwxwIRGOAQQM//9k=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;04&quot;
        title=&quot;&quot;
        src=&quot;/static/04-da0f048c489750258141cc9663dda033-d6978.jpeg&quot;
        srcset=&quot;/static/04-da0f048c489750258141cc9663dda033-527f0.jpeg 300w,
/static/04-da0f048c489750258141cc9663dda033-9a7cd.jpeg 600w,
/static/04-da0f048c489750258141cc9663dda033-d6978.jpeg 1200w,
/static/04-da0f048c489750258141cc9663dda033-a08df.jpeg 1521w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h3&gt;不变性&lt;/h3&gt;
&lt;p&gt;人们可以独立于自己的旋转、缩放和平移来识别简单的物体。我们的大脑可以从不同的角度感知物体，尽管它们的外观不同&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/05-5c0c10fa5f824c822531c0a82ee0babe-a08df.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 63.18211702827088%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIDBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHWlcRhhf/EABkQAAIDAQAAAAAAAAAAAAAAAAECAxITI//aAAgBAQABBQLruN6RWzz6tECiIET/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAeEAACAQMFAAAAAAAAAAAAAAAAAQIREkEhMTJjcf/aAAgBAQAGPwLrJV3wK/kX1fg4rSoorB//xAAbEAEAAwADAQAAAAAAAAAAAAABABEhMUFR8f/aAAgBAQABPyGtLPiAOzZSzPdnIhpqStm2UdCWVHx1OJIUT//aAAwDAQACAAMAAAAQPw//xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAwEBPxCH/8QAFREBAQAAAAAAAAAAAAAAAAAAEBH/2gAIAQIBAT8Qp//EABwQAQACAwEBAQAAAAAAAAAAAAERIQAxQVFhcf/aAAgBAQABPxDxgNSS/iJL+9ybf6aE+HT3E34pIWflYM72RaEBrusXdoZU0ZoZDWIat43n/9k=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;05&quot;
        title=&quot;&quot;
        src=&quot;/static/05-5c0c10fa5f824c822531c0a82ee0babe-d6978.jpeg&quot;
        srcset=&quot;/static/05-5c0c10fa5f824c822531c0a82ee0babe-527f0.jpeg 300w,
/static/05-5c0c10fa5f824c822531c0a82ee0babe-9a7cd.jpeg 600w,
/static/05-5c0c10fa5f824c822531c0a82ee0babe-d6978.jpeg 1200w,
/static/05-5c0c10fa5f824c822531c0a82ee0babe-a08df.jpeg 1521w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;这就是格式塔原则，可以告诉今天的 UI 设计师。&lt;/strong&gt;&lt;/p&gt;
&lt;h2&gt;接近&lt;/h2&gt;
&lt;p&gt;相互靠近放置的元素被认为比放置得更远的元素更相关，这样不同的元素主要被视为一个群体而不是单独的元素。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/06-66c3a1f5bc21e93bba1b677f30e712ab-56ba0.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1140px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 58.42105263157894%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAACMElEQVQoz2P4TwFgAOILV2+6RWdu3LW/dfKcmIKaX79/33v0xD0me8WmHRPnLg1OL3n/4SNY8b8Vy94tXvD25o0fXR0vL138BtK8cM1mBgGV7NoOq8AETlWLl2/e7jlykoFfOaG4zjshl0FC5+qte0BlP3/+Kch5nJPxeN2a9z7ud9eufg/S/OXrt/L2SY+fvdy278iEuUuBIt++/6jumnLr/sP9x053zVgAsvQfyOrHj3/dv//z169/V698//LlL0jzgjWbGARUs6rbrALjOYA2v367+/AJoM1xhbWe8TkMkjpXbt0BKvsLAv/+/AEZAyFBmq/fvucWk7nr0InO6Qvii+r+/fv3+PlL99js9Tv3T1u0KjSzFOg0sOZ/TfXPayuf7d/3OS7ywa6dn0Car9y84xGbDXRz5/T5QM1A8x8+eQ60c822PVMWrAjPKv/w6TNEc0fbi5bG54cOfE5PfrRvD1jzorVbGHgUcmo7LAPi2JRMX715t/fIKQZuhYSiOi+gs0U1r9+5j+lsYChAA6y+b/qT5y93HToOdCc4wL43TZx15/7jgyfOTpy3DB5gDx/+vHv3588ffy9f+v75MzjAlqzbyiCollffZROcxKVu9ertu31HTwEjL6mkwTcpn0FKF2IzNKoyH29Y+wEYVesgUXXp+i1gItm851D71HmxBbV//vx58PiZe0zWqi27Js1fHpJR+uHjZ0giAcbwyuXv7t/9Oan/1fVrPxgoSZ4AsiQeaSOGpMUAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;06&quot;
        title=&quot;&quot;
        src=&quot;/static/06-66c3a1f5bc21e93bba1b677f30e712ab-56ba0.png&quot;
        srcset=&quot;/static/06-66c3a1f5bc21e93bba1b677f30e712ab-b73f6.png 300w,
/static/06-66c3a1f5bc21e93bba1b677f30e712ab-c3379.png 600w,
/static/06-66c3a1f5bc21e93bba1b677f30e712ab-56ba0.png 1140w&quot;
        sizes=&quot;(max-width: 1140px) 100vw, 1140px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h3&gt;接近度原则如何适用于 UI 设计？&lt;/h3&gt;
&lt;p&gt;我们可以在 UI 设计中使用 Proximity 原理来分类相似的信息，组织内容和整理布局。它的正确使用将会对视觉通信和用户体验产生积极的影响。&lt;/p&gt;
&lt;p&gt;正如原则所述，相关的项目应该彼此靠近，而不相关的项目应该保持更远的距离。白色空间在这里扮演着至关重要的角色，因为它创造了对比指导用户眼睛的预期方向。白色空间可以增强视觉层次和信息流，有助于轻松阅读和扫描布局。它将帮助用户更快地实现目标，深入研究内容。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/07-140169cbd9dd2f9ecfc693f09f53f5b1-963aa.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 131.3125%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAaABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAECBAYD/8QAFwEAAwEAAAAAAAAAAAAAAAAAAAECA//aAAwDAQACEAMQAAABhK49Zql4g5rPOlpTMCP/xAAbEAACAwEBAQAAAAAAAAAAAAABAgADERITMf/aAAgBAQABBQLzuENdkFN0P181GDKVBNlfTVpyOmhJmmf/xAAWEQADAAAAAAAAAAAAAAAAAAAAEBH/2gAIAQMBAT8BdP/EABYRAQEBAAAAAAAAAAAAAAAAABARAf/aAAgBAgEBPwGYU//EAB4QAAIBBAMBAAAAAAAAAAAAAAABEQIhIjEDM6Ey/9oACAEBAAY/Auz0U8tzvHaopmqLGLkePonLstEH0zZs/8QAHxAAAgICAQUAAAAAAAAAAAAAAAERITFRQWFxkaHx/9oACAEBAAE/IbyzKLmplxLGlKb2L3LiBJiGWDKooqlGQtikmiCoQ9N6PsD0Wxs6jyf/2gAMAwEAAgADAAAAEAjPcf/EABYRAQEBAAAAAAAAAAAAAAAAABEAEP/aAAgBAwEBPxAicf/EABYRAQEBAAAAAAAAAAAAAAAAAAERAP/aAAgBAgEBPxASZdVM1bv/xAAeEAEAAwACAgMAAAAAAAAAAAABABEhQXGx4TGRof/aAAgBAQABPxAwETbXPmHg32hXcF0Lu+0C62luD1DklUNrDimW+CziOALq3FsoUOJK3zv5LMau6C/qFb5cGa6nVR9yn//Z&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;07&quot;
        title=&quot;&quot;
        src=&quot;/static/07-140169cbd9dd2f9ecfc693f09f53f5b1-d6978.jpeg&quot;
        srcset=&quot;/static/07-140169cbd9dd2f9ecfc693f09f53f5b1-527f0.jpeg 300w,
/static/07-140169cbd9dd2f9ecfc693f09f53f5b1-9a7cd.jpeg 600w,
/static/07-140169cbd9dd2f9ecfc693f09f53f5b1-d6978.jpeg 1200w,
/static/07-140169cbd9dd2f9ecfc693f09f53f5b1-963aa.jpeg 1600w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;从导航、卡片、画廊和横幅到列表、正文和分页，我们都可以应用近似原则。&lt;/p&gt;
&lt;h2&gt;共同的地区&lt;/h2&gt;
&lt;p&gt;与邻近原理类似，放置在同一区域内的元素被视为分组。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/08-23ae883c29f978427dbe66ad438838ab-56ba0.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1140px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 58.42105263157894%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAACc0lEQVQoz01SXUgUURReeqoHhR6il34eoggKxIiQwgoyUikKhKBCkhIKAoWErOhBMQor6AeJgt76zyyJjLYHIzFFw0w3U3d1dLWd/3F2Z+7cOzt3772d2fWheZg598z57ne+850IE8LLcc1nhHGHMj3LKBcQ57jgQmD4CBEw7nORzecx4wEEXPiMR+DfGwVv79NfyvjqtFMxZPbopHzQvDHjPkt5Jf369yUfatoeP917vF76q9quV1XXcPHmA0+IEPxOxeWDxluFtCWcmpGlHt2vHDbbJfd5Cu8ZMPqtEFxd3xRZvXloNLYgqys2lO48UotyPMK40LLslYwdyidc+lEjWca7VDzjUTtgL2QMx0CIOdUYHh1nPFTxMzaZWEiRAnPHPCqOynck9/Qve+s37VESre9Vz8Vs6Lz4i9ytQlk4F/HfQzl3c3nNMYe2Jpy4Rz8b/v05NI9z7bPoq+VDIy1xRyYUahqu39tYVjktzVt2etuBmpON13CBeTQTXJ7KTLjBB420z7oJFN4FF0G+eSqziEPwqaaWlZt2jf2JK7q5pmT/wdoLiOXBD5OoKKrclVDdWNj2kwVvXa96/rcNFxVFl9vWEJH0JQB4XCTNtOIgGGM4MPC2U1ke2CfdBwO7NTKLaTrgr2VM8mo94quGVRCsW7aDwKk8c5cCxhqdMi5YBQOv+mECLVgF+T4zZK5vblu1pWx8Mq7q1todFYfPNC6D36tk94ABbwAfG7Gihn9o2LotuUAL+YH8kly51bF539G4lLTSmdLqE2cvtYZgWE+we5HkYO/A2JQfrmeGMlhJUARaCq0GlCIPF2IPk2wWvBf/AG4CU6w9VK1IAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;08&quot;
        title=&quot;&quot;
        src=&quot;/static/08-23ae883c29f978427dbe66ad438838ab-56ba0.png&quot;
        srcset=&quot;/static/08-23ae883c29f978427dbe66ad438838ab-b73f6.png 300w,
/static/08-23ae883c29f978427dbe66ad438838ab-c3379.png 600w,
/static/08-23ae883c29f978427dbe66ad438838ab-56ba0.png 1140w&quot;
        sizes=&quot;(max-width: 1140px) 100vw, 1140px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h3&gt;共同区域原则如何适用于 UI 设计？&lt;/h3&gt;
&lt;p&gt;共同区域原则特别有用。它可以帮助信息分组和内容组织，但也可以实现内容分离或作为联络点。它提高了层次结构，可扫描性和协助推广信息。&lt;/p&gt;
&lt;p&gt;共同区域的原则可以把许多不同的因素结合在一起，使它们在更大的群体中保持统一。我们可以用线条，颜色，形状和阴影来实现它。它通常可以用于将元素引入前台，表示交互或重要性。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/09-a2410e37906732d9e08520502151c81e-963aa.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 132.9375%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAbABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAQCAwUB/8QAFwEBAQEBAAAAAAAAAAAAAAAAAAMBAv/aAAwDAQACEAMQAAABvmn2kXRIL7MSWdaIiH//xAAcEAACAgMBAQAAAAAAAAAAAAABAgADERITBDH/2gAIAQEAAQUC2wW+AEzUiOuVT0c13UsUBi0I06vO1kNtmP/EABgRAAIDAAAAAAAAAAAAAAAAAAASEBFh/9oACAEDAQE/AUE2LP/EABYRAQEBAAAAAAAAAAAAAAAAABEAEP/aAAgBAgEBPwFnf//EACAQAAIBAwQDAAAAAAAAAAAAAAABEhEhMgIiMaEzUYH/2gAIAQEABj8Cy6Lx+nCPJ0xVvGxGI1PWUq70Y8rP2ZMzYt74P//EAB4QAQACAwEAAwEAAAAAAAAAAAEAESExUUFhgaHw/9oACAEBAAE/IUIYZzlBZ0JZpcEsU+prOn4xBLo7efSHQbldwPyS4zpjYf3kWuGw+UK1zRw8ewXq9T//2gAMAwEAAgADAAAAEPAVff/EABkRAQADAQEAAAAAAAAAAAAAAAEAEZFBUf/aAAgBAwEBPxCvF2U9bBbgEn//xAAXEQADAQAAAAAAAAAAAAAAAAAAARFR/9oACAECAQE/ELLxEGmf/8QAHRABAAMAAgMBAAAAAAAAAAAAAQARITFhQVGRof/aAAgBAQABPxB+4Kt2/OoVghWCj3u+oDGMsEfkt7XLaXe37x3LLem5bYGkQLCV8pYScvRE40kug2szw8Sw7w1smDp0ma6qjh547hRcTb2GK7nziyGgtPW2f//Z&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;09&quot;
        title=&quot;&quot;
        src=&quot;/static/09-a2410e37906732d9e08520502151c81e-d6978.jpeg&quot;
        srcset=&quot;/static/09-a2410e37906732d9e08520502151c81e-527f0.jpeg 300w,
/static/09-a2410e37906732d9e08520502151c81e-9a7cd.jpeg 600w,
/static/09-a2410e37906732d9e08520502151c81e-d6978.jpeg 1200w,
/static/09-a2410e37906732d9e08520502151c81e-963aa.jpeg 1600w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;一个好的公共区域示例将是 Card UI 模式。一个定义良好的矩形空间，其中包含不同的信息，横幅和表格也是很好的例子。&lt;/p&gt;
&lt;h2&gt;相似&lt;/h2&gt;
&lt;p&gt;与不具有相似特征的元素相比，具有相似视觉特征的元素被认为更有关联。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/10-4dbfb5eaaf691efb1ffc504f2ccc27a8-56ba0.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1140px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 58.42105263157894%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAACsklEQVQozy1SW0gUURieF62netASCjcqfUkMTdF6iEI0LCl9KMx9UKKLXdAwLUlpA7MUE0WFJVkvi4oX0CwxMdREmdXV3LysLiy6urg2e3F3dmdmZ2Z3rv1LC+cc/nPO953zf9//I7Isi6LkpxlYPV4ChiCKcOgXOFGWeEmkBR62QY53ub0+goJ4bcvs8fogQGA2tvdExqX1jIwnZN6NSc10O9xzfvtxtF2NGSt20Rhdh0Pm0QUDciqxoOTtNLp0ND4991EZzwshcpOm70RSRt/oRJbyaXJOgfcQR/0OhV7bYd+q3tPH63ucMr+4tBoRl1ZUrprXG45duJr/vFIQxBB5H3N86Rt2496Wrv7Pml6GojGezjdNGijXV7floXmGEXmJF3DcR1E04M0WK0FS4bRfVNchSHRtW6ciJStSkeTBDgdwCzL5scKC5m7+QKYalkknwOwiS8oCw3N4kMVZWpKkEHlhZf1Z9SejeUfVqK6obQJbwKIJj9XLB6wsOYXvA2bWe4DMtRVuz6DWnYj3JZna1vDPswu/i16pVjZMjys/KEurPJCezGsONvZZcpU81GImwCwS9lhdV9kuumyznm1WKYe1YXLJu3oEiapXd59Jz448l+qxuwfwHWS2sdyC5pkmkPlmPeEAWECSBFmGbDkOnBbCZBvm7BgcxX1E59D39v4RlmadHHt/eshIuMZs5ifz30AFy7Dm7T075mIlYTdIYBwdJkOpTiZnQJ0v3VLGXr6JE+TkLxSJSWxQdxe/rjmiSLH9tesM61BnZfEbPeWM1mluG8fD5JaugaiL1wfHfuY8KL2SV+gjqaW1zfPX7vSOTtS0ahJu3IPWAkdOp2e/rKpbpd3JfwahfmEy9KPH5wMxDBtgWBaCkMIg9/8qEAxCACrhUZphBUkihCAthm7/ATZQFuGes9fCAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;10&quot;
        title=&quot;&quot;
        src=&quot;/static/10-4dbfb5eaaf691efb1ffc504f2ccc27a8-56ba0.png&quot;
        srcset=&quot;/static/10-4dbfb5eaaf691efb1ffc504f2ccc27a8-b73f6.png 300w,
/static/10-4dbfb5eaaf691efb1ffc504f2ccc27a8-c3379.png 600w,
/static/10-4dbfb5eaaf691efb1ffc504f2ccc27a8-56ba0.png 1140w&quot;
        sizes=&quot;(max-width: 1140px) 100vw, 1140px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h3&gt;相似性原则在 UI 设计中如何应用？&lt;/h3&gt;
&lt;p&gt;我们倾向于把相似的东西看成是一组或一种模式。我们也可能认为它们是出于同样的目的。相似性可以帮助我们组织和分类一个群组中的对象，并将其与特定的意义或功能联系起来。&lt;/p&gt;
&lt;p&gt;因此有很多不同的方法可以使多种元素被认为存在相似点。这包括颜色、大小、形状、质地、尺寸和方向的相似性，其中颜色比其他的更具有说服力（例如：颜色 &gt; 大小 &gt; 形状）。当相似性发生时，一个物体可以通过与其他物体不同而得到强调，这被称为“异常”，可以用来产生对比或视觉上的差异。它可以将用户的注意力吸引到某一特定的内容（焦点），同时帮助其可浏览性、可发现性和整体流程。&lt;/p&gt;
&lt;p&gt;我们还可以在导航，链接，按钮，标题，调用操作等等中使用相似性原则。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/11-0b9a41e8baee475c0535ef700f13da8b-963aa.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 119.25000000000001%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAYABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAIDBAX/xAAXAQEBAQEAAAAAAAAAAAAAAAAAAQID/9oADAMBAAIQAxAAAAGqxu1zwOiXBeJIL//EABsQAAMAAwEBAAAAAAAAAAAAAAECAwAREiEx/9oACAEBAAEFAtP003BEqnE4NX9xPnSjGqmheQz/xAAWEQEBAQAAAAAAAAAAAAAAAAAQEQH/2gAIAQMBAT8BuEP/xAAUEQEAAAAAAAAAAAAAAAAAAAAg/9oACAECAQE/AR//xAAhEAACAQIGAwAAAAAAAAAAAAAAAQIDMRESITJRYSJBkf/aAAgBAQAGPwLKqzxPKrG3s0qRY5KXdjFSS04NyZLK6XRvjbg3L4f/xAAdEAEAAQQDAQAAAAAAAAAAAAABABEhMUFRYXHw/9oACAEBAAE/IR2UGjZzB91yXZczvuo8kWyuYQnISmrZ1FiN513KMBvpeFNc+o//2gAMAwEAAgADAAAAEIPXvv/EABcRAQEBAQAAAAAAAAAAAAAAAAERADH/2gAIAQMBAT8QeFxJoFdd/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQIBAT8QVEf/xAAcEAEAAgIDAQAAAAAAAAAAAAABESEAMUFRYaH/2gAIAQEAAT8QikRaWW5xODBYQd2d4MiDCiU9Vh/K3xMT3PuQbK0Y73eIc0sgA8rLzrCAfDKvslmdNebwIvpJgjjjcZ//2Q==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;11&quot;
        title=&quot;&quot;
        src=&quot;/static/11-0b9a41e8baee475c0535ef700f13da8b-d6978.jpeg&quot;
        srcset=&quot;/static/11-0b9a41e8baee475c0535ef700f13da8b-527f0.jpeg 300w,
/static/11-0b9a41e8baee475c0535ef700f13da8b-9a7cd.jpeg 600w,
/static/11-0b9a41e8baee475c0535ef700f13da8b-d6978.jpeg 1200w,
/static/11-0b9a41e8baee475c0535ef700f13da8b-963aa.jpeg 1600w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;我们可以在导航，链接，按钮，标题，呼叫行动等等中使用相似性原则。&lt;/p&gt;
&lt;h2&gt;闭合&lt;/h2&gt;
&lt;p&gt;一组元素通常被认为是一个可识别的形式或图形。当一个对象是不完整的，或者它的部分没有被封闭时，闭合也会发生。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/12-95b351a16c9e05adaf4f198e1debc538-56ba0.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1140px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 42.368421052631575%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsSAAALEgHS3X78AAABDUlEQVQY042Ru07DQBBF/bt8AxUNNVWQUhIoiEhoQAIKaBAFoJAEIxPHMrFjEgx5eEPwax/mejdaEUHBLVYzV3Nmd2aNQkoIUaxLSFP74pdgGn+TUlmW/+QhShllTKclTBbLl+GrtjjnOFumtbG5HZFPZV7fPaDGC8bBOHQGw5v7Tgmjk+36cZLpp6pSVCRp2rXsrtWHU6nV2089xhjn4rZtVg8aK3j5Fav2o7f3LM8RbO1UH59L5vj8anf/CEGcpM7ABwkeQU7p2szhZOr6gU7NnlPZOxyFH6ovLui73pwsZnNiux56rWAIr5lGRE2r4Mksap5dUnkDci7NWvO0fnKh92IU/5NaB5PSH/AN3W3GgrYruYUAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;12&quot;
        title=&quot;&quot;
        src=&quot;/static/12-95b351a16c9e05adaf4f198e1debc538-56ba0.png&quot;
        srcset=&quot;/static/12-95b351a16c9e05adaf4f198e1debc538-b73f6.png 300w,
/static/12-95b351a16c9e05adaf4f198e1debc538-c3379.png 600w,
/static/12-95b351a16c9e05adaf4f198e1debc538-56ba0.png 1140w&quot;
        sizes=&quot;(max-width: 1140px) 100vw, 1140px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h3&gt;闭合原则在 UI 设计中如何应用？&lt;/h3&gt;
&lt;p&gt;作为闭合原则，当呈现出一定的信息量时，我们的大脑会通过填补空白并创建一个统一的整体来得出结论。这样我们就可以减少传递信息所需的元素数量，减少复杂性，使设计更有吸引力。闭合可以帮助我们尽量减少视觉噪音，传达一个信息，在一个很小的空间里强化一个概念。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/13-f25162f369cf1b5cf1cc8685d14adadf-7e266.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 33.875%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAABlklEQVQY02Pg17ZlVzHjUDET0LHj0bDiVrfk17HlVrfi1bQGigBJoIigrj2HqvniTXuuPnh+5vr9E5dvn7xyF8hgAKpzi82xD0/jUDFXsw/Qcw8HGqHrFiZj7sGpZiFn4aXrFs6rZQPUvHzb/kUbd9f2zy5umzRn9bbLd58yCOnaN02eX9Y5jU3Z1C+5KCynCqjHzC/OKTKDXdnMKyG/onu6iIETUHbFtgPbj5ydsmRD67RF05dvOnfzIQOvpo2gjp2YkTOXmiXQTog6IEPc2IVL3VLM0FnM0ElA245T1XzRhl0PXn44e+PBmWv3zt96eOrqXQYhPQe7sFSgz1Vs/Q08I4Ge9EkulDJzlzJ103YNBXKNvGMkjF1ZlUxW7Ti0+eApt7jckMzy3ScuXrj1iAGozTEyQ9TASd8z0jY0hU/LBqhZ2sxd0sRVzz0CGGZAo4EGsSqarN55aNnW/cGZ5dGF9ev2HL145zEDJLSBeoChCnQbkAt0NtBCkIiGFZDLARYESi3euPvm49drdx8FWXv78elr9wA0/pZBuDAdVAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;13&quot;
        title=&quot;&quot;
        src=&quot;/static/13-f25162f369cf1b5cf1cc8685d14adadf-abe1c.png&quot;
        srcset=&quot;/static/13-f25162f369cf1b5cf1cc8685d14adadf-10046.png 300w,
/static/13-f25162f369cf1b5cf1cc8685d14adadf-3c4a3.png 600w,
/static/13-f25162f369cf1b5cf1cc8685d14adadf-abe1c.png 1200w,
/static/13-f25162f369cf1b5cf1cc8685d14adadf-7e266.png 1600w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;我们可以在图像学中使用闭合原理，简单且有助于快速和清晰地传达意义。&lt;/p&gt;
&lt;h2&gt;对称&lt;/h2&gt;
&lt;p&gt;对称元素往往被认为是共同的，而不分它们的距离，给我们一种坚固和秩序的感觉。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/14-723cf7d09784ab84b168b3c733ecacb5-56ba0.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1140px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 58.42105263157894%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAABrklEQVQoz2P4TwFg+PcPRH3/8WPqwhUT5i55/e49kPv3318gee3Tjcm3Z0DU/f7zB0hu2XNI1d5/855DQPafP3+BmkG6X717zyVvxCyqefHaLZDEX5DSW2/vrrq18ffvP3DNa7btEdCxA5JgzX+gmr98/VbU3JtT1/n0xSuwZpDNKcVNyub+2/cfBbJ//foNJI+cOh+SWXr49DmQ6/7+ZcDqmb9gza7RmQz8SmvB9vz4+RNIzl2xgYFZYu7KDRC3QDV/+/4D6NvX7z4AnQD35Lkr1w+cOPP42QsgF+LAuw8f7z92+s6Dx9AAg1AfP3158PjZwyfP3n34CBH58fPXhWs3T5y7BBSEGvf798vXb6/duvfi9VtIEBDh7O17geyfP38Byc27DzJI6GzZexgltIGuLWubUNDY8wwpwOLy66QM3LfuOwy2FmTVvYdPsms77j16AvEIVPObdx941SxZZA0u37gNj6qrz24tu7gemAQgEQMkj5+9aOwVBfQLNLQhiQQYYL2zF3dMn/fq7TuQUnAiufLxWv/NqRCPQNwC1GbsHXXi/GV8UQUF/wgkTwCuZHYK/tWipAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;14&quot;
        title=&quot;&quot;
        src=&quot;/static/14-723cf7d09784ab84b168b3c733ecacb5-56ba0.png&quot;
        srcset=&quot;/static/14-723cf7d09784ab84b168b3c733ecacb5-b73f6.png 300w,
/static/14-723cf7d09784ab84b168b3c733ecacb5-c3379.png 600w,
/static/14-723cf7d09784ab84b168b3c733ecacb5-56ba0.png 1140w&quot;
        sizes=&quot;(max-width: 1140px) 100vw, 1140px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h3&gt;对称原则在 UI 设计中如何应用？&lt;/h3&gt;
&lt;p&gt;对称的元素简单、和谐、赏心悦目。我们的眼睛寻找秩序和稳定的属性了解世界。因此，对称是快速有效地交流信息的有用工具。对称感觉很舒服，帮助我们专注于重要的事情。&lt;/p&gt;
&lt;p&gt;对称的构图是令人满意的，但它们也可能有点单调和静态。视觉对称往往更动态，更有趣。例如，在一个对称的设计中添加一个非对称元素可以帮助在绘制印象时吸引注意力，对于任何感兴趣点或对行动的调用都是有用的。对称性以及匀称的不对称性在任何设计中都很重要。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/15-c87a420949ef620cf14a701de8196d8b-963aa.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 95.8125%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAATABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAIDBAX/xAAXAQEBAQEAAAAAAAAAAAAAAAAAAQID/9oADAMBAAIQAxAAAAGxpjOVDSt4Og0mD//EABwQAAICAgMAAAAAAAAAAAAAAAIDAAESExEhI//aAAgBAQABBQIKbRNF0zdMeyH1UPE3tm5mO5lT/8QAFhEAAwAAAAAAAAAAAAAAAAAAABAR/9oACAEDAQE/ASP/xAAYEQACAwAAAAAAAAAAAAAAAAAAARARYf/aAAgBAgEBPwHSlP8A/8QAIRAAAgAEBwEAAAAAAAAAAAAAAAECEiIyAxEhMTNBYXH/2gAIAQEABj8CrxEymJ/DjiN+ybTKUi9ZexVFx//EAB4QAQADAAICAwAAAAAAAAAAAAEAESExUUFhcYGx/9oACAEBAAE/IfQQPmbFWGQh332R5aZaMnoOfcQ2rVKZk/vC4bNeQjUqmdE//9oADAMBAAIAAwAAABD8P8P/xAAYEQEAAwEAAAAAAAAAAAAAAAABABARIf/aAAgBAwEBPxDuawLRP//EABgRAQEAAwAAAAAAAAAAAAAAAAEAETHw/9oACAECAQE/EBdrjLJBf//EAB8QAQADAAIBBQAAAAAAAAAAAAEAESExUZFhcYGh0f/aAAgBAQABPxAA4VV2i+PRmSVooHzFmUMUleWZZ5eLs+5ebDsDeuJxO0ocQ69oWnVDFFHUPlIOKiGj8p//2Q==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;15&quot;
        title=&quot;&quot;
        src=&quot;/static/15-c87a420949ef620cf14a701de8196d8b-d6978.jpeg&quot;
        srcset=&quot;/static/15-c87a420949ef620cf14a701de8196d8b-527f0.jpeg 300w,
/static/15-c87a420949ef620cf14a701de8196d8b-9a7cd.jpeg 600w,
/static/15-c87a420949ef620cf14a701de8196d8b-d6978.jpeg 1200w,
/static/15-c87a420949ef620cf14a701de8196d8b-963aa.jpeg 1600w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;将对称性用于系列产品、图表、作品展示、列表、导航、横幅和任何内容重页面都很好。&lt;/p&gt;
&lt;h2&gt;连续&lt;/h2&gt;
&lt;p&gt;排列成一条线或一条柔和的曲线的元素被认为比那些排列成随机的或者粗糙的线条更有关系。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/15-367e6374dd06ebd4fa44e4d20091047f-56ba0.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1140px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 51.2280701754386%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAABLElEQVQoz6WS21KDMBCG+/7Po+OMHesURwMC7ZRSUGvV8UBbK6VgOOS0mAACXuiNexF2/8m3fzZhUP4jBv0iLwrGmMoAOrWfNwKkWdbBUO0wnUWweZeJiA5K4lzEccl5w3MuFfktCnKOrA7mlWrP/SDclzglF0h1zHK2uKHXtjSSNPNuxf5QH3Cs2w0s+wqQZvGJhtbTOeimiJP2wHwf5VdGuXpkrlcPkBMyQmbnPLo0xtbsSbfEcgWUtYMkCT41bA9Z06MhpbTeLCjFM7eB0cSZzH1lcv8AUaRIIeT6ut4ONX27C2W+fAmOz7RPrO4JKOWu18B5QYQQair/Dj7C1vb5bZNg3JbBdlc3AkLY1OlmBsWWgFMg9MerfJPQfzDpVF3K4I9/AKr4rZTxBawdQKu/SjLJAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;15&quot;
        title=&quot;&quot;
        src=&quot;/static/15-367e6374dd06ebd4fa44e4d20091047f-56ba0.png&quot;
        srcset=&quot;/static/15-367e6374dd06ebd4fa44e4d20091047f-b73f6.png 300w,
/static/15-367e6374dd06ebd4fa44e4d20091047f-c3379.png 600w,
/static/15-367e6374dd06ebd4fa44e4d20091047f-56ba0.png 1140w&quot;
        sizes=&quot;(max-width: 1140px) 100vw, 1140px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h3&gt;连续性原则在 UI 设计中如何应用？&lt;/h3&gt;
&lt;p&gt;连续线以下的元素被视为分组。线段越平滑，我们就越能看到它们是一个统一的形状;我们的思想倾向于阻力最小的路径。&lt;/p&gt;
&lt;p&gt;连续性帮助我们通过构图来解释方向和运动。它是在对齐元素时进行的，它可以帮助我们的眼睛平滑地在页面上移动，并且易于理解。连续性原则增强了对分组信息的感知，通过不同的内容片段创建顺序和引导用户。中断连续性可以标志着一个部分的结束引起了对新的内容的注意。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/16-2c0a59772308d7d013d0bb556282f64b-963aa.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 98.3125%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGQABAAMBAQAAAAAAAAAAAAAAAAIDBAEG/8QAFwEAAwEAAAAAAAAAAAAAAAAAAAECA//aAAwDAQACEAMQAAAB1V7M5Ul4fn5FZ8Dn/8QAHRAAAgIBBQAAAAAAAAAAAAAAAgMAFAEQERIhMf/aAAgBAQABBQIhHfoJxPRq8kzHlg5ZZLTZ/8QAGxEAAgEFAAAAAAAAAAAAAAAAAAECEBESEzH/2gAIAQMBAT8BUrcNjMm6f//EABYRAAMAAAAAAAAAAAAAAAAAAAAQEf/aAAgBAgEBPwEj/8QAHxAAAQIGAwAAAAAAAAAAAAAAAgAhARARMTKREkGh/9oACAEBAAY/AsR0hHnRmWchKsGlYdLrSv4v/8QAHhABAAICAQUAAAAAAAAAAAAAAQARITFBEFFhkaH/2gAIAQEAAT8hP4HZEpbEaQYuOcnyCcA6etBAKRiKePpP/9oADAMBAAIAAwAAABAoxzz/xAAZEQEBAQADAAAAAAAAAAAAAAABACERMZH/2gAIAQMBAT8QwA2TeM8J7TLf/8QAFxEBAQEBAAAAAAAAAAAAAAAAEQABMf/aAAgBAgEBPxAexjMi/8QAHhABAAICAgMBAAAAAAAAAAAAAQARIUExUWFx8IH/2gAIAQEAAT8QPgXl5e4zV4ClT8K5hYYe2WroS2lgmfLRFzqmtw0SxTDTeYhXR85h2FTAN+5qDv4J/9k=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;16&quot;
        title=&quot;&quot;
        src=&quot;/static/16-2c0a59772308d7d013d0bb556282f64b-d6978.jpeg&quot;
        srcset=&quot;/static/16-2c0a59772308d7d013d0bb556282f64b-527f0.jpeg 300w,
/static/16-2c0a59772308d7d013d0bb556282f64b-9a7cd.jpeg 600w,
/static/16-2c0a59772308d7d013d0bb556282f64b-d6978.jpeg 1200w,
/static/16-2c0a59772308d7d013d0bb556282f64b-963aa.jpeg 1600w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;行和列的线性排列是连续性的好例子。我们可以使用它们在菜单和子菜单，列表，产品排列，轮播，服务或过程/进展显示。&lt;/p&gt;
&lt;h2&gt;关联&lt;/h2&gt;
&lt;p&gt;朝向相同方向的元素被认为比那些向不同方向移动或者根本不移动的元素更相关。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/17-b9d9b94b052d613f874896efa9fe959a-56ba0.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1140px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 51.2280701754386%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAABHklEQVQoz4VR2W6DMBDk/3+pLz2UNKJEiShGhBwl4TRXIBWHsbFrDHEPRek+rHZGu7OXwhijlPZ9L/wUsB/GkWC+SRkp7K6NQjDJjn4oISFkf3SnYscL3nRzBawV2Gi6uXVOVKiPqUcvfFosq7qWDM8B9n4qLsrPACYhTMM45UGSnWVeVpQPL4sOdZIB9sG0D+Pwt8cet6oQms3Uy9piZLgEZ/wofnxdRvmZCDgUx2l+8qMPN/BCyIfknp9t2K1pK9WgxWXc04/gXFvPdWA8q8gNp2KMSddh1HXCY+6H5i1CGiAwm6aom3drm5clbVpm7JjIUW6eeFB0/D7Jf31G8AjssBuNULn/KHb9ORXn6vMS6Rsp9M+f/xomfHuJvgDkS0HrWe3B4AAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;17&quot;
        title=&quot;&quot;
        src=&quot;/static/17-b9d9b94b052d613f874896efa9fe959a-56ba0.png&quot;
        srcset=&quot;/static/17-b9d9b94b052d613f874896efa9fe959a-b73f6.png 300w,
/static/17-b9d9b94b052d613f874896efa9fe959a-c3379.png 600w,
/static/17-b9d9b94b052d613f874896efa9fe959a-56ba0.png 1140w&quot;
        sizes=&quot;(max-width: 1140px) 100vw, 1140px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h3&gt;关联性原则在 UI 设计中如何应用？&lt;/h3&gt;
&lt;p&gt;不管这些元素有多远，或者它们看起来有多不同，如果它们在一起运动或改变，它们就会被认为是相关的。这种影响甚至可以发生在其他视觉元素所暗示的运动中。&lt;/p&gt;
&lt;p&gt;当元素在同一方向、同一时间、同一速度同步运动时，关联性原则更为有效。它有助于将相关信息分组并将动作与结果联系起来。同步运动的中断可以吸引用户的注意力，并将其指向特定的元素或特性。它还可以建立不同群体或国家之间的关系。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/18-0a1abb9c126393331b1daac1ab9a6521-963aa.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 96.875%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAATABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAECAwb/xAAXAQADAQAAAAAAAAAAAAAAAAAAAQMC/9oADAMBAAIQAxAAAAGWuxarU5c/Y1OgF//EABsQAAEFAQEAAAAAAAAAAAAAAAEAAgMRExIi/9oACAEBAAEFAuaGVEZ04Dp4Dkzy3aRbSLaRf//EABoRAAICAwAAAAAAAAAAAAAAAAERAAIQEiH/2gAIAQMBAT8BIrxw6uPH/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwEf/8QAIRAAAQIEBwAAAAAAAAAAAAAAAAERISIxMgIDEhNRcqL/2gAIAQEABj8C07qk2Y8OCKYX6lPQkaDFwkylyn//xAAdEAEAAwADAAMAAAAAAAAAAAABABEhMUFREHGR/9oACAEBAAE/IeUvHUGC8Qq739wE3uyQluhdawWrKVkZzHe5k7/Jt4vjv//aAAwDAQACAAMAAAAQhwc9/8QAGREBAQADAQAAAAAAAAAAAAAAAQARQYHh/9oACAEDAQE/EN0sCAXvkp3Zv//EABgRAAIDAAAAAAAAAAAAAAAAAAABEBEh/9oACAECAQE/EE2aVH//xAAfEAEAAwACAQUAAAAAAAAAAAABABEhMXFBUYGRodH/2gAIAQEAAT8QG1ruQN9y0FoSXdhyoYgiqEXqshoDSI/UEABGG/earubwwvvQ8PyNPklQqWct8T//2Q==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;18&quot;
        title=&quot;&quot;
        src=&quot;/static/18-0a1abb9c126393331b1daac1ab9a6521-d6978.jpeg&quot;
        srcset=&quot;/static/18-0a1abb9c126393331b1daac1ab9a6521-527f0.jpeg 300w,
/static/18-0a1abb9c126393331b1daac1ab9a6521-9a7cd.jpeg 600w,
/static/18-0a1abb9c126393331b1daac1ab9a6521-d6978.jpeg 1200w,
/static/18-0a1abb9c126393331b1daac1ab9a6521-963aa.jpeg 1600w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;我们可以在可扩展的菜单、折叠导航、工具提示、产品滑块、视差卷轴和滑动指示器上使用关联性原则。&lt;/p&gt;
&lt;h2&gt;结论&lt;/h2&gt;
&lt;p&gt;用户界面设计并不都是关于漂亮的像素和闪闪发光的图形。它主要是关于沟通，性能和方便。格式塔原则总是帮助我们实现这些目标，为用户创造愉快的体验，为企业带来巨大的成功。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[下一代通信协议：QUIC]]></title><description><![CDATA[在 HTTP 协议已经占据互联网大半江山的今天，尽管网速越来越快，但是人类还是致力于将网络传输速率提升到极致。 从 HTTP/1.x 到 HTTP/2，TCP 已经不能满足人类贪婪的欲望了，他们开始向常年被忽视的 UDP 进军。 QUIC 是什么？ QUIC（Quick UDP…]]></description><link>https://knownsec-fed.com/2018-01-19-xia-yi-dai-tong-xin-xie-yi-quic/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-01-19-xia-yi-dai-tong-xin-xie-yi-quic/</guid><pubDate>Fri, 19 Jan 2018 16:30:57 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-fd5b12d1c4ba0dec60d4819f25a4fc0e-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIEBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAC/9oADAMBAAIQAxAAAAGvQkvgg5b/xAAbEAEAAQUBAAAAAAAAAAAAAAABEQACAwQQMv/aAAgBAQABBQLEQqwXFavnn//EABYRAQEBAAAAAAAAAAAAAAAAAAEQEf/aAAgBAwEBPwHVBZ//xAAXEQEAAwAAAAAAAAAAAAAAAAABAhAR/9oACAECAQE/AYurX//EABYQAAMAAAAAAAAAAAAAAAAAAAERIP/aAAgBAQAGPwJiv//EABwQAQACAQUAAAAAAAAAAAAAAAEAMRBBUXGRsf/aAAgBAQABPyG9hHe4RpfEQa9Qes//2gAMAwEAAgADAAAAENfP/8QAFhEBAQEAAAAAAAAAAAAAAAAAEQEQ/9oACAEDAQE/EGw0z//EABgRAAIDAAAAAAAAAAAAAAAAAAERECEx/9oACAECAQE/EGAUHkf/xAAaEAEAAwADAAAAAAAAAAAAAAABABFhECEx/9oACAEBAAE/EOhTABcOwYAGoIVDqgUaLtebz//Z&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;下一代通信协议：QUIC&quot;
        title=&quot;&quot;
        src=&quot;/static/header-fd5b12d1c4ba0dec60d4819f25a4fc0e-d6978.jpeg&quot;
        srcset=&quot;/static/header-fd5b12d1c4ba0dec60d4819f25a4fc0e-527f0.jpeg 300w,
/static/header-fd5b12d1c4ba0dec60d4819f25a4fc0e-9a7cd.jpeg 600w,
/static/header-fd5b12d1c4ba0dec60d4819f25a4fc0e-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;在 HTTP 协议已经占据互联网大半江山的今天，尽管网速越来越快，但是人类还是致力于将网络传输速率提升到极致。&lt;/p&gt;
&lt;p&gt;从 HTTP/1.x 到 HTTP/2，TCP 已经不能满足人类贪婪的欲望了，他们开始向常年被忽视的 UDP 进军。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1&gt;QUIC 是什么？&lt;/h1&gt;
&lt;p&gt;QUIC（Quick UDP Internet Connections），直译过来就是“快速的 UDP 互联网连接”，是 Google 基于 UDP 提出的一种改进的通信协议，作为传统 HTTP over TCP 的替代品，开源于 Chromium 项目中。&lt;/p&gt;
&lt;p&gt;为了加快 TCP 的传输效率，Google 提出了 BBR 拥塞控制算法，将 TCP 的性能发挥到了极致。由于 TCP 和 UDP 协议是系统内核实现的，要提出新的协议不是不行，只是普及起来会非常困难，就连 BBR 算法，都需要更新系统内核才能支持。那么，TCP 的性能已经到了极致，还能更快吗？&lt;/p&gt;
&lt;p&gt;UDP 相比于 TCP，没有那么多的要求，只要将数据发出去就行了，不需要考虑数据是否送达了、不需要考虑数据的到达顺序、不需要考虑数据的正确性和完整性，所以效率比 TCP 要高出几个档次。&lt;/p&gt;
&lt;p&gt;UDP 协议曾经被普遍用于视频直播、网络游戏之类实时性要求较高的应用，即使少数几个包没有送达对应用整体的影响也不大。可是，对于 HTTP 之类的协议，是需要保证数据的正确性、完整性的，所以 UDP 本身并不适合作为 TCP 的替代品。&lt;/p&gt;
&lt;p&gt;UDP 不适合替代 TCP 是因为它本身不对数据进行校验，那么如果将数据校验放到其他地方去实现，是不是就可以使用 UDP 了呢？&lt;/p&gt;
&lt;p&gt;于是，QUIC 就诞生了，它汇集了 TCP 和 UDP 的优点，使用 UDP 来传输数据以加快网络速度，降低延迟，由 QUIC 来保证数据的顺序、完整性和正确性，即使发生了丢包，也由 QUIC 来负责数据的 &lt;strong&gt;&lt;em&gt;纠错&lt;/em&gt;&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/quic-layers-7165fa0549eda29019818e2a83d915e7-d48b2.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 526px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 47.71863117870723%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAABrElEQVQoz6WQ70/aQBjH+7+bmKmZMqCtRNDNrSZiNrLo9mKZEpUINk5+nQJFaZE6oTAmlN5de9zdTirG93vyzeX7PM997nlyEmOMTokQ50925qf8VVAqqiz0jD2lIsJUQoMivttCd5pdTjjXKXKvedYn4o/C9pT4bjvjtnYqJ3LpON7Qk6itTbr58CUJ9nLEfItN+f5i0SkvM1uBtzGChiEcBPi0un0MkoeljWwldVROZivrV2Z2xlLJ656hmzXvRrH05T6I+JbqNuVgDuMAH4D0t0b68+X2Vlb93tjLgI+6mXuGxQ6T5qp3qw5AZFh7h0xlZChzmOEA7lfT+7XdTFnb+/Xh4Dr9pfoKRs7Z1Irwbup3cWVsRPnDBjbVl7UJ8YtAK9U39UryZz5eqr+/AImWdfoMu92C21iDrcSoLo8NBbZUMdnt6XAI4J+q17+cNNeJpY5rUavwxjcTuBlx7R+ztcTk3gk1l7gd53aMd6JzrUJj8REsCEM7USEmug8y7cRoe8Wzv9IZLWG3g3o53D9H/YIQDjU4f1FYFCd08uIadnLorxH+iMT/I/4BQG0OXPd4iIcAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;QUIC 的位置&quot;
        title=&quot;&quot;
        src=&quot;/static/quic-layers-7165fa0549eda29019818e2a83d915e7-d48b2.png&quot;
        srcset=&quot;/static/quic-layers-7165fa0549eda29019818e2a83d915e7-68a47.png 300w,
/static/quic-layers-7165fa0549eda29019818e2a83d915e7-d48b2.png 526w&quot;
        sizes=&quot;(max-width: 526px) 100vw, 526px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;现在，Google 旗下的部分服务（比如 GMail）以及许多接口已经开始使用 QUIC 协议了。如果你使用的是 Chrome 浏览器，可以在浏览器的这个地址：&lt;a href=&quot;chrome://net-internals/#quic&quot;&gt;chrome://net-internals/#quic&lt;/a&gt; 看到 QUIC 的连接情况。 &lt;/p&gt;
&lt;h1&gt;QUIC 的优点&lt;/h1&gt;
&lt;p&gt;由于 TCP、UDP 协议是系统内核实现的，更新修改起来并不很方便，而 QUIC 是软件层面实现的，更新迭代起来非常方便。&lt;/p&gt;
&lt;p&gt;UDP 本身是无序传输的，这在单个连接上并行传输多个数据有天生的优势：多个数据直接发送即可，由 QUIC 对收到的数据进行重新组合排序，然后送往上层应用。这中间不用等待各种数据确认包，效率非常高。&lt;/p&gt;
&lt;p&gt;在建立 TCP 连接时，需要进行至少三次握手，如果要开启 TLS 加密，则还需要进行 TLS 握手。而 QUIC 采用了类似于 TCP Fast Open 的技术，如果之前连接过，那么之后可以不用重复握手而直接开始传送数据，以实现 0-RTT 往返时延。即便之前没有连接过，也可以在 1-RTT 内完成连接并开始传送数据。并且自身就拥有与 TLS 等效的加密措施。&lt;/p&gt;
&lt;p&gt;在发生丢包时，TCP 会重传丢失的包。而 QUIC，则使用了一种非常神奇的前向纠错算法，通过连续的几个数据包的校验和，可以直接恢复出丢失的包内容，而不需要重传。&lt;/p&gt;
&lt;p&gt;在移动端表现更好：用户的网络环境并不稳定，Wi-Fi、4G、3G、2G 之间来回变化，IP 一旦发生变化，TCP 的连接是不可能保持的。而 QUIC 就不存在这样的问题，通过 ID 来标识用户（而不是 IP + 端口），在连接切换后直接恢复之前的连接会话。&lt;/p&gt;
&lt;p&gt;配合 HTTP/2 API 食用更佳：由于 HTTP/2 采用二进制帧传输机制，QUIC 直接使用这样的机制进行数据传输，效率更高！&lt;/p&gt;
&lt;h1&gt;QUIC 的缺点&lt;/h1&gt;
&lt;p&gt;现在很多网络运营商会降低 UDP 包的优先级，使得 UDP 丢包率特别高。（QUIC 不可用时，浏览器一般会 Fallback 到 TCP）&lt;/p&gt;
&lt;p&gt;目前只有 Chrome、Opera 浏览器支持。&lt;/p&gt;
&lt;h1&gt;什么时候更适合使用 QUIC？&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;移动端
由于 QUIC 并不使用 IP + 端口来标识客户身份，而是使用 ID，这使得在网络环境切换后还可以保持连接，非常适合用在移动网站上面，在手机信号不稳定的情况下，TCP + TLS 的开销是非常大的！QUIC 的 0-RTT 可以极大限度地提升访问速度。&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;总结&lt;/h1&gt;
&lt;p&gt;QUIC 实现的目标，就是利用 UDP 实现一个 TCP，支持 TCP 的所有特性，并且比 TCP 更快更好用。&lt;/p&gt;
&lt;p&gt;QUIC 是从 2012 年开始的项目，到目前也还只是草案阶段，并且同样处于草案阶段的 TLS1.3 也同样拥有了 QUIC 中的很多优点（比如 0-RTT）。对于访问速度的优化方式越来越多，适当的选择可以为网站增色许多。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[【译】使用 CSS 追踪用户]]></title><description><![CDATA[原文地址： Crooked Style Sheets 作者：jbtronics 除了使用 JS 追踪用户，现在有人提出了还可以使用  CSS…]]></description><link>https://knownsec-fed.com/2018-01-19-fan-yi-shi-yong-css-zhui-zong-yong-hu/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-01-19-fan-yi-shi-yong-css-zhui-zong-yong-hu/</guid><pubDate>Fri, 19 Jan 2018 03:26:10 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-7bb518397e954c9cbae89c3a0f56dbb6-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAIDBAX/xAAVAQEBAAAAAAAAAAAAAAAAAAABAv/aAAwDAQACEAMQAAAB11tDMY4V/8QAGRABAAIDAAAAAAAAAAAAAAAAAgESABAR/9oACAEBAAEFAlLtZ4eyd//EABURAQEAAAAAAAAAAAAAAAAAABAR/9oACAEDAQE/AYf/xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAgEBPwGn/8QAGRAAAgMBAAAAAAAAAAAAAAAAACEBIDGh/9oACAEBAAY/AlCM4Paf/8QAGBABAAMBAAAAAAAAAAAAAAAAAQAQEWH/2gAIAQEAAT8hEjicp0BOWZ//2gAMAwEAAgADAAAAEDQP/8QAFxEBAAMAAAAAAAAAAAAAAAAAAAERUf/aAAgBAwEBPxC2of/EABURAQEAAAAAAAAAAAAAAAAAABBx/9oACAECAQE/EIP/xAAcEAEAAwACAwAAAAAAAAAAAAABABEhEDFx0fD/2gAIAQEAAT8QtRANLeeZ9l7gjENK62HRwaZ//9k=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;translate-Crooked-Style-Sheets&quot;
        title=&quot;&quot;
        src=&quot;/static/header-7bb518397e954c9cbae89c3a0f56dbb6-d6978.jpeg&quot;
        srcset=&quot;/static/header-7bb518397e954c9cbae89c3a0f56dbb6-527f0.jpeg 300w,
/static/header-7bb518397e954c9cbae89c3a0f56dbb6-9a7cd.jpeg 600w,
/static/header-7bb518397e954c9cbae89c3a0f56dbb6-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;原文地址：&lt;a href=&quot;https://github.com/jbtronics/CrookedStyleSheets&quot;&gt;Crooked Style Sheets&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;作者：jbtronics&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;除了使用 JS 追踪用户，现在有人提出了还可以使用 &lt;code&gt;CSS 进行网页追踪和分析&lt;/code&gt;，译者认为，这种方式更为 &lt;code&gt;优雅&lt;/code&gt;，更为 &lt;code&gt;简洁&lt;/code&gt;，且 &lt;code&gt;不好屏蔽&lt;/code&gt;，值得尝试一波，了解更多，可查看 &lt;a href=&quot;https://github.com/jbtronics/CrookedStyleSheets&quot;&gt;仓库地址&lt;/a&gt; 和 &lt;a href=&quot;http://crookedss.bplaced.net/&quot;&gt;demo&lt;/a&gt;。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;我们可以用它来做什么&lt;/h2&gt;
&lt;p&gt;我们可以收集关于用户的一些基本信息，例如 &lt;code&gt;屏幕分辨率&lt;/code&gt;（当浏览器最大化时）以及用户使用的什么&lt;code&gt;浏览器&lt;/code&gt;（引擎）。&lt;/p&gt;
&lt;p&gt;此外，我们可以监测用户是否点击某个链接或鼠标悬停在某个元素上，用来 &lt;code&gt;追踪用户悬停的链接&lt;/code&gt;，甚至可以 &lt;code&gt;追踪用户如何移动鼠标&lt;/code&gt;（在页面使用不可见的字段），然而，使用目前我的方法只能追踪用户的第一次点击或悬停，我相信，修改我的方法最终可以实现追踪用户的每次点击。&lt;/p&gt;
&lt;p&gt;最后，我们还可以监测用户是否安装了某个特殊的字体，基于这个信息，我们可以追踪用户使用的 &lt;code&gt;操作系统&lt;/code&gt;，因为不同操作系统使用的字体也稍有不同，例如 &lt;code&gt;Windows&lt;/code&gt; 的 &lt;code&gt;Calibri&lt;/code&gt;。&lt;/p&gt;
&lt;h2&gt;这又是如何实现的&lt;/h2&gt;
&lt;h3&gt;普通的做法&lt;/h3&gt;
&lt;p&gt;用 &lt;code&gt;CSS&lt;/code&gt; 你可以使用 &lt;code&gt;url(&quot;foo.bar&quot;)&lt;/code&gt; 属性引用外部资源添加图像，有趣的是，这个资源只在需要的时候被加载（例如，当链接被点击时）。&lt;/p&gt;
&lt;p&gt;所以，我们可以用 &lt;code&gt;CSS&lt;/code&gt; 创建一个选择器，当用户点击某个链接时调用某个特定的 &lt;code&gt;UPL&lt;/code&gt;。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-css&quot;&gt;&lt;code&gt;&lt;span class=&quot;token selector&quot;&gt;#link2:active::after&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token url&quot;&gt;url(&apos;track.php?action=link2_clicked&apos;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;服务端，&lt;code&gt;php&lt;/code&gt; 脚本会在调用 &lt;code&gt;URL&lt;/code&gt; 时保存时间戳。&lt;/p&gt;
&lt;h3&gt;浏览器监测&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;浏览器监&lt;/code&gt; 测是基于 &lt;code&gt;@supports Media-Query&lt;/code&gt; 的，我们可以监测浏览器的一些特殊的属性，例如 &lt;code&gt;-webkit-appearance&lt;/code&gt;。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-css&quot;&gt;&lt;code&gt;&lt;span class=&quot;token atrule&quot;&gt;&lt;span class=&quot;token rule&quot;&gt;@supports&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token property&quot;&gt;-webkit-appearance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; none&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token selector&quot;&gt;#chrome_detect::after&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token url&quot;&gt;url(&apos;track.php?action=browser_chrome&apos;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h3&gt;字体监测&lt;/h3&gt;
&lt;p&gt;对于 &lt;code&gt;字体监测&lt;/code&gt;，需要定义一个新的字体，如果一个字体存在，文本会尝试使用该字体进行样式设置，然而，当用户在系统上找不到该字体时，定义的字体会作为备用，在这种情况下，浏览器会尝试去加载定义的字体并在服务器上调用追踪脚本。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-css&quot;&gt;&lt;code&gt;&lt;span class=&quot;token comment&quot;&gt;/** Font detection **/&lt;/span&gt;
&lt;span class=&quot;token atrule&quot;&gt;&lt;span class=&quot;token rule&quot;&gt;@font-face&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;font-family&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Font1&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token url&quot;&gt;url(&apos;track.php?action=font1&apos;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token selector&quot;&gt;#font_detection1&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;font-family&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Calibri, Font1&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h3&gt;悬停监测&lt;/h3&gt;
&lt;p&gt;对于 &lt;code&gt;悬停监测&lt;/code&gt;（基于 &lt;a href=&quot;https://github.com/jeyroik&quot;&gt;jeyroik&lt;/a&gt; 的想法），我们需定义一个关键帧，每次使用这个关键帧都要去请求一个 URL。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-css&quot;&gt;&lt;code&gt;&lt;span class=&quot;token atrule&quot;&gt;&lt;span class=&quot;token rule&quot;&gt;@keyframes&lt;/span&gt; pulsate&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token selector&quot;&gt;0%&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;background-image&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token url&quot;&gt;url(&apos;track.php?duration=00&apos;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token selector&quot;&gt;20%&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;background-image&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token url&quot;&gt;url(&apos;track.php?duration=20&apos;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token selector&quot;&gt;40%&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;background-image&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token url&quot;&gt;url(&apos;track.php?duration=40&apos;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token selector&quot;&gt;60%&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;background-image&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token url&quot;&gt;url(&apos;track.php?duration=60&apos;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token selector&quot;&gt;80%&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;background-image&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token url&quot;&gt;url(&apos;track.php?duration=80&apos;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token selector&quot;&gt;100%&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;background-image&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token url&quot;&gt;url(&apos;track.php?duration=100&apos;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;然后，我们使用定义的关键帧创建动画，我们可以定义动画持续的时间，这也是我们测量的最大时间。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-css&quot;&gt;&lt;code&gt;&lt;span class=&quot;token selector&quot;&gt;#duration:hover::after&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;-moz-animation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; pulsate 5s infinite&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;-webkit-animation&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; pulsate 5s infinite&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;/*animation: pulsate 5s infinite;*/&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;animation-name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; pulsate&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;animation-duration&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 10s&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token url&quot;&gt;url(&apos;track.php?duration=-1&apos;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;我们可以通过补充关键帧的设置，来优化分辨率的监测。&lt;/p&gt;
&lt;h3&gt;输入监测&lt;/h3&gt;
&lt;p&gt;监测用户选中了某个复选框，我们可以使用 &lt;code&gt;CSS&lt;/code&gt; 提供的 &lt;code&gt;:selected&lt;/code&gt; 选择器。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-css&quot;&gt;&lt;code&gt;&lt;span class=&quot;token selector&quot;&gt;#checkbox:checked&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;content&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token url&quot;&gt;url(&apos;track.php?action=checkbox&apos;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;为了监测字符串，我们结合了 HTML &lt;code&gt;pattern&lt;/code&gt; 属性，它可以帮助我们解决一些基本的输入验证，再结合 &lt;code&gt;:valid&lt;/code&gt; 选择器，浏览器当输入匹配成功时会去请求我们的追踪站点。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-html&quot;&gt;&lt;code&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;input&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;type&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;text&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;text_input&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;pattern&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;^test$&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;required&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-css&quot;&gt;&lt;code&gt;&lt;span class=&quot;token selector&quot;&gt;#text_input:valid&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;background&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; green&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;background-image&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token url&quot;&gt;url(&apos;track.php?action=text_input&apos;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h2&gt;Demo&lt;/h2&gt;
&lt;p&gt;点击 &lt;a href=&quot;http://crookedss.bplaced.net/&quot;&gt;这里&lt;/a&gt; 你可以查看该仓库的一个 demo。&lt;code&gt;index.html&lt;/code&gt; 实践了的上述的方法，访问 &lt;code&gt;results.php&lt;/code&gt; 可以查看结果。&lt;/p&gt;
&lt;p&gt;如果属性后面没有任何 &lt;code&gt;content&lt;/code&gt; 或有 &lt;code&gt;php 警告&lt;/code&gt; 出现，这就意味着这个属性的值为 &lt;code&gt;false&lt;/code&gt; 或用户还没访问页面或链接（这个，确实很烦，但你可以知道这些方法的原理）。&lt;/p&gt;
&lt;p&gt;此外，分辨率监测还不是特别的准确，因为目前只能监测最常用的屏幕宽度。最后还想说的是，监测用户实际屏幕的宽度并没有想象中的那么简单，因为 &lt;code&gt;CSS&lt;/code&gt; 监测的高度为浏览器窗口的高度，而通常由于系统面板 / 任务栏的原因，使得浏览器窗口要小于显示器。&lt;/p&gt;
&lt;h2&gt;有什么办法可以防止使用上面的方法进行追踪&lt;/h2&gt;
&lt;p&gt;目前我知道的唯一办法就是 &lt;code&gt;完全禁用 CSS&lt;/code&gt;（你可以使用像 &lt;a href=&quot;https://github.com/gorhill/uMatrix&quot;&gt;uMatrix&lt;/a&gt; 的插件来实现），但它的代价也是十分巨大的，没有 CSS，网页就没有之前那么赏心悦目了，甚至导致无法正常使用，所以，&lt;code&gt;禁用 CSS 算不上一个真正的选择&lt;/code&gt;，除非，你实在担心你的隐私（例如，当你在使用 Tor 浏览器，也许你应该禁用 CSS）。&lt;/p&gt;
&lt;p&gt;一个更好的解决方案是，&lt;code&gt;在网页加载时，浏览器不会去加载需要的外部资源&lt;/code&gt;，这样，就不可能监测到用户的个人行为，这种对内容加载的修改可以通过浏览器来实现，也可以通过插件来实现（类似 &lt;a href=&quot;https://noscript.net/&quot;&gt;NoScript&lt;/a&gt; 或 uMatrix）。&lt;/p&gt;
&lt;p&gt;上述方法也存在一个明显的问题，那就是 &lt;code&gt;对性能会造成一定的影响，&lt;/code&gt;因为浏览器会在初始化页面时加载大量的内容（有些内容是页面根本不需要的）。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[antd 源码解读 notification]]></title><description><![CDATA[Notification 这是一个全局变量的组件，可以在任意地方调用其函数就能够生成一个，我们就来看看这个组件又是用了什么奇巧淫技来实现的。 — 注意：解读的antd的源码版本为 2.13.4 rc-notification 版本为 2.0.…]]></description><link>https://knownsec-fed.com/2018-01-14-antd-yuan-ma-jie-du-notification/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-01-14-antd-yuan-ma-jie-du-notification/</guid><pubDate>Sun, 14 Jan 2018 15:03:54 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-3f949f24c374e72b85710584beb1852e-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIDBP/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAd9Nchxg/8QAGhAAAgIDAAAAAAAAAAAAAAAAAQIAAxEiM//aAAgBAQABBQItutqhQciN0n//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAZEAADAAMAAAAAAAAAAAAAAAABAhAAIjH/2gAIAQEABj8COzYO1Z//xAAbEAACAwADAAAAAAAAAAAAAAAAAREhMRBBkf/aAAgBAQABPyGgeleiQtEKS4IQixXfH//aAAwDAQACAAMAAAAQBA//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAcEAEBAAIDAQEAAAAAAAAAAAABESExAEFxENH/2gAIAQEAAT8QgRDABlrq9anjO+SyQBFXHv7wSIg3DsmHnZC71xdGhGNY+f/Z&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;Header&quot;
        title=&quot;&quot;
        src=&quot;/static/header-3f949f24c374e72b85710584beb1852e-d6978.jpeg&quot;
        srcset=&quot;/static/header-3f949f24c374e72b85710584beb1852e-527f0.jpeg 300w,
/static/header-3f949f24c374e72b85710584beb1852e-9a7cd.jpeg 600w,
/static/header-3f949f24c374e72b85710584beb1852e-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h1&gt;Notification&lt;/h1&gt;
&lt;p&gt;这是一个全局变量的组件，可以在任意地方调用其函数就能够生成一个，我们就来看看这个组件又是用了什么奇巧淫技来实现的。&lt;/p&gt;
&lt;p&gt;— 注意：解读的antd的源码版本为 2.13.4 rc-notification 版本为 2.0.0 结合源码查看的时候不要下载错了。&lt;/p&gt;
&lt;h2&gt;本节讲点&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;查看 notification 组件源码的文件顺序和入口点&lt;/li&gt;
&lt;li&gt;rc-utils 组件中的 createChainedFunction 函数&lt;/li&gt;
&lt;li&gt;缓存机制&lt;/li&gt;
&lt;li&gt;ReactDOM.unmountComponentAtNode&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;快速阅读代码&lt;/h2&gt;
&lt;p&gt;我将带大家使用 &lt;code&gt;略览&lt;/code&gt; 代码的方法来进行一个组件的快速通读，这就跟高中英语阅读时使用的一种阅读方法一样，快速阅读，略过细节，抓主线路，理清整个组件工作原理之后再去查看细节。&lt;/p&gt;
&lt;h3&gt;1. antd-design-master/components/index.tsx&lt;/h3&gt;
&lt;p&gt;  因为使用方法是直接使用的 notification.api(config)，所以想到先去看看是怎么抛出的。
&lt;code&gt;export {default as notification} from &apos;./notification&apos;&lt;/code&gt;&lt;/p&gt;
&lt;h3&gt;2. antd-design-master/components/notification/index.tsx&lt;/h3&gt;
&lt;p&gt;  再看看引用的文件是怎么抛出的。
&lt;code&gt;export default api as NotificationApi;&lt;/code&gt;&lt;/p&gt;
&lt;h3&gt;3. antd-design-master/components/notification/index.tsx&lt;/h3&gt;
&lt;p&gt;  由下往上看代码，看到 &lt;code&gt;api&lt;/code&gt; 的构成，再看到 &lt;code&gt;api.notice&lt;/code&gt;-&gt;&lt;code&gt;function notice&lt;/code&gt;-&gt;&lt;code&gt;function getNotificationInstance&lt;/code&gt;-&gt;&lt;code&gt;(Notification as any).newInstance&lt;/code&gt;-&gt;&lt;code&gt;import Notification from &apos;rc-notification&apos;;&lt;/code&gt;。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;    &lt;span class=&quot;token function&quot;&gt;getNotificationInstance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      outerPrefixCls&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      args&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;placement &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; defaultPlacement
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;notice&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      content&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div className&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;iconNode &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;prefixCls&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;-with-icon`&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
          &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;iconNode&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div className&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;prefixCls&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;-message`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;autoMarginTag&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;args&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;message&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div className&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;prefixCls&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;-description`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;args&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;description&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
          &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;args&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;btn &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;span className&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;prefixCls&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;-btn`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;args&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;btn&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;span&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      duration&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      closable&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      onClose&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; args&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;onClose&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      key&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; args&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      style&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; args&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;style &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      className&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; args&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;className&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;  在这个文件中比较重要的一条代码线就是上面展示的这一条，剩下的代码可以一眼带过，比较特殊的就是他将生成的 notification 实例都存在一个全局常量中，方便第二次使用只要这个实例没有被 destroy。&lt;/p&gt;
&lt;h3&gt;4. rc-notification/src/index.js&lt;/h3&gt;
&lt;p&gt;  找到入口文件 &lt;code&gt;import Notification from &apos;./Notification&apos;;&lt;/code&gt;。&lt;/p&gt;
&lt;h3&gt;5. rc-notification/src/Notification.jsx&lt;/h3&gt;
&lt;p&gt;  在上面第 3 条我们看到有的一个方法 &lt;code&gt;newInstance&lt;/code&gt; 是用来创建新实例，所以我们在这个文件中也可以看到相应的代码 &lt;code&gt;Notification.newInstance = function newNotificationInstance&lt;/code&gt;，在这个函数中我们继续略览代码，看到 &lt;code&gt;ReactDOM.render(&amp;#x3C;Notification {...props} ref={ref} /&gt;, div);&lt;/code&gt; 我们知道这是将一个组件渲染在一个 dom 节点，所以下一个查看点就应该是 &lt;code&gt;Notification&lt;/code&gt; 这个组件类。&lt;/p&gt;
&lt;h3&gt;6. rc-notification/src/Notification.jsx&lt;/h3&gt;
&lt;p&gt;  看到文件上面 &lt;code&gt;class Notification extends Component&lt;/code&gt;，可以看到整个组件的实现，我们可以在 &lt;code&gt;render&lt;/code&gt; 函数中看到一个循环输出，那就是在循环输出 &lt;code&gt;state&lt;/code&gt; 中存的 &lt;code&gt;notice&lt;/code&gt;，&lt;code&gt;state&lt;/code&gt; 中的 &lt;code&gt;notice&lt;/code&gt; 是通过上面第 3 点展示的代码，获取实例之后使用 &lt;code&gt;notice&lt;/code&gt; 函数调用的实例的 &lt;code&gt;add&lt;/code&gt; 函数进行添加的。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; onClose &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createChainedFunction&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;remove&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;bind&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; notice&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; notice&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;onClose&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Notice
    prefixCls&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;prefixCls&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;notice&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    onClose&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;onClose&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;notice&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;content&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Notice&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h3&gt;7. rc-notification/src/Notice.jsx&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;  &lt;span class=&quot;token function&quot;&gt;componentDidMount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;duration&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;closeTimer &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;duration &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;componentWillUnmount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;clearCloseTimer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function-variable function&quot;&gt;clearCloseTimer&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;closeTimer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;clearTimeout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;closeTimer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;closeTimer &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function-variable function&quot;&gt;close&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;clearCloseTimer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;onClose&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;  这个文件中玄妙之处其实在于以上三个函数，在 &lt;code&gt;componentDidMount&lt;/code&gt; 之时，添加了一个定时器，将在规定时间之后删除掉当前的这个提示窗，并且这个删除动作是交由给外层文件去删除当前这个提示框的实例进行的也就是第 6 点文件中的 &lt;code&gt;remove&lt;/code&gt; 函数，在最新的（3.0.0）rc-notification 中添加了以下代码，为了能够在鼠标移上去之后不让消息框消失，增加了用户体验度。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;  &lt;span class=&quot;token function&quot;&gt;componentDidMount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;startCloseTimer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;componentWillUnmount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;clearCloseTimer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function-variable function&quot;&gt;close&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;clearCloseTimer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;onClose&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function-variable function&quot;&gt;startCloseTimer&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;duration&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;closeTimer &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;duration &lt;span class=&quot;token operator&quot;&gt;*&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function-variable function&quot;&gt;clearCloseTimer&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;closeTimer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token function&quot;&gt;clearTimeout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;closeTimer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;closeTimer &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; props &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; componentClass &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;prefixCls&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;-notice`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; className &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;componentClass&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;componentClass&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;-closable`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;closable&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;className&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;className&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div className&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;classNames&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;className&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; style&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;style&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; onMouseEnter&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;clearCloseTimer&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        onMouseLeave&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;startCloseTimer&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div className&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;componentClass&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;-content`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;children&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
          &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;closable &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;
            &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;a tabIndex&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;0&quot;&lt;/span&gt; onClick&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;close&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; className&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;componentClass&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;-close`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
              &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;span className&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;componentClass&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;-close-x`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;span&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
            &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;a&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;
          &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h2&gt;CreateChainedFunction&lt;/h2&gt;
&lt;p&gt;这个函数是使用在上面第 6 点，目的是为了能够删除当前的 notification 的缓存值，然后再执行外部传入的关闭回调函数，这个函数的实现在 &lt;code&gt;rc-util&lt;/code&gt; 包中，这个包中有很多的方法是值得学习的，但是他在 github 上面的 star 数量却只有 73 个，这里软推一下吧。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;  &lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createChainedFunction&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; args &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;slice&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;arguments&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;args&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;length &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; args&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;chainedFunction&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt; args&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;length&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; i&lt;span class=&quot;token operator&quot;&gt;++&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;args&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; args&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;apply&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          args&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;apply&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; arguments&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;这个函数中使用了&lt;code&gt;call&lt;/code&gt; 来将传入的参数变成一个数组，然后使用 &lt;code&gt;apply&lt;/code&gt; 将传入的函数一一执行，这样子就能够实现一个函数接受多个函数，然后按照顺序执行，并且在第 6 点的代码中 &lt;code&gt;this.remove.bind(this, notice.key)&lt;/code&gt; 使用了 &lt;code&gt;bind&lt;/code&gt; 函数指定了 this 和传入参数，方法很精妙也很经典。&lt;/p&gt;
&lt;h2&gt;缓存机制&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;notification&lt;/code&gt; 组件在 &lt;code&gt;ant-design-master&lt;/code&gt; 中使用了。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; notificationInstance &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token function&quot;&gt;destroy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  Object&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;keys&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;notificationInstance&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;cacheKey &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    notificationInstance&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;cacheKey&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;destroy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;delete&lt;/span&gt; notificationInstance&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;cacheKey&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;来进行对创建实例的缓存，然后在销毁时将缓存的实例删除。&lt;/p&gt;
&lt;p&gt;在 &lt;code&gt;notification 2.0.0&lt;/code&gt; 中也使用了缓存机制。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token function-variable function&quot;&gt;add&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;notice&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; key &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; notice&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;key &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; notice&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;key &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getUuid&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;previousState &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; notices &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; previousState&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;notices&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;notices&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;v &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; v&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;key &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; key&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;length&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        notices&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; notices&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;concat&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;notice&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token function-variable function&quot;&gt;remove&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;previousState &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      notices&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; previousState&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;notices&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;filter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;notice &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; notice&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;key &lt;span class=&quot;token operator&quot;&gt;!==&lt;/span&gt; key&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;在这个代码中看到这个缓存机制是使用的数组的方式实现的，但是在外层封装却是用的是是对象的方式实现，我猜想这两个代码不是一个人写的。。。代码风格不统一呢。&lt;/p&gt;
&lt;h2&gt;ReactDOM.unmountComponentAtNode&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;Notification&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function-variable function&quot;&gt;newInstance&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;newNotificationInstance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;properties&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;getContainer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; properties &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; div&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;getContainer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    div &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;getContainer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    div &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createElement&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;div&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;body&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;appendChild&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;div&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; notification &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; ReactDOM&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Notification &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; div&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;notice&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;noticeProps&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      notification&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;add&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;noticeProps&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;removeNotice&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      notification&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;remove&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    component&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; notification&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;destroy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      ReactDOM&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;unmountComponentAtNode&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;div&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;body&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;removeChild&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;div&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;从上面的代码中看出，&lt;code&gt;notification&lt;/code&gt; 组件使用 &lt;code&gt;unmountComponentAtNode&lt;/code&gt; 函数将其进行销毁，这个方法适用于某些不能在当前组件中进行组件销毁的情况，举个例子，模态框的删除也可以使用这个方法执行。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[【译】UI 中的排版：初学者指南]]></title><description><![CDATA[原文链接： Typography in UI: Guide for Beginners. 作者：Tubik Studio…]]></description><link>https://knownsec-fed.com/2018-01-14-ui-zhong-de-pai-ban-chu-xue-zhe-zhi-nan/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-01-14-ui-zhong-de-pai-ban-chu-xue-zhe-zhi-nan/</guid><pubDate>Sun, 14 Jan 2018 05:39:05 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-3ab6ef5d4c66ae19e55c59daf1b04d4e-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAABAACBf/EABUBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAHp6EwQT6X/xAAbEAACAwADAAAAAAAAAAAAAAAAAQIDERIUIf/aAAgBAQABBQKj2m1pjhyIN9SBmH//xAAWEQEBAQAAAAAAAAAAAAAAAAAAARL/2gAIAQMBAT8BkZf/xAAXEQADAQAAAAAAAAAAAAAAAAAAARES/9oACAECAQE/AW4aP//EABoQAAICAwAAAAAAAAAAAAAAAAARAiEDEIH/2gAIAQEABj8CjYmPHGjuqP/EABwQAQACAgMBAAAAAAAAAAAAAAEAETGxIUFRYf/aAAgBAQABPyG9OlXuBhsiLLGS3CXFz3PPVRHAAfJ//9oADAMBAAIAAwAAABCzz//EABYRAQEBAAAAAAAAAAAAAAAAAAARIf/aAAgBAwEBPxCmIf/EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAECAQE/EJFv/8QAGxABAAIDAQEAAAAAAAAAAAAAAQARITFBUWH/2gAIAQEAAT8QqWWDRd5S1oINFN0p2E7ndtfVwAEoKO4AIQBicjXwgUT/2Q==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;UI 中的排版：初学者指南&quot;
        title=&quot;&quot;
        src=&quot;/static/header-3ab6ef5d4c66ae19e55c59daf1b04d4e-d6978.jpeg&quot;
        srcset=&quot;/static/header-3ab6ef5d4c66ae19e55c59daf1b04d4e-527f0.jpeg 300w,
/static/header-3ab6ef5d4c66ae19e55c59daf1b04d4e-9a7cd.jpeg 600w,
/static/header-3ab6ef5d4c66ae19e55c59daf1b04d4e-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;原文链接：&lt;a href=&quot;https://uxplanet.org/typography-in-ui-guide-for-beginners-7ee9bdbc4833&quot;&gt;Typography in UI: Guide for Beginners.&lt;/a&gt;&lt;br&gt;
作者：Tubik Studio&lt;/p&gt;
&lt;p&gt;人们一直在阅读，不仅是书籍或杂志，还有互联网上的各种信息，街头广告、公共交通工具或店外广告。然而，只有少数读者可能知道，当我们轻松地阅读一份舒适轻松的复印件时，设计师在这背后花费了多少时间和精力。文字排列和字体的美学外观是设计师的首要任务，为了创造有效的用户界面和清晰的用户体验，设计师还要学习印刷术科学的基础。今天的文章涵盖了每一位专业设计师应该理解和应用的排版基本要点。&lt;/p&gt;
&lt;h2&gt;什么是排版？&lt;/h2&gt;
&lt;p&gt;印刷术不仅仅是一种设计技术。加拿大的一位印刷人 Robert Bringhurst 在他的著作“印刷风格的元素 ”（The Elements of Typographic Style）中将印刷术定义为赋予人类语言持久的视觉形式。另外，排版将语言转化为装饰性的视觉元素。&lt;/p&gt;
&lt;p&gt;印刷术比设计或互联网本身具有更长的历史。大约在 11-12 世纪，人们发明了可移动式系统。“古腾堡圣经”是第一本可移动金属印刷的大型书籍，标志着西方印刷书籍的开始。古腾堡圣经中使用的类型现在被称为 Textualis（Textura）和 Schwabacher。&lt;/p&gt;
&lt;p&gt;如今，它不仅仅是大规模的复制印刷，印刷术通常被定义为字体风格、外观和结构的艺术科学，旨在向读者提供美观和易读的拷贝。不久之前，这只是一个办公室工作人员进行编辑的专门学科，但现在此学科应用于不同领域，并在设计中发挥重要作用。

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/01-13c07d5ad8d680f4fb6b7a5b7c080f12-1ec8f.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1024px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 66.9921875%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAQFAv/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAF5iRmKpOF//8QAGxAAAwACAwAAAAAAAAAAAAAAAQIDABEEEyH/2gAIAQEAAQUCpUTKsMZAx5HtDvfe2f/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAECAQE/AUf/xAAZEAADAQEBAAAAAAAAAAAAAAAAAREhMQL/2gAIAQEABj8CiNfSzyITunEf/8QAGhABAAMBAQEAAAAAAAAAAAAAAQARIXExUf/aAAgBAQABPyERQWXFA6C6ZtR2LgmwavH5CuH/2gAMAwEAAgADAAAAEI/P/8QAFhEBAQEAAAAAAAAAAAAAAAAAABEB/9oACAEDAQE/EIuv/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQIBAT8QqH//xAAcEAACAwEBAQEAAAAAAAAAAAABEQAhMUGhUYH/2gAIAQEAAT8QIDtDrBz9FQ3VIKFTQnNKmF+R0Iyr7fYZm9E4U+Q4G0USjfs//9k=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;01&quot;
        title=&quot;&quot;
        src=&quot;/static/01-13c07d5ad8d680f4fb6b7a5b7c080f12-1ec8f.jpg&quot;
        srcset=&quot;/static/01-13c07d5ad8d680f4fb6b7a5b7c080f12-c575d.jpg 300w,
/static/01-13c07d5ad8d680f4fb6b7a5b7c080f12-bcea4.jpg 600w,
/static/01-13c07d5ad8d680f4fb6b7a5b7c080f12-1ec8f.jpg 1024w&quot;
        sizes=&quot;(max-width: 1024px) 100vw, 1024px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h2&gt;排版在设计中的作用&lt;/h2&gt;
&lt;p&gt;你能想到一个没有复制元素的设计例子吗？这很困难，对吧？不过，仅仅在界面中出现复制对于有效的用户界面和正面的用户体验来说是不够的。复制和外观应该是好的，否则可能会破坏设计。有些设计师忽略了印刷术的研究，因为他们觉得太难理解了不值得花太多时间，不过，让我们看看为什么排版是有效设计的重要组成部分。&lt;/p&gt;
&lt;p&gt;人们已经习惯以文本形式接收大部分信息，设计者需要使这个过程变得简单和高效。排版的基本知识可以帮助理解字体视觉呈现的特点及其对用户感知的影响。&lt;/p&gt;
&lt;p&gt;有效的文字信息是强大的设计的关键。其有效性不仅取决于其内容，而且还取决于，字体大小，宽度，颜色和文本结构。设计师可以通过选择适当的字体和排版方式来传递特定的心情或信息。这种排版帮助设计与人沟通。数字产品的视觉效果和可复制性对用户体验有很大的影响。现在数字产品的用户体验如果不好，用户很容易找到更好的选择，所以即使字体非常清晰，也很难使人们选择这个产品。&lt;/p&gt;
&lt;p&gt;另外，糟糕的版式严重影响了用户的第一印象，因为即使用户不阅读拷贝，也会对其进行扫描。如果字体看起来不合适就可能不想了解您的报价或使用您的产品。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/02-16a2704ca60419ae1fc613f141ccba43-1ec8f.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1024px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMFBP/EABYBAQEBAAAAAAAAAAAAAAAAAAIBBP/aAAwDAQACEAMQAAABVQng04hZH//EABsQAAICAwEAAAAAAAAAAAAAAAIDAAQBERMx/9oACAEBAAEFAgUxhMrjyz6p3I3WSObn/8QAGBEAAgMAAAAAAAAAAAAAAAAAAQIQEiH/2gAIAQMBAT8BIa2R/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAHRAAAQMFAQAAAAAAAAAAAAAAAQAQIQIRIjJBYf/aAAgBAQAGPwKIpHVjs3hVhAb/xAAaEAEAAwEBAQAAAAAAAAAAAAABABEhcTFR/9oACAEBAAE/IXQz2RYaRvYYpF3Jlhx/vYqf/9oADAMBAAIAAwAAABB07//EABcRAQADAAAAAAAAAAAAAAAAAAARITH/2gAIAQMBAT8Q2FJf/8QAFxEAAwEAAAAAAAAAAAAAAAAAAAERIf/aAAgBAgEBPxBSaQ//xAAdEAEAAwABBQAAAAAAAAAAAAABACExEUFhcZHB/9oACAEBAAE/EFR8PLyvacBeraQaBBFddI5doJrBBKaG/J8yJd9z/9k=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;02&quot;
        title=&quot;&quot;
        src=&quot;/static/02-16a2704ca60419ae1fc613f141ccba43-1ec8f.jpg&quot;
        srcset=&quot;/static/02-16a2704ca60419ae1fc613f141ccba43-c575d.jpg 300w,
/static/02-16a2704ca60419ae1fc613f141ccba43-bcea4.jpg 600w,
/static/02-16a2704ca60419ae1fc613f141ccba43-1ec8f.jpg 1024w&quot;
        sizes=&quot;(max-width: 1024px) 100vw, 1024px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h2&gt;基本的排版元素&lt;/h2&gt;
&lt;p&gt;要学习印刷术，您首先需要了解其解剖学和印刷术建筑所需的过程。&lt;/p&gt;
&lt;h3&gt;字体和字体样式&lt;/h3&gt;
&lt;p&gt;如今，许多设计师使用术语“字体”和“字体样式”作为同义词，但这不太正确。字体是一种设计的风格类型，其中包括各种尺寸和大量的字符。另一方面，字体通常以一种特定的字体，大小和重量引入的文本字符的图形表示。换句话说，字体就像一个家庭，字体样式是它的一部分。这两个是设计师和印刷人员为了创造具有可读性和一定美学的排版而改变和转换的。&lt;/p&gt;
&lt;h3&gt;平均线和基线&lt;/h3&gt;
&lt;p&gt;通常情况下，同类型字符放置在一条直线上，可以创建一个整洁的视觉呈现。辅助设计者的主要工具是平均线和基线。第一个标注字体的顶部和底部。当然，设计师完成工作之后，两者是不可见的。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/03-c58c996dedb12876fad12afe53f7a095-d377c.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1024px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 59.66796875%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAABHklEQVQoz61S30sCQRC+f72XIPDJiH5oZBkl+BCEUXLnZVqXGHGdt3XVdeglpD2cwQmXsruzzbUmRxRFNszDzO58883Ot4qYwZR/AwPArMyUUs75r8HvfGE4vLIIBmeNi8pxHYMfW8Rg4DHavnbm5lMYWBZZW88HwUBweOr1fb87eh3JMojG6ILxJDNwxip6Lb2UuTRb7Y6/mt0sFPdUtbpfKi+kFv1ON65iDMYUXfDJahS5pLsHTz85db12ejmLY5cOVUwPjrTcdqFuNL4dW4Jt+8Z1PXykqlWN86ZptghxDKO5kslt5HcfJTNlEEYwjMSHKEpSp6lUclXEud3aKWp67d714kO8lf5JqikSEoZpr/8cDF7+/sNgIuUX9gbPsqwzypEiSwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;03&quot;
        title=&quot;&quot;
        src=&quot;/static/03-c58c996dedb12876fad12afe53f7a095-d377c.png&quot;
        srcset=&quot;/static/03-c58c996dedb12876fad12afe53f7a095-fa076.png 300w,
/static/03-c58c996dedb12876fad12afe53f7a095-f9163.png 600w,
/static/03-c58c996dedb12876fad12afe53f7a095-d377c.png 1024w&quot;
        sizes=&quot;(max-width: 1024px) 100vw, 1024px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h3&gt;字符测量（尺寸，重量和高度）&lt;/h3&gt;
&lt;p&gt;为了分离不同类型的信息并突出重点，设计师应用不同重量和大小的字体。字体重量是厚度字符的一种度量。尺寸通常以英寸，毫米或像素来衡量。字符的高度也被称为“x 高度”，因为一个尺寸的每个字符的主体基于字母“x”。这种方法使他们看起来均匀。通过改变这些参数可以很容易地分离同类型元素，例如标题，副标题和正文副本。

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/04-b1f93ff151d78e5933541231c2848316-d377c.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1024px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 59.66796875%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAABEklEQVQoz61S30vCUBTev+6L9GAPIqGhiVlk4EMERo2tWf5CE0ndamGObQZpDzMwYuW959jRrRExKLKP+3DO5Xzfd885V1isAeHfyIi4rjNjDAB+TV75zWYv3Z5GQb3ZPi9XKfhRQgiK1Bs9Eo1RQBLbO3nHmdL943hi2Q+u63pdhZCpVca5pFTiW+nOdd+07FRmt1A8EqXycUnc2EyY9mhZxjm+z3HOAhXBG9JgaCiXtaFhJpIZenbpVKL05EzO7R9WGy3fCABf3+h8J/fU28G9wQFE+aLevOp0+6qm1xqtZDqX3StYvjMsAMOnjSt8eiynoOl3+YOirFRI1zMOX1XAxC+gdDx5cqbPf/9h6K8yBB/YXKw+evvfBwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;04&quot;
        title=&quot;&quot;
        src=&quot;/static/04-b1f93ff151d78e5933541231c2848316-d377c.png&quot;
        srcset=&quot;/static/04-b1f93ff151d78e5933541231c2848316-fa076.png 300w,
/static/04-b1f93ff151d78e5933541231c2848316-f9163.png 600w,
/static/04-b1f93ff151d78e5933541231c2848316-d377c.png 1024w&quot;
        sizes=&quot;(max-width: 1024px) 100vw, 1024px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h3&gt;上升和下降&lt;/h3&gt;
&lt;p&gt;上面的字母是字母“b”或“d”中字母的一部分。下行与上行相反。这是一个在“q”或“g”中延伸到基线以下的部分。

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/05-6daf36dc840abfa214e8e6878702a075-d377c.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1024px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 59.66796875%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAABDElEQVQoz62S3UvCUBjG978HXURBISImXgiBgV2UJjgm00Nf2pxuNqXaHEdFkT4uNGzNc847z2YXGg4pe66e93B+PO95OIK3hYR/gwFg22SYUY+x38HjyYeuG9x8IcPNKdyw8XQzzIIc3Wjv7B44HnzWrcejDH598QgdDke423ccJzwZgBAiyegwmlAbTdzrxxKp9Nm5KJVyl4W9/QjGvbWNCIujJ7Mjo2vTsiOxZOVezebFErq5KEjHJ2l0WwldewFrzdazZTNKxWL5rlpT67rWahtXCoqeduLZmTnwH8aLhJDCIND3wHzjarYbF6d5xX3AQKjf3+rmwg8SlsRHMnhnb5Pgxt9+GKwnueYp8a6GAtQ8QQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;05&quot;
        title=&quot;&quot;
        src=&quot;/static/05-6daf36dc840abfa214e8e6878702a075-d377c.png&quot;
        srcset=&quot;/static/05-6daf36dc840abfa214e8e6878702a075-fa076.png 300w,
/static/05-6daf36dc840abfa214e8e6878702a075-f9163.png 600w,
/static/05-6daf36dc840abfa214e8e6878702a075-d377c.png 1024w&quot;
        sizes=&quot;(max-width: 1024px) 100vw, 1024px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h3&gt;白色的空间&lt;/h3&gt;
&lt;p&gt;白色空间也被称为负空间，是设计构图中元素之间的区域。读者通常不会意识到这个空间的巨大作用，但是设计师对此非常关注。如果空白不平衡，将难以阅读。这就是为什么负面空间和其他任何印刷元素一样重要的原因。

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/06-59d30bb3daa5624942c20292b173fca5-d377c.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1024px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsSAAALEgHS3X78AAABNUlEQVQoz6WSa5eCIBCG+/9/cE91KhUU8a4BCmm7j+03az+0zRmGYfTlnQu77w9kx1qWxblxHCfMPM/vgafJ74+n/eH0dTgqped5ud1uq51XCWE9PCLza7BMVRSLcxSnqYoTmQgZC3mJEhzi6OkcXeLE+7AFc2uW5WBEqhJWrnVRsqH4WCHTRKaZyinwidn7KBFCZjDkurDWGmuvxvTDYPCswxpjnHP3+30L/qjbMFMhraJy8hynieCG5E8wNTdN27Rd23Z13RjrJsR7hsfGFBkhR/J/kbYPgQ7RM5gB57pUeUHk0SONZkrjctxMawWHEGCu6ob/yqrC4tdNW1Y1yie6mD1GAPkTs/e/169lZ6ooK/Jvu77rehLB9v3Q9QPX8HJePM/haq6oWSdEIm90+6NR/Vt+AOiaZhRBBfHFAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;06&quot;
        title=&quot;&quot;
        src=&quot;/static/06-59d30bb3daa5624942c20292b173fca5-d377c.png&quot;
        srcset=&quot;/static/06-59d30bb3daa5624942c20292b173fca5-fa076.png 300w,
/static/06-59d30bb3daa5624942c20292b173fca5-f9163.png 600w,
/static/06-59d30bb3daa5624942c20292b173fca5-d377c.png 1024w&quot;
        sizes=&quot;(max-width: 1024px) 100vw, 1024px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h3&gt;对准&lt;/h3&gt;
&lt;p&gt;创建有效的排版并不是那么容易，它包括许多过程。例如，对齐是放置和证明文本的行为。在这个阶段，设计师的目标是将随机放置的文本片段转换成一个统一的组合。

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/07-9dd9d4bc04a5868bc7b93cd3ae3909e7-d377c.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1024px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsSAAALEgHS3X78AAABQUlEQVQoz6WSi3KDIBRE8/+fWaMI8jC+Amo0B0l0mmYmnZYBvNxlYd3Laf1HOzGWZRmn6ZeEeb55H6A8yN57VWmyeyNOcDp6niNIZ9m2XXbOSTzIIYylrApRilLSS6mI+35I5K7v80KIUjEDxVHpaVOayIE1OfLaWGIVvzUQKoy1LDeKoXMN8ziOu+wgpQJVbIiwYk7C1mXlknI7F/DJVwcZ2aS0tsz9MHBWwvbG2ofA31bxcKSZaf/nt+3p16dS7a5ys5CSs3/uw7+vLL80zSsZkcY5bQw96jfW1TUjVatpOzJA0bEY2EvTHmTcxi252Yg3xNDZChm3ceqci+xcUKpCSALmb6UCSGYerhqTbuaqVH/MAiKw1h0vDNms0cmFCDMxdsP1mrRdvSfWJkLO1V3XU51Xwz496fRGb+/d/kO7A0kjZYssedLBAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;07&quot;
        title=&quot;&quot;
        src=&quot;/static/07-9dd9d4bc04a5868bc7b93cd3ae3909e7-d377c.png&quot;
        srcset=&quot;/static/07-9dd9d4bc04a5868bc7b93cd3ae3909e7-fa076.png 300w,
/static/07-9dd9d4bc04a5868bc7b93cd3ae3909e7-f9163.png 600w,
/static/07-9dd9d4bc04a5868bc7b93cd3ae3909e7-d377c.png 1024w&quot;
        sizes=&quot;(max-width: 1024px) 100vw, 1024px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h3&gt;跟踪&lt;/h3&gt;
&lt;p&gt;跟踪的过程涉及调整形成字和文本块的一组类型字符的空间。设计师为所有字母设置适当的间距，使文字见的感觉通风和愉快阅读。有效的跟踪可以使单词中的字母易于阅读。

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/08-52f22aae2487ca612c1e757b21ccbefa-d377c.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1024px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 59.5703125%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAABH0lEQVQoz8VRTU8CMRDd//8TPHgxMaKgAaOIiBGVqCAu4gKLH+DyESAsoAGD23amTi3pYVFj4sE5vL5p503bN5b8Q1j/LQYAIQQhIhoEDZ9Bh4S/unm57suChdi+dfZTRyenuV5/cJa7fHxqeq22U3XTx1kijaZ3mMm2O91QXyXmnE+ns0g07tYfKN07SO/sJgUI6rIZSxSKpUqtvrK6Np68hMXqewKIbUTjQ98nUnXvt7YTRJKpzPnFFZGiXV6PxIb+yIi1EZZeKM8XbkbjCZFur1+6qxApOzWv1SHSePby1zb9xMg0Uc9GcvI9kGQnFxhwQsk4vL4hE+QyBkztCJSqjC25rTsBkn7Rm3GczWEeSPNIUNMLjwq/CTOSH+IDfae0Ez01t7AAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;08&quot;
        title=&quot;&quot;
        src=&quot;/static/08-52f22aae2487ca612c1e757b21ccbefa-d377c.png&quot;
        srcset=&quot;/static/08-52f22aae2487ca612c1e757b21ccbefa-fa076.png 300w,
/static/08-52f22aae2487ca612c1e757b21ccbefa-f9163.png 600w,
/static/08-52f22aae2487ca612c1e757b21ccbefa-d377c.png 1024w&quot;
        sizes=&quot;(max-width: 1024px) 100vw, 1024px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h3&gt;字距&lt;/h3&gt;
&lt;p&gt;字距有点类似跟踪，但他们不一样。跟踪是指字体的所有字符之间的间距，而字距是调整两个字符之间的间距的过程。当设计师决定改变两个特定字母之间的间距以使其感觉更自然时，通常应用于个别情况。

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/09-ef49df6eafdebd2af100083176e5df5d-d377c.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1024px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 59.66796875%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsSAAALEgHS3X78AAAA/0lEQVQoz9VRS0/CQBDmn6MJF/0FJHqgkUAAsYWFbnilyCtKOKNQiAnlUWgXKNCEpbQwUE+6DQdOzGVnv8fM7KzvcEX4btq821lbSv9wjm3bhnnYWp5mEMCRwQUB4fV6QynVdDJRp91eX1VnQCnKCPBTLcdhm+PJdL5Y5pFYlCrv1UbwmUNiPvjEVaUaF4njXAk0tpc5mys1PluELPyBx5lGkkKm3ZFTCN/fPfAIL40Vu7MLyf0fqVK39vuXSAKusVchmuAJmY+V0Vta1Mmcbf7dzZlof3frH01IQuHYV0c+jXqe68K2XfPCMDamCclAGWqa7uLw1P892f/spWPGESWmrhjn6AA8AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;09&quot;
        title=&quot;&quot;
        src=&quot;/static/09-ef49df6eafdebd2af100083176e5df5d-d377c.png&quot;
        srcset=&quot;/static/09-ef49df6eafdebd2af100083176e5df5d-fa076.png 300w,
/static/09-ef49df6eafdebd2af100083176e5df5d-f9163.png 600w,
/static/09-ef49df6eafdebd2af100083176e5df5d-d377c.png 1024w&quot;
        sizes=&quot;(max-width: 1024px) 100vw, 1024px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h3&gt;行间距&lt;/h3&gt;
&lt;p&gt;行间距是在稿件基线之间的一种间距，适当的行间距可以帮助读者轻松地从一个文本行到另一个文本行，并使得大段文本清晰可辨。在设计上，标准的行距是120％的字体大小，实际情况还是会根据字体的特点而有所不同。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/10-850200d8b26e3b97e3bf5beaa78fc120-d377c.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1024px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsSAAALEgHS3X78AAABKUlEQVQoz8WSz0/CMBTH+f//Ai8ePJigIohAHLI4nI6NHzN6UAQUFdhgEyFh0GVtV3ymhYOETePBd2hf0vfpe99vm1j+IRL/DXvzeRBgSMIwZKuIh6EatrPzi75lId/HGFNKCSEI+bG8gNWKoRk1vdpIZwtXmqFe69m8ZNkjOIq4YgVrRvIoo1xqdfO2IMlFWUllcgHGMfBa82zmDR0XShcLRAh9H3/ACg58HdMwCgapER0YJgzT5UaBGDsvlUCwZQ87z93GzV37qeu442arI2A/YB5iG/0FLJWUh8f2Yfq0rFaKcnn/4Hhnd69aN4XmbWPzae+brf7ABtugZzJ1MnJcvWa+9QYCDtlWzZwHw15ee5PJFJ4q2uTvhq1LeQIrl/O7v/3Dj8njE1aJYpvuY8XkAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;10&quot;
        title=&quot;&quot;
        src=&quot;/static/10-850200d8b26e3b97e3bf5beaa78fc120-d377c.png&quot;
        srcset=&quot;/static/10-850200d8b26e3b97e3bf5beaa78fc120-fa076.png 300w,
/static/10-850200d8b26e3b97e3bf5beaa78fc120-f9163.png 600w,
/static/10-850200d8b26e3b97e3bf5beaa78fc120-d377c.png 1024w&quot;
        sizes=&quot;(max-width: 1024px) 100vw, 1024px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h3&gt;印刷层次结构&lt;/h3&gt;
&lt;p&gt;作为任何其他设计元素，排版应该是结构化的。印刷层次结构是一个系统，首先通过修改字体与字体间的组合，以最好的方式为用户的感知设计内容。它的目的是为了创造最应该注意的最有意义和最显著的复制元素与普通文本信息之间的对比。对比度是通过调整印刷术元素，包括字体，字体，大小和颜色以及对齐来创建的。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/11-1e7f26ad554b8af08723b94db781cec9-89095.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsSAAALEgHS3X78AAACmUlEQVQoz6WSW08TQRTH+z180WCCRonhwRejn0PQkOCTGh9FY6IPGiQhCA8aUhqFYJAYJOXWGkmhKdTS7vYCLeVWStvdUuiFdi/tXme7u/XsUjAhvnny38mZc+Y3c3bmWBr/YRZj0P9hEJYkSZbli3lN0xE6g2GqqnVFMZYiBKubaKNRKZepSuUcBkfVNJkXEEWfRiy6CWsNXYMcQlq9niLJfKmUy+cTyeRxsZgmSTKXK5ycxHd3i+Uy7KGCVPUMhkpomjtIiRmCT6XL2zv0XoJJ7Bc347X9pJBKg6QMwe4lJILUckcazUAJJmygej2ZwsbGXVabyzqyPjkVnJhc+TwKfmnZrYXX68EwjHpkQw+vC16fkkxBmQBagK3DlyFRMMTggeM1T8HnqWIByQCijeiOiIeLq94qFqLXApTPX/X5NYJUzYLhwszLIbKY43uv7UXP0OPXg88GrK8mJj84Z8cczi97HmfUPhOzz27PLYCTW3TpRLYJEwXCgc8PjL9r7W6/1Nl6+cH1K53XWzqutXTdan9+1/att+RdPfj5C3S05CZdy9SKVz8/+fA4O700PWzte/qyq7379tX7ba0Pb97oaLvz6N6T3m7ntPXI4675MQ4LcnhIi8UlLKRmzmAkI4apUpEYMedcmRj7OPimv79nZOita9S2NWM/dLtYnz8x7xAC+LZ99uv7vsVPw/V0RjuF4ZHBZIKsBcNCZCPv/Z11e6g1rIqHxEhUiW2hWLwcwJXNrYLXF5j6sbPgULO55smn79wAIQRNwtI0XSkzFCWLIs9xkGv2MXSY2WSKLHO12t8mURASBUHkeYEXWJZlGJqBPwFjWSMOZo6CIADGcRzP8wghA4bNoLGNtClJFJsy/fP4BSmKAuAfSdcLVc88hv4AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;11&quot;
        title=&quot;&quot;
        src=&quot;/static/11-1e7f26ad554b8af08723b94db781cec9-89095.png&quot;
        srcset=&quot;/static/11-1e7f26ad554b8af08723b94db781cec9-f17ae.png 300w,
/static/11-1e7f26ad554b8af08723b94db781cec9-8b9c0.png 600w,
/static/11-1e7f26ad554b8af08723b94db781cec9-89095.png 800w&quot;
        sizes=&quot;(max-width: 800px) 100vw, 800px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;印刷层次结构与用户界面设计中使用的常见类型的复制内容一起呈现。它们是标题，副标题，正文，号召性用语，标题和其他内容。这些复制元素在设计中创建了不同的层次：主要，次要和第三层。&lt;/p&gt;
&lt;p&gt;复制内容的主要级别包括头条中的最大类型。它致力于吸引用户对产品的关注。二级包含复制元素，可以很容易地阅读。这些是副标题和标题，允许用户快速浏览内容。印刷术的三级文本包括正文和其他信息。经常以小字体呈现，应该足够可读。排版层协助用户逐步学习复制内容，不费力气地在数字产品中读取内容。

  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/12-0a907ce21374f6c5f267111f72931862-89095.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 75%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsSAAALEgHS3X78AAACeUlEQVQoz1WSXU8UMRSGx//gpb/Ra7kz4QeYgNFoCIqROzdrDLAuuwg7LAgqCSSYSEwIsDsfzEw/Ztqedj7rWQYUJ2+azts+OTnvqWOtbWreVIltCK5NfU/V/5qZ5OYybWpmbe1UJcvFexD7LP5spKulC2KkhTuTdI3cbYV7laE/VLyjsz4iZcmcwoS52kuYPfx2IlXNeJ5QTZkhTGeykmBRSluhqpjWUpwR74mgXQMnuVhxivxay53ZsUhBa5QCnRd1WTVVbevGFmUzU1EbU0opjUm1sVoMivBhC48QTrNMgSlKe37+yx11T46/bG11hsMPR0ebP7739vc+7rpdSgnjDC9rsVb4zgw2cpSJOopiqTQWubg82+wvHx501teWut0X43GHsZBSn9IAANKUKkB4vQhaWLk8Laeex3imTSGEjJOQsphxIlX2+/eZ646NKRhPkyS5Dn0/EEb+hbGyrOMkERKwX5OXUcIurrzJNPCDKAijXq93fPN9PTh4s7y0PToqTT/378HXUcRTgTAWj+Lk8mpyNfE8P8TkBoPh3Nzc6urqysrb+fmnCS1z1fsHC9nwFNPO72Ay9YKp5yOMKaI53ttfWFjc2Oid/jzNSwvZ2r2es8rzfey5hRNCEU4II5RjiujgzKq6mc2vKm/TbmGcM2irlGznfDttHLfB/gvQGARIJRWgh67UOcKfWjjUcizAUg4xkRJqPANjTY6vqkS1vyhlrNSWpRXPrJaDFibA3wnupmRA477k2yrdudFIsCH6+JgVfa7oK0FesmiRBM9Y9BqSxzO4aWoDEaipBt+AD8q7EzrY0TF4j2DiwOSBnjoo066e08TOH7CqIRd9x42LAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;12&quot;
        title=&quot;&quot;
        src=&quot;/static/12-0a907ce21374f6c5f267111f72931862-89095.png&quot;
        srcset=&quot;/static/12-0a907ce21374f6c5f267111f72931862-f17ae.png 300w,
/static/12-0a907ce21374f6c5f267111f72931862-8b9c0.png 600w,
/static/12-0a907ce21374f6c5f267111f72931862-89095.png 800w&quot;
        sizes=&quot;(max-width: 800px) 100vw, 800px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;</content:encoded></item><item><title><![CDATA[koa包教包会(一)——白话koa]]></title><description><![CDATA[学习 koa 的必要性 koa 是由 express 原班人马打造的，小巧的，健壮的 web 开发框架，也正因为它这些的优点，eggjs 等很多 web 框架的核心也是由 koa 驱动的，熟悉 koa 代码，不仅对于使用 koa 进行开发有很大帮助，也有助于深入理解像 eggjs…]]></description><link>https://knownsec-fed.com/2018-01-14-learn-koa-intro/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-01-14-learn-koa-intro/</guid><pubDate>Sun, 14 Jan 2018 03:47:59 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-31fad4487f570cd901c0147626041e16-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAd+LAD//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAEFAl//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAYEAEAAwEAAAAAAAAAAAAAAAABABEgMf/aAAgBAQABPyGCvSs//9oADAMBAAIAAwAAABDAD//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABYQAAMAAAAAAAAAAAAAAAAAAAAgwf/aAAgBAQABPxAsJf/Z&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;Header&quot;
        title=&quot;&quot;
        src=&quot;/static/header-31fad4487f570cd901c0147626041e16-d6978.jpeg&quot;
        srcset=&quot;/static/header-31fad4487f570cd901c0147626041e16-527f0.jpeg 300w,
/static/header-31fad4487f570cd901c0147626041e16-9a7cd.jpeg 600w,
/static/header-31fad4487f570cd901c0147626041e16-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h2&gt;学习 koa 的必要性&lt;/h2&gt;
&lt;p&gt;koa 是由 express 原班人马打造的，小巧的，健壮的 web 开发框架，也正因为它这些的优点，eggjs 等很多 web 框架的核心也是由 koa 驱动的，熟悉 koa 代码，不仅对于使用 koa 进行开发有很大帮助，也有助于深入理解像 eggjs 等这样的，功能更加强大的框架。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#%E7%9F%A5%E8%AF%86%E5%A4%8D%E4%B9%A0&quot;&gt;知识复习&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E4%BB%A3%E7%A0%81%E7%BB%93%E6%9E%84&quot;&gt;代码结构&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;知识复习&lt;/h3&gt;
&lt;p&gt;prototype 可以说是整个 javascript 的核心，是深入理解 javascript 关键知识点之一。&lt;br&gt;
delegate 是一种编程方式，可以简化我们的操作。&lt;/p&gt;
&lt;p&gt;1.1 首先声明“父类”(或子类的原型)&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; Car &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;get&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;engine&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  start&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;engine&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; start`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;1.2 使用用父类创建子类(父类在子类的原型链上)&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; BMW &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Object&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Car&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;1.3 动态的给子类添加属性&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;BMW&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;engine &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  name&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;v8&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;1.5 调用子类的方法&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;BMW&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// &apos;v8&apos;&lt;/span&gt;
BMW&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;start&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// &apos;v8 start&apos;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;1.6 定义代理对象&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; BMWPHONE &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;1.7 定义代理方法&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Delegate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;source&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; target&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;source &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; source&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;target &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; target&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

Delegate&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;prototype&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function-variable function&quot;&gt;method&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; target &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;target&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; source &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;source&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  source&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;target&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;apply&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;target&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; arguments&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;1.8 在代理对象上执行目标方法&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; delegate &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Delegate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;BMWPHONE&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;BMW&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
delegate&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;start&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
BMWPHONE&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;BMW &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; BMW&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
BMWPHONE&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;start&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;定义了 Car 父类，BMW 继承了 Car 方法，并给 BMW 安装了牛逼的引擎，现在可以通过 BMW 手动启动了；&lt;br&gt;
现在 BMW 开发一款手机，用手机操作代理手动启动。&lt;/p&gt;
&lt;p&gt;之所以举上面的例子（这里你会体会到 js 和静态语言的巨大差异），是因为 koa 中 4 个文件中，有 3 个都是与原型和代理相关。&lt;/p&gt;
&lt;h3&gt;代码结构&lt;/h3&gt;
&lt;p&gt;koa 非常小巧，总共就 4 个文件，每个文件的功能也十分单一，文件名也清楚的反应了文件功能。&lt;/p&gt;
&lt;p&gt;koa 的文件结构&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;├── application.js
├── context.js
├── request.js
└── response.js&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;request.js&lt;/p&gt;
&lt;p&gt;主要针对 http 的 request 对象提供了改对象的大量的 get 方法，文件主要是用来&lt;strong&gt;获取&lt;/strong&gt; request 对象属性，参考 1.1。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;response.js&lt;/p&gt;
&lt;p&gt;主要针对 http 的 response 对象提供了该对象的大量 set 方法；该文件主要是用来&lt;strong&gt;设置&lt;/strong&gt; response 对象属性，参考 1.1。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;context.js&lt;/p&gt;
&lt;p&gt;koa 引入了上下文对象的概念，即 ctx，这里所谓的上下文对象实际上是 request 和 response 两个对象的并集，request 和 response 分别通过&lt;strong&gt;代理&lt;/strong&gt;的形式，参考 1.8，将自己的方法委托给 ctx。那样我们就可以用 ctx 同时操作两个对象，来简化操作。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;application.js&lt;/p&gt;
&lt;p&gt;该文件是整个 koa 的核心，简单来说主要有两大功能: &lt;strong&gt;挂载真实请求到 ctx 下，封装中间件的执行顺序&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token function&quot;&gt;createContext&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;req&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; context &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Object&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;context&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; request &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;request &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Object&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;request&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; response &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;response &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Object&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;create&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;response&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;app &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;app &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; response&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;app &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;req &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;req &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; response&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;req &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; req&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  context&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;res &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;res &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; response&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;res &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ctx &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; response&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;ctx &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; context&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  request&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;response &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; response&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  response&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;request &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; request&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;这里 createContext 就是上小节 1.3 中的操作—继承原型链上的方法，给原型链上的方法准备数据。&lt;br&gt;
这里做了很多冗余的挂载(冗余是为了兼容 express 部分写法)，如果你只需要用 ctx，那么其中部分挂载可以省略。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;module&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;exports &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; compose&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;compose&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;middleware&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;context&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; next&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; index &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;i &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; index&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; Promise&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;next() called multiple times&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      index &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; i&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; fn &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; middleware&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;i&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;i &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; middleware&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;length&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; fn &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; next&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;fn&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; Promise&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; Promise&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
          &lt;span class=&quot;token function&quot;&gt;fn&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;context&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;i &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
          &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token class-name&quot;&gt;err&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; Promise&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;reject&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;err&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;koa 中间件的特点是逆序执行，或者说是洋葱模型。以上 compose 方法就是实现洋葱模型的代码，上面方法简单来说就是: &lt;strong&gt;将下个中间件的方法体，替换上个中间件的 next 参数&lt;/strong&gt;。 compose 方法应该算是 koa 中最难理解的部分了。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;use&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;function1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ctx&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; next&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1.1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1.2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
app&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;use&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;function2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ctx&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; next&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2.1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2.2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;经过 compose 函数处理后，实际执行代码可以看做:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;function1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ctx&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1.1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// next 部分&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;function2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ctx&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2.1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;
        console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2.2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ctx&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  conosle&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1.2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;ctx&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;那么可以看出洋葱模型的特点: &lt;strong&gt;先注册的中间件，位于模型的最外侧&lt;/strong&gt;。&lt;br&gt;
实际上 koa 主要做了两件事情：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;&lt;em&gt;封装 ctx&lt;/em&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;em&gt;组装中间件，实现逆序执行的洋葱模型&lt;/em&gt;&lt;/strong&gt;。&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;总结&lt;/h2&gt;
&lt;p&gt;与 hapi，eggjs 比起来，koa 真的十分小巧，以至于不能称作一种框架，可以看做一种库，但这并不妨碍 koa 生态的发展。&lt;/p&gt;
&lt;p&gt;express 当初也是大而全的框架，慢慢的把各种功能已中间件的形式抽离出来，koa 可以看做这种思想的一种实现。大而全的框架主要存在起初的学习成本高，功能冗余等问题，使用 koa 对于初次使用 nodejs 开发 web 的人员非常友好，但也存在一定问题，过于灵活编程，导致编程方式千差万别，没有一个统一的标准，不同工程代码之间学习成本高。&lt;/p&gt;
&lt;p&gt;对于初学者来说，建议从 koa 入手，使用不同的中间件来实现不同的功能，对于了解 web 开发有很大帮助。当有一定积累和经验后，可以自己约定 koa 编程规则，当自己编程规则无法满足需求时，就可以入手真正的框架了。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[自己动手写一个 SimpleVue]]></title><description><![CDATA[最近看到一句话很有感触 —— 有人问 35 岁之后你还会在写代码吗？各种中年程序员的言论充斥的耳朵，好像中年就不该写代码了，但是我想说，若干年以后，有人问你闲来无事你会干什么，我想我会说，写代码，我想这个答案就够了，年龄不是你不爱的理由。 理论基础 双向绑定是 MVVM…]]></description><link>https://knownsec-fed.com/2018-01-13-zi-ji-dong-shou-xie-yi-ge-simplevue/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-01-13-zi-ji-dong-shou-xie-yi-ge-simplevue/</guid><pubDate>Sat, 13 Jan 2018 07:20:30 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-f0b08c7250e24c1bbc82345e98f547eb-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIB/8QAFgEBAQEAAAAAAAAAAAAAAAAAAAIE/9oADAMBAAIQAxAAAAG6xOID/8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQABBQJf/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAGBABAAMBAAAAAAAAAAAAAAAAAQARIDH/2gAIAQEAAT8hiBxvP//aAAwDAQACAAMAAAAQjC//xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAwEBPxCn/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGxAAAQQDAAAAAAAAAAAAAAAAAQARIUEgMWH/2gAIAQEAAT8QTRtTFCge4//Z&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;自己动手写一个 SimpleVue&quot;
        title=&quot;&quot;
        src=&quot;/static/header-f0b08c7250e24c1bbc82345e98f547eb-d6978.jpeg&quot;
        srcset=&quot;/static/header-f0b08c7250e24c1bbc82345e98f547eb-527f0.jpeg 300w,
/static/header-f0b08c7250e24c1bbc82345e98f547eb-9a7cd.jpeg 600w,
/static/header-f0b08c7250e24c1bbc82345e98f547eb-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;最近看到一句话很有感触 —— 有人问 35 岁之后你还会在写代码吗？各种中年程序员的言论充斥的耳朵，好像中年就不该写代码了，但是我想说，若干年以后，有人问你闲来无事你会干什么，我想我会说，写代码，我想这个答案就够了，年龄不是你不爱的理由。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;理论基础&lt;/h2&gt;
&lt;p&gt;双向绑定是 MVVM 框架最核心之处，那么双向绑定的核心是什么呢？核心就是 &lt;code&gt;Object.defineProperty&lt;/code&gt; 这个 API，关于这个 API 的具体内容，请移步 &lt;a href=&quot;https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty&quot;&gt;MDN - Object.defineProperty&lt;/a&gt; ，里面有更详细的说明。&lt;/p&gt;
&lt;p&gt;接下来我们来看一下 Vue 是怎么设计的：&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/vue-f52e8e256cc37f69381f72454d177ad6-89095.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 800px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 52.5%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAAB4ElEQVQoz42TS2sTURTHx+/h11AEN+InUDdKN9KtuJCigpsuElApKGpBqi6sYGMDLgQVoyCGSF+ItI2QWGqLpokZJ8kkmUxm5s7j/pwZo3k0qBcO95x7z/2fx/9chTFLSjmkR1bQk/ist2uWwZXNNCdWbzKdf0rbsVBGgX6D6bpOVVXxQhQhTKztBHZpHseVCFfEPhfXUxxZSHJ+bpHDiwkurT9BkdKnL7InYTa+h3DMOBuxO4OfUZDZA9T23qHVTBp2m5OvZ7l95z3ZR7vcms1x9EVyOMPBZdgelWY31oNmjmDlIGL5ELq6jedH5QRczi5w/WGGjbdlkvOvmFpKofj6GyLx2qthKS4yzKxQMTj3uMDE/Typte+YXZdqOQTqGhjNDk7XjBtatXQSS8+4kEpzde05DdFBKeeOU8oewy5O0qqpdOoaNzI7TDz4xFR6izP38qg/dHxHMMBViNc32nT/6Er1w1m0j5OYX6bDvrnxYbZY5/TcJqfubnDt5U5YXTBEWkxc1OcBEqM9ssNOC+qVr7Ta+q/IPYeo7NxWA9v1+6M08Fgi9weJMmy1DDS1hmk5+0ZndC7/504pFAoUPxexbHvoIggkfiD/CjbuIyilvQrfSuWQSeufD8cBjQb8CSKQMscvHkO5AAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;vue.png&quot;
        title=&quot;&quot;
        src=&quot;/static/vue-f52e8e256cc37f69381f72454d177ad6-89095.png&quot;
        srcset=&quot;/static/vue-f52e8e256cc37f69381f72454d177ad6-f17ae.png 300w,
/static/vue-f52e8e256cc37f69381f72454d177ad6-8b9c0.png 600w,
/static/vue-f52e8e256cc37f69381f72454d177ad6-89095.png 800w&quot;
        sizes=&quot;(max-width: 800px) 100vw, 800px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;图中有几个重要的模块：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;监听者(Observer):&lt;/strong&gt; 这个模块的主要功能是给 data 中的数据增加 &lt;code&gt;getter&lt;/code&gt; 和 &lt;code&gt;setter&lt;/code&gt;，以及往观察者列表中增加观察者，当数据变动时去通知观察者列表。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;观察者列表(Dep):&lt;/strong&gt; 这个模块的主要作用是维护一个属性的观察者列表，当这个属性触发 &lt;code&gt;getter&lt;/code&gt; 时将观察者添加到列表中，当属性触发 &lt;code&gt;setter&lt;/code&gt; 造成数据变化时通知所有观察者。 &lt;/li&gt;
&lt;li&gt;&lt;strong&gt;观察者(Watcher):&lt;/strong&gt; 这个模块的主要功能是对数据进行观察，一旦收到数据变化的通知就去改变视图。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;我们简化一下 Vue 里的各种代码，只关注我们刚刚说的那些东西，实现一个简单版的 Vue。&lt;/p&gt;
&lt;h2&gt;Coding Time&lt;/h2&gt;
&lt;p&gt;我们就拿 Vue 的一个例子来检验成果。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-html&quot;&gt;&lt;code&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;body&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;app&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;p&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;{{ message }}&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;p&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
    &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;button&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;&lt;span class=&quot;token namespace&quot;&gt;v-on:&lt;/span&gt;click&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;reverseMessage&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;逆转消息&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;button&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;body&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;script&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;vue/index.js&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;script&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;vue/observer.js&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;script&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;vue/compile.js&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;script&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;vue/watcher.js&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;script&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;src&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;vue/dep.js&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token script language-javascript&quot;&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; vm &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Vue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  el&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;#app&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  data&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    message&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Hello Vue.js!&apos;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  methods&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    reverseMessage&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;message &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;message&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;reverse&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  mounted&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;setTimeout&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;message &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;I am changed after mounte&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;2000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;script&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h3&gt;new Vue()&lt;/h3&gt;
&lt;p&gt;首先，看 Vue 的源码我们就能知道，在 Vue 的构造函数中我们完成了一系列的初始化工作，以及生命周期钩子函数的设置。那我们的简易版 Vue 该怎么写呢？我们在使用 Vue 的时候是通过一个构造函数来开始使用，所以我们的简易代码也从构造函数开始。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Vue&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;options&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; options&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;methods &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; options&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;methods&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;mounted &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; options&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;mounted&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;el &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; options&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;el&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 代理 data&lt;/span&gt;
    Object&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;keys&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;key &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;proxy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 监听 data&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;observe&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 编译模板&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; compile &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Compile&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;el&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 生命周期其实就是在完成一些操作后调用的函数,&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 所以有些属性或者实例在一些 hook 里其实还没有初始化，&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 也就拿不到相应的值&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;callHook&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;mounted&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;proxy&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    Object&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;defineProperty&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; key&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      enumerable&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      configurable&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;newVal&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; newVal&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;callHook&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;lifecycle&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;lifecycle&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;可以看到我们在构造函数中实例化了 Vue，并且对 data 进行代理，为什么我们要进行代理呢？原因是通过代理我们就能够直接通过 &lt;code&gt;this.message&lt;/code&gt; 操作 message，而不需要 &lt;code&gt;this.data.message&lt;/code&gt;，代理的关键也是我们上面所说的 &lt;code&gt;Object.defineProperty&lt;/code&gt;。而生命周期其实在代码中也是在特定时间点调用的函数，所以我们做一些操作的时候也要去想想，它初始化完成没有，新手经常犯的错误就是在没有完成初始化的时候去进行操作，所以对生命周期的理解是非常重要的。&lt;/p&gt;
&lt;p&gt;好了，完成了初始化，下面我们就要开始写如何监听这些数据的变化了。&lt;/p&gt;
&lt;h3&gt;Observer&lt;/h3&gt;
&lt;p&gt;通过上面的认识，我们知道，Observer 主要是给 data 的每个属性都加上 &lt;code&gt;getter&lt;/code&gt; 和 &lt;code&gt;setter&lt;/code&gt;，以及在触发相应的 &lt;code&gt;get&lt;/code&gt;、&lt;code&gt;set&lt;/code&gt; 的时候执行的功能。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Observer&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; data&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;walk&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;walk&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    Object&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;keys&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;key &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;defineReactive&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  
  &lt;span class=&quot;token function&quot;&gt;defineReactive&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;key&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; val&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; dep &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Dep&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; observeChild &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;observe&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;val&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    Object&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;defineProperty&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; key&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      enumerable&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      configurable&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Dep&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;target&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          dep&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addSub&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;Dep&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;target&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; val&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;set&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;newVal&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;newVal &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; val&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        val &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; newVal&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        dep&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;notify&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;observe&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;newVal&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;observe&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; vm&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;value &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;typeof&lt;/span&gt; value &lt;span class=&quot;token operator&quot;&gt;!==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;object&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Observer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;在上面，我们完成了对 data 的监听，通过递归调用实现了对每个属性值的监听，给每个数据都添加了 setter 和 getter，在我们对数据进行取值或者是赋值操作的时候都会触发这两个方法，基于这两个方法，我们就能够做更多的事了。&lt;/p&gt;
&lt;p&gt;现在我们知道了怎么监听数据，那么我们如何去维护观察者列表呢？我相信有些朋友和我一样，看到 get 中的 Dep.target 有点懵逼，这到底是个啥，怎么用的，带着这个疑问，我们来看看观察者列表是如何实现的。&lt;/p&gt;
&lt;h3&gt;Dep&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Dep&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;subs &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;addSub&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;sub&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;subs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;sub&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;notify&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;subs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;sub &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; sub&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

Dep&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;target &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;在 Dep 中我们维护一个观察者列表(subs)，有两个基础的方法，一个是往列表中添加观察者，一个是通知列表中所有的观察者。可以看到我们最后一行的 &lt;code&gt;Dep.target = null;&lt;/code&gt;，可能大家会好奇，这东西是干什么用的，其实很好理解，我们定义了一个全局的变量 &lt;code&gt;Dep.target&lt;/code&gt;，又因为 JavaScript 是单线程的，同一时间只可能有一个地方对其进行操作，那么我们就能够在观察者触发 &lt;code&gt;getter&lt;/code&gt; 的时候，将自己赋值给 &lt;code&gt;Dep.target&lt;/code&gt;，然后添加到对应的观察者列表中，这也就是上面的 &lt;code&gt;Observer&lt;/code&gt; 的 &lt;code&gt;getter&lt;/code&gt; 中有个对 &lt;code&gt;Dep.target&lt;/code&gt; 的判断的原因，然后当 &lt;strong&gt;Watcher&lt;/strong&gt; 被添加到列表中，这个全局变量又会被设置成 &lt;code&gt;null&lt;/code&gt;。当然了这里面有些东西还需要在 Watcher 中实现，我们接下来就来看看 &lt;strong&gt;Watcher&lt;/strong&gt; 如何实现。&lt;/p&gt;
&lt;h3&gt;Watcher&lt;/h3&gt;
&lt;p&gt;在写代码之前我们先分析一下，Watcher 需要一些什么基础功能，Watcher 需要订阅 Dep，同时需要更新 View，那么在代码中我们实现两个函数，一个订阅，一个更新。那么我们如何做到订阅呢？看了上面的代码我们应该有个初步的认识，我们需要在 &lt;code&gt;getter&lt;/code&gt; 中去将 Watcher 添加到 Dep 中，也就是依靠我们上面说的 &lt;code&gt;Dep.target&lt;/code&gt;，而更新我们使用回调就能做到，我们看代码。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt; &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Watcher&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;vm&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; exp&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; cb&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;vm &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; vm&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;exp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; exp&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cb &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; cb&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    Dep&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;target &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; value &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;vm&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;exp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;trim&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    Dep&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;target &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;update&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; newVal &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;vm&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;exp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;trim&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value &lt;span class=&quot;token operator&quot;&gt;!==&lt;/span&gt; newVal&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; newVal&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cb&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;vm&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; newVal&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;那么，我们有了 Watcher 之后要在什么地方去调用它呢？想这个问题之前，我们要思考一下，我们如何拿到你在 &lt;code&gt;template&lt;/code&gt; 中写的各种 &lt;code&gt;{{message}}&lt;/code&gt;、&lt;code&gt;v-text&lt;/code&gt;等等指令以及变量。对，我们还有一个模版编译的过程，那么我们是不是可以在编译的时候去触发 &lt;code&gt;getter&lt;/code&gt;，然后我们就完成了对这个变量的观察者的添加，好了说了那么多，我们来看下下面的模块如何去做。&lt;/p&gt;
&lt;h3&gt;Compile&lt;/h3&gt;
&lt;p&gt;Compile 主要要完成的工作就是把 template 中的模板编译成 HTML，在编译的时候拿到变量的过程也就触发了这个数据的 &lt;code&gt;getter&lt;/code&gt;，这时候就会把观察者添加到观察者列表中，同时也会在数据变动的时候，触发回调去更新视图。我们下面就来看看关于 Compile 这个模块该怎么去完成。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token comment&quot;&gt;// 判断节点类型&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; nodeType &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;isElement&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;nodeType &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;isText&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;nodeType &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 更新视图&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; updater &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; val&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;textContent &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; val&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// 还有 model 啥的，但实际都差不多&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Compile&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;constructor&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;el&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; vm&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;vm &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; vm&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;el &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;querySelector&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;el&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;fragment &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;init&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;el&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;fragment &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;nodeToFragment&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;el&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;compileElement&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;fragment&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;el&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;appendChild&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;fragment&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;nodeToFragment&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;el&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 使用 document.createDocumentFragment 的目的就是减少 Dom 操作&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; fragment &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; document&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;createDocumentFragment&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;let&lt;/span&gt; child &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; el&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;firstChild&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token comment&quot;&gt;// 将原生节点转移到 fragment&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;while&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;child&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      fragment&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;appendChild&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;child&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      child &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; el&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;firstChild&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; fragment&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// 根据节点类型不同进行不同的编译&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;compileElement&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;el&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; childNodes &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; el&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;childNodes&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    
    &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;slice&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;call&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;childNodes&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; reg &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token regex&quot;&gt;/\{\{(.*)\}\}/&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; text &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;textContent&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

      &lt;span class=&quot;token comment&quot;&gt;// 根据不同的 node 类型，进行编译，分别编译指令以及文本节点&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;nodeType&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isElement&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;compileEl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;nodeType&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;isText&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; reg&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;test&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;text&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;compileText&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; reg&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;exec&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;text&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

      &lt;span class=&quot;token comment&quot;&gt;// 递归的对元素节点进行深层编译&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;childNodes &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;childNodes&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;length&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;compileElement&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token comment&quot;&gt;// 在这里我们就完成了对 Watcher 的添加&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;compileText&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; exp&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; value &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;vm&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;exp&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;trim&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    updater&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; value&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Watcher&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;vm&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; exp&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;val&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      updater&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; val&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;compileEl&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; attrs &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;attributes&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    Object&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;values&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;attrs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;attr &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; name &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; attr&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;name&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;indexOf&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;v-&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; exp &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; attr&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token comment&quot;&gt;// 只做事件绑定&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; eventDir &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; name&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;substring&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;eventDir&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;indexOf&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;on&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&gt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
          &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;compileEvent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; eventDir&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; exp&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;compileEvent&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;node&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; dir&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; exp&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; eventType &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; dir&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;:&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; cb &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;vm&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;methods&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;exp&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;eventType &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; cb&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      node&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addEventListener&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;eventType&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; cb&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;bind&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;vm&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;这就是 Compile 完成的部分工作，当然了这个模块不会这么简单，这里只是简单的实现了一点功能，如今 &lt;a href=&quot;https://cn.vuejs.org/v2/guide/&quot;&gt;Vue 2.0&lt;/a&gt; 引入了 Virtual DOM，对元素的操作也不像这么简单了。&lt;/p&gt;
&lt;p&gt;最后实现的功能由于我比较懒，大家可以自己写一写或者在我的 &lt;a href=&quot;https://github.com/balancelove/SimpleVue&quot;&gt;GitHub 仓库&lt;/a&gt;里可以看到。&lt;/p&gt;
&lt;h2&gt;总结&lt;/h2&gt;
&lt;p&gt;上面的代码也借鉴了前人的想法，但由于时间比较久了，所以我也没找到，感谢大佬提供思路。&lt;/p&gt;
&lt;p&gt;Vue 的设计很有意思，在学习之中也能有很多不一样的感受，同时，在读源码的过程中，不要过多的追求读懂每一个变量，每一个句子。第一遍代码，先读懂程序是怎么跑起来的，大概是怎么走的，通读一遍，第二遍再去深究，扣一扣当时不清楚的东西，这是我看源码的一些心得，可能每个人的方法不一样，希望你能有所收获。&lt;/p&gt;
&lt;p&gt;最后，因为 &lt;a href=&quot;https://cn.vuejs.org/v2/guide/&quot;&gt;Vue 2.0&lt;/a&gt; 已经出来一段时间了，源码也有很多的变动，生命周期的变化、Virtual DOM 等等，还有比较感兴趣的 diff 算法，这些后续会继续研究的，谢谢。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[【译】React Web 动画的 5 种创建方式，每一种都不简单]]></title><description><![CDATA[原文地址 ： React Animations in Depth 作者 ：Nader Dabit 在  Tweet  得到很多大佬关于  React Web 动画  不错的的回应，于是决定在这里分享给大家 以下便是本文要分享的创建  React 动画  的几种方式。 CSS…]]></description><link>https://knownsec-fed.com/2018-01-12-translation-React-Animations-in-Depth/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-01-12-translation-React-Animations-in-Depth/</guid><pubDate>Thu, 11 Jan 2018 16:36:35 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-772b9056a34c15f58bf4cf6bf00c21c8-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB3psAf//EABgQAAIDAAAAAAAAAAAAAAAAAAABAhEg/9oACAEBAAEFAmRd5//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEABj8CX//EABkQAAIDAQAAAAAAAAAAAAAAAAERACAhQf/aAAgBAQABPyFgMDhGeDlf/9oADAMBAAIAAwAAABDzz//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABkQAQEAAwEAAAAAAAAAAAAAABEBACBRMf/aAAgBAQABPxCkMfEytcxDq91//9k=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;Header&quot;
        title=&quot;&quot;
        src=&quot;/static/header-772b9056a34c15f58bf4cf6bf00c21c8-d6978.jpeg&quot;
        srcset=&quot;/static/header-772b9056a34c15f58bf4cf6bf00c21c8-527f0.jpeg 300w,
/static/header-772b9056a34c15f58bf4cf6bf00c21c8-9a7cd.jpeg 600w,
/static/header-772b9056a34c15f58bf4cf6bf00c21c8-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;&lt;code&gt;原文地址&lt;/code&gt;：&lt;a href=&quot;http://t.cn/R9DyGsz&quot;&gt;React Animations in Depth&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;作者&lt;/code&gt;：Nader Dabit&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;在 &lt;a href=&quot;http://t.cn/RQVluB2&quot;&gt;Tweet&lt;/a&gt; 得到很多大佬关于 &lt;code&gt;React Web 动画&lt;/code&gt; 不错的的回应，于是决定在这里分享给大家&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;以下便是本文要分享的创建 &lt;code&gt;React 动画&lt;/code&gt; 的几种方式。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;CSS animation&lt;/li&gt;
&lt;li&gt;JS Style&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://t.cn/RLeuFGX&quot;&gt;React Motion&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://t.cn/R9d015g&quot;&gt;Animated&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://t.cn/R9dOzS1&quot;&gt;Velocity React&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;下面，就让我们开始吧。&lt;/p&gt;
&lt;h2&gt;CSS animation&lt;/h2&gt;
&lt;p&gt;给元素添加 &lt;code&gt;class&lt;/code&gt; 是最简单，最常见的书写方式。如果你的 &lt;code&gt;app&lt;/code&gt; 正在使用 &lt;code&gt;CSS&lt;/code&gt;，那么这将是你最愉快的选择。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;赞同者&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;我们只需修改 opacity 和 transform 这样的属性，就可构建基本的动画，而且，在组件中，我们可以非常容易地通过 state 去更新这些值。&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;&lt;code&gt;反对者&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;这种方式并不跨平台，在 React Native 中就不适用，而且，对于较复杂的动画，这种方式难以控制。&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;接下来，我们通过一个实例来体验一下这种创建方式：&lt;code&gt;当 input focus 的时候，我们增加它的宽度&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;首先，我们要创建两个 &lt;code&gt;input&lt;/code&gt; 要用到的 &lt;code&gt;class&lt;/code&gt;。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-css&quot;&gt;&lt;code&gt;&lt;span class=&quot;token selector&quot;&gt;.input&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 150px&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;padding&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 10px&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;font-size&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 20px&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;border&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; none&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;border-radius&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 4px&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;background-color&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; #dddddd&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;transition&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; width .35s linear&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;outline&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; none&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token selector&quot;&gt;.input-focused&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token property&quot;&gt;width&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; 240px&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;一个是它 &lt;code&gt;原始&lt;/code&gt; 的样式，一个是它 &lt;code&gt;focus&lt;/code&gt; 后的样式。&lt;/p&gt;
&lt;p&gt;下面，我们就开始书写我们的 &lt;code&gt;React 组件&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;在此，推荐一个可以 &lt;a href=&quot;https://codesandbox.io/&quot;&gt;在线编写 React&lt;/a&gt; 的工具，官网做的也很 Nice，读者不想构建自己的 &lt;code&gt;React app&lt;/code&gt;，可以在其中检验以下代码的正确性。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/animation-34e12b363e28584285837b5b9fbaca03.gif&quot; alt=&quot;animation&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;App&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  state &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    focused&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;componentDidMount&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;_input&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addEventListener&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;focus&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;focus&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;_input&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addEventListener&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;blur&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;focus&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function-variable function&quot;&gt;focus&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;prevState &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      focused&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;prevState&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;focused&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div className&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;App&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div className&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;container&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;input
            ref&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;input &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;_input &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; input&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
            className&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;input&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;focused &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;input-focused&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos; &apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;我们有一个 &lt;code&gt;focused&lt;/code&gt; 的 &lt;code&gt;state&lt;/code&gt;，初始值为 &lt;code&gt;false&lt;/code&gt;，我们通过 &lt;code&gt;更新该值&lt;/code&gt; 来创建我们的动画。&lt;/li&gt;
&lt;li&gt;在 &lt;code&gt;componentDidMount&lt;/code&gt; 中，我们添加两个 &lt;code&gt;监听器&lt;/code&gt;，一个 &lt;code&gt;focus&lt;/code&gt;，一个 &lt;code&gt;blur&lt;/code&gt;，指定的 &lt;code&gt;回调函数都&lt;/code&gt;是 &lt;code&gt;focus&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;focus&lt;/code&gt; 方法会获取之前 &lt;code&gt;focused&lt;/code&gt; 的值，并负责 &lt;code&gt;切换&lt;/code&gt; 该值。&lt;/li&gt;
&lt;li&gt;在 &lt;code&gt;render&lt;/code&gt; 中，我们通过 &lt;code&gt;state&lt;/code&gt; 来改变 &lt;code&gt;input&lt;/code&gt; 的 &lt;code&gt;classNames&lt;/code&gt;，从而实现我们的动画。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;JS Style&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;JavaScipt styles&lt;/code&gt; 跟 &lt;code&gt;CSS 中的 classes&lt;/code&gt; 类似，在 &lt;code&gt;JS&lt;/code&gt; 文件中，我们就可以拥有所有逻辑。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;赞同者&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;跟 CSS 动画一样，且它的表现更加清晰。它也不失为一个好方法，可以不必依赖任何 CSS。&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;&lt;code&gt;反对者&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;跟 CSS 动画一样，也是不跨平台的，且动画一旦复杂，也难以控制。&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;在下面的实例中，我们将创建一个 &lt;code&gt;input&lt;/code&gt;，当用户输入时，我们将一个 &lt;code&gt;button&lt;/code&gt; 从 &lt;code&gt;disable&lt;/code&gt; 转变为 &lt;code&gt;enable&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/Style-204b6a2d062a79cb40464757c4080aec.gif&quot; alt=&quot;style&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;App&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  state &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    disabled&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function-variable function&quot;&gt;onChange&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; length &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;target&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;length&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;length &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; disabled&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; disabled&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; disabled &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; label &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; disabled &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Disabled&apos;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;Submit&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div style&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;styles&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;App&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;input
          style&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;styles&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;input&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
          onChange&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;onChange&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;button
          style&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;Object&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;assign&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            styles&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;button&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;disabled &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; styles&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;buttonEnabled
          &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
          disabled&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;disabled&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
          &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;label&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;button&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;


&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; styles &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  App&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    display&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;flex&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    justifyContent&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;left&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  input&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    marginRight&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    padding&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    width&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;190&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    fontSize&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    border&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;none&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    backgroundColor&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;#ddd&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    outline&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;none&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  button&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    width&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;90&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    height&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;43&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    fontSize&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;17&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    border&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;none&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    borderRadius&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    transition&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;.25s all&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    cursor&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;pointer&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  buttonEnabled&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    width&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;120&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    backgroundColor&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;#ffc107&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;我们有一个 &lt;code&gt;disabled&lt;/code&gt; 的 &lt;code&gt;state&lt;/code&gt;，初始值为 &lt;code&gt;true&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;onChange&lt;/code&gt; 方法会获取用户的输入，当输入非空时，就切换 &lt;code&gt;disabled&lt;/code&gt; 的值。&lt;/li&gt;
&lt;li&gt;根据 &lt;code&gt;disabled&lt;/code&gt; 的值，确定是否将 &lt;code&gt;buttonEnabled&lt;/code&gt; 添加到 &lt;code&gt;button&lt;/code&gt; 中。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;React Motion&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;React Motion&lt;/code&gt; 是 &lt;a href=&quot;https://medium.com/@chenglou&quot;&gt;Cheng Lou&lt;/a&gt; 书写的一个非常不错的开源项目。它的思想是你可以对 &lt;code&gt;Motion 组件&lt;/code&gt; 进行简单的 &lt;code&gt;样式设置&lt;/code&gt;，然后你就可以在 &lt;code&gt;回调函数&lt;/code&gt; 中通过这些值，享受动画带来的乐趣。&lt;/p&gt;
&lt;p&gt;对于绝大多数的动画组件，我们往往不希望对 &lt;code&gt;动画属性&lt;/code&gt;（宽高、颜色等）的变化时间做 &lt;code&gt;硬编码&lt;/code&gt;处理，&lt;code&gt;react-motion&lt;/code&gt; 提供的 &lt;code&gt;spring&lt;/code&gt; 函数就是用来解决这一需求的，它可以逼真地模仿真实的物理效果，也就是我们常见的各类 &lt;code&gt;缓动效果&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;下面是一个&lt;code&gt;简单&lt;/code&gt;的示例。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Motion style&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; x&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;spring&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;x&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; x &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div style&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; transform&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`translateX(&lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;x&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;px)`&lt;/span&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Motion&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;这是官方提供的几个 &lt;code&gt;demo&lt;/code&gt;，真的可以是 &lt;code&gt;不看不知道，一看吓一跳&lt;/code&gt;。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://t.cn/R9epBQV&quot;&gt;Chat Heads&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://t.cn/R9eprR8&quot;&gt;Draggable Balls&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://t.cn/R9epdOH&quot;&gt;TodoMVC List Transition&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://t.cn/R9epgoj&quot;&gt;Water Ripples&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://t.cn/R9epe9u&quot;&gt;Draggable List&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;赞同者&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;React Motion 可以在 React Web 中使用，也可以在 React Native 中使用，因为它是跨平台的。其中的 spring 概念最开始对我来说感觉挺陌生，然而上手之后，发现它真的很神奇，并且，它有很详细的 API。&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;&lt;code&gt;反对者&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;在某些情况下，他不如纯 CSS / JS 动画，虽然它有不错的 API，容易上手，但也需要学习成本。&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;为了使用它，首先我们要用 &lt;code&gt;yarn&lt;/code&gt; 或 &lt;code&gt;npm&lt;/code&gt; 安装它。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;yarn add react-motion&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;在下面的实例中，我们将创建一个 &lt;code&gt;dropdown 菜单&lt;/code&gt;，当点击按钮时，下拉菜单友好展开。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/Motion-e49f3a4bf698d2c8ad341252be5fd4d6.gif&quot; alt=&quot;motion&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; Motion&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; spring &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;react-motion&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;App&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  state &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    height&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;38&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function-variable function&quot;&gt;animate&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; height&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;height &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;233&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;38&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;233&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div className&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;App&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div style&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;styles&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;button&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; onClick&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;animate&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;Animate&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Motion
          style&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; height&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;spring&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;height&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
          &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; height &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt;
            &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div style&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;Object&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;assign&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; styles&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;menu&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; height &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
              &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;p style&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;styles&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;selection&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;Selection &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
              &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;p style&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;styles&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;selection&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;Selection &lt;span class=&quot;token number&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
              &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;p style&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;styles&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;selection&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;Selection &lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
              &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;p style&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;styles&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;selection&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;Selection &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
              &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;p style&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;styles&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;selection&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;Selection &lt;span class=&quot;token number&quot;&gt;5&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
              &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;p style&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;styles&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;selection&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;Selection &lt;span class=&quot;token number&quot;&gt;6&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
            &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
          &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Motion&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; styles &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  menu&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    marginTop&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    width&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;300&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    border&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;2px solid #ddd&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    overflow&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;hidden&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  button&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    display&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;flex&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    width&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    height&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;45&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    justifyContent&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;center&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    alignItems&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;center&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    border&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;none&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    borderRadius&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    backgroundColor&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;#ffc107&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    cursor&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;pointer&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  selection&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    margin&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    padding&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    borderBottom&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;1px solid #ededed&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;我们从 &lt;code&gt;react-motion&lt;/code&gt; 中 import &lt;code&gt;Motion&lt;/code&gt; 和 &lt;code&gt;spring&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;我们有一个 &lt;code&gt;height&lt;/code&gt; 的 &lt;code&gt;state&lt;/code&gt;，初始值为 &lt;code&gt;38&lt;/code&gt;，代表 &lt;code&gt;menu&lt;/code&gt; 的高度。&lt;/li&gt;
&lt;li&gt;&lt;code&gt;animate&lt;/code&gt; 方法设置 &lt;code&gt;menu&lt;/code&gt; 的 &lt;code&gt;height&lt;/code&gt;，如果 &lt;code&gt;原 height&lt;/code&gt; 为 &lt;code&gt;38&lt;/code&gt;，则设置 &lt;code&gt;新 height&lt;/code&gt; 为 &lt;code&gt;233&lt;/code&gt;，如果 &lt;code&gt;原 height&lt;/code&gt; 为 &lt;code&gt;233&lt;/code&gt;，则设置 &lt;code&gt;新 height&lt;/code&gt; 为 &lt;code&gt;38&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;在 &lt;code&gt;render&lt;/code&gt; 中，我们使用 &lt;code&gt;Motion 组件&lt;/code&gt; 包装整个 &lt;code&gt;p 标签&lt;/code&gt; 列表，将 &lt;code&gt;this.state.height&lt;/code&gt; 的当前值设为组件的 &lt;code&gt;height&lt;/code&gt;，然后在组件的&lt;code&gt;回调函数&lt;/code&gt;中使用该值作为整个下拉的高度。&lt;/li&gt;
&lt;li&gt;当按钮被点击时，我们通过 &lt;code&gt;this.animate&lt;/code&gt; 切换下拉的高度。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Animated&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;Animated&lt;/code&gt; 是基于 &lt;code&gt;React Native&lt;/code&gt; 使用的同一个动画库建立起来的。&lt;/p&gt;
&lt;p&gt;它背后的思想是创建 &lt;code&gt;声明式动画&lt;/code&gt;，通过 &lt;code&gt;传递配置对象来控制动画&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;赞同者&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;跨平台，它在 React Native 中已经非常稳定，如果你在 React Native 中使用过，那么你将不用再重复学习。其中的 interpolate 是一个神奇的插值函数，我们将在下面看到。&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;&lt;code&gt;反对者&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;基于 Twitter 的交流，它目前貌似不是 100% 的稳定，在老的浏览器中的，存在前缀和性能的问题，而且，它也有学习成本。&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;为了使用 &lt;code&gt;Animated&lt;/code&gt;，我们首先还是要用 &lt;code&gt;yarn&lt;/code&gt; 或 &lt;code&gt;npm&lt;/code&gt; 安装它。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;yarn add animated&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;在下面的实例中，我们将模拟在提交表单成功后显示的动画 &lt;code&gt;message&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/Animated-bfcec915be7c2143a50deaeaa3edd1f0.gif&quot; alt=&quot;animated&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Animated &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;animated/lib/targets/react-dom&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; Easing &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;animated/lib/Easing&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;AnimatedApp&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  animatedValue &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Animated&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Value&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

  &lt;span class=&quot;token function-variable function&quot;&gt;animate&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;animatedValue&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setValue&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    Animated&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;timing&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;animatedValue&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        toValue&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        duration&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1000&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        easing&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; Easing&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;elastic&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;start&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; marginLeft &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;animatedValue&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;interpolate&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      inputRange&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      outputRange&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;120&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div className&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;App&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div style&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;styles&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;button&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; onClick&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;animate&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;Animate&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Animated&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;div
            style&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
              Object&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;assign&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                styles&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;box&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; opacity&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;animatedValue&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; marginLeft &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
            &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;Thanks &lt;span class=&quot;token keyword&quot;&gt;for&lt;/span&gt; your submission&lt;span class=&quot;token operator&quot;&gt;!&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;Animated&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; styles &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  button&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    display&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;flex&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    width&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;125&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    height&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;50&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    justifyContent&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;center&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    alignItems&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;center&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    border&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;none&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    borderRadius&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    backgroundColor&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;#ffc107&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    cursor&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;pointer&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  box&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    display&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;inline-block&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    marginTop&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    padding&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;0.6rem 2rem&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    fontSize&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;0.8rem&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    border&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;1px #eee solid&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    borderRadius&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    boxShadow&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;0 2px 8px rgba(0,0,0,.2)&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;从 &lt;code&gt;animated&lt;/code&gt; 中 import &lt;code&gt;Animated&lt;/code&gt; 和 &lt;code&gt;Easing&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;用 &lt;code&gt;new Animated.Value(0)&lt;/code&gt; 创建一个值为 &lt;code&gt;0&lt;/code&gt; 的类属性 - &lt;code&gt;animatedValue&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;创建 &lt;code&gt;animate&lt;/code&gt; 方法，处理所有的动画，首先通过 &lt;code&gt;this.animatedValue.setValue(0)&lt;/code&gt; 初始化动画值，实现的效果就是每次 &lt;code&gt;重新执行&lt;/code&gt; 该动画，然后调用 &lt;code&gt;Animated.timing&lt;/code&gt;，&lt;code&gt;animatedValue&lt;/code&gt; 作为第一个参数传递，&lt;code&gt;配置对象&lt;/code&gt; 作为第二个参数，一个设置 &lt;code&gt;最终动画值&lt;/code&gt;，一个设置 &lt;code&gt;持续时间&lt;/code&gt;，一个设置 &lt;code&gt;缓动效果&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;在 &lt;code&gt;render&lt;/code&gt; 中，我们用 &lt;code&gt;interpolate&lt;/code&gt; 方法创建 &lt;code&gt;marginLeft&lt;/code&gt; 对象，包含 &lt;code&gt;inputRange&lt;/code&gt; 和 &lt;code&gt;outputRange&lt;/code&gt; 数组，我们使用此对象作为 &lt;code&gt;UI&lt;/code&gt; 中 &lt;code&gt;message&lt;/code&gt; 的 &lt;code&gt;style&lt;/code&gt; 属性。&lt;/li&gt;
&lt;li&gt;我们使用 &lt;code&gt;Animated.div&lt;/code&gt; 替代默认的 &lt;code&gt;div&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;我们将 &lt;code&gt;animatedValue&lt;/code&gt; 和 &lt;code&gt;marginLeft&lt;/code&gt; 作为 &lt;code&gt;Animated.div&lt;/code&gt; 的 &lt;code&gt;style&lt;/code&gt; 属性。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Velocity React&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;Velocity React&lt;/code&gt; 是基于已经存在的 &lt;code&gt;Velocity&lt;/code&gt; 建立起来的。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;赞同者&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;上手容易，API 简单明了，相对其他库更易于掌握。&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;&lt;code&gt;反对者&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;有些不得不克服的问题，比如 componentDidMount 后动画并没有真正地起作用等，而且，它不跨平台。&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;下面是一个&lt;code&gt;简单&lt;/code&gt;的示例。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;VelocityComponent
  animation&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; opacity&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;showSubComponent &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;      
  duration&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;MySubComponent&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;VelocityComponent&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;首先还是要用 &lt;code&gt;yarn&lt;/code&gt; 或 &lt;code&gt;npm&lt;/code&gt; 安装它。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;yarn add velocity-react&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;在下面的实例中，我们将创建一个很酷的 &lt;code&gt;动画输入&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/Velocity-15dcf4b0275a48bd9eb19f73a58132a8.gif&quot; alt=&quot;Velocity&quot;&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; VelocityComponent &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;velocity-react&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;VelocityLetter&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; letter &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;VelocityComponent
    runOnMount
    animation&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; opacity&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; marginTop&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    duration&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;500&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;p style&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;styles&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;letter&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;letter&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;p&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;VelocityComponent&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;VelocityApp&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Component&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  state &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    letters&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function-variable function&quot;&gt;onChange&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;e&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; letters &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; e&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;target&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;value&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; arr &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

    letters&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;forEach&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;l&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; i&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      arr&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;push&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;VelocityLetter letter&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;l&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setState&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt; letters&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; arr &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div className&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;App&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div className&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;container&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;input onChange&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;onChange&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; style&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;styles&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;input&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div style&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;styles&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;letters&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
            &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
              &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;state&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;letters
            &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
          &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; styles &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  input&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    marginBottom&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;20&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    padding&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;8&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    width&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;200&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    height&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;40&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    fontSize&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;22&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    backgroundColor&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;#ddd&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    border&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;none&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    outline&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;none&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  letters&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    display&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;flex&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    height&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;140&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  letter&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    marginTop&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    fontSize&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;22&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    whiteSpace&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;pre&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
    opacity&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;从 &lt;code&gt;velocity-react&lt;/code&gt; 中 import &lt;code&gt;VelocityComponent&lt;/code&gt;。&lt;/li&gt;
&lt;li&gt;我们要创建一个 &lt;code&gt;可重复&lt;/code&gt; 使用的组件来满足每个 &lt;code&gt;letter&lt;/code&gt; 的动画。&lt;/li&gt;
&lt;li&gt;在这个组件中，我们将 &lt;code&gt;animation&lt;/code&gt; 的 &lt;code&gt;opacity&lt;/code&gt; 设为 &lt;code&gt;1&lt;/code&gt;，&lt;code&gt;marginTop&lt;/code&gt; 设为 &lt;code&gt;0&lt;/code&gt;，这些值代表着传入子组件的 &lt;code&gt;重写值&lt;/code&gt;，即当组件被创建时，组件的 &lt;code&gt;opacity&lt;/code&gt; 会由初始的 &lt;code&gt;0&lt;/code&gt; 变为 &lt;code&gt;1&lt;/code&gt;，&lt;code&gt;marginTop&lt;/code&gt; 会由初始的 &lt;code&gt;100&lt;/code&gt; 变为 &lt;code&gt;0&lt;/code&gt;，我们还设置了 &lt;code&gt;500 ms&lt;/code&gt; 的持续时间，最后值得一提的是 &lt;code&gt;runOnMount&lt;/code&gt; 属性，它的意思是在组件 &lt;code&gt;挂载&lt;/code&gt; 或 &lt;code&gt;创建&lt;/code&gt; 完后执行该动画。&lt;/li&gt;
&lt;li&gt;其中的 &lt;code&gt;onChange&lt;/code&gt; 方法会获取用户的每次输入，并创建一个由 &lt;code&gt;VelocityLetter&lt;/code&gt; 组成的新数组。&lt;/li&gt;
&lt;li&gt;在 &lt;code&gt;render&lt;/code&gt; 中，我们就使用该数组在 &lt;code&gt;UI&lt;/code&gt; 中渲染 &lt;code&gt;letters&lt;/code&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;总结&lt;/h2&gt;
&lt;p&gt;总的来说，基本的动画，我会选择 &lt;code&gt;JS style&lt;/code&gt;，复杂的动画，我更偏向 &lt;code&gt;React Motion&lt;/code&gt;。而对于 &lt;code&gt;React Native&lt;/code&gt;，我还是坚持使用 &lt;code&gt;Animated&lt;/code&gt;，一旦 &lt;code&gt;Animated&lt;/code&gt; 成熟，在 &lt;code&gt;Web&lt;/code&gt; 中可能也会投入使用，目前，我很享受 &lt;code&gt;React Motion&lt;/code&gt;。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[如何扩展 Create React App 的 Webpack 配置]]></title><description><![CDATA[Create React App （以下简称 CRA）是创建 React 应用的一个脚手架，它与其他脚手架不同的一个地方就是将一些复杂工具（比如 webpack）的配置封装了起来，让使用者不用关心这些工具的具体配置，从而降低了工具的使用难度。 但是对于一些熟悉 webpack…]]></description><link>https://knownsec-fed.com/2018-01-10-ru-he-kuo-zhan-create-react-app-de-webpack-pei-zhi/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-01-10-ru-he-kuo-zhan-create-react-app-de-webpack-pei-zhi/</guid><pubDate>Wed, 10 Jan 2018 05:49:08 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-7887fb67fd981d9697e7399d05cffa8d-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAIBAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB3klUtAX/xAAZEAACAwEAAAAAAAAAAAAAAAABEAARITH/2gAIAQEAAQUCqDUer//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEABj8CX//EABsQAQABBQEAAAAAAAAAAAAAAAEQABEhMYHx/9oACAEBAAE/IUPtHK4nY1T/AP/aAAwDAQACAAMAAAAQr8//xAAVEQEBAAAAAAAAAAAAAAAAAAAQYf/aAAgBAwEBPxCn/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGhABAAIDAQAAAAAAAAAAAAAAAQARITFRgf/aAAgBAQABPxDMt+Ig0ZDqBRUTBXrDRP/Z&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;如何扩展 Create React App 的 Webpack 配置&quot;
        title=&quot;&quot;
        src=&quot;/static/header-7887fb67fd981d9697e7399d05cffa8d-d6978.jpeg&quot;
        srcset=&quot;/static/header-7887fb67fd981d9697e7399d05cffa8d-527f0.jpeg 300w,
/static/header-7887fb67fd981d9697e7399d05cffa8d-9a7cd.jpeg 600w,
/static/header-7887fb67fd981d9697e7399d05cffa8d-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/facebookincubator/create-react-app&quot;&gt;Create React App&lt;/a&gt;（以下简称 CRA）是创建 React 应用的一个脚手架，它与其他脚手架不同的一个地方就是将一些复杂工具（比如 webpack）的配置封装了起来，让使用者不用关心这些工具的具体配置，从而降低了工具的使用难度。&lt;/p&gt;
&lt;p&gt;但是对于一些熟悉 webpack 的开发者来说，他们可能想对 webpack 配置做一些修改，这个时候应该怎么办呢？&lt;/p&gt;
&lt;p&gt;其实我们可以通过以下几种方式来修改 webpack 的配置：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;项目 eject&lt;/li&gt;
&lt;li&gt;替换 react-scripts 包&lt;/li&gt;
&lt;li&gt;使用 react-app-rewired&lt;/li&gt;
&lt;li&gt;scripts 包 + override 组合&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;下面对这几种方式分别进行介绍。&lt;/p&gt;
&lt;h2&gt;项目 eject&lt;/h2&gt;
&lt;p&gt;使用 CRA 创建完项目以后，项目在&lt;code&gt;package.json&lt;/code&gt;里面提供了这样一个命令：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-json&quot;&gt;&lt;code&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  ...
  &lt;span class=&quot;token property&quot;&gt;&quot;scripts&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token property&quot;&gt;&quot;eject&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;react-scripts eject&quot;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  ...
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;执行完这个命令——&lt;code&gt;yarn run eject&lt;/code&gt;后会将封装在 CRA 中的配置全部&lt;code&gt;反编译&lt;/code&gt;到当前项目，这样用户就可以完全取得 webpack 文件的控制权，想怎么修改就怎么修改了。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-sh&quot;&gt;&lt;code&gt;# eject 后项目根目录下会出现 config 文件夹，里面就包含了 webpack 配置
config
├── env.js
├── jest
│   ├── cssTransform.js
│   └── fileTransform.js
├── paths.js
├── polyfills.js
├── webpack.config.dev.js // 开发环境配置
├── webpack.config.prod.js // 生产环境配置
└── webpackDevServer.config.js&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;CRA 与其他脚手架不同的另一个地方，就是可以通过升级其中的&lt;code&gt;react-scripts&lt;/code&gt;包来升级 CRA 的特性。比如用老版本 CRA 创建了一个项目，这个项目不具备 &lt;a href=&quot;https://developers.google.com/web/progressive-web-apps/&quot;&gt;PWA&lt;/a&gt; 功能，但只要项目升级了&lt;code&gt;react-scripts&lt;/code&gt;包的版本就可以具备 PWA 的功能，项目本身的代码不需要做任何修改。&lt;/p&gt;
&lt;p&gt;但如果我们使用了&lt;code&gt;eject&lt;/code&gt;命令，就再也享受不到 CRA 升级带来的好处了，因为&lt;code&gt;react-scripts&lt;/code&gt;已经是以文件的形式存在于你的项目，而不是以包的形式，所以无法对其升级。&lt;/p&gt;
&lt;h2&gt;替换 react-scripts 包&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/facebookincubator/create-react-app/tree/8cae659ec5a066eff8ea270346dc8c1ef064f9aa/packages/react-scripts&quot;&gt;react-scripts&lt;/a&gt; 是 CRA 的一个核心包，一些脚本和工具的默认配置都集成在里面，使用 CRA 创建项目默认就是使用这个包，但是 CRA 还提供了另外一种方式来创建 CRA 项目，即使用自定义 scripts 包的方式。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-sh&quot;&gt;&lt;code&gt;# 默认方式
$ create-react-app foo

# 自定义 scripts 包方式
$ create-react-app foo --scripts-version 自定义包&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;&lt;code&gt;自定义包&lt;/code&gt;可以是下面几种形式：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;react-scripts&lt;/code&gt;包的版本号，比如&lt;code&gt;0.8.2&lt;/code&gt;，这种形式可以用来安装低版本的&lt;code&gt;react-scripts&lt;/code&gt;包。&lt;/li&gt;
&lt;li&gt;一个已经发布到 npm 仓库上的包的名字，比如&lt;code&gt;your-scripts&lt;/code&gt;，里面包含了修改过的 webpack 配置。&lt;/li&gt;
&lt;li&gt;一个 tgz 格式的压缩文件，比如&lt;code&gt;/your/local/scripts.tgz&lt;/code&gt;，通常是未发布到 npm 仓库的自定义 scripts 包，可以用 &lt;code&gt;npm pack&lt;/code&gt; 命令生成。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;这种方式相对于之前的&lt;code&gt;eject&lt;/code&gt;是一种更灵活地修改 webpack 配置的方式，而且可以做到和 CRA 一样，通过升级 scrips 包来升级项目特性。&lt;/p&gt;
&lt;p&gt;自定义 scripts 包的结构可以参照&lt;code&gt;react-scripts&lt;/code&gt;包的结构，只要修改对应的 webpack 配置文件，并安装上所需的 webpack loader 或 plugin 包就可以了。&lt;/p&gt;
&lt;h2&gt;使用 react-app-rewired&lt;/h2&gt;
&lt;p&gt;虽然有这两种方式可以扩展 webpack 配置，但是很多开发者还是觉得太麻烦，有没有一种方式可以既不用&lt;code&gt;eject&lt;/code&gt;项目又不用创建自己的 scripts 包呢？答案是肯定的，&lt;a href=&quot;https://github.com/timarney/react-app-rewired&quot;&gt;react-app-rewired&lt;/a&gt; 是 react 社区开源的一个修改 CRA 配置的工具。&lt;/p&gt;
&lt;p&gt;在 CRA 创建的项目中安装了&lt;code&gt;react-app-rewired&lt;/code&gt;后，可以通过创建一个&lt;code&gt;config-overrides.js&lt;/code&gt; 文件来对 webpack 配置进行扩展。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token comment&quot;&gt;/* config-overrides.js */&lt;/span&gt;

module&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function-variable function&quot;&gt;exports&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;override&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;config&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; env&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;//do stuff with the webpack config...&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; config&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;&lt;code&gt;override&lt;/code&gt;方法的第一个参数&lt;code&gt;config&lt;/code&gt;就是 webpack 的配置，在这个方法里面，我们可以对 &lt;code&gt;config&lt;/code&gt; 进行扩展，比如安装其他 loader 或者 plugins，最后再将这个 &lt;code&gt;config&lt;/code&gt; 对象返回回去。&lt;/p&gt;
&lt;p&gt;最后再修改&lt;code&gt;package.json&lt;/code&gt;中的脚本命令，修改内容请见&lt;a href=&quot;https://github.com/timarney/react-app-rewired#3-flip-the-existing-calls-to-react-scripts-in-npm-scripts&quot;&gt;这里&lt;/a&gt;。&lt;/p&gt;
&lt;h2&gt;scripts 包 + override 组合&lt;/h2&gt;
&lt;p&gt;虽然&lt;code&gt;react-app-rewired&lt;/code&gt;的方式已经可以很方便地修改 webpack 的配置了，但其实我们也可以在自定义的 script 包中实现类似的功能。&lt;/p&gt;
&lt;p&gt;在&lt;code&gt;react-app-rewired&lt;/code&gt;的源码中可以看到它核心的包也叫 &lt;a href=&quot;https://github.com/timarney/react-app-rewired/tree/4954531eaab6da14c4e3c943cb2038b46d5f9125/packages/react-app-rewired&quot;&gt;react-app-rewired&lt;/a&gt;，里面重新覆盖了&lt;code&gt;react-scripts&lt;/code&gt;中的几个脚本文件，包括&lt;code&gt;build.js&lt;/code&gt;、&lt;code&gt;start.js&lt;/code&gt;和&lt;code&gt;test.js&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;具体过程是怎样的呢？以&lt;code&gt;build.js&lt;/code&gt;为例：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;先获取 webpack 的基本配置，然后再调用&lt;code&gt;config-overrides.js&lt;/code&gt;（就是在根目录中新增的那个文件）中的&lt;code&gt;override&lt;/code&gt;方法，将原先的 webpack 对象作为参数传入，&lt;/li&gt;
&lt;li&gt;再取得经过修改后的 webpack 配置对象&lt;/li&gt;
&lt;li&gt;最后再调用&lt;code&gt;react-scripts&lt;/code&gt;中的&lt;code&gt;build.js&lt;/code&gt;脚本，传入修改后的 webpack 对象来执行命令，&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;具体源码如下：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; overrides &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;../config-overrides&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; webpackConfigPath &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; paths&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;scriptVersion &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&quot;/config/webpack.config.prod&quot;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// load original config&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; webpackConfig &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;webpackConfigPath&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// override config in memory&lt;/span&gt;
require&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;cache&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;require&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;resolve&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;webpackConfigPath&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;exports &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;
  overrides&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;webpack&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;webpackConfig&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;env&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;NODE_ENV&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// run original script&lt;/span&gt;
&lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;paths&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;scriptVersion &lt;span class=&quot;token operator&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;/scripts/build&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;知道了原理之后，我们也可以修改自定义 scripts 包的脚本文件，还是以&lt;code&gt;build.js&lt;/code&gt;为例，在获取基本 webpack 配置对象和使用 webpack 对象之间加入以下代码：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token comment&quot;&gt;// override config&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; override &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;paths&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;configOverrides&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; overrideFn &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; override &lt;span class=&quot;token operator&quot;&gt;||&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;config&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; env&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; config&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; overrideConfig &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;overrideFn&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;config&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; process&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;env&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;NODE_ENV&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;&lt;code&gt;overrideConfig&lt;/code&gt;就是修改后的 webpack 对象，最后修改调用了 webpack 对象的代码，将原来的 webpack 对象替换成修改后的 webpack 对象。&lt;/p&gt;
&lt;h2&gt;总结&lt;/h2&gt;
&lt;p&gt;CRA 是一个非常棒的 React 脚手架工具，但你如果不满足于它的 webpack 默认配置，你可以通过上述几种方式来扩展自己项目的 webpack 配置，这几种方式各有优缺点，可以结合具体的使用场景来选择合适自己的方式。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[3D GIS 应用开发 —— 基于 Mapbox GL 的实践总结]]></title><description><![CDATA[最近在折腾的 web 端的可视化项目，由于相关业务的需要，用到了 Mapbox 这一地图开发的神器。在此先奉上一个基于mapbox-gl实现的demo短片（来源： uber的deck.gl项目 ）： 下面我们从这个项目一步步来介绍 Mapbox 的前端 GIS…]]></description><link>https://knownsec-fed.com/2018-01-08-mapbox-gl-js/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-01-08-mapbox-gl-js/</guid><pubDate>Mon, 08 Jan 2018 03:03:39 GMT</pubDate><content:encoded>&lt;p&gt;最近在折腾的 web 端的可视化项目，由于相关业务的需要，用到了 Mapbox 这一地图开发的神器。在此先奉上一个基于mapbox-gl实现的demo短片（来源：&lt;a href=&quot;https://uber.github.io/deck.gl/#/&quot;&gt;uber的deck.gl项目&lt;/a&gt;）：&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/demo-e9a835903bbe48d46b1ad5291b22b36f.gif&quot; alt=&quot;demo&quot;&gt;&lt;/p&gt;
&lt;p&gt;下面我们从这个项目一步步来介绍 Mapbox 的前端 GIS 引擎 &lt;a href=&quot;https://github.com/mapbox/mapbox-gl-js&quot;&gt;Mapbox GL JS&lt;/a&gt;.&lt;/p&gt;
&lt;h1&gt;一、简单了解&lt;/h1&gt;
&lt;p&gt;首先，Mapbox 在地图领域是一家很 Newbee 的公司。已为 Foursquare、Pinterest、Evernote、金融时报、天气频道、优步科技 等公司的网站提供了订制在线地图服务。&lt;/p&gt;
&lt;p&gt;自2010年起，该公司快速地拓展了订制地图的市场地位，以回应 Google地图 等地图供应商提供的有限选择。Mapbox 是一些开放源代码地图库及应用程序的创建者或最大的贡献者，其中包含了MBTiles 规范、TileMill 制图 IDE、Leaflet JavaScript 库，以及 CartoCSS 地图格式化语言与语法分析器等。&lt;/p&gt;
&lt;p&gt;该公司的数据同时从开放与专有的来源获取，开放的数据源如 开放街图（OSM, Open Street Map） 以及 NASA 等，而专有的数据源则包含了 DigitalGlobe。其技术奠基于 Node.js、CouchDB、Mapnik、GDAL 与 Leafletjs。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-b0c867989f10ee45f45a3c046a9307aa-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIEA//EABcBAAMBAAAAAAAAAAAAAAAAAAECAwX/2gAMAwEAAhADEAAAAcaZG0Ygo4//xAAYEAEAAwEAAAAAAAAAAAAAAAABAAIRA//aAAgBAQABBQKV4NixjBcn/8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQMBAT8BJ//EABcRAAMBAAAAAAAAAAAAAAAAAAIQESH/2gAIAQIBAT8BOzF//8QAGRAAAgMBAAAAAAAAAAAAAAAAAAEQERIh/9oACAEBAAY/Ai9IqH2P/8QAGxABAAICAwAAAAAAAAAAAAAAAQARECExUaH/2gAIAQEAAT8hQrmeNO5b2GusAARrH//aAAwDAQACAAMAAAAQ88//xAAXEQADAQAAAAAAAAAAAAAAAAABEBFB/9oACAEDAQE/EI0L/8QAFxEBAQEBAAAAAAAAAAAAAAAAEQABIf/aAAgBAgEBPxAVosTt/8QAGhABAQADAQEAAAAAAAAAAAAAAREAECExsf/aAAgBAQABPxAQXtLJcIkB8r6MR16lVNGqHoGXuv/Z&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;Mapbox官网&quot;
        title=&quot;&quot;
        src=&quot;/static/header-b0c867989f10ee45f45a3c046a9307aa-d6978.jpeg&quot;
        srcset=&quot;/static/header-b0c867989f10ee45f45a3c046a9307aa-527f0.jpeg 300w,
/static/header-b0c867989f10ee45f45a3c046a9307aa-9a7cd.jpeg 600w,
/static/header-b0c867989f10ee45f45a3c046a9307aa-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;Mapbox 针对不同平台均开发了相应的 GIS 引擎以满足开发者或相关用户的需要，如：iOS SDK（用于iOS端开发）、Android SDK（用于Andriod端开发）、Navigation SDK（用于Navigation端开发）、Unity SDK（用于Unity端开发）、GL JS（用于web端开发）。不同平台的SDK，除使用方式不同外，功能特性上也多多少少存在不同。此外，Uber还针对react开发了 &lt;a href=&quot;https://github.com/uber/react-map-gl&quot;&gt;react-map-gl&lt;/a&gt;。总的来说，Mapbox的开源技术栈是非常全面的。&lt;/p&gt;
&lt;h1&gt;二、轻松上手&lt;/h1&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/mapbox_doc-19d2569d969e558d6d06fbabd70dc2c5-a43b2.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1025px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 87.21951219512195%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsSAAALEgHS3X78AAACpklEQVQ4y5VUy27UMBSdr2SDkNghdQFdIbFF0AUgVFggPoLfoFJLKxYIoZaChmlpO5OHndiO47wO5zqZaRcVAktH13ZuTu7j3MwKM8DXQGgGyOr7Hs42KMsQYcwIXXgUZY0sd8i157mOVvFe0y/NLZ+VmIW2Ic0wAchViZ13R9h+vodHO3vYevYRj98e4sn7z9h+c4iHu4fY2v2E+y/28YDnuy/3ce/1Ae68OsDTD8eYLfml0jdYL2MszlYWi8RHzJcV5rQ/lxY/ruxoie/cn64cTmhPeD6mXeQVZrkLWDGVrh8jrKoKfRtwvpjj4nyBLLmCSlf41zVLSPZbOTRtFy+c475pURQFlC6QsASpKtB2HT/ao+v6a7veE/0wRMyUcbAkCSFcE7YtMqWRFwaZNqwr93mONE2RZVncC7IsRZrlSLSFmco2Sw27ZQOGYdgQtiTMcxWdhUwpBa31RDISZrpkd00MxlEmoZkIla3h6iaGK0sceqbnQx2jbukoJWiivQF+VMogMuv7LkKCmmlTwVZ+E6G1lmIEvian7O4lUzexhhJ5XdcR3nvUhL8BuY+EGdNdUpxhaooRwqHH0ZmiTBQJCyzzgiI3kXT98m2IhCIZIZ1UEyNkgLj68g0X8zNo6tLxLtZqIrwNG8LS+Virppm6PBEOaQJP6Vg6BzpL3cTvb4iEufG45BxaGeipKfKyYopFWcai/8+Ko7fImEoz1rCeokmSBAl1V8V0AtOqUYUWFRVR8Sz78X5MdxNhUQXWcNSijJ9cimxKV0FRActMY8WmGJamtI5NcyhZV82RLdwkLZEQMaZc0oGkLcdoTSZpel+hYvoi4pK17Lp2esYRlDEkwa0p/2K6l/yvrdco1D52VCA/C0lLrJxFBbKPPxHJSBo4DBv8AZlTGAbKOnPnAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;Mapbox文档&quot;
        title=&quot;&quot;
        src=&quot;/static/mapbox_doc-19d2569d969e558d6d06fbabd70dc2c5-a43b2.png&quot;
        srcset=&quot;/static/mapbox_doc-19d2569d969e558d6d06fbabd70dc2c5-7f43b.png 300w,
/static/mapbox_doc-19d2569d969e558d6d06fbabd70dc2c5-774e0.png 600w,
/static/mapbox_doc-19d2569d969e558d6d06fbabd70dc2c5-a43b2.png 1025w&quot;
        sizes=&quot;(max-width: 1025px) 100vw, 1025px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;mapbox-gl 的 &lt;a href=&quot;https://www.mapbox.com/mapbox-gl-js/api/&quot;&gt;文档&lt;/a&gt; 由 API、Style Specification、Example、Plugins 四部分内容组成。&lt;/p&gt;
&lt;p&gt;顾名思义，API 是一般框架(类库)提供给用户的全部接口（方法）的说明书；Style Specification 是 Mapbox 地图的样式规范；Example 是一些常用功能或常见业务的代码示例，囊括了使用 Mapbox 所能实现的大部分功能效果；Plugins 则是官方推荐的可与 mapbox-gl 一同使用的一些增效插件和开源项目，如一些第三方的UI控件、显示类插件、框架集成工具、开发辅助工具、实用工具类库等等。&lt;/p&gt;
&lt;p&gt;对于初了解 Mapbox 的童鞋，建议先从官网的 Example 入手，能够较快掌握 mapbox-gl 的使用并投入开发实践。&lt;/p&gt;
&lt;h1&gt;三、快速实践&lt;/h1&gt;
&lt;p&gt;下面以文章开头展示的项目为主，介绍其实战步骤。&lt;/p&gt;
&lt;h2&gt;1. 加载地图：&lt;/h2&gt;
&lt;p&gt;由于使用在线地图服务和 &lt;code&gt;style&lt;/code&gt; 时需要验证用户 &lt;code&gt;token&lt;/code&gt;，所以在使用 &lt;code&gt;mapboxgl&lt;/code&gt; 时需要先配置用户 &lt;code&gt;token&lt;/code&gt;（在Mapbox官网注册用户即可获取）。&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;import&lt;/span&gt; mapboxgl &lt;span class=&quot;token keyword&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;mapbox-gl&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
mapboxgl&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;accessToken &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&amp;lt;Your Token Here&gt;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;接下来使用创建地图实例。主要配置项如下：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; myMap &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;mapboxgl&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;Map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  container&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&amp;lt;Id of Container Element&gt;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  style&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&amp;lt;Your Style Here&gt;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  center&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;112.508203125&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;37.97980872872457&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  zoom&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  pitch&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  bearing&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;其中，&lt;code&gt;container&lt;/code&gt; 是地图容器的元素 &lt;code&gt;id&lt;/code&gt;，&lt;code&gt;style&lt;/code&gt; 是地图样式的 &lt;code&gt;url&lt;/code&gt;，或者你自己定义的 &lt;code&gt;style&lt;/code&gt;（需遵循Mapbox样式规范），&lt;code&gt;center&lt;/code&gt; 是地图加载后默认的中心点位置，用以定位地图加载时的位置。&lt;code&gt;zoom&lt;/code&gt; &lt;code&gt;pitch&lt;/code&gt; &lt;code&gt;bearing&lt;/code&gt; 分别指缩放级别、地面法线偏移角、地轴偏移角等，用以确定当前视窗所显示的地图区域和空间关系。配置项的意义均可查看官网文档。&lt;/p&gt;
&lt;h2&gt;2. 绘制图形&lt;/h2&gt;
&lt;p&gt;这里主要介绍视频中的3D建筑、飞线动画等是如何实现的。这里以相关代码片段来介绍实践的方法。&lt;/p&gt;
&lt;p&gt;在Mapbox中绘制图形时， &lt;code&gt;layer&lt;/code&gt; 和 &lt;code&gt;source&lt;/code&gt; 是最重要的一组概念，后者用于存储图形的数据内容，前者则是图形在3D场景中的表现（图层）。在Mapbox中，图层一旦被创建，与其同名（&lt;code&gt;id&lt;/code&gt;相同）的数据源源（即&lt;code&gt;source&lt;/code&gt;）也必然被创建。反之，也可以在创建source后再创建一个图层使用这个已创建的数据源，这时数据源与图层间并不要求同名。而我们通过改变数据来驱动图形变化，便是才去的第二种方式：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token comment&quot;&gt;// 创建id为buildings的数据源&lt;/span&gt;
myMap&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addSource&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;buildings&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  type&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;geojson&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  data&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;&amp;lt;GeoJson Contents&gt;&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 使用buildings的数据来绘制id为building_layer的图形&lt;/span&gt;
myMap&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;addLayer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  id&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;building_layer&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  type&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;fill-extrusion&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  source&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;buildings&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
  &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;Other Options&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;基于上面的方式，当数据改变时，我们只需要重设数据源的数据，即可驱动图层重绘：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;myMap&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getLayer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;building_layer&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  myMap&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getSource&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;buildings&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setData&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;New &lt;span class=&quot;token class-name&quot;&gt;GeoJson&lt;/span&gt; Contents&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;至于3D效果及动画的具体实现，这里给出两个官网上的示例，相信大家能一目了然：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https://www.mapbox.com/mapbox-gl-js/example/3d-buildings/&quot;&gt;用3D形式呈现建筑&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&quot;https://www.mapbox.com/mapbox-gl-js/example/animate-point-along-route/&quot;&gt;给路径中的一个点添加动画效果&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;3. 图形交互&lt;/h2&gt;
&lt;p&gt;Mapbox提供的交互方法是比较灵活的，活学活用API文档便能实现各种炫酷、实用的交互效果。比如：使用
&lt;code&gt;myMap.on(&apos;zoom&apos;, callback)&lt;/code&gt; 可以将图形与地图的缩放相绑定，当缩放系数小于某个值时，可以隐藏掉一些图形元素：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;myMap&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;zoom&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;myMap&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;getZoom&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    myMap&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setLayoutProperty&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;building_layer&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;visibility&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;none&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    myMap&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;setLayoutProperty&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;building_layer&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;visibility&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;visible&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;再比如，连续调用 &lt;code&gt;myMap.flyTo()&lt;/code&gt; 的方法使视图在地图上按照一定的轨迹缓慢移动，可以给用户一种模拟飞行的体验。视频中的自动巡视的效果正是这样实现的。&lt;/p&gt;
&lt;p&gt;诸如 &lt;code&gt;click&lt;/code&gt; &lt;code&gt;mouseover&lt;/code&gt; &lt;code&gt;popup&lt;/code&gt; 等效果，官网文档中的示例已经具体呈现，这里就不详细展开了。&lt;/p&gt;
&lt;h2&gt;4. tiles-server的本地化&lt;/h2&gt;
&lt;p&gt;由于 Mapbox 地图服务使用 MBTiles 存储数据，目前很多地图服务都接受了这套标准（如：OSM，Open Street Map）。所以可以通过搭建自己的 tiles-server 以替代直接使用 Mapbox 的在线地图服务。&lt;/p&gt;
&lt;p&gt;这样做的好处是显而易见的：一是可以通过负载均衡等手段提高数据接口的访问速度，有效提高数据的加载速度；一是保障应用能在零带宽的环境下仍能有效部署和使用。&lt;/p&gt;
&lt;p&gt;这里墙裂安利一个docker开源镜像：openmaptiles-server ，在其 &lt;a href=&quot;https://openmaptiles.com/server/&quot;&gt;官网&lt;/a&gt; 和 &lt;a href=&quot;https://hub.docker.com/r/klokantech/openmaptiles-server/&quot;&gt;dockerhub&lt;/a&gt; 上均可下载。个人认为其最大的亮点在于——即使不了解内部实现，也不影响其使用。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/omts_site-32f8989ba2252edda7cdd83d0ef4000b-ce9bf.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1199px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 79.06588824020017%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAACmElEQVQ4y51SWU8TURSe36YRn9zSshqRQFkKijtCoRQUiYAkxAQflMgmQcEHg7b6J3wxgCxlkRfpMku3oZ3pzOe5pwtTH9R4k2/Ovd855zvn3LmS2zOA7v4peO6NwXP3KRq7HsPd3I8L13pwsbEXl6734Qqd6zuGUdcxhNq2AOq9w7ja+Yi4IbjI10Dn9gcTcLUMQHI195FjkBAgRwB17YNwt/jQ1D1CQePo7J1ER88EvA+fwUu27f4Ymu+MoqZ1gGIDVMBPoHzvEHF+SGdcXRA4W32zYN03GG6Pjzryc5GGzgBq2oSAH9WtPlxu6uHYqtpbOCdQ042quts4T5Bml9cw/y6IxdXPZD8xFlaCmF3+yJh7S9xKiGNeM7fG/OJqiOOEPc0LQUJ52bDzJmDlK1DgSjjlLNNgzs4bcC4pl80hb5pIp9KIx+JQZBmqokAmK8fjzJURLyAWjRGivI9GokgmkjANA0JLMnI5yCSgqhq0RIKtQDKZIiSRIC5HMXpGRzqdRiqVKto0c9lsFie6TvsMixYEZYWqyYhRFxGqHKUOFFWFpokCKieImONIhP3H1NXP4wiiMYqjZhRF5UJiUskgVdGFpmkMkWwUq1pm8d5o5SlOdJEjn813aZGAgQxxpU5ZUHycCB8cYXNnD+HDI+zs/8DW3iE2d/exsbOP9e0wvu8eYH1rF1+/bWA7fEA/Jc+FRS6PLD4lCPLNhy+YeLWE5/OrmJxZxvjLJYy+WMATgel5jEzP8Xlwagaz74NloVK+5DwI+/syaSxT+AhZ+ouWZVf6HbnlkStIGsG2bYZF9yTuxgmnX+z/KihE+JmLBKuQrJ/oOCGUiggrltj/s6BlW8joGX5z/O6KNqPr/yfoHJvh2P9J8BeBRFiyEP1qFgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;openmaptiles.com&quot;
        title=&quot;&quot;
        src=&quot;/static/omts_site-32f8989ba2252edda7cdd83d0ef4000b-ce9bf.png&quot;
        srcset=&quot;/static/omts_site-32f8989ba2252edda7cdd83d0ef4000b-33331.png 300w,
/static/omts_site-32f8989ba2252edda7cdd83d0ef4000b-581a5.png 600w,
/static/omts_site-32f8989ba2252edda7cdd83d0ef4000b-ce9bf.png 1199w&quot;
        sizes=&quot;(max-width: 1199px) 100vw, 1199px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;运行 tiles-server 服务的 docker 命令如下：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;$ docker run --rm -it -v $(pwd):/data -p 8080:80&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;然后剩下来需要做的事情就是打开其导航页面 &lt;a href=&quot;http://localhost:8080/&quot;&gt;http://localhost:8080/&lt;/a&gt;（端口号取决于你的启动命令），然后跟着页面上的提示一步一步设置就好了（最后一步设置后会从OSM自动下载地图，所以一开始你不用担心数据从哪来），完全是傻瓜式的部署。&lt;/p&gt;
&lt;h1&gt;四、性能调优&lt;/h1&gt;
&lt;p&gt;在 Mapbox GL 实践的过程中，发现了一些影响应用整体性能的因素，故而在此陈述一番，为之后填坑的童鞋提供一些经验：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;使用geo数据（如 GeoJson 格式数据）来定义图形的时候，若数据量过大，则会拖慢数据加载的速度，此时可考虑：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;在 http 请求前后对数据进行合理的压缩和解压，以尽可能节省 http 请求传输的数据量&lt;/li&gt;
&lt;li&gt;条件允许的情况下，可将一组数据分片加载，以空间换时间&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;在 Mapboox 中绘制的图层不宜过多，一是不方便管理（当然，github上有很多管理Mapbox图层的第三方工具），一是图层过多会明显降低GL的渲染和响应性能。所以在绘制图形前，可以先考虑一下图层的划分，以最少的图层实现尽可能多的效果。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;数据量相同的情况下，使用 &lt;code&gt;mapboxgl.Marker&lt;/code&gt; 来添加标记，其性能不如使用 &lt;code&gt;type&lt;/code&gt; 为 &lt;code&gt;symbol&lt;/code&gt; 类型的图层来添加标记。原因在于前者生成的标记是一个个 DOM 元素，如果你可以想象在一个 web 页面中同时操作成百上千个 DOM 节点会是什么结果，那么你或许能明白我的建议。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h1&gt;五、一点总结&lt;/h1&gt;
&lt;p&gt;最后，在此总结下个人对 Mapbox 的一些感观。&lt;/p&gt;
&lt;p&gt;Mapbox 的产品定位是随时随地的 GIS（跨平台、应用），它为我们提供了一系列的简单操作的 API，使得 GIS 开发变得灵活而有趣。尤其对于开发 GIS 类型的数据可视化应用，Mapbox 是绝佳的选择。&lt;/p&gt;
&lt;p&gt;然而，如果你只是为了那些绚丽的 3D 效果的话，或许选择专门的框架更为合适。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[【译】视觉吸引力在网页设计中的重要性]]></title><description><![CDATA[原文地址： The Importance of Visual Appeal in Web Design 作者：Robyn Collinge…]]></description><link>https://knownsec-fed.com/2018-01-07-the-importance-of-visual-appeal-in-web-design/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-01-07-the-importance-of-visual-appeal-in-web-design/</guid><pubDate>Sun, 07 Jan 2018 01:12:08 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-cdb4726e5011e25d077b76d384395a05-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQDBQb/xAAWAQEBAQAAAAAAAAAAAAAAAAACAQP/2gAMAwEAAhADEAAAAWHM5ZUqkI8v/8QAGhABAQACAwAAAAAAAAAAAAAAAQMAAhIhM//aAAgBAQABBQIom/LqlHWhs5JVv7f/xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAwEBPwEn/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGxABAAICAwAAAAAAAAAAAAAAAQACEBExcZH/2gAIAQEABj8Cd4sC+zlhtlu5/8QAGxABAAMBAAMAAAAAAAAAAAAAAQARIUEQUaH/2gAIAQEAAT8hQLp6lN8ZRkDmppftDFErr4L/2gAMAwEAAgADAAAAEO//AP/EABcRAQEBAQAAAAAAAAAAAAAAAAEAESH/2gAIAQMBAT8QWyuvb//EABcRAAMBAAAAAAAAAAAAAAAAAAABESH/2gAIAQIBAT8QeCh//8QAGhABAAMBAQEAAAAAAAAAAAAAAQARITFxof/aAAgBAQABPxBwMxVww5GnoHL8gZbwcCWdBu20HjggiGT70//Z&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;Header&quot;
        title=&quot;&quot;
        src=&quot;/static/header-cdb4726e5011e25d077b76d384395a05-d6978.jpeg&quot;
        srcset=&quot;/static/header-cdb4726e5011e25d077b76d384395a05-527f0.jpeg 300w,
/static/header-cdb4726e5011e25d077b76d384395a05-9a7cd.jpeg 600w,
/static/header-cdb4726e5011e25d077b76d384395a05-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;原文地址：&lt;a href=&quot;http://blog.usabilla.com/visual-appeal-web-design/&quot;&gt;The Importance of Visual Appeal in Web Design&lt;/a&gt;&lt;br&gt;
作者：Robyn Collinge&lt;/p&gt;
&lt;p&gt;网页设计举足轻重，这个概念已深入人心。我们都想要一个网站，希望它迎合了时下流形的设计标准。但是，一个网站的成功要素中，有多少应归功于视觉设计？&lt;/p&gt;
&lt;h2&gt;以貌取人&lt;/h2&gt;
&lt;p&gt;针对这个问题，首先我们需要认识到，设计的类别多种多样，例如有网页设计，视觉设计，平面设计，交互设计，界面设计，以及用户体验设计。&lt;/p&gt;
&lt;p&gt;让我们聚焦在网页的视觉吸引力，包括了网页设计，视觉设计或平面设计。&lt;/p&gt;
&lt;p&gt;视觉吸引力，是指满足眼睛需求的要素，包含了颜色、形状、图片、字体、留白和设计的整体视觉平衡。一个网页是否具有是具吸引力，影响了我们对其的接受程度、使用方式和留在记忆中的时间。&lt;/p&gt;
&lt;h2&gt;视觉吸引力在网页设计中的作用&lt;/h2&gt;
&lt;h3&gt;1. 吸引眼球&lt;/h3&gt;
&lt;p&gt;视觉吸引力是吸引眼球的第一要素，是吸引网站访客的关键所在。与丑陋或中性的设计相比，人们更倾向于选择充满吸引力的设计或图像。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/img1-e1250ac1c21b74ab0511ec70245f186e-4ed6a.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 940px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 48.08510638297873%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAACg0lEQVQozyWSSU8UQRiGa7q6ugfwJj/EuybGu0tC9EKiB4neOah40INggiK4EI0KKiBGxA0EhnUYdgjD4rDOACrLEHAIQQUTFZjHj6aSPnRVfW+9m1pfM0yMaZ48Nrx/59DWqnlWajMx7mduRrO8pPm+YlFb4xBftFhfswi122z98jHQrwgPZpBIFMtXxPBQFmpqQjMUNkxNGqJThti0xcqyj4Y6w0zM4sus9vaCrTZjny1Ghi1iUYvFeZ8AayKjiuGwYnJcybxC5ecrss4rCu8oSksUjx5a9Hbb1Hy06eqw6etx6AzZ5OX6KXlqyL1heFvtUPXaJeeKw/17LneL0qj7lEJDfSqq6tUhyl4co7XlCLMzh6l8mc5An6JWAJsbtUjVzAijgT5N2XMjdx0ZtmkPao9hfZ2mqNAR6VosM6jEZoR/O5Dc/cve6u46LZ4qOkIOIRkKNBhmYz6R7hNWhuIHLkODtmdLLGrknqGnW3v/t2+5qLnECD82k/ze+ukBFhRkiEwlQynC2nA1J4XKCpvr1/blZmb6RYlDYtXI437GI46osFmYt7h8KQ21/SfM/tpmZxeCwZPymhJGLl/nLGHoMDqiiS/5PHmBBpvRYe2F1RFyGR8z9PVaLHyzJAM/amOjn22RvCuSd5OwuHBKUlXczEsVkzXNTZJ2VEsLHA8oFJSwOrVURnPiuMXFC1oCc8VzQ3a2Bzjl8Usm93kuLpxhLKJoDLg0BbSk7qe/11D9xk9FuUvNB1fOLKmQJv2gj3NntfiaQnmZkXDEw9XVMqajXYSH6onHw+LNUaGvhJkj/bIkTZs5kbcH2hQwAiTgVTYtTbZUzaZb2DY3yn5Eutp2gP9KMxGC6Vp5IQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;img1&quot;
        title=&quot;&quot;
        src=&quot;/static/img1-e1250ac1c21b74ab0511ec70245f186e-4ed6a.png&quot;
        srcset=&quot;/static/img1-e1250ac1c21b74ab0511ec70245f186e-ffce4.png 300w,
/static/img1-e1250ac1c21b74ab0511ec70245f186e-51907.png 600w,
/static/img1-e1250ac1c21b74ab0511ec70245f186e-4ed6a.png 940w&quot;
        sizes=&quot;(max-width: 940px) 100vw, 940px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;WeTransfer 网站在主页背景上不断更替各种艺术家，设计师，插画师和摄影师的作品。这种鲜明和充满创意的形式，立刻抓住用户的注意力，并且给传输大型文件这种普通的行为注入了能量和美感。&lt;/p&gt;
&lt;h3&gt;2. 创造第一印象&lt;/h3&gt;
&lt;p&gt;第一印象会长期影响人们之间的关系，例如人们之间的喜欢程度、信任感和再次见面的冲动。基本上来说，在短短一小段时间之内，我们就会得出是否乐于与某人共度时光的判断。&lt;/p&gt;
&lt;p&gt;在网络上也是如此。一旦网页给人留下的第一印象是负面的，那么访客的感受始终都不会太好，也不见得会再次访问该网页。事实上，以貌取人的现象经常发生，也就是说，视觉吸引力在建立品牌吸引力方面起着重要作用。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/img2-fa993f91d2b049e22c61d657152cbb8f-4ed6a.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 940px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 47.97872340425531%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAAChklEQVQozyWSazeiURiG++uz1nxjhnEohIYa0UlHIlKIKEYaI4d6O73KFPKqdOKax8yHvfZe+3Dv576vR6c6tsgZV1HnfVwOWajMrlMzb1OdD1I0eFG/BynrveRGnBQmPJQNAYpjblm7efbGeQn/RIulKa6GiX/So8t+W6Kod1Ka83E7aqO+uI1m2+NhYRt1KkDTfcyL85A/s5sURt0oXxyyv0bVtEnVvEXNFuXOGqJgCZCZWkGnjK/IQZDspI3yjI/GUpSW44CGWS5Or3M35kVb2qftStJyJaibtsl/dVKckOqn/KjGAOqiuFnwczvnQleedlFbClExiZVxF5r7kM7+JZovQU0e34vovUEq0geomyO8bpzTi2Z4WI5SGHOJoJ+CXiKY9aCYPOgqc15KYrky60OVnD5yGVQa9PI1tHCKzu8Svew9nfgNr+kCnYzKu5y/H2Vp+5OUjD5uvi6jTDq4GbeiK0mF2WGz/GansZGkGUnTP8vzHDqjFfnF4LTA27kKuSd6sm7upOmdKfQOrmhvnvG0vEN+0klmyMy18NBVTX4qAiQ/sowWTTEo1ellyjRTOdqnWVqxS7qpPN1LlYFSo3tdoXl6S+siTz+l0FqN8WjbQZmwkf5sRPdgXqdkcFGSX54WQmhWgRI8pWbf49G8w4s9RtuT4Enya3uSaKtx7o0fsNy8+o/ohqRtPDGhvUV+xiltM2yhMG6XVtml8SNMwyIiayc8B2W4Dv4JNAMn/2exODjOCbBjms4Yb+FzOusJASlt5ghTXdmQDPUOHq1baPYo9fkNqUREHTFePuCELxjEbng7yNKPZOjvXdH0JugIjL646G2eiOAxDfcud4t+lBkHfwGBWZ1w6uOZ6gAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;img2&quot;
        title=&quot;&quot;
        src=&quot;/static/img2-fa993f91d2b049e22c61d657152cbb8f-4ed6a.png&quot;
        srcset=&quot;/static/img2-fa993f91d2b049e22c61d657152cbb8f-ffce4.png 300w,
/static/img2-fa993f91d2b049e22c61d657152cbb8f-51907.png 600w,
/static/img2-fa993f91d2b049e22c61d657152cbb8f-4ed6a.png 940w&quot;
        sizes=&quot;(max-width: 940px) 100vw, 940px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;创意机构 Snask 的主页风格色彩明亮，斑斓，趣味十足。游客一眼便能看到品牌的创意力，同时清楚地了解他们的工作。&lt;/p&gt;
&lt;h3&gt;3. 建立关系&lt;/h3&gt;
&lt;p&gt;视觉吸引力也可以建立关系。如果访问者能够识别您的网站，那么与他们建立长期合作关系的可能性也会巨大的提升，当然这也是最终的目标。&lt;/p&gt;
&lt;p&gt;我们喜欢通过我们的兴趣、爱好以及我们热衷的事物来定义自己。一些喜好类型的网站往往会使我们产生共鸣。我们的浏览的网页可以看作是我们生活方式选择的延伸，这些强化我们身份的网站对我们更具吸引力。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/img3-613fb6e7a16f4736dbbe826cac3434c0-4ed6a.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 940px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 48.191489361702125%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAAB80lEQVQoz61Sz2sTQRidTYwmGuLiskmKYkxi60EIFLHSRKS0iHgQaXpQFDzqOYcePAT037D2P8ghOeUXMawtEbRYKUhBG0tzEE1S2M0muzG/nplPs4qCJz94fG9m3r55M7MsFovB7XZDlmVIkgRRFOH3++H1eqn7fD4IjMFutxNsNhucTiccDgcikQiSySQSiQRmZi5AEASwcrmMbDaLYrGIfD6PXC6HQqFAfYJMJvMXUqkUKpUKVFVFs9kE90mn02D4z8VGo9E/Bf1+nzAYDNDr9az53zkvvs51TNN0bFa28HprB9s7u3i/u4cPewf4WD3A5y9fScw3HQ6HxOv1Omq1GvH9/U+oVqtoNBqWjr3cfAPBcxEOaRZH5Us45r0M9+komBjBzfgDa/dJra8/x9raM/pYURSUSiVomvbL8MXGKxw/MwtPYB7i+WsQwwtjfgXMNYUbt+KWIUe328XhYROqpqLTNa3UEzO6w6JShhgKQg5PIzQfw7no2DA4DTb+bZYfPiKR3m5TCv6iuq7TuNVpE+fH5d1KWNpQIIXP4lRgCi7JgyMnT8AVCoAFA4ivrv54mJ/pDMOAaZpk3OGmrRaZ8TnL8O27bazcu4OV+3excH0Jc1ejWFy+jbmlRTx++oSEfx6NG1NS04BqdGD2vllr3wHWcXGMvGlSBwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;img3&quot;
        title=&quot;&quot;
        src=&quot;/static/img3-613fb6e7a16f4736dbbe826cac3434c0-4ed6a.png&quot;
        srcset=&quot;/static/img3-613fb6e7a16f4736dbbe826cac3434c0-ffce4.png 300w,
/static/img3-613fb6e7a16f4736dbbe826cac3434c0-51907.png 600w,
/static/img3-613fb6e7a16f4736dbbe826cac3434c0-4ed6a.png 940w&quot;
        sizes=&quot;(max-width: 940px) 100vw, 940px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;看看阿迪达斯的网站。通过与 Parley 的合作，将回收的海洋垃圾制造成高性能的运动服装，品牌希望通过销售一种关注环境未来的生活方式，引起很多观众的共鸣。这次营销重点强调了简单，网站采用了简洁的设计，添加了增加视觉吸引力的视频内容，教育用户爱护环境。&lt;/p&gt;
&lt;h3&gt;4. 增加容忍度&lt;/h3&gt;
&lt;p&gt;视觉吸引力本身就是一种品质。您可以使用它来掩盖您的网站的其他不太方便的方面。显然，设计和建立完美的网站应该是最终的目标。但是，为实现这个大目标，实现这么多不同的要素将会是一件困难的任务。&lt;/p&gt;
&lt;p&gt;因此，最终你的网站在某些方面会很棒，但始终会存在可改进的空间。如果您的视觉设计十分优秀，那么您的访客对网页的其他不足之处将会更加宽容。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/img4-ed9a13d1d9522e515f5a3a9f575fdcac-4ed6a.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 940px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 47.87234042553191%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAACxUlEQVQoz12MbUzMAQDG/zYvH5gZEvM28sEQdWU0RU1eejndda1r7tRVV0lRLtEbIkMKIVovzFg2FusDWm+SVMbdaf+7ypg6U1nHl+7kZeTnL1/Ms/327Nme5xG+i2ZsxXd4GVuCJbUMcc8VxJQrWCS3JF3GkiyR+Mf/ZlHK1v3lEhVY0//SbahETCrlfXULwuvCQiyGDFqnB9MghNM0QUGj5H9omK6mYaKKOhc19ZNVUo4a77RMi+bx7F3jtMzS8nhODE1TIuhJLkNonhXFs/BdGN00tM9Not11Nx1bk2hz1yPmRNC2Jpbe43KeyqIR88Jok+l4Fhgn9RLpcNXT6RJP57wEnkyO4u3BGwjGqTrMLnpMs5MxuSfSvkVHj0FOV0g4Q2d9MftEUq8KocNTjb3Ki67tCl5nyXmp1tIldY0zUzAvSeX5JC221GsIovtBrIvTsCzIoFcWx6sgfwYzPelTBTKSu5znPkoS5wXQ6KGEm248XSeneKGcgZwA+iJViC6ZdC/ci1WWw6eHZunQI5u3yzJ545ZLj/dOeoOX8vmGJx8KVvM124NaxUYSNkdzVR3Al3syypV+KFftYKDUk5EUBb3z86T9Aaw+R/lQb0KwuRqwLc9jeFEWNaEF5B/Lp716JzWnQ6mL0VKxNoj7KzUc9Q5BlxFGfJSGov1lVBUq6UzWMjD/MO9W5NE/Yy+fDLcR7OsLGd5cwuiGM1zX3yL+UjVXD6VxOkXDnSwtRR5bOOwVSJp/GOqSPSTo9JRnl3EgXUNNXAIO34sMB57H7n0K59lGhLGPTn7YR+DLGI+q71KgUdB8wo/aWC9ag3ypXOtP6fZUTm4L5lxuKPsiFIT5RXItPZju2svg+MVPaT9md/LL+Q2Bf/R11MlQfz99ZiM9rc00Fh/h1oUi/Hw2UXEqn0clWbxoeoDRZGLQ1o/D4eB//QbVAglhF8HBegAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;img4&quot;
        title=&quot;&quot;
        src=&quot;/static/img4-ed9a13d1d9522e515f5a3a9f575fdcac-4ed6a.png&quot;
        srcset=&quot;/static/img4-ed9a13d1d9522e515f5a3a9f575fdcac-ffce4.png 300w,
/static/img4-ed9a13d1d9522e515f5a3a9f575fdcac-51907.png 600w,
/static/img4-ed9a13d1d9522e515f5a3a9f575fdcac-4ed6a.png 940w&quot;
        sizes=&quot;(max-width: 940px) 100vw, 940px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;Two Chefs Brewing 网站的鲜艳色彩，神奇图形和俏皮动画毫不费力地吸引了游客。同时，这些设计元素也将用户的注意力从网站的低易用性中转移开——该网站包含大量页面，并且需要用户点击多次。&lt;/p&gt;
&lt;h3&gt;5. 唤起情绪&lt;/h3&gt;
&lt;p&gt;我们都听过这样一句话：“一张图片胜过千言万语” - 当涉及到更为情绪化的沟通时，这一点尤为重要。通过图片和其他视觉元素，你可以传达喜悦，悲伤，甚至可怜的感觉。视觉吸引力可唤醒记忆和情绪，如信任，安慰，希望或自信。&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/img5-31d1f48664473e04bfb89086a900745c-f2cb7.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 939px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 47.923322683706076%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAACW0lEQVQoz42RyU9TURSHG2NQ6PQKr/R1ogKvQKEqSAXbCmIZ7EBppSg40MSBxGlBJA4LiVsMUVf6D/iPtA9iI6gxrkmM4J5CCCvK521NE1fGm3zJOfee/M65v6Pr6e4jFBygXW3HWKcXGGiQLCiNNgK+TuL9fWTCA0yNDTItiIpcMpqwGI00yjJ3s7N8ePeeWCCAU65HZ290YrcqWC31WExmIVaPTbbhtDkY6D5Dv9dLXBRPj/hJBBQmBsP4WlXRuBaTwUAyGGL50TyLs1m6TjSjMxuMGGrFo74OWWrgZKef6KUooxcvcmtygvvTGbLJYeYmLnBvZpwXzx8zM5VBbrBjEfVjPb08u3qD+cwU6bNBdCa9vvJVs+jmtjtxO1y47A7cqh9P5CbtkRlC6TuEswuEE1eIDfUyk4ozkUghWaz0eDxkIxH8TS5ks1Se0CCmK6NH0hsx6k0ilrA4vBhHHtKWeYJvcgE5+ZSu+G3CnW30qi3EBs+TSqbpaHLT3+JB9bQhScofwSoWYbYi/PQLj055HJxTXYQ6WnhwLUNUCGQScV6/XGR8ZBSHtZH4aIxU/DKJSBS19TSKw4eutqaGKnXHjle27HUqdDY34VW9dHX1MCcMf7O0xNtXy5WNxiMjHDmqR1VcXB8aIzicRrY1Yzbb0eVzOaqsaBpamXyevEDLa6x9/sanQoFfm1ts/dzkx8ZGJde0FVZXVil8LLD+9Ttr61/I5TR0/Oc5ODioUDo8/GedrlpYZmdnh+3tbfb29tjd3aVY3KncleMy5bhMsVissL+/T6lU4m+N3x7JuxaoVvMrAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;img5&quot;
        title=&quot;&quot;
        src=&quot;/static/img5-31d1f48664473e04bfb89086a900745c-f2cb7.png&quot;
        srcset=&quot;/static/img5-31d1f48664473e04bfb89086a900745c-f1617.png 300w,
/static/img5-31d1f48664473e04bfb89086a900745c-8a1ac.png 600w,
/static/img5-31d1f48664473e04bfb89086a900745c-f2cb7.png 939w&quot;
        sizes=&quot;(max-width: 939px) 100vw, 939px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;Paypal 网站通过视觉设计来吸引访客的情绪。标题图像与副本放在一起，给人以熟悉感，并令用户感到放心，这一点对于金融业务来说是至关重要的。&lt;/p&gt;
&lt;h2&gt;重要的结论&lt;/h2&gt;
&lt;p&gt;视觉吸引力是网页设计的一个非常重要的因素——尤其是当涉及到建立持久的用户关系和品牌亲和力时。但与此同时，不要忽视基础功能。&lt;/p&gt;
&lt;p&gt;确保您的网站不仅美观，并且易于发现、使用和访问。将功能和视觉吸引力相结合，将确保您和您的访问者充分利用您的网站，并为打造卓越的用户体验奠定基础。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[React 高阶组件介绍]]></title><description><![CDATA[高阶组件的定义 HoC 不属于 React 的 API，它是一种实现模式，本质上是一个函数，接受一个或多个 React 组件作为参数，返回一个全新的 React…]]></description><link>https://knownsec-fed.com/2018-01-06-react-higher-order-component/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-01-06-react-higher-order-component/</guid><pubDate>Sat, 06 Jan 2018 12:01:03 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-ccc8d530f0e531d1004e03d9fb1a0f3b-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAMBBP/EABYBAQEBAAAAAAAAAAAAAAAAAAEEBf/aAAwDAQACEAMQAAAB7GQqzbIk/8QAGRAAAgMBAAAAAAAAAAAAAAAAAAEQESEx/9oACAEBAAEFAjC0Pkf/xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAwEBPwGq/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQIBAT8BiP/EABYQAAMAAAAAAAAAAAAAAAAAAAAgMf/aAAgBAQAGPwIq/wD/xAAZEAEAAwEBAAAAAAAAAAAAAAABACExEBH/2gAIAQEAAT8hUC2ezu2ad//aAAwDAQACAAMAAAAQDO//xAAXEQADAQAAAAAAAAAAAAAAAAAAARFB/9oACAEDAQE/EHGFH//EABYRAAMAAAAAAAAAAAAAAAAAAAEQEf/aAAgBAgEBPxAUn//EABsQAQEAAgMBAAAAAAAAAAAAAAERAEEQMVGB/9oACAEBAAE/EAjBsmOs/RxBBQbneC085//Z&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;Header&quot;
        title=&quot;&quot;
        src=&quot;/static/header-ccc8d530f0e531d1004e03d9fb1a0f3b-d6978.jpeg&quot;
        srcset=&quot;/static/header-ccc8d530f0e531d1004e03d9fb1a0f3b-527f0.jpeg 300w,
/static/header-ccc8d530f0e531d1004e03d9fb1a0f3b-9a7cd.jpeg 600w,
/static/header-ccc8d530f0e531d1004e03d9fb1a0f3b-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;高阶组件的定义&lt;/h2&gt;
&lt;p&gt;HoC 不属于 React 的 API，它是一种实现模式，本质上是一个函数，接受一个或多个 React 组件作为参数，返回一个全新的 React 组件，而不是改造现有的组件，这样的组件被称为高阶组件。开发过程中，有的功能需要在多个组件类复用时，这时可以创建一个 Hoc。&lt;/p&gt;
&lt;h2&gt;基本用法&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;包裹方式&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;HoC&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;WrappendComponent&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;WrappingComponent&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;div className&lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&quot;container&quot;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
            &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;WrappendComponent &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;div&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; WrappingComponent&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;上述代码中，接受 WrappendComponent 作为参数，此参数就是将要被 HoC 包装的普通组件，在 render 中包裹一个 div，赋予它 &lt;code&gt;className&lt;/code&gt; 属性，最终产生的 WrappingComponent 和 传入的 WrappendComponent 是两个完全不同的组件。&lt;/p&gt;
&lt;p&gt;在 WrappingComponent 中，可以读取、添加、编辑、删除传给 WrappendComponent 的 &lt;code&gt;props&lt;/code&gt;，也可以用其它元素包裹 WrappendComponent，用来实现封装样式、添加布局或其它操作。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;组合方式&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;HoC&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;WrappedComponent&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; LoginView&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;WrappingComponent&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;user&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;  
        &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;user&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;WrappedComponent &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;LoginView &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; WrappingComponent&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;上述代码中有两个组件，WrappedComponent 和 LoginView，如果传入的 &lt;code&gt;props&lt;/code&gt; 中存在 &lt;code&gt;user&lt;/code&gt;，则正常显示的 WrappedComponent 组件，否则显示 LoginView 组件，让用户去登录。HoC 传递的参数可以为多个，传递多个组件定制新组件的行为，例如用户登录状态下显示主页面，未登录显示登录界面；在渲染列表时，传入 List 和 Loading 组件，为新组件添加加载中的行为。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;继承方式&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;HoC&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;WrappendComponent&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;WrappingComponent&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;extends&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;WrappendComponent&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;user&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;otherProps&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;props &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; otherProps&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; WrappingComponent&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;WrappingComponent 是一个新组件，它继承自 WrappendComponent，共享父级的函数和属性。可以使用 super.render() 或者 super.componentWillUpdate() 调用父级的生命周期函数，但是这样会让两个组件耦合在一起，降低组件的复用性。&lt;/p&gt;
&lt;p&gt;React 中对组件的封装是按照最小可用单元的思想来进行封装的，理想情况下，一个组件只做一件事情，符合 &lt;code&gt;OOP&lt;/code&gt; 中的单一职责原则。如果需要对组件的功能增强，通过组合的方式或者添加代码的方式对组件进行增强，而不是修改原有的代码。&lt;/p&gt;
&lt;h2&gt;注意事项&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;不要在 render 函数中使用高阶组件&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token function&quot;&gt;render&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// 每一次render函数调用都会创建一个新的EnhancedComponent实例&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// EnhancedComponent1 !== EnhancedComponent2&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; EnhancedComponent &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;enhance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;MyComponent&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// 每一次都会使子对象树完全被卸载或移除&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;lt;&lt;/span&gt;EnhancedComponent &lt;span class=&quot;token operator&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;React 中的 &lt;code&gt;diff&lt;/code&gt; 算法会比较新旧子对象树，确定是否更新现有的子对象树或丢掉现有的子树并重新挂载。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;必须将静态方法做拷贝&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token comment&quot;&gt;// 定义静态方法&lt;/span&gt;
WrappedComponent&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function-variable function&quot;&gt;staticMethod&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token comment&quot;&gt;/*...*/&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token comment&quot;&gt;// 使用高阶组件&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; EnhancedComponent &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;enhance&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;WrappedComponent&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// 增强型组件没有静态方法&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;typeof&lt;/span&gt; EnhancedComponent&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;staticMethod &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;undefined&apos;&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// true&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;Refs属性不能传递&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;HoC中指定的 &lt;code&gt;ref&lt;/code&gt;，并不会传递到子组件，需要通过回调函数使用 &lt;code&gt;props&lt;/code&gt; 传递。&lt;/p&gt;
&lt;h2&gt;参考链接&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://leozdgao.me/chushi-hoc/&quot;&gt;初识React中的High Order Component&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://doc.react-china.org/docs/higher-order-components.html&quot;&gt;高阶组件&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item><item><title><![CDATA[如何让 vim 成为我们的神器]]></title><description><![CDATA[Vim  是一个上古神器，刚刚接触的同学可能很难驾驭，本篇文章主要带领大家  快速入门 ，并  持续分享  当前流行的一些  vim-plugin 。 安装 其他平台，可以自行谷歌。 新手指南 上面是史上最简单，最全面的  Vim…]]></description><link>https://knownsec-fed.com/2018-01-05-to-vim/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-01-05-to-vim/</guid><pubDate>Fri, 05 Jan 2018 10:15:06 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-f08bc4c98ee6942187bb94c8070d9be9-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABdklEQVQoz5WRe1OCQBTFVxETGm2mmpqml28t84FagOAT0DIVzWmq7/9BTneBjJxq6o/fcHb37L2XPSyp9nBojHBkOEh2bIjtPsSGiZhiQmgYEGodCPW/w/Y0G0JVR5wu72kWZF6MYDcq2PXt/zkxB4hRZanVQ8ocI25a2DEsCIqBSOUOkarqf6mBT6D53jeweN2fRGp2Iek2mDZAVB+CNWj8qzYYNxUVsFKTvgGlX/Au0EWZChbdVxTWbygsX5CbPyM7fUJmskTanhMLZMcusUDacXFpzXE+eiRmuLBmG80iQUE+4WnXwb4+Qkodek8gtz+RKKyz/hjHRg+7pGU6l1pd3xfSm4IJSlWsaWDllv+4/He3SFBT74x7yqGzsI4GaXIzT5r9EAD38cmiVW0rpK8wv1sTCR5ChTYKih+Cx0cQvhZ5w1IrdB72Bfqg+0CJ0pvpE+QnK2QogDwFkaMAuM46Cw++Lk/Xns5QQNyTv1/R2t14uH4Hz1kkQRf0nvEAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;Header&quot;
        title=&quot;&quot;
        src=&quot;/static/header-f08bc4c98ee6942187bb94c8070d9be9-d6978.jpeg&quot;
        srcset=&quot;/static/header-f08bc4c98ee6942187bb94c8070d9be9-527f0.jpeg 300w,
/static/header-f08bc4c98ee6942187bb94c8070d9be9-9a7cd.jpeg 600w,
/static/header-f08bc4c98ee6942187bb94c8070d9be9-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;Vim&lt;/code&gt; 是一个上古神器，刚刚接触的同学可能很难驾驭，本篇文章主要带领大家 &lt;code&gt;快速入门&lt;/code&gt;，并 &lt;code&gt;持续分享&lt;/code&gt; 当前流行的一些 &lt;code&gt;vim-plugin&lt;/code&gt;。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1&gt;安装&lt;/h1&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;sudo apt-get install vim  // Ubuntu&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;其他平台，可以自行谷歌。&lt;/p&gt;
&lt;h1&gt;新手指南&lt;/h1&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;vimtutor  // vim 教程&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;上面是史上最简单，最全面的 &lt;code&gt;Vim&lt;/code&gt; 基础教程，至今无人超越。&lt;/p&gt;
&lt;p&gt;下面是作者基于上面的归纳。&lt;/p&gt;
&lt;h2&gt;&lt;code&gt;移动光标&lt;/code&gt;&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;# hjkl
# 2w 向前移动两个单词
# 3e 向前移动到第 3 个单词的末尾
# 0 移动到行首
# $ 当前行的末尾
# gg 文件第一行
# G 文件最后一行
# 行号+G 指定行
# &lt;ctrl&gt;+o 跳转回之前的位置
# &lt;ctrl&gt;+i 返回跳转之前的位置&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h2&gt;&lt;code&gt;退出&lt;/code&gt;&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;# &lt;esc&gt; 进入正常模式
# :q! 不保存退出
# :wq 保存后退出&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h2&gt;&lt;code&gt;删除&lt;/code&gt;&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;# x 删除当前字符
# dw 删除至当前单词末尾
# de 删除至当前单词末尾，包括当前字符
# d$ 删除至当前行尾
# dd 删除整行
# 2dd 删除两行&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h2&gt;&lt;code&gt;修改&lt;/code&gt;&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;# i 插入文本
# a 当前光标后添加
# A 当前行末尾添加
# r 替换当前字符
# o 打开新的一行并进入插入模式&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h2&gt;&lt;code&gt;撤销&lt;/code&gt;&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;# u 撤销
# &lt;ctrl&gt;+r 取消撤销&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h2&gt;&lt;code&gt;复制粘贴剪切&lt;/code&gt;&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;# v 进入可视模式
# y 复制
# p 粘贴
# yy 复制当前行
# dd 剪切当前行&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h2&gt;&lt;code&gt;文件&lt;/code&gt;&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;# :e! 强制刷新该文件
# &lt;ctrl&gt;+g 显示当前行以及文件信息&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h2&gt;&lt;code&gt;查找&lt;/code&gt;&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;# / 正向查找（n：继续查找，N：相反方向继续查找）
# ？ 逆向查找
# % 查找配对的 {，[，(
# :set ic 忽略大小写
# :set noic 取消忽略大小写
# :set hls 匹配项高亮显示
# :set is 显示部分匹配&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h2&gt;&lt;code&gt;替换&lt;/code&gt;&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;# :s/old/new 替换该行第一个匹配串
# :s/old/new/g 替换全行的匹配串
# :%s/old/new/g 替换整个文件的匹配串&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h2&gt;&lt;code&gt;折叠&lt;/code&gt;&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;# zc 折叠
# zC 折叠所有嵌套
# zo 展开折叠
# zO 展开所有折叠嵌套&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h2&gt;&lt;code&gt;执行外部命令&lt;/code&gt;&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;# :!shell 执行外部命令&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h2&gt;&lt;code&gt;字体&lt;/code&gt;&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;# &lt;ctrl&gt; - 缩小
# &lt;ctrl&gt; shift + 放大
# &lt;ctrl&gt; 0 还原&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h1&gt;.vimrc&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;.vimrc&lt;/code&gt; 是 &lt;code&gt;Vim&lt;/code&gt; 的配置文件，需要我们自己创建&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;cd Home               // 进入 Home 目录
touch .vimrc          // 配置文件

# 安装插件管理工具 vim-plug
# Unix
# Vim
curl -fLo ~/.vim/autoload/plug.vim --create-dirs \
    https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
# Neovim
curl -fLo ~/.local/share/nvim/site/autoload/plug.vim --create-dirs \
    https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/junegunn/vim-plug&quot;&gt;vim-plug&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;基本配置&lt;/h2&gt;
&lt;h3&gt;&lt;code&gt;取消备份&lt;/code&gt;&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;set nobackup
set noswapfile&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h3&gt;&lt;code&gt;文件编码&lt;/code&gt;&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;set encoding=utf-8&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h3&gt;&lt;code&gt;查找&lt;/code&gt;&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;set ic
set hls
set is&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h3&gt;&lt;code&gt;显示行号&lt;/code&gt;&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;set number&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h3&gt;&lt;code&gt;显示光标当前位置&lt;/code&gt;&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;set ruler&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h3&gt;&lt;code&gt;设置缩进&lt;/code&gt;&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;set cindent

set tabstop=2
set shiftwidth=2&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h3&gt;&lt;code&gt;突出显示当前行&lt;/code&gt;&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;set cursorline&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h3&gt;&lt;code&gt;左下角显示当前 vim 模式&lt;/code&gt;&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;set showmode&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h3&gt;&lt;code&gt;代码折叠&lt;/code&gt;&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;set nofoldenable&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h3&gt;&lt;code&gt;主题&lt;/code&gt;&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;syntax enable
set background=dark
colorscheme solarized&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/altercation/vim-colors-solarized&quot;&gt;altercation/vim-colors-solarized&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/Anthony25/gnome-terminal-colors-solarized&quot;&gt;Anthony25/gnome-terminal-colors-solarized&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;插件配置&lt;/h2&gt;
&lt;h3&gt;&lt;code&gt;树形目录&lt;/code&gt;&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;Plug &apos;scrooloose/nerdtree&apos;
Plug &apos;jistr/vim-nerdtree-tabs&apos;
Plug &apos;Xuyuanp/nerdtree-git-plugin&apos;

autocmd vimenter * NERDTree
map &lt;C-n&gt; :NERDTreeToggle&lt;CR&gt;
let NERDTreeMinimalUI = 1
let NERDTreeShowHidden = 1

let g:nerdtree_tabs_open_on_console_startup = 1
let g:nerdtree_tabs_focus_on_files = 1

let g:NERDTreeIndicatorMapCustom = {
    \ &quot;Modified&quot;  : &quot;✹&quot;,
    \ &quot;Staged&quot;    : &quot;✚&quot;,
    \ &quot;Untracked&quot; : &quot;✭&quot;,
    \ &quot;Renamed&quot;   : &quot;➜&quot;,
    \ &quot;Unmerged&quot;  : &quot;═&quot;,
    \ &quot;Deleted&quot;   : &quot;✖&quot;,
    \ &quot;Dirty&quot;     : &quot;✗&quot;,
    \ &quot;Clean&quot;     : &quot;✔︎&quot;,
    \ &apos;Ignored&apos;   : &apos;☒&apos;,
    \ &quot;Unknown&quot;   : &quot;?&quot;
    \ }

# o 打开关闭文件或目录
# e 以文件管理的方式打开选中的目录
# t 在标签页中打开
# T 在标签页中打开，但光标仍然留在 NERDTree
# r 刷新光标所在的目录
# R 刷新当前根路径
# X 收起所有目录
# p 小写，跳转到光标所在的上一级路径
# P 大写，跳转到当前根路径
# J 到第一个节点
# K 到最后一个节点
# I 显示隐藏文件
# m 显示文件操作菜单
# C 将根路径设置为光标所在的目录
# u 设置上级目录为根路径
# ctrl + w + w 光标自动在左右侧窗口切换
# ctrl + w + r 移动当前窗口的布局位置
# :tabc 关闭当前的 tab
# :tabo   关闭所有其他的 tab
# :tabp   前一个 tab
# :tabn   后一个 tab
# gT      前一个 tab
# gt      后一个 tab&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/scrooloose/nerdtree&quot;&gt;scrooloose/nerdtree&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/jistr/vim-nerdtree-tabs&quot;&gt;vim-nerdtree-tabs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/Xuyuanp/nerdtree-git-plugin&quot;&gt;nerdtree-git-plugin&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;code&gt;代码，引号，路径补全&lt;/code&gt;&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;Plug &apos;Valloric/YouCompleteMe&apos;
Plug &apos;Raimondi/delimitMate&apos;
Plug &apos;Shougo/deoplete.nvim&apos;, { &apos;do&apos;: &apos;:UpdateRemotePlugins&apos; }&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/Valloric/YouCompleteMe&quot;&gt;Valloric/YouCompleteMe&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/Raimondi/delimitMate&quot;&gt;Raimondi/delimitMate&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/Shougo/deoplete.nvim&quot;&gt;Shougo/deoplete.nvim&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;code&gt;语法高亮，检查&lt;/code&gt;&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;Plug &apos;sheerun/vim-polyglot&apos;
Plug &apos;w0rp/ale&apos;

let g:ale_linters = {
\	&apos;javascript&apos;: [&apos;eslint&apos;],
\	&apos;css&apos;: [&apos;stylelint&apos;],
\}
let g:ale_fixers = {
\	&apos;javascript&apos;: [&apos;eslint&apos;],
\	&apos;css&apos;: [&apos;stylelint&apos;],
\}
let g:ale_fix_on_save = 1

let g:ale_sign_column_always = 1
let g:ale_sign_error = &apos;●&apos;
let g:ale_sign_warning = &apos;▶&apos;

nmap &lt;silent&gt; &lt;C-k&gt; &lt;Plug&gt;(ale_previous_wrap)
nmap &lt;silent&gt; &lt;C-j&gt; &lt;Plug&gt;(ale_next_wrap)&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/w0rp/ale&quot;&gt;w0rp/ale&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/sheerun/vim-polyglot&quot;&gt;sheerun/vim-polyglot&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;code&gt;文件，代码搜索，打开最近打开的文件&lt;/code&gt;&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;Plug &apos;rking/ag.vim&apos;
Plug &apos;kien/ctrlp.vim&apos;
Plug &apos;vim-scripts/mru.vim&apos;

let g:ag_highlight=1
let g:ag_working_path_mode=&quot;r&quot;

# :Ag! content

set wildignore+=*.zip,*.exe

let g:ctrlp_map = &apos;&lt;c-p&gt;&apos;
let g:ctrlp_custom_ignore = {
  \ &apos;dir&apos;:  &apos;\v[\/](node_modules|DS_Store|dist|build|coverage)|(\.(git|hg|svn)$)&apos;,
  \ &apos;file&apos;: &apos;\v\.(exe|so|dll)$&apos;,
  \ }

# &lt;c-r&gt;: 切换匹配模式
# &lt;c-t&gt; or &lt;c-v&gt;, &lt;c-x&gt;：在新的 tab 中打开

let MRU_Exclude_Files = &apos;^/tmp/.*\|^/var/tmp/.*&apos;
let MRU_Window_Height = 15

# :MRU&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/kien/ctrlp.vim&quot;&gt;kien/ctrlp.vim&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/ggreer/the_silver_searcher&quot;&gt;ggreer/the&lt;em&gt;silver&lt;/em&gt;searcher&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/rking/ag.vim&quot;&gt;rking/ag.vim&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/vim-scripts/mru.vim&quot;&gt;vim-scripts/mru.vim&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;code&gt;加强版状态栏&lt;/code&gt;&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;Plug &apos;itchyny/lightline.vim&apos;

let g:lightline = {
      \ &apos;colorscheme&apos;: &apos;powerline&apos;,
      \ &apos;active&apos;: {
      \   &apos;left&apos;: [ [ &apos;mode&apos;, &apos;paste&apos; ],
      \             [ &apos;gitbranch&apos;, &apos;readonly&apos;, &apos;filename&apos;, &apos;modified&apos;, &apos;helloworld&apos; ] ],
      \   &apos;right&apos;: [ [ &apos;lineinfo&apos; ],
      \              [ &apos;percent&apos; ],
      \              [ &apos;fileformat&apos;, &apos;fileencoding&apos;, &apos;filetype&apos; ] ]
      \ },
      \ &apos;component&apos;: {
      \   &apos;helloworld&apos;: &apos;Hello, 枫上雾棋!&apos;
      \ },
      \ &apos;component_function&apos;: {
      \   &apos;gitbranch&apos;: &apos;fugitive#head&apos;
      \ },
      \ }&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/itchyny/lightline.vim&quot;&gt;itchyny/lightline.vim&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;code&gt;代码注释&lt;/code&gt;&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;Plug &apos;scrooloose/nerdcommenter&apos;

# &lt;leader&gt;c&lt;space&gt; 注释/取消注释
# &lt;leader&gt;cc // 注释
# &lt;leader&gt;cm 只用一组符号注释
# &lt;leader&gt;cA 在行尾添加注释
# &lt;leader&gt;c$ /* 注释 */
# &lt;leader&gt;cs /* 块注释 */
# &lt;leader&gt;cy 注释并复制
# &lt;leader&gt;ca 切换　// 和 /* */
# &lt;leader&gt;cu 取消注释

let g:NERDSpaceDelims = 1
let g:NERDDefaultAlign = &apos;left&apos;
let g:NERDCustomDelimiters = {
			\ &apos;javascript&apos;: { &apos;left&apos;: &apos;//&apos;, &apos;leftAlt&apos;: &apos;/**&apos;, &apos;rightAlt&apos;: &apos;*/&apos; },
			\ &apos;less&apos;: { &apos;left&apos;: &apos;/**&apos;, &apos;right&apos;: &apos;*/&apos; }
		\ }

let g:NERDAltDelims_javascript = 1
let g:NERDDefaultNesting = 0&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/scrooloose/nerdcommenter&quot;&gt;scrooloose/nerdcommenter&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;code&gt;git&lt;/code&gt;&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;Plug &apos;airblade/vim-gitgutter&apos;
Plug &apos;tpope/vim-fugitive&apos;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/airblade/vim-gitgutter&quot;&gt;airblade/vim-gitgutter&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/tpope/vim-fugitive&quot;&gt;tpope/vim-fugitive&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;code&gt;Markdown&lt;/code&gt;&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;Plug &apos;suan/vim-instant-markdown&apos;
Plug &apos;junegunn/goyo.vim&apos;
Plug &apos;amix/vim-zenroom2&apos;

let g:instant_markdown_slow = 1
let g:instant_markdown_autostart = 0
# :InstantMarkdownPreview

# :Goyo&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/suan/vim-instant-markdown&quot;&gt;suan/vim-instant-markdown&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/junegunn/goyo.vim&quot;&gt;junegunn/goyo.vim&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/amix/vim-zenroom2&quot;&gt;amix/vim-zenroom2&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;code&gt;Emmet&lt;/code&gt;&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;Plug &apos;mattn/emmet-vim&apos;

let g:user_emmet_leader_key=&apos;&lt;C-Z&gt;&apos;
let g:user_emmet_settings = {
 		\ &apos;javascript.jsx&apos; : {
    		\ &apos;extends&apos; : &apos;jsx&apos;,
    	\ },
 		\ }&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/mattn/emmet-vim&quot;&gt;mattn/emmet-vim&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;code&gt;html 5&lt;/code&gt;&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;Plug &apos;othree/html5.vim&apos;&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/othree/html5.vim&quot;&gt;othree/html5.vim&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;code&gt;css 3&lt;/code&gt;&lt;/h3&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/css-1274d0167bcb9ac2b5a300591f93bc48-cd998.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 684px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 65.93567251461988%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAACrUlEQVQ4y42Ty08TURSHOy0tidCEZNhATW2nnVdnaAu1AwQIlhattLyVSkKFBWJjjCYufGxsK1JRS2NMTHRtojsT/wD/CMPOjQYfwUJnNiYE287xzAClARbe5Mvvzs3ku+fcO2Mw4ICvW42w/bn1258vJACQRdglfxd/kMVfP0lZUcjNzU1yY+M7Wdou6fNSqURuFYv6u/u0rq+vNxoOxrW5hVQhe3fn5avnpXzhhVx49lROZx7J2eVleXX1ifwYcxnJ5XLyyspKLdfW1uRCobCdz+fLqVRqyVA3sna7HWYmx+FsTwBSUhe8iQ4AR3Nw2k4DTe/hdrtrqeFyuXS0tba2tnS9ME05nTA7M1kODw1Wb4yI1U+3xer0Rb4aOkdVOY6pshyHyenJsmw9f3meB5vN9rBmIwyGjNPpgNnEdCUSjqmpRRrev22Fm0s8PLgTgL7eLnDaHUBTFNBYEUoOUJGyJmxvbz8UWiyWDOU8A1PT45VoKKKG5wdh8UMSItdnIDo/C/FEAnpiMeiNx0GKRIBlGGD2hQzDnCx0uRwwOhqt9PVJ6uXRBXid+wixyCQM98aBF0UQ/H4dj9dbE6LsZKHJaMzwHAuJS1MV3iuoVwei8O7KLZi6MAKh0BC4sFUGD57Bi9DypJZttjphS0tLWhQF8Pm8Fe2gGY5VnbRbDQQCOi63W6tEpTVoup4qUtbkeMuHQoqisj6fD0RsraNDBI/HA4JHAG1nD+/R14/ixda93g4QBAH8eBQOh+Pws8HK7k+Mj+1MjMXl88NhZaC/XwmHh5RgMKh0dnYew490d0uKJAUVlJUkSdrlWPaeLjMajSaMLoIg5owEkcRMmkympMViTuL6/zKnOZqaTjUYCGLvopFmxHoUlFtx02NYzGar2dxgxQIwzc34rP/L/wD7ZVqJQ59AAwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;css&quot;
        title=&quot;&quot;
        src=&quot;/static/css-1274d0167bcb9ac2b5a300591f93bc48-cd998.png&quot;
        srcset=&quot;/static/css-1274d0167bcb9ac2b5a300591f93bc48-c76cb.png 300w,
/static/css-1274d0167bcb9ac2b5a300591f93bc48-cc6b0.png 600w,
/static/css-1274d0167bcb9ac2b5a300591f93bc48-cd998.png 684w&quot;
        sizes=&quot;(max-width: 684px) 100vw, 684px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;Plug &apos;hail2u/vim-css3-syntax&apos;
Plug &apos;ap/vim-css-color&apos;

augroup VimCSS3Syntax
  autocmd!

  autocmd FileType css setlocal iskeyword+=-
augroup END&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/hail2u/vim-css3-syntax&quot;&gt;hail2u/vim-css3-syntax&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/ap/vim-css-color&quot;&gt;ap/vim-css-color&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;code&gt;JavaScipt&lt;/code&gt;&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;Plug &apos;pangloss/vim-javascript&apos;

let g:javascript_plugin_jsdoc = 1
let g:javascript_plugin_ngdoc = 1
let g:javascript_plugin_flow = 1
set foldmethod=syntax
let g:javascript_conceal_function             = &quot;ƒ&quot;
let g:javascript_conceal_null                 = &quot;ø&quot;
let g:javascript_conceal_this                 = &quot;@&quot;
let g:javascript_conceal_return               = &quot;⇚&quot;
let g:javascript_conceal_undefined            = &quot;¿&quot;
let g:javascript_conceal_NaN                  = &quot;ℕ&quot;
let g:javascript_conceal_prototype            = &quot;¶&quot;
let g:javascript_conceal_static               = &quot;•&quot;
let g:javascript_conceal_super                = &quot;Ω&quot;
let g:javascript_conceal_arrow_function       = &quot;⇒&quot;
let g:javascript_conceal_noarg_arrow_function = &quot;🞅&quot;
let g:javascript_conceal_underscore_arrow_function = &quot;🞅&quot;
set conceallevel=1&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/pangloss/vim-javascript&quot;&gt;pangloss/vim-javascript&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;code&gt;React&lt;/code&gt;&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;Plug &apos;mxw/vim-jsx&apos;

let g:jsx_ext_required = 0&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/mxw/vim-jsx&quot;&gt;mxw/vim-jsx&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;code&gt;Prettier&lt;/code&gt;&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;Plug &apos;prettier/vim-prettier&apos;, {
  \ &apos;do&apos;: &apos;yarn install&apos;,
  \ &apos;for&apos;: [&apos;javascript&apos;, &apos;typescript&apos;, &apos;css&apos;, &apos;less&apos;, &apos;scss&apos;, &apos;json&apos;, &apos;graphql&apos;] }

let g:prettier#config#bracket_spacing = &apos;true&apos;
let g:prettier#config#jsx_bracket_same_line = &apos;false&apos;
let g:prettier#config#trailing_comma = &apos;es5&apos;
let g:prettier#autoformat = 0
autocmd BufWritePre *.js,*.jsx,*.mjs,*.ts,*.tsx,*.css,*.less,*.scss,*.json,*.graphql PrettierAsync

# :Prettier&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/prettier/vim-prettier&quot;&gt;prettier/vim-prettier&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;code&gt;自动规范化中文排版&lt;/code&gt;&lt;/h3&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-none&quot;&gt;&lt;code&gt;Plug &apos;hotoo/pangu.vim&apos;

# :Pangu&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://github.com/hotoo/pangu.vim&quot;&gt;hotoo/pangu.vim&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h1&gt;总结&lt;/h1&gt;
&lt;p&gt;最后，呈上&lt;code&gt;参考配置&lt;/code&gt; &lt;a href=&quot;https://github.com/FengShangWuQi/to-vim/blob/master/.vimrc&quot;&gt;.vimrc&lt;/a&gt;，如果在直接使用配置文件的过程中遇到什么报错，不要惊慌，可能是相关插件需要什么依赖，查看对应官方文档安装便是。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[D3.js 数据驱动 和 force 力学图讲解]]></title><description><![CDATA[D3 是什么 D3 的全称：Data-Driven Documents，被  数据驱动  的文档，其实就是用来做数据可视化的 JavaScript 库。 为什么需要学习使用 D3 首先 D3.js 是一个数据可视化 js 库，结合 HTML，SVG，CSS，canvas，D…]]></description><link>https://knownsec-fed.com/2018-01-05-d3-js-v3-data-driven-and-d3-force/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-01-05-d3-js-v3-data-driven-and-d3-force/</guid><pubDate>Fri, 05 Jan 2018 08:52:40 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-2f89ce891a8547bbbb1f15baea3701d4-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGQAAAQUAAAAAAAAAAAAAAAAAAAECAwQF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAgAB/9oADAMBAAIQAxAAAAHQI7cUHGL/xAAbEAACAQUAAAAAAAAAAAAAAAABAgADERIhMf/aAAgBAQABBQK4KoymdlTTkDEz/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAHBAAAgEFAQAAAAAAAAAAAAAAAAERAhAhQWJx/9oACAEBAAY/AnUlsfsGEKOr/wD/xAAaEAADAQADAAAAAAAAAAAAAAABESEAQVFx/9oACAEBAAE/IVxRAvc+wWQ7OTOGlwFAwhoAc4yDCt//2gAMAwEAAgADAAAAEEw//8QAFxEAAwEAAAAAAAAAAAAAAAAAEBEhcf/aAAgBAwEBPxBzB//EABcRAQADAAAAAAAAAAAAAAAAAAABITH/2gAIAQIBAT8QjVP/xAAcEAEAAwADAQEAAAAAAAAAAAABABEhQVGRMWH/2gAIAQEAAT8QHQCnke35bFbjSZnKPj5FIBTiJOd5nAUMZquCqKtr7KGw6Gp//9k=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;Header&quot;
        title=&quot;&quot;
        src=&quot;/static/header-2f89ce891a8547bbbb1f15baea3701d4-d6978.jpeg&quot;
        srcset=&quot;/static/header-2f89ce891a8547bbbb1f15baea3701d4-527f0.jpeg 300w,
/static/header-2f89ce891a8547bbbb1f15baea3701d4-9a7cd.jpeg 600w,
/static/header-2f89ce891a8547bbbb1f15baea3701d4-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h2&gt;D3 是什么&lt;/h2&gt;
&lt;p&gt;D3 的全称：Data-Driven Documents，被 &lt;em&gt;数据驱动&lt;/em&gt; 的文档，其实就是用来做数据可视化的 JavaScript 库。&lt;/p&gt;
&lt;h2&gt;为什么需要学习使用 D3&lt;/h2&gt;
&lt;p&gt;首先 D3.js 是一个数据可视化 js 库，结合 HTML，SVG，CSS，canvas，D3 可以图形化的、生动的展现数据。目前有 &lt;em&gt;v3&lt;/em&gt; 和 &lt;em&gt;v4&lt;/em&gt; 两个版本，v3 是基于 SVG，v4 做了些性能上的提升，已经支持 canvas 了，这样也就减少了很多 DOM 操作。&lt;/p&gt;
&lt;p&gt;在数据可视化方面，已经封装了许多可视化 API 方法，大大减少了开发者的工作量。同时，它也具有高定制性、代码简洁、有研究趣味的特点。&lt;/p&gt;
&lt;p&gt;D3.js 目前托管于 &lt;a href=&quot;https://github.com/d3/d3&quot;&gt;&lt;em&gt;GitHub&lt;/em&gt;&lt;/a&gt; ，star 量高达 71.4k(恐怖如斯)，赶快学习 D3 吧，学习还能使我快乐。&lt;/p&gt;
&lt;h2&gt;核心：数据驱动 (Data-Driven)&lt;/h2&gt;
&lt;p&gt;何谓数据驱动？&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/question-d23b182c54cf73c17e478cd55bbe8ebb-b24b3.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 400px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAQFAf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdSjG3DoJeBUD//EABwQAAICAgMAAAAAAAAAAAAAAAEDAAIQEQQSIf/aAAgBAQABBQLvoU0KRLGW5GGeQE4//8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAwEBPwEf/8QAFBEBAAAAAAAAAAAAAAAAAAAAIP/aAAgBAgEBPwEf/8QAHRAAAgEEAwAAAAAAAAAAAAAAASEQAAIRExIxcf/aAAgBAQAGPwI38kRnyhjqBrB0EpSjhUGXH//EABkQAQEBAQEBAAAAAAAAAAAAAAERIRAA0f/aAAgBAQABPyGqxgiYJ46HFLzQgAOMPvamwFh6k8n/2gAMAwEAAgADAAAAEDAPPP/EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQMBAT8QH//EABQRAQAAAAAAAAAAAAAAAAAAACD/2gAIAQIBAT8QH//EABsQAAMAAwEBAAAAAAAAAAAAAAERIRAxQQBh/9oACAEBAAE/EGkMQ01EFSVbOeHNEBG3XN6wshOADCQUwOBrmTUQgkDzmIGbXzH/2Q==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;question&quot;
        title=&quot;&quot;
        src=&quot;/static/question-d23b182c54cf73c17e478cd55bbe8ebb-b24b3.jpeg&quot;
        srcset=&quot;/static/question-d23b182c54cf73c17e478cd55bbe8ebb-ce4fe.jpeg 300w,
/static/question-d23b182c54cf73c17e478cd55bbe8ebb-b24b3.jpeg 400w&quot;
        sizes=&quot;(max-width: 400px) 100vw, 400px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;其旨在将数据与图形绑定，图形又等同于可视化元素，所以也可称作为将数据与可视化元素绑定。这里的可视化元素指的就是 HTML 标签、canvas 绘制的图形、SVG 的形状元素。&lt;/p&gt;
&lt;p&gt;D3 通过 enter()、exit()、data()三个方法得到的数据集与选择元素 (selection) 绑定。
下面就来了解下这个机制（声明 DOM 对象集 =&gt; 声明数据集 =&gt; 比较获取缺失的 DOM 集 =&gt; 追加 DOM 对象并设置其属性）：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;d3&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;select&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;#chart&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;selectAll&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;p&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;    &lt;span class=&quot;token comment&quot;&gt;// 得到可视化元素，返回一个 DOM 对象集，和 jQuery 选择器类似&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;      &lt;span class=&quot;token comment&quot;&gt;// 为选中的可视化元素绑定数据集, 必须传入数组&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;enter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;    &lt;span class=&quot;token comment&quot;&gt;// 返回数据集比 DOM 集多出的数据，并得到数据集与可视化元素的对应关系&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;p&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 创建上一步缺失的 DOM 对象&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;d &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; d&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 设置 DOM 元素属性，如果传入的是一个函数，那么将遍历每个 enter 返回的数据集中的元素，并执行&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;attr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;class&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;testClass&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 设置 DOM 元素属性&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h3&gt;exit() 和 enter() 讲解&lt;/h3&gt;
&lt;p&gt;例有如下 DOM 结构, 数据集 data 为 [1,2,3]：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-html&quot;&gt;&lt;code&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;chart&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;p&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;p&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;执行:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;d3&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;select&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;#chart&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;selectAll&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;p&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;enter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;p&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;d &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; d&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;attr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;class&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;enterClass&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;代码之后，将会得到如下 DOM 结构：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-html&quot;&gt;&lt;code&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;chart&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;p&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;p&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;p&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;enterClass&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;2&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;p&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;p&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;enterClass&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;3&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;p&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;而执行:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;d3&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;select&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;#chart&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;selectAll&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;p&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;d &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; d&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;attr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;class&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;exitClass&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;代码之后，将会得到如下 DOM 结构：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-html&quot;&gt;&lt;code&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;chart&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;p&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;exitClass&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;1&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;p&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;但是两个种方法都没有得到我想要的结果，结果与数据不匹配，这个时候就需要考虑 enter() 与 exit() 结合使用：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; update &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; d3&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;select&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;#chart&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;selectAll&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;p&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;data&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

update&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;d &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; d&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

update&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;exit&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;remove&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

update&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;enter&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;p&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;d &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; d&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
      &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;attr&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;class&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;corrcet&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;最后，得到与 data 数据集 [1,2,3] 匹配的 DOM 结构：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-html&quot;&gt;&lt;code&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;div&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;id&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;chart&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;p&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;correct&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;1&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;p&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;p&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;correct&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;2&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;p&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
  &lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;&lt;/span&gt;p&lt;/span&gt; &lt;span class=&quot;token attr-name&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;token attr-value&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;correct&lt;span class=&quot;token punctuation&quot;&gt;&quot;&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;3&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;p&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token tag&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;&amp;lt;/&lt;/span&gt;div&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;&gt;&lt;/span&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h2&gt;Force 力学图，让你实现酷炫的打击效果&lt;/h2&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-js&quot;&gt;&lt;code&gt;force&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;nodes&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 节点数组&lt;/span&gt;
force&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;links&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 节点间的链接数组, 其数据结构固定为 [{ source:1(index),target:0(index) }]&lt;/span&gt;
force&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;tick&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 运动进行中如何更新每一帧&lt;/span&gt;
force&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;resume&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 因为 tick 事件会自动停止，resume 方法让 tick 事件不停止&lt;/span&gt;
force&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;start&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token comment&quot;&gt;// 将链接数组中的值 (index) 转化为节点数组中对应索引的值&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;大家都知道，一个点运动到另外一个点，就可以得到一条运动轨迹，这条运动轨迹也是由一个个像素点构成的，Force 恰恰做了这个事情。接着，我们就可以用所有的像素点去实现出酷炫的效果。&lt;/p&gt;
&lt;h3&gt;&lt;em&gt;tick&lt;/em&gt; 事件内部解析&lt;/h3&gt;
&lt;p&gt;如果你去读 &lt;em&gt;tick&lt;/em&gt; 事件的源码，你会发现有一个 alpha 变量控制的 &lt;em&gt;tick&lt;/em&gt; 事件的生命周期，这个变量会自动衰减为 0。当我们使用 force.resume() 时，就会让这个变量一直趋于 0，让 &lt;em&gt;tick&lt;/em&gt; 不会停止。每一次 &lt;em&gt;tick&lt;/em&gt; 都是两个点在互相往中间靠拢，这个时候，我们需要选择固定一个点 (设置该状态的坐标为初始坐标)，达到一个点移动到另一个点的效果。&lt;/p&gt;
&lt;p&gt;只要你传入正确类型的 nodes 和 links，那么 Force 就会在 &lt;em&gt;tick&lt;/em&gt; 事件中默认画出我们看不见的运动轨迹，而我们需要做的就是在每次 &lt;em&gt;tick&lt;/em&gt; 事件中去存储每一个像素点，然后再根据存储到的像素点去实现效果。&lt;/p&gt;
&lt;h3&gt;D3 的高度自由性与研究趣味&lt;/h3&gt;
&lt;p&gt;从这个效果来看，我觉得基于这些像素点，可以有多种方式去实现一种功能。因为得到的是最基础底层的数据，而很多封装的API方法其实底层也是根据这个数据去处理得到最后的效果。可以使用 canvas 的 moveto() 和 lineTo() 来画线；也可以直接使用 SVG 的 line 来实现，当然还有其他方法，可以一起探讨。&lt;/p&gt;</content:encoded></item><item><title><![CDATA[如何编写一个 Redux 中间件]]></title><description><![CDATA[如何编写一个 Redux 中间件 要想实现一个  Redux  中间件我们必须了解 Redux 的基本实现原理。本文将从 Redux 源码入手，重点讲解 applyMiddleware 如何将中间件串联执行。只有理解了底层原理我们才可以游刃有余的写出一个 Redux…]]></description><link>https://knownsec-fed.com/2018-01-05-create-a-redux-middleware/</link><guid isPermaLink="false">https://knownsec-fed.com/2018-01-05-create-a-redux-middleware/</guid><pubDate>Fri, 05 Jan 2018 03:47:59 GMT</pubDate><content:encoded>&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/header-183a07e70356cec5d49e60258331449f-d6978.jpeg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAMEAv/EABYBAQEBAAAAAAAAAAAAAAAAAAMAAv/aAAwDAQACEAMQAAABgfIxaoyNr//EABsQAAEEAwAAAAAAAAAAAAAAAAEAAgMRECJB/9oACAEBAAEFAiBTdhS5Hj//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAwEBPwEn/8QAFhEAAwAAAAAAAAAAAAAAAAAAAhAx/9oACAECAQE/AQq//8QAGRAAAgMBAAAAAAAAAAAAAAAAABEBEDGR/9oACAEBAAY/Amp6Nm1Nf//EABoQAQADAAMAAAAAAAAAAAAAAAEAEVEQITH/2gAIAQEAAT8hAQWQzpByUzBaz3x//9oADAMBAAIAAwAAABBkH//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAEDAQE/EGz/xAAXEQADAQAAAAAAAAAAAAAAAAABEBFB/9oACAECAQE/ECkDV//EAB0QAQABAwUAAAAAAAAAAAAAAAEAESFBEDFhkdH/2gAIAQEAAT8QXGt0lo4xC62pQ2Yhl78iBVQLFY2hyaf/2Q==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;Header&quot;
        title=&quot;&quot;
        src=&quot;/static/header-183a07e70356cec5d49e60258331449f-d6978.jpeg&quot;
        srcset=&quot;/static/header-183a07e70356cec5d49e60258331449f-527f0.jpeg 300w,
/static/header-183a07e70356cec5d49e60258331449f-9a7cd.jpeg 600w,
/static/header-183a07e70356cec5d49e60258331449f-d6978.jpeg 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;h1&gt;如何编写一个 Redux 中间件&lt;/h1&gt;
&lt;p&gt;要想实现一个 &lt;a href=&quot;https://redux.js.org/&quot;&gt;Redux&lt;/a&gt; 中间件我们必须了解 Redux 的基本实现原理。本文将从 Redux 源码入手，重点讲解 applyMiddleware 如何将中间件串联执行。只有理解了底层原理我们才可以游刃有余的写出一个 Redux 中间件。&lt;/p&gt;
&lt;h2&gt;目录&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#createstore-%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB&quot;&gt;createStore 源码解读&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#applymiddleware-%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB&quot;&gt;applyMiddleware 源码解读&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#redux-thunk-%E7%9A%84%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86&quot;&gt;redux-thunk 的实现原理&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E5%A6%82%E4%BD%95%E7%BC%96%E5%86%99%E4%B8%80%E4%B8%AA%E4%B8%AD%E9%97%B4%E4%BB%B6&quot;&gt;如何编写一个中间件&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;#%E6%80%BB%E7%BB%93&quot;&gt;总结&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;createStore 源码解读&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&quot;https://redux.js.org/&quot;&gt;Redux&lt;/a&gt; 通过 createStore 来创建一个 store 对象&lt;/p&gt;
&lt;p&gt;要理解 applyMiddleware 的实现原理，我们要从 createStore 入手&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createStore&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;reducer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; preloadedState&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; enhancer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;typeof&lt;/span&gt; preloadedState &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;function&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;typeof&lt;/span&gt; enhancer &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;undefined&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    enhancer &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; preloadedState
    preloadedState &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; undefined
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;typeof&lt;/span&gt; enhancer &lt;span class=&quot;token operator&quot;&gt;!==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;undefined&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;typeof&lt;/span&gt; enhancer &lt;span class=&quot;token operator&quot;&gt;!==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;function&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Expected the enhancer to be a function.&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;enhancer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;createStore&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;reducer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; preloadedState&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;

  &lt;span class=&quot;token keyword&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;typeof&lt;/span&gt; reducer &lt;span class=&quot;token operator&quot;&gt;!==&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;function&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;token class-name&quot;&gt;Error&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;Expected the reducer to be a function.&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// 篇幅有限，后面被我省略了，有兴趣请去看 Redux 源码&lt;/span&gt;
  &lt;span class=&quot;token comment&quot;&gt;// ......&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;可以看见 createStore 的三个参数依次为: reducer，preloadedState，enhancer。参见源码，如果传入了 enhance 参数且为函数，则将 createStore 传入 enhance：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;enhancer&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;createStore&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;reducer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; preloadedState&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;也就是说，现在我们将用 enhance 来创建一个 store 对象。&lt;/p&gt;
&lt;h2&gt;applyMiddleware 源码解读&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;一般情况下 createStore 的第三个参数 enhance 就是 applyMiddleware&lt;/p&gt;
&lt;p&gt;applyMiddleware 的代码只有二十多行却是本文的重点&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;applyMiddleware&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;middlewares&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;createStore&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;reducer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; preloadedState&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; enhancer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; store &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;createStore&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;reducer&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; preloadedState&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; enhancer&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; dispatch &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; store&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;dispatch
    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; chain &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;var&lt;/span&gt; middlewareAPI &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      getState&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; store&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;getState&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      dispatch&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;action&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;action&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
    chain &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; middlewares&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;middleware &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;middleware&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;middlewareAPI&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    dispatch &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;compose&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;chain&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;store&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;dispatch&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
      &lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;store&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
      dispatch
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;参见 createStore 的源码可以得知：applyMiddleware 依然使用 createStore 创建了store 对象并且返回，只是改写了这个对象的 dispatch 方法。&lt;/p&gt;
&lt;p&gt;下面我们重点来看这个被改写掉的 dispatch 方法，同时理解它和原生 dispatch 方法的区别也是本文的重点。为了更直观的了解这个过程我们先来看一个简单的中间件实现 logger middleware：&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;export&lt;/span&gt; &lt;span class=&quot;token keyword&quot;&gt;default&lt;/span&gt; store &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; next &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; action &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; start &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Date&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;action&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; ms &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; Date&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;now&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;-&lt;/span&gt; start&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token template-string&quot;&gt;&lt;span class=&quot;token string&quot;&gt;`dispatch: &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;action&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;type&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt; - &lt;/span&gt;&lt;span class=&quot;token interpolation&quot;&gt;&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;${&lt;/span&gt;ms&lt;span class=&quot;token interpolation-punctuation punctuation&quot;&gt;}&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;ms`&lt;/span&gt;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;下面分两部详细探讨中间件的运行原理&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;将原生的 getState 和 dispacth 作为第一个参数传入中间件数组，获得执行完的 chain 数组；&lt;/p&gt;
&lt;p&gt;&lt;code&gt;chain = middlewares.map(middleware =&gt; middleware(middlewareAPI))&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;组合串联 middleware&lt;/p&gt;
&lt;p&gt;&lt;code&gt;dispatch = compose(...chain)(store.dispatch)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;compose 将所有的中间件串联起来组成新的 dispatch&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;compose 源码&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;compose&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token operator&quot;&gt;...&lt;/span&gt;funcs&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;return&lt;/span&gt; arg &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; funcs&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;reduceRight&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;composed&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; f&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;f&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;composed&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; arg&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;参考我们的 logger middleware 这里的 composed 即是我们的 next 参数。&lt;/p&gt;
&lt;p&gt;reduceRight 和 ruduce 一样，不过 reduceRight 是从数组的右端开始执行，arg 将作为 reduceRight 的初始值（这里就是 store.dispatch)。假设我们的 chain 数组为 &lt;code&gt;[f1, f2, f3]&lt;/code&gt;执行完毕后 dispatch 为 &lt;code&gt;dispatch = f1(f2(f3(store.dispatch))))&lt;/code&gt;，调用这个新的 dispatch 每个中间件就能依次执行了，这里的中间件执行过程也是类似于 Koa 的中间件执行的非常经典的洋葱模型。只有最后一个中间件会触发 &lt;a href=&quot;https://redux.js.org/&quot;&gt;redux&lt;/a&gt; 原生的 dispatch，将这个 action 分发出去。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Redux middleware 洋葱模型&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/redux-middleware-c82cd7ccb706623938461ff6628eca39-38c0b.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block; ; max-width: 911px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 53.1284302963776%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABB0lEQVQoz32SB6qGQAyEvf/1vIAFxYa9tzy+hcjqr29h2DVlkkx05OOc5yn/nS+/8wxScNZ1lXEcL0zTJHmeS9/3r/EXoW20323bShzH4vu+eJ4nURSJ67qSJIm85RlCu4pdie7meZZt224gBt+yLD/jcztPDY7jMCMpGbeCkRkdMkDcvu+3bh0MACLuYRiuiqobwM63ktMlcfhuGoZhaDQKgsAA0YuikKqqjFZ0QVKapsYGadM0Upal8WVZdpPD0eo4u667xqjr+vqGjMIsBlLsFOWmKEVYIHk/GuJkHCRgNLTSMfWtGj6X87llFV/1o0uFTqN6PvOd59rtbaOLktrAjv/tt/kDnO1cttYyJVEAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;redux-middleware&quot;
        title=&quot;&quot;
        src=&quot;/static/redux-middleware-c82cd7ccb706623938461ff6628eca39-38c0b.png&quot;
        srcset=&quot;/static/redux-middleware-c82cd7ccb706623938461ff6628eca39-8d81b.png 300w,
/static/redux-middleware-c82cd7ccb706623938461ff6628eca39-38503.png 600w,
/static/redux-middleware-c82cd7ccb706623938461ff6628eca39-38c0b.png 911w&quot;
        sizes=&quot;(max-width: 911px) 100vw, 911px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;只有在最后一个中间件中才调用了 store 原生的 dispatch。&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;redux-thunk 的实现原理&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;一般而言 dispatch 只能分发一个 action 对象，但是使用了 redux-thunk 中间件我们却可以分发一个异步函数。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;thunk&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; store &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; next &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; action &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token keyword&quot;&gt;typeof&lt;/span&gt; action &lt;span class=&quot;token operator&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;function&apos;&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;?&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;action&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;store&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;dispatch&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; store&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;getState&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;action&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;一个异步的 action 的示例&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;getMessage&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;dispatch&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt; getState&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    axios&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token string&quot;&gt;&apos;xxx/xxx&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;res&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            type&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;GET_MESSAGE_SUCCESS&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            message&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; res&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token keyword&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;err&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;token function&quot;&gt;dispatch&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
            type&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;GET_MESSAGE_ERROR&apos;&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
            message&lt;span class=&quot;token punctuation&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;token string&quot;&gt;&apos;error&apos;&lt;/span&gt;
        &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;p&gt;这里的 dispatch 仍然是改造后的 dispatch。因为传入中间件的第一个参数 store（即 middlewareApi）中的 dispatch 是一个闭包，它保存着外层函数作用域中 dispatch 的引用，所以当 diapatch 被修改后，后面调用的 dispatch 都是这个新的 dispatch(即中间件的串联)，所以即使在异步 action 中调用 dispatch，中间件也会从头开始执行。&lt;/p&gt;
&lt;h2&gt;如何编写一个中间件&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;所以理解了以上，编写一个中间件将超级简单，只需要按照中间件编写规范&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;gatsby-highlight&quot;&gt;
      &lt;pre class=&quot;language-javascript&quot;&gt;&lt;code&gt;&lt;span class=&quot;token keyword&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;token function-variable function&quot;&gt;myMiddleware&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; store &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; next &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; action &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token punctuation&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 在这里你可以拿到 store.getState 和 store.dispatch&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 注意如果你调用 store.dispatch 中间件又从新从最外层开始 如果不加限制条件将陷入死循环&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// do something&lt;/span&gt;
    &lt;span class=&quot;token function&quot;&gt;next&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;action&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;   &lt;span class=&quot;token comment&quot;&gt;// 进入下一个中间件，最后一个中间件的 next 参数为 redux 原生 dispatch&lt;/span&gt;
    &lt;span class=&quot;token comment&quot;&gt;// 返回继续执行这个中间件剩余部分&lt;/span&gt;
&lt;span class=&quot;token punctuation&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;
      &lt;/div&gt;
&lt;h2&gt;总结&lt;/h2&gt;
&lt;p&gt;深入理解 Redux 中间件的实现原理，可以让我们在日常工作中，对 Redux 数据流向更加清晰和对自己的程序更加有把握。本人水平有限，如有错误还请指出。&lt;/p&gt;
&lt;h3&gt;参考资料&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;http://www.ituring.com.cn/book/1898&quot;&gt;《深入 Redux 技术栈》&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://redux.js.org/&quot;&gt;Redux 官方文档&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;http://www.ruanyifeng.com/blog/2016/09/redux_tutorial_part_one_basic_usages.html&quot;&gt;阮一峰 Redux 入门教程&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content:encoded></item></channel></rss>