webpackJsonp([23187391589446],{515:function(n,s){n.exports={data:{site:{siteMetadata:{title:"KnownsecFED",author:"304 Team",siteUrl:"https://knownsec-fed.com"}},markdownRemark:{id:"/tmp/app/src/pages/2018-01-12-translation-React-Animations-in-Depth/index.md absPath of file >>> MarkdownRemark",html:'<p>\n  <a\n    class="gatsby-resp-image-link"\n    href="/static/header-772b9056a34c15f58bf4cf6bf00c21c8-d6978.jpeg"\n    style="display: block"\n    target="_blank"\n    rel="noopener"\n  >\n  \n  <span\n    class="gatsby-resp-image-wrapper"\n    style="position: relative; display: block; ; max-width: 1200px; margin-left: auto; margin-right: auto;"\n  >\n    <span\n      class="gatsby-resp-image-background-image"\n      style="padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAd6bIC//xAAYEAACAwAAAAAAAAAAAAAAAAAAAQIRIP/aAAgBAQABBQJkXef/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAZEAEAAgMAAAAAAAAAAAAAAAABESEAIEH/2gAIAQEAAT8hUFE4rarmv//aAAwDAQACAAMAAAAQ/wDP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGRABAAMBAQAAAAAAAAAAAAAAAQARQRBR/9oACAEBAAE/EEVReESaVaRrvaHCUT//2Q==\'); background-size: cover; display: block;"\n    >\n      <img\n        class="gatsby-resp-image-image"\n        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"\n        alt="Header"\n        title=""\n        src="/static/header-772b9056a34c15f58bf4cf6bf00c21c8-d6978.jpeg"\n        srcset="/static/header-772b9056a34c15f58bf4cf6bf00c21c8-527f0.jpeg 300w,\n/static/header-772b9056a34c15f58bf4cf6bf00c21c8-9a7cd.jpeg 600w,\n/static/header-772b9056a34c15f58bf4cf6bf00c21c8-d6978.jpeg 1200w"\n        sizes="(max-width: 1200px) 100vw, 1200px"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p><code>原文地址</code>：<a href="http://t.cn/R9DyGsz">React Animations in Depth</a></p>\n<p><code>作者</code>：Nader Dabit</p>\n<blockquote>\n<p>在 <a href="http://t.cn/RQVluB2">Tweet</a> 得到很多大佬关于 <code>React Web 动画</code> 不错的的回应，于是决定在这里分享给大家</p>\n</blockquote>\n<p>以下便是本文要分享的创建 <code>React 动画</code> 的几种方式。</p>\n<ul>\n<li>CSS animation</li>\n<li>JS Style</li>\n<li><a href="http://t.cn/RLeuFGX">React Motion</a></li>\n<li><a href="http://t.cn/R9d015g">Animated</a></li>\n<li><a href="http://t.cn/R9dOzS1">Velocity React</a></li>\n</ul>\n<p>下面，就让我们开始吧。</p>\n<h2>CSS animation</h2>\n<p>给元素添加 <code>class</code> 是最简单，最常见的书写方式。如果你的 <code>app</code> 正在使用 <code>CSS</code>，那么这将是你最愉快的选择。</p>\n<p><code>赞同者</code></p>\n<div class="gatsby-highlight">\n      <pre class="language-none"><code>我们只需修改 opacity 和 transform 这样的属性，就可构建基本的动画，而且，在组件中，我们可以非常容易地通过 state 去更新这些值。</code></pre>\n      </div>\n<p><code>反对者</code></p>\n<div class="gatsby-highlight">\n      <pre class="language-none"><code>这种方式并不跨平台，在 React Native 中就不适用，而且，对于较复杂的动画，这种方式难以控制。</code></pre>\n      </div>\n<p>接下来，我们通过一个实例来体验一下这种创建方式：<code>当 input focus 的时候，我们增加它的宽度</code>。</p>\n<p>首先，我们要创建两个 <code>input</code> 要用到的 <code>class</code>。</p>\n<div class="gatsby-highlight">\n      <pre class="language-css"><code><span class="token selector">.input</span> <span class="token punctuation">{</span>\n  <span class="token property">width</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>\n  <span class="token property">padding</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>\n  <span class="token property">font-size</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>\n  <span class="token property">border</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>\n  <span class="token property">border-radius</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span>\n  <span class="token property">background-color</span><span class="token punctuation">:</span> #dddddd<span class="token punctuation">;</span>\n  <span class="token property">transition</span><span class="token punctuation">:</span> width .35s linear<span class="token punctuation">;</span>\n  <span class="token property">outline</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token selector">.input-focused</span> <span class="token punctuation">{</span>\n  <span class="token property">width</span><span class="token punctuation">:</span> 240px<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<p>一个是它 <code>原始</code> 的样式，一个是它 <code>focus</code> 后的样式。</p>\n<p>下面，我们就开始书写我们的 <code>React 组件</code>。</p>\n<p>在此，推荐一个可以 <a href="https://codesandbox.io/">在线编写 React</a> 的工具，官网做的也很 Nice，读者不想构建自己的 <code>React app</code>，可以在其中检验以下代码的正确性。</p>\n<p><img src="/animation-34e12b363e28584285837b5b9fbaca03.gif" alt="animation"></p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>\n  state <span class="token operator">=</span> <span class="token punctuation">{</span>\n    focused<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>_input<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">\'focus\'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>focus<span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>_input<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">\'blur\'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>focus<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function-variable function">focus</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span>prevState <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>\n      focused<span class="token punctuation">:</span> <span class="token operator">!</span>prevState<span class="token punctuation">.</span>focused<span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span>\n      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"App"</span><span class="token operator">></span>\n        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"container"</span><span class="token operator">></span>\n          <span class="token operator">&lt;</span>input\n            ref<span class="token operator">=</span><span class="token punctuation">{</span>input <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">.</span>_input <span class="token operator">=</span> input<span class="token punctuation">}</span>\n            className<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token string">\'input\'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>focused <span class="token operator">&amp;&amp;</span> <span class="token string">\'input-focused\'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">\' \'</span><span class="token punctuation">)</span><span class="token punctuation">}</span>\n          <span class="token operator">/</span><span class="token operator">></span>\n        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<ul>\n<li>我们有一个 <code>focused</code> 的 <code>state</code>，初始值为 <code>false</code>，我们通过 <code>更新该值</code> 来创建我们的动画。</li>\n<li>在 <code>componentDidMount</code> 中，我们添加两个 <code>监听器</code>，一个 <code>focus</code>，一个 <code>blur</code>，指定的 <code>回调函数都</code>是 <code>focus</code>。</li>\n<li><code>focus</code> 方法会获取之前 <code>focused</code> 的值，并负责 <code>切换</code> 该值。</li>\n<li>在 <code>render</code> 中，我们通过 <code>state</code> 来改变 <code>input</code> 的 <code>classNames</code>，从而实现我们的动画。</li>\n</ul>\n<h2>JS Style</h2>\n<p><code>JavaScipt styles</code> 跟 <code>CSS 中的 classes</code> 类似，在 <code>JS</code> 文件中，我们就可以拥有所有逻辑。</p>\n<p><code>赞同者</code></p>\n<div class="gatsby-highlight">\n      <pre class="language-none"><code>跟 CSS 动画一样，且它的表现更加清晰。它也不失为一个好方法，可以不必依赖任何 CSS。</code></pre>\n      </div>\n<p><code>反对者</code></p>\n<div class="gatsby-highlight">\n      <pre class="language-none"><code>跟 CSS 动画一样，也是不跨平台的，且动画一旦复杂，也难以控制。</code></pre>\n      </div>\n<p>在下面的实例中，我们将创建一个 <code>input</code>，当用户输入时，我们将一个 <code>button</code> 从 <code>disable</code> 转变为 <code>enable</code>。</p>\n<p><img src="/Style-204b6a2d062a79cb40464757c4080aec.gif" alt="style"></p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code><span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>\n  state <span class="token operator">=</span> <span class="token punctuation">{</span>\n    disabled<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function-variable function">onChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> length <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">.</span>length<span class="token punctuation">;</span>\n\n    <span class="token keyword">if</span> <span class="token punctuation">(</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> disabled<span class="token punctuation">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>\n      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> disabled<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token punctuation">}</span>\n  <span class="token punctuation">}</span>\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> <span class="token punctuation">{</span> disabled <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">;</span>\n    <span class="token keyword">const</span> label <span class="token operator">=</span> disabled <span class="token operator">?</span> <span class="token string">\'Disabled\'</span> <span class="token punctuation">:</span> <span class="token string">\'Submit\'</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">return</span> <span class="token punctuation">(</span>\n      <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>App<span class="token punctuation">}</span><span class="token operator">></span>\n        <span class="token operator">&lt;</span>input\n          style<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>input<span class="token punctuation">}</span>\n          onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>onChange<span class="token punctuation">}</span>\n        <span class="token operator">/</span><span class="token operator">></span>\n        <span class="token operator">&lt;</span>button\n          style<span class="token operator">=</span><span class="token punctuation">{</span>Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>\n            styles<span class="token punctuation">.</span>button<span class="token punctuation">,</span>\n            <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>disabled <span class="token operator">&amp;&amp;</span> styles<span class="token punctuation">.</span>buttonEnabled\n          <span class="token punctuation">)</span><span class="token punctuation">}</span>\n          disabled<span class="token operator">=</span><span class="token punctuation">{</span>disabled<span class="token punctuation">}</span>\n        <span class="token operator">></span>\n          <span class="token punctuation">{</span>label<span class="token punctuation">}</span>\n        <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>\n      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n\n<span class="token keyword">const</span> styles <span class="token operator">=</span> <span class="token punctuation">{</span>\n  App<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    display<span class="token punctuation">:</span> <span class="token string">\'flex\'</span><span class="token punctuation">,</span>\n    justifyContent<span class="token punctuation">:</span> <span class="token string">\'left\'</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  input<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    marginRight<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span>\n    padding<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span>\n    width<span class="token punctuation">:</span> <span class="token number">190</span><span class="token punctuation">,</span>\n    fontSize<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span>\n    border<span class="token punctuation">:</span> <span class="token string">\'none\'</span><span class="token punctuation">,</span>\n    backgroundColor<span class="token punctuation">:</span> <span class="token string">\'#ddd\'</span><span class="token punctuation">,</span>\n    outline<span class="token punctuation">:</span> <span class="token string">\'none\'</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  button<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    width<span class="token punctuation">:</span> <span class="token number">90</span><span class="token punctuation">,</span>\n    height<span class="token punctuation">:</span> <span class="token number">43</span><span class="token punctuation">,</span>\n    fontSize<span class="token punctuation">:</span> <span class="token number">17</span><span class="token punctuation">,</span>\n    border<span class="token punctuation">:</span> <span class="token string">\'none\'</span><span class="token punctuation">,</span>\n    borderRadius<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span>\n    transition<span class="token punctuation">:</span> <span class="token string">\'.25s all\'</span><span class="token punctuation">,</span>\n    cursor<span class="token punctuation">:</span> <span class="token string">\'pointer\'</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  buttonEnabled<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    width<span class="token punctuation">:</span> <span class="token number">120</span><span class="token punctuation">,</span>\n    backgroundColor<span class="token punctuation">:</span> <span class="token string">\'#ffc107\'</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<ul>\n<li>我们有一个 <code>disabled</code> 的 <code>state</code>，初始值为 <code>true</code>。</li>\n<li><code>onChange</code> 方法会获取用户的输入，当输入非空时，就切换 <code>disabled</code> 的值。</li>\n<li>根据 <code>disabled</code> 的值，确定是否将 <code>buttonEnabled</code> 添加到 <code>button</code> 中。</li>\n</ul>\n<h2>React Motion</h2>\n<p><code>React Motion</code> 是 <a href="https://medium.com/@chenglou">Cheng Lou</a> 书写的一个非常不错的开源项目。它的思想是你可以对 <code>Motion 组件</code> 进行简单的 <code>样式设置</code>，然后你就可以在 <code>回调函数</code> 中通过这些值，享受动画带来的乐趣。</p>\n<p>对于绝大多数的动画组件，我们往往不希望对 <code>动画属性</code>（宽高、颜色等）的变化时间做 <code>硬编码</code>处理，<code>react-motion</code> 提供的 <code>spring</code> 函数就是用来解决这一需求的，它可以逼真地模仿真实的物理效果，也就是我们常见的各类 <code>缓动效果</code>。</p>\n<p>下面是一个<code>简单</code>的示例。</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code><span class="token operator">&lt;</span>Motion style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> x<span class="token punctuation">:</span> <span class="token function">spring</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>x<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">></span>\n  <span class="token punctuation">{</span>\n    <span class="token punctuation">(</span><span class="token punctuation">{</span> x <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span>\n      <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> transform<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`translateX(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>x<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px)`</span></span> <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>\n  <span class="token punctuation">}</span>\n<span class="token operator">&lt;</span><span class="token operator">/</span>Motion<span class="token operator">></span>\n</code></pre>\n      </div>\n<p>这是官方提供的几个 <code>demo</code>，真的可以是 <code>不看不知道，一看吓一跳</code>。</p>\n<ul>\n<li><a href="http://t.cn/R9epBQV">Chat Heads</a></li>\n<li><a href="http://t.cn/R9eprR8">Draggable Balls</a></li>\n<li><a href="http://t.cn/R9epdOH">TodoMVC List Transition</a></li>\n<li><a href="http://t.cn/R9epgoj">Water Ripples</a></li>\n<li><a href="http://t.cn/R9epe9u">Draggable List</a></li>\n</ul>\n<p><code>赞同者</code></p>\n<div class="gatsby-highlight">\n      <pre class="language-none"><code>React Motion 可以在 React Web 中使用，也可以在 React Native 中使用，因为它是跨平台的。其中的 spring 概念最开始对我来说感觉挺陌生，然而上手之后，发现它真的很神奇，并且，它有很详细的 API。</code></pre>\n      </div>\n<p><code>反对者</code></p>\n<div class="gatsby-highlight">\n      <pre class="language-none"><code>在某些情况下，他不如纯 CSS / JS 动画，虽然它有不错的 API，容易上手，但也需要学习成本。</code></pre>\n      </div>\n<p>为了使用它，首先我们要用 <code>yarn</code> 或 <code>npm</code> 安装它。</p>\n<div class="gatsby-highlight">\n      <pre class="language-none"><code>yarn add react-motion</code></pre>\n      </div>\n<p>在下面的实例中，我们将创建一个 <code>dropdown 菜单</code>，当点击按钮时，下拉菜单友好展开。</p>\n<p><img src="/Motion-e49f3a4bf698d2c8ad341252be5fd4d6.gif" alt="motion"></p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Motion<span class="token punctuation">,</span> spring <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'react-motion\'</span><span class="token punctuation">;</span>\n\n<span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>\n  state <span class="token operator">=</span> <span class="token punctuation">{</span>\n    height<span class="token punctuation">:</span> <span class="token number">38</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function-variable function">animate</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span> height<span class="token punctuation">:</span> state<span class="token punctuation">.</span>height <span class="token operator">===</span> <span class="token number">233</span> <span class="token operator">?</span> <span class="token number">38</span> <span class="token punctuation">:</span> <span class="token number">233</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span>\n      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"App"</span><span class="token operator">></span>\n        <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>button<span class="token punctuation">}</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>animate<span class="token punctuation">}</span><span class="token operator">></span>Animate<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n        <span class="token operator">&lt;</span>Motion\n          style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> height<span class="token punctuation">:</span> <span class="token function">spring</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>height<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>\n        <span class="token operator">></span>\n          <span class="token punctuation">{</span>\n            <span class="token punctuation">(</span><span class="token punctuation">{</span> height <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span>\n            <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span>Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> styles<span class="token punctuation">.</span>menu<span class="token punctuation">,</span> <span class="token punctuation">{</span> height <span class="token punctuation">}</span> <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span>\n              <span class="token operator">&lt;</span>p style<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>selection<span class="token punctuation">}</span><span class="token operator">></span>Selection <span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>\n              <span class="token operator">&lt;</span>p style<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>selection<span class="token punctuation">}</span><span class="token operator">></span>Selection <span class="token number">2</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>\n              <span class="token operator">&lt;</span>p style<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>selection<span class="token punctuation">}</span><span class="token operator">></span>Selection <span class="token number">3</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>\n              <span class="token operator">&lt;</span>p style<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>selection<span class="token punctuation">}</span><span class="token operator">></span>Selection <span class="token number">4</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>\n              <span class="token operator">&lt;</span>p style<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>selection<span class="token punctuation">}</span><span class="token operator">></span>Selection <span class="token number">5</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>\n              <span class="token operator">&lt;</span>p style<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>selection<span class="token punctuation">}</span><span class="token operator">></span>Selection <span class="token number">6</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>\n            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n          <span class="token punctuation">}</span>\n        <span class="token operator">&lt;</span><span class="token operator">/</span>Motion<span class="token operator">></span>\n      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">const</span> styles <span class="token operator">=</span> <span class="token punctuation">{</span>\n  menu<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    marginTop<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span>\n    width<span class="token punctuation">:</span> <span class="token number">300</span><span class="token punctuation">,</span>\n    border<span class="token punctuation">:</span> <span class="token string">\'2px solid #ddd\'</span><span class="token punctuation">,</span>\n    overflow<span class="token punctuation">:</span> <span class="token string">\'hidden\'</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  button<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    display<span class="token punctuation">:</span> <span class="token string">\'flex\'</span><span class="token punctuation">,</span>\n    width<span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">,</span>\n    height<span class="token punctuation">:</span> <span class="token number">45</span><span class="token punctuation">,</span>\n    justifyContent<span class="token punctuation">:</span> <span class="token string">\'center\'</span><span class="token punctuation">,</span>\n    alignItems<span class="token punctuation">:</span> <span class="token string">\'center\'</span><span class="token punctuation">,</span>\n    border<span class="token punctuation">:</span> <span class="token string">\'none\'</span><span class="token punctuation">,</span>\n    borderRadius<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span>\n    backgroundColor<span class="token punctuation">:</span> <span class="token string">\'#ffc107\'</span><span class="token punctuation">,</span>\n    cursor<span class="token punctuation">:</span> <span class="token string">\'pointer\'</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  selection<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    margin<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>\n    padding<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span>\n    borderBottom<span class="token punctuation">:</span> <span class="token string">\'1px solid #ededed\'</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<ul>\n<li>我们从 <code>react-motion</code> 中 import <code>Motion</code> 和 <code>spring</code>。</li>\n<li>我们有一个 <code>height</code> 的 <code>state</code>，初始值为 <code>38</code>，代表 <code>menu</code> 的高度。</li>\n<li><code>animate</code> 方法设置 <code>menu</code> 的 <code>height</code>，如果 <code>原 height</code> 为 <code>38</code>，则设置 <code>新 height</code> 为 <code>233</code>，如果 <code>原 height</code> 为 <code>233</code>，则设置 <code>新 height</code> 为 <code>38</code>。</li>\n<li>在 <code>render</code> 中，我们使用 <code>Motion 组件</code> 包装整个 <code>p 标签</code> 列表，将 <code>this.state.height</code> 的当前值设为组件的 <code>height</code>，然后在组件的<code>回调函数</code>中使用该值作为整个下拉的高度。</li>\n<li>当按钮被点击时，我们通过 <code>this.animate</code> 切换下拉的高度。</li>\n</ul>\n<h2>Animated</h2>\n<p><code>Animated</code> 是基于 <code>React Native</code> 使用的同一个动画库建立起来的。</p>\n<p>它背后的思想是创建 <code>声明式动画</code>，通过 <code>传递配置对象来控制动画</code>。</p>\n<p><code>赞同者</code></p>\n<div class="gatsby-highlight">\n      <pre class="language-none"><code>跨平台，它在 React Native 中已经非常稳定，如果你在 React Native 中使用过，那么你将不用再重复学习。其中的 interpolate 是一个神奇的插值函数，我们将在下面看到。</code></pre>\n      </div>\n<p><code>反对者</code></p>\n<div class="gatsby-highlight">\n      <pre class="language-none"><code>基于 Twitter 的交流，它目前貌似不是 100% 的稳定，在老的浏览器中的，存在前缀和性能的问题，而且，它也有学习成本。</code></pre>\n      </div>\n<p>为了使用 <code>Animated</code>，我们首先还是要用 <code>yarn</code> 或 <code>npm</code> 安装它。</p>\n<div class="gatsby-highlight">\n      <pre class="language-none"><code>yarn add animated</code></pre>\n      </div>\n<p>在下面的实例中，我们将模拟在提交表单成功后显示的动画 <code>message</code>。</p>\n<p><img src="/Animated-bfcec915be7c2143a50deaeaa3edd1f0.gif" alt="animated"></p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code><span class="token keyword">import</span> Animated <span class="token keyword">from</span> <span class="token string">\'animated/lib/targets/react-dom\'</span><span class="token punctuation">;</span>\n<span class="token keyword">import</span> Easing <span class="token keyword">from</span> <span class="token string">\'animated/lib/Easing\'</span><span class="token punctuation">;</span>\n\n<span class="token keyword">class</span> <span class="token class-name">AnimatedApp</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>\n  animatedValue <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Animated<span class="token punctuation">.</span>Value</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n  <span class="token function-variable function">animate</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span>animatedValue<span class="token punctuation">.</span><span class="token function">setValue</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    Animated<span class="token punctuation">.</span><span class="token function">timing</span><span class="token punctuation">(</span>\n      <span class="token keyword">this</span><span class="token punctuation">.</span>animatedValue<span class="token punctuation">,</span>\n      <span class="token punctuation">{</span>\n        toValue<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>\n        duration<span class="token punctuation">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>\n        easing<span class="token punctuation">:</span> Easing<span class="token punctuation">.</span><span class="token function">elastic</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n      <span class="token punctuation">}</span>\n    <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> marginLeft <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>animatedValue<span class="token punctuation">.</span><span class="token function">interpolate</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n      inputRange<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n      outputRange<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">-</span><span class="token number">120</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\n    <span class="token keyword">return</span> <span class="token punctuation">(</span>\n      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"App"</span><span class="token operator">></span>\n          <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>button<span class="token punctuation">}</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>animate<span class="token punctuation">}</span><span class="token operator">></span>Animate<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n          <span class="token operator">&lt;</span>Animated<span class="token punctuation">.</span>div\n            style<span class="token operator">=</span><span class="token punctuation">{</span>\n              Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>\n                <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>\n                styles<span class="token punctuation">.</span>box<span class="token punctuation">,</span>\n                <span class="token punctuation">{</span> opacity<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>animatedValue<span class="token punctuation">,</span> marginLeft <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>\n          <span class="token operator">></span>\n            <span class="token operator">&lt;</span>p<span class="token operator">></span>Thanks <span class="token keyword">for</span> your submission<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>\n          <span class="token operator">&lt;</span><span class="token operator">/</span>Animated<span class="token punctuation">.</span>div<span class="token operator">></span>\n      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">const</span> styles <span class="token operator">=</span> <span class="token punctuation">{</span>\n  button<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    display<span class="token punctuation">:</span> <span class="token string">\'flex\'</span><span class="token punctuation">,</span>\n    width<span class="token punctuation">:</span> <span class="token number">125</span><span class="token punctuation">,</span>\n    height<span class="token punctuation">:</span> <span class="token number">50</span><span class="token punctuation">,</span>\n    justifyContent<span class="token punctuation">:</span> <span class="token string">\'center\'</span><span class="token punctuation">,</span>\n    alignItems<span class="token punctuation">:</span> <span class="token string">\'center\'</span><span class="token punctuation">,</span>\n    border<span class="token punctuation">:</span> <span class="token string">\'none\'</span><span class="token punctuation">,</span>\n    borderRadius<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span>\n    backgroundColor<span class="token punctuation">:</span> <span class="token string">\'#ffc107\'</span><span class="token punctuation">,</span>\n    cursor<span class="token punctuation">:</span> <span class="token string">\'pointer\'</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  box<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    display<span class="token punctuation">:</span> <span class="token string">\'inline-block\'</span><span class="token punctuation">,</span>\n    marginTop<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span>\n    padding<span class="token punctuation">:</span> <span class="token string">\'0.6rem 2rem\'</span><span class="token punctuation">,</span>\n    fontSize<span class="token punctuation">:</span><span class="token string">\'0.8rem\'</span><span class="token punctuation">,</span>\n    border<span class="token punctuation">:</span> <span class="token string">\'1px #eee solid\'</span><span class="token punctuation">,</span>\n    borderRadius<span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">,</span>\n    boxShadow<span class="token punctuation">:</span> <span class="token string">\'0 2px 8px rgba(0,0,0,.2)\'</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<ul>\n<li>从 <code>animated</code> 中 import <code>Animated</code> 和 <code>Easing</code>。</li>\n<li>用 <code>new Animated.Value(0)</code> 创建一个值为 <code>0</code> 的类属性 - <code>animatedValue</code>。</li>\n<li>创建 <code>animate</code> 方法，处理所有的动画，首先通过 <code>this.animatedValue.setValue(0)</code> 初始化动画值，实现的效果就是每次 <code>重新执行</code> 该动画，然后调用 <code>Animated.timing</code>，<code>animatedValue</code> 作为第一个参数传递，<code>配置对象</code> 作为第二个参数，一个设置 <code>最终动画值</code>，一个设置 <code>持续时间</code>，一个设置 <code>缓动效果</code>。</li>\n<li>在 <code>render</code> 中，我们用 <code>interpolate</code> 方法创建 <code>marginLeft</code> 对象，包含 <code>inputRange</code> 和 <code>outputRange</code> 数组，我们使用此对象作为 <code>UI</code> 中 <code>message</code> 的 <code>style</code> 属性。</li>\n<li>我们使用 <code>Animated.div</code> 替代默认的 <code>div</code>。</li>\n<li>我们将 <code>animatedValue</code> 和 <code>marginLeft</code> 作为 <code>Animated.div</code> 的 <code>style</code> 属性。</li>\n</ul>\n<h2>Velocity React</h2>\n<p><code>Velocity React</code> 是基于已经存在的 <code>Velocity</code> 建立起来的。</p>\n<p><code>赞同者</code></p>\n<div class="gatsby-highlight">\n      <pre class="language-none"><code>上手容易，API 简单明了，相对其他库更易于掌握。</code></pre>\n      </div>\n<p><code>反对者</code></p>\n<div class="gatsby-highlight">\n      <pre class="language-none"><code>有些不得不克服的问题，比如 componentDidMount 后动画并没有真正地起作用等，而且，它不跨平台。</code></pre>\n      </div>\n<p>下面是一个<code>简单</code>的示例。</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code><span class="token operator">&lt;</span>VelocityComponent\n  animation<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> opacity<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>showSubComponent <span class="token operator">?</span> <span class="token number">1</span> <span class="token punctuation">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>      \n  duration<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">500</span><span class="token punctuation">}</span>\n<span class="token operator">></span>\n  <span class="token operator">&lt;</span>MySubComponent<span class="token operator">/</span><span class="token operator">></span>\n<span class="token operator">&lt;</span><span class="token operator">/</span>VelocityComponent<span class="token operator">></span>\n</code></pre>\n      </div>\n<p>首先还是要用 <code>yarn</code> 或 <code>npm</code> 安装它。</p>\n<div class="gatsby-highlight">\n      <pre class="language-none"><code>yarn add velocity-react</code></pre>\n      </div>\n<p>在下面的实例中，我们将创建一个很酷的 <code>动画输入</code>。</p>\n<p><img src="/Velocity-15dcf4b0275a48bd9eb19f73a58132a8.gif" alt="Velocity"></p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> VelocityComponent <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'velocity-react\'</span><span class="token punctuation">;</span>\n\n<span class="token keyword">const</span> <span class="token function-variable function">VelocityLetter</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> letter <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>\n  <span class="token operator">&lt;</span>VelocityComponent\n    runOnMount\n    animation<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> opacity<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span> marginTop<span class="token punctuation">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>\n    duration<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">500</span><span class="token punctuation">}</span>\n  <span class="token operator">></span>\n    <span class="token operator">&lt;</span>p style<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>letter<span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">{</span>letter<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">></span>\n  <span class="token operator">&lt;</span><span class="token operator">/</span>VelocityComponent<span class="token operator">></span>\n<span class="token punctuation">)</span>\n\n<span class="token keyword">class</span> <span class="token class-name">VelocityApp</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>\n  state <span class="token operator">=</span> <span class="token punctuation">{</span>\n    letters<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function-variable function">onChange</span> <span class="token operator">=</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> letters <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">\'\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n\n    letters<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n      arr<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>VelocityLetter letter<span class="token operator">=</span><span class="token punctuation">{</span>l<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">)</span>\n    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> letters<span class="token punctuation">:</span> arr <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n\n  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> <span class="token punctuation">(</span>\n      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"App"</span><span class="token operator">></span>\n        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token string">"container"</span><span class="token operator">></span>\n          <span class="token operator">&lt;</span>input onChange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>onChange<span class="token punctuation">}</span> style<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>input<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>\n          <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>letters<span class="token punctuation">}</span><span class="token operator">></span>\n            <span class="token punctuation">{</span>\n              <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>letters\n            <span class="token punctuation">}</span>\n          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>\n    <span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n\n<span class="token keyword">const</span> styles <span class="token operator">=</span> <span class="token punctuation">{</span>\n  input<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    marginBottom<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span>\n    padding<span class="token punctuation">:</span> <span class="token number">8</span><span class="token punctuation">,</span>\n    width<span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">,</span>\n    height<span class="token punctuation">:</span> <span class="token number">40</span><span class="token punctuation">,</span>\n    fontSize<span class="token punctuation">:</span> <span class="token number">22</span><span class="token punctuation">,</span>\n    backgroundColor<span class="token punctuation">:</span> <span class="token string">\'#ddd\'</span><span class="token punctuation">,</span>\n    border<span class="token punctuation">:</span> <span class="token string">\'none\'</span><span class="token punctuation">,</span>\n    outline<span class="token punctuation">:</span> <span class="token string">\'none\'</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  letters<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    display<span class="token punctuation">:</span> <span class="token string">\'flex\'</span><span class="token punctuation">,</span>\n    height<span class="token punctuation">:</span> <span class="token number">140</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  letter<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n    marginTop<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">,</span>\n    fontSize<span class="token punctuation">:</span> <span class="token number">22</span><span class="token punctuation">,</span>\n    whiteSpace<span class="token punctuation">:</span> <span class="token string">\'pre\'</span><span class="token punctuation">,</span>\n    opacity<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span>\n</code></pre>\n      </div>\n<ul>\n<li>从 <code>velocity-react</code> 中 import <code>VelocityComponent</code>。</li>\n<li>我们要创建一个 <code>可重复</code> 使用的组件来满足每个 <code>letter</code> 的动画。</li>\n<li>在这个组件中，我们将 <code>animation</code> 的 <code>opacity</code> 设为 <code>1</code>，<code>marginTop</code> 设为 <code>0</code>，这些值代表着传入子组件的 <code>重写值</code>，即当组件被创建时，组件的 <code>opacity</code> 会由初始的 <code>0</code> 变为 <code>1</code>，<code>marginTop</code> 会由初始的 <code>100</code> 变为 <code>0</code>，我们还设置了 <code>500 ms</code> 的持续时间，最后值得一提的是 <code>runOnMount</code> 属性，它的意思是在组件 <code>挂载</code> 或 <code>创建</code> 完后执行该动画。</li>\n<li>其中的 <code>onChange</code> 方法会获取用户的每次输入，并创建一个由 <code>VelocityLetter</code> 组成的新数组。</li>\n<li>在 <code>render</code> 中，我们就使用该数组在 <code>UI</code> 中渲染 <code>letters</code>。</li>\n</ul>\n<h2>总结</h2>\n<p>总的来说，基本的动画，我会选择 <code>JS style</code>，复杂的动画，我更偏向 <code>React Motion</code>。而对于 <code>React Native</code>，我还是坚持使用 <code>Animated</code>，一旦 <code>Animated</code> 成熟，在 <code>Web</code> 中可能也会投入使用，目前，我很享受 <code>React Motion</code>。</p>',
fields:{slug:"/2018-01-12-translation-React-Animations-in-Depth/"},frontmatter:{title:"【翻译】React Web 动画的 5 种创建方式，每一种都不简单",date:"2018-01-11",catalog:"前端",author:"枫上雾棋"}},allMarkdownRemark:{edges:[{node:{fields:{slug:"/2018-01-14-antd-yuan-ma-jie-du-notification/"},frontmatter:{title:"antd 源码解读 notification"}}},{node:{fields:{slug:"/2018-01-14-ui-zhong-de-pai-ban-chu-xue-zhe-zhi-nan/"},frontmatter:{title:"【翻译】UI 中的排版：初学者指南"}}},{node:{fields:{slug:"/2018-01-14-learn-koa-intro/"},frontmatter:{title:"koa包教包会(一)--白话koa"}}},{node:{fields:{slug:"/2018-01-13-zi-ji-dong-shou-xie-yi-ge-simplevue/"},frontmatter:{title:"自己动手写一个 SimpleVue"}}},{node:{fields:{slug:"/2018-01-12-translation-React-Animations-in-Depth/"},frontmatter:{title:"【翻译】React Web 动画的 5 种创建方式，每一种都不简单"}}},{node:{fields:{slug:"/2018-01-10-ru-he-kuo-zhan-create-react-app-de-webpack-pei-zhi/"},frontmatter:{title:"如何扩展 Create React App 的 Webpack 配置"}}},{node:{fields:{slug:"/2018-01-08-mapbox-gl-js/"},frontmatter:{title:"3D GIS 应用开发 —— 基于 Mapbox GL 的实践总结"}}},{node:{fields:{slug:"/2018-01-07-the-importance-of-visual-appeal-in-web-design/"},frontmatter:{title:"【翻译】视觉吸引力在网页设计中的重要性"}}},{node:{fields:{slug:"/2018-01-06-react-higher-order-component/"},frontmatter:{title:"React 高阶组件介绍"}}},{node:{fields:{slug:"/2018-01-05-to-vim/"},frontmatter:{title:"如何让 vim 成为我们的神器"}}},{node:{fields:{slug:"/2018-01-05-d3-js-v3-data-driven-and-d3-force/"},frontmatter:{title:"D3.js 数据驱动 和 force 力学图讲解"}}},{node:{fields:{slug:"/2018-01-05-create-a-redux-middleware/"},frontmatter:{title:"如何编写一个 Redux 中间件"}}}]}},pathContext:{slug:"/2018-01-12-translation-React-Animations-in-Depth/"}}}});
//# sourceMappingURL=path---2018-01-12-translation-react-animations-in-depth-65e54d0c599cac1dc8d9.js.map